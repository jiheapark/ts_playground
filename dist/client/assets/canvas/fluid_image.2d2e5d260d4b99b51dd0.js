!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="//swcho.github.io/ts_playground/dist/client/assets/",e(e.s=1042)}({1042:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),i(1043),i(1044),console.log(t),i(1045);var n=(Math.PI,1e-4),s=.996,r=.1,o=14,a="square",h=1,d=function(){function t(){this.canvas=document.getElementById("canvas"),this.dpr=h,this.ctx=this.canvas.getContext("2d"),this.ctx.scale(this.dpr,this.dpr),this.render=this.render.bind(this),this.handleDrop=this.handleDrop.bind(this),this.handleDragOver=this.handleDragOver.bind(this),this.handleDragLeave=this.handleDragLeave.bind(this),this.handleMouse=this.handleMouse.bind(this),this.handleResize=this.handleResize.bind(this),this.handleMousedown=this.handleMousedown.bind(this),this.handleMouseup=this.handleMouseup.bind(this),this.isDragging=!1,this.hasLoaded=!1,this.tick=0,this.mouse={x:window.innerWidth*this.dpr/2,y:window.innerHeight*this.dpr/2,mousedown:!1},this.setupListeners(),this.addInitialImage(),this.setCanvasSize(),this.render()}return t.prototype.setupListeners=function(){window.addEventListener("resize",this.handleResize),this.canvas.addEventListener("drop",this.handleDrop,!1),this.canvas.addEventListener("dragover",this.handleDragOver,!1),this.canvas.addEventListener("dragleave",this.handleDragLeave,!1),window.addEventListener("mousemove",this.handleMouse),window.addEventListener("mousedown",this.handleMousedown),window.addEventListener("mouseup",this.handleMouseup)},t.prototype.handleResize=function(){this.setCanvasSize()},t.prototype.handleMousedown=function(t){this.mouse.mousedown=!0},t.prototype.handleMouseup=function(t){this.mouse.mousedown=!1},t.prototype.handleDrop=function(t){t.preventDefault();t.dataTransfer.getData("text/plain");this.isDragging=!1,this.hasLoaded=!1;var e=t.dataTransfer.files[0];this.handleImageFile(e)},t.prototype.handleImageFile=function(t){var e=this,i=/image.*/;t.type.match(i)&&(this.image=new c({file:t},o),this.image.hasLoaded().then(function(){console.log("successfully loaded!"),e.handleLoad()}).catch(function(t){console.log(">:-| failed:",t)}))},t.prototype.handleLoad=function(){this.hasLoaded=!0,this.centerImageToWindow(),this.demo},t.prototype.handleDragOver=function(t){t.preventDefault(),this.isDragging=!0},t.prototype.handleDragLeave=function(t){t.preventDefault(),this.isDragging=!1},t.prototype.handleMouse=function(t){var e=t.clientX*this.dpr,i=t.clientY*this.dpr;this.mouse.x=e,this.mouse.y=i,this.applyForce()},t.prototype.addInitialImage=function(){var t=this;this.image=new c({src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/105988/beavis_a_l.jpg"},o),this.image.hasLoaded().then(function(){t.handleLoad()}).catch(function(t){console.log(">:-| failed:",t)})},t.prototype.centerImageToWindow=function(){var t=this.image.canvas,e=t.width,i=t.height,n=this.canvas,s=n.width,r=n.height,o=s/2-e/2,a=r/2-i/2;this.image.points.map(function(t){var e=t.x+o,i=t.y+a;return t.setOrigin(e,i),t})},t.prototype.applyForce=function(){if(this.hasLoaded)for(var t=this.mouse,e=t.mousedown,i=t.x,n=t.y,s=this.image.points,r=s.length,o=0;o<r;o++){var a=s[o],h=a.cx-i,d=a.cy-n,c=Math.atan2(d,h),u=2/Math.sqrt(h*h+d*d);e&&(u*=-1);var l=Math.cos(c)*u,p=Math.sin(c)*u;a.applyForce(l,p)}},t.prototype.setCanvasSize=function(){this.canvas.width=window.innerWidth*this.dpr,this.canvas.height=window.innerHeight*this.dpr,this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px"},t.prototype.drawBg=function(t){this.ctx.fillStyle=t||"#111111",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.drawText=function(){var t=60*this.dpr;this.ctx.font=t+"px  futura-pt, futura, sans-serif",this.ctx.textAlign="center",this.ctx.fillStyle="white";var e=this.isDragging?"Drop Image Now":"Drag Image Here";this.ctx.fillText(e,this.canvas.width/2,this.canvas.height/2+t/2)},t.prototype.drawMouse=function(){var t=this.mouse,e=t.mousedown,i=t.x,n=t.y;this.ctx.lineWidth=2*this.dpr,this.ctx.strokeStyle=e?"#FFFFFF":"#333333",this.ctx.beginPath(),this.ctx.arc(i,n,16*this.dpr,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.stroke()},t.prototype.render=function(){var t=this;if(this.hasLoaded){var e=this.image.points[0].color;this.drawBg(e),this.image.points.forEach(function(e){e.draw(t.ctx),e.update()}),this.ctx.restore()}else this.drawBg();this.drawMouse(),this.tick<300&&this.applyForce(),this.drawText(),this.tick++,window.requestAnimationFrame(this.render)},t}(),c=function(){function t(t,e){if(void 0===t&&(t={}),void 0===e&&(e=o),this.src=t.src,this.file=t.file,this.size=e,this.pw=0,this.ph=0,this.points=[],this.onLoad=this.onLoad.bind(this),this.canvas=document.createElement("canvas"),this.img=document.createElement("img"),this.img.crossOrigin="Anonymous",this.img.onload=this.onLoad,this.ctx=this.canvas.getContext("2d"),this.src)this.img.src=this.src;else{if(!this.file)throw new Error("Must provide an image as a url or file");this.readFile()}}return t.prototype.readFile=function(){var t=this,e=new FileReader;e.onload=function(e){return function(i){e.src=i.target.result,t.drawToCanvas()}}(this.img),e.readAsDataURL(this.file)},t.prototype.hasLoaded=function(){var t=this;return new Promise(function(e,i){t.resolveLoaded=e})},t.prototype.onLoad=function(t){this.resolveLoaded&&this.resolveLoaded(),this.setupCanvas(),this.drawToCanvas(),this.getPixels()},t.prototype.getPixels=function(){for(var t=this.canvas,e=this.size,i=this.ctx.getImageData(0,0,t.width,t.height),n=i.data,s=e;s<=t.height;s+=e)for(var r=e;r<=t.width;r+=e){var o=4*(r+s*i.width),a=r,h=s,d=e,c=e,l=n[o],p=n[o+1],f=n[o+2],v="rgba("+l+", "+p+", "+f+", 1)",g=new u(a,h,d,c,v);this.points.push(g)}},t.prototype.setupCanvas=function(){var t=this.img,e=t.width,i=t.height,n=Math.max(e,i);this.width=e,this.height=i;var s=40*this.size;if(n>=s){var r=i/e;e>=s?(this.width=s,this.height=s*r):(this.height=s,this.width=s*r)}this.canvas.width=this.width,this.canvas.height=this.height},t.prototype.drawToCanvas=function(){var t=this,e=t.width,i=t.height;this.ctx.drawImage(this.img,0,0,e,i)},t}(),u=function(){function t(t,e,i,o,h){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=50),void 0===o&&(o=50),void 0===h&&(h="red"),this.ox=t,this.oy=e,this.x=t,this.y=e,this.w=i,this.h=o,this.hw=i/2,this.hh=o/2,this.cx=t+this.hw,this.cy=e+this.hh,this.vx=0,this.vy=0,this.fx=0,this.fy=0,this.color=h,this.mass=r,this.elasticity=n,this.damping=s,this.type=a}return t.prototype.setOrigin=function(t,e){this.ox=t,this.oy=e,this.x=t,this.y=e,this.cx=t+this.hw,this.cy=e+this.hh},t.prototype.update=function(){var t=(this.ox-this.x)*this.elasticity,e=(this.oy-this.y)*this.elasticity,i=this.fx+t,n=this.fy+e,s=i/this.mass,r=n/this.mass;this.vx=this.damping*this.vx+s,this.vy=this.damping*this.vy+r,this.x+=this.vx,this.y+=this.vy,this.cx+=this.vx,this.cy+=this.vy,this.fx=0,this.fy=0},t.prototype.applyForce=function(t,e){this.fx=t,this.fy=e},t.prototype.draw=function(t){var e=this,i=e.x,n=e.y,s=e.w,r=e.h,o=e.color;if(t.fillStyle=o,"circle"===this.type){var h=i-s/2,d=n-r/2;t.beginPath(),t.arc(h,d,s/2,0,2*Math.PI,!0),t.closePath(),t.fill()}else this.type===a&&t.fillRect(i,n,s,r)},t}();new d}).call(e,"canvas/fluid_image/app.ts")},1043:function(t,e,i){"use strict";var n={level:"prd"};t.exports=n},1044:function(t,e){t.exports='<html>\n    <head>\n        <title>Canvas: Fluid Image</title>\n    </head>\n    <body>\n        <canvas id="canvas"></canvas>\n    </body>\n</html>'},1045:function(t,e,i){var n=i(1046);"string"==typeof n&&(n=[[t.i,n,""]]);var s={};s.transform=void 0;i(5)(n,s);n.locals&&(t.exports=n.locals)},1046:function(t,e,i){e=t.exports=i(4)(),e.push([t.i,"html,\nbody {\n  width: 100%;\n  height: 100%;\n  overflow: hidden; }\n\ncanvas {\n  cursor: none; }\n",""])},4:function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(n[r]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},5:function(t,e,i){function n(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=f[n.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](n.parts[r]);for(;r<n.parts.length;r++)s.parts.push(c(n.parts[r],e))}else{for(var o=[],r=0;r<n.parts.length;r++)o.push(c(n.parts[r],e));f[n.id]={id:n.id,refs:1,parts:o}}}}function s(t,e){for(var i=[],n={},s=0;s<t.length;s++){var r=t[s],o=e.base?r[0]+e.base:r[0],a=r[1],h=r[2],d=r[3],c={css:a,media:h,sourceMap:d};n[o]?n[o].parts.push(c):i.push(n[o]={id:o,parts:[c]})}return i}function r(t,e){var i=g(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=w[w.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function o(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",d(e,t.attrs),r(t,e),e}function h(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",d(e,t.attrs),r(t,e),e}function d(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function c(t,e){var i,n,s,r;if(e.transform&&t.css){if(!(r=e.transform(t.css)))return function(){};t.css=r}if(e.singleton){var d=m++;i=y||(y=a(e)),n=u.bind(null,i,d,!1),s=u.bind(null,i,d,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=h(e),n=p.bind(null,i,e),s=function(){o(i),i.href&&URL.revokeObjectURL(i.href)}):(i=a(e),n=l.bind(null,i),s=function(){o(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else s()}}function u(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=b(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function l(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function p(t,e,i){var n=i.css,s=i.sourceMap,r=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||r)&&(n=x(n)),s&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var o=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}var f={},v=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),g=function(t){var e={};return function(i){return void 0===e[i]&&(e[i]=t.call(this,i)),e[i]}}(function(t){return document.querySelector(t)}),y=null,m=0,w=[],x=i(6);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},e.attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=v()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=s(t,e);return n(i,e),function(t){for(var r=[],o=0;o<i.length;o++){var a=i[o],h=f[a.id];h.refs--,r.push(h)}if(t){n(s(t,e),e)}for(var o=0;o<r.length;o++){var h=r[o];if(0===h.refs){for(var d=0;d<h.parts.length;d++)h.parts[d]();delete f[h.id]}}}};var b=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},6:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var s=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(s))return t;var r;return r=0===s.indexOf("//")?s:0===s.indexOf("/")?i+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}}});
!function(t){function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var n={};i.m=t,i.c=n,i.d=function(t,n,e){i.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(n,"a",n),n},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="//swcho.github.io/ts_playground/dist/client/assets/",i(i.s=2806)}({2806:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),n(2807),n(2808),console.log(t);var e;!function(t){function i(){t.elem=document.createElement("canvas"),document.body.appendChild(t.elem);var i={alpha:!1};return t.gl=t.elem.getContext("webgl",i)||t.elem.getContext("experimental-webgl",i),u=t.gl.createShader(t.gl.VERTEX_SHADER),t.gl.shaderSource(u,"\n                uniform mat4 camProj, camView, modelMatrix;\n                attribute vec3 aPosition, aNormal, aColor;\n                varying vec3 vWPosition, vPosition, vNormal, vColor;\n                void main(void) {\n                    vec4 mpos = modelMatrix * vec4(aPosition, 1.0);\n                    vec4 wpos = camView * mpos;\n                    vPosition = wpos.xyz;\n                    vWPosition = mpos.xyz;\n                    vNormal = aNormal;\n                    vColor = aColor;\n                    gl_Position = camProj * wpos;\n                }\n            "),h=t.gl.createShader(t.gl.FRAGMENT_SHADER),t.gl.shaderSource(h,"\n                precision highp float;\n                varying vec3 vWPosition, vPosition, vNormal, vColor;\n                const vec3 lightPos = vec3(0.0, 0.0, -2.5);\n                const vec3 lightColor = vec3(1.3, 1.3, 0.9);\n                const vec3 ambientFar = vec3(0.05, 0.1, 0.6);\n                const vec3 ambientNear = vec3(0.12, 0.09, 0.02);\n                const float radius = 2.5;\n                uniform float uTime;\n                uniform vec2 uResolution;\n                void main(void) {\n                    float dist = distance(vPosition, lightPos);\n                    float att = max(1.0 - (dist * dist) / (radius * radius), 0.0);\n                    vec3 lightDirection = normalize(lightPos - vWPosition);\n                    float angle = max(dot(lightDirection, vNormal), 0.0);\n                    vec3 diffuse = att * att * lightColor * vColor * angle;\n                    vec3 col = ambientFar * angle * att + ambientNear * 1.0 / dist + diffuse;\n                    col = 1.5 * col;\n                    if (vColor.r > 9.0) col = vColor;\n                    vec2 uv = gl_FragCoord.xy / uResolution.xy;\n                    col -= abs(sin(uv.y * 200.0 - uTime * 3.0)) * 0.02;\n                    gl_FragColor = vec4(col, 1.0);\n                }\n            "),t.gl.compileShader(u),t.gl.compileShader(h),l=t.gl.createProgram(),t.gl.attachShader(l,u),t.gl.attachShader(l,h),t.gl.linkProgram(l),t.gl.useProgram(l),t.camera={proj:e().uniform("camProj").load(),view:e().uniform("camView").load()},n(),window.addEventListener("resize",function(){return n()},!1),t.gl}function n(){t.width=t.elem.width=t.elem.offsetWidth,t.height=t.elem.height=t.elem.offsetHeight,t.aspect=t.width/t.height,t.uResolution&&t.uResolution.set(t.width,t.height).load(),t.camera.proj.perspective(45).load(),t.gl.viewport(0,0,t.gl.drawingBufferWidth,t.gl.drawingBufferHeight),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT)}function e(){return new f}function o(t){return new m(t)}function r(t,i){return new d(t,i)}function s(t,i,n){return new v(t,i,n)}function a(t,i,n,e){return new p(t,i,n,e)}var u,h,l;t.init=i;var c=function(){function i(i){this.gl=t.gl,this.index=t.gl.getAttribLocation(l,i),t.gl.enableVertexAttribArray(this.index),this.buffer=t.gl.createBuffer(),this.numElements=0}return i.prototype.load=function(t,i){return this.itemSize=i,this.bind(),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Array?new Float32Array(t):t,this.gl.STATIC_DRAW),this.numElements=t.length/i,this},i.prototype.loadIndices=function(t){return this.indices||(this.indices=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indices),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t instanceof Array?new Uint16Array(t):t,this.gl.STATIC_DRAW),this.numIndices=t.length,this},i.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.indices&&this.gl.bindBuffer(t.gl.ELEMENT_ARRAY_BUFFER,this.indices),this.gl.vertexAttribPointer(this.index,this.itemSize,t.gl.FLOAT,!1,0,0)},i}();t.Attribute=c,t.mat4=e,t.float=o,t.vec2=r,t.vec3=s,t.vec4=a;var f=function(){function i(){this.matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.gl=t.gl,this.u=null}return i.prototype.identity=function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},i.prototype.translate=function(t,i,n){var e=this.matrix;return e[12]=t+e[12],e[13]=i+e[13],e[14]=n+e[14],this},i.prototype.fromTranslation=function(t,i,n){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t,e[13]=i,e[14]=n,e[15]=1,this},i.prototype.rotateX=function(t){var i=this.matrix,n=Math.sin(t),e=Math.cos(t),o=i[4],r=i[5],s=i[6],a=i[7],u=i[8],h=i[9],l=i[10],c=i[11];return i[4]=o*e+u*n,i[5]=r*e+h*n,i[6]=s*e+l*n,i[7]=a*e+c*n,i[8]=o*-n+u*e,i[9]=r*-n+h*e,i[10]=s*-n+l*e,i[11]=a*-n+c*e,this},i.prototype.rotateY=function(t){var i=this.matrix,n=Math.sin(t),e=Math.cos(t),o=i[0],r=i[1],s=i[2],a=i[3],u=i[8],h=i[9],l=i[10],c=i[11];return i[0]=o*e+u*-n,i[1]=r*e+h*-n,i[2]=s*e+l*-n,i[3]=a*e+c*-n,i[8]=o*n+u*e,i[9]=r*n+h*e,i[10]=s*n+l*e,i[11]=a*n+c*e,this},i.prototype.rotateZ=function(t){var i=this.matrix,n=Math.sin(t),e=Math.cos(t),o=i[0],r=i[1],s=i[2],a=i[3],u=i[4],h=i[5],l=i[6],c=i[7];return i[0]=o*e+u*n,i[1]=r*e+h*n,i[2]=s*e+l*n,i[3]=a*e+c*n,i[4]=o*-n+u*e,i[5]=r*-n+h*e,i[6]=s*-n+l*e,i[7]=a*-n+c*e,this},i.prototype.scale=function(t,i,n){var e=this.matrix;return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=i,e[5]*=i,e[6]*=i,e[7]*=i,e[8]*=n,e[9]*=n,e[10]*=n,e[11]*=n,this},i.prototype.perspective=function(i){var n=this.matrix,e=.01*Math.tan(i*Math.PI/360),o=e*t.aspect,r=-o,s=-e;return n[0]=.02/(o-r),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=.02/(e-s),n[6]=0,n[7]=0,n[8]=(o+r)/(o-r),n[9]=(e+s)/(e-s),n[10]=-100.01/99.99,n[11]=-1,n[12]=0,n[13]=0,n[14]=-2/99.99,n[15]=0,this},i.prototype.multiply=function(t,i){var n,e,o,r,s=this.matrix,a=t.matrix,u=i.matrix,h=a[0],l=a[1],c=a[2],f=a[3],m=a[4],d=a[5],v=a[6],p=a[7],g=a[8],y=a[9],x=a[10],b=a[11],w=a[12],P=a[13],M=a[14],A=a[15];return n=u[0],e=u[1],o=u[2],r=u[3],s[0]=n*h+e*m+o*g+r*w,s[1]=n*l+e*d+o*y+r*P,s[2]=n*c+e*v+o*x+r*M,s[3]=n*f+e*p+o*b+r*A,n=u[4],e=u[5],o=u[6],r=u[7],s[4]=n*h+e*m+o*g+r*w,s[5]=n*l+e*d+o*y+r*P,s[6]=n*c+e*v+o*x+r*M,s[7]=n*f+e*p+o*b+r*A,n=u[8],e=u[9],o=u[10],r=u[11],s[8]=n*h+e*m+o*g+r*w,s[9]=n*l+e*d+o*y+r*P,s[10]=n*c+e*v+o*x+r*M,s[11]=n*f+e*p+o*b+r*A,n=u[12],e=u[13],o=u[14],r=u[15],s[12]=n*h+e*m+o*g+r*w,s[13]=n*l+e*d+o*y+r*P,s[14]=n*c+e*v+o*x+r*M,s[15]=n*f+e*p+o*b+r*A,this},i.prototype.uniform=function(t){return this.u=this.gl.getUniformLocation(l,t),this},i.prototype.load=function(){return this.gl.uniformMatrix4fv(this.u,!1,this.matrix),this},i}();t.Mat4=f;var m=function(){function i(i){void 0===i&&(i=0),this.value=i,this.u=null,this.gl=t.gl}return i.prototype.set=function(t){return this.value=t,this},i.prototype.uniform=function(t){return this.u=this.gl.getUniformLocation(l,t),this},i.prototype.load=function(){return this.gl.uniform1f(this.u,this.value),this},i}();t.Float=m;var d=function(){function i(i,n){void 0===i&&(i=0),void 0===n&&(n=0),this.x=i,this.y=n,this.u=null,this.gl=t.gl}return i.prototype.set=function(t,i){return this.x=t,this.y=i,this},i.prototype.uniform=function(t){return this.u=this.gl.getUniformLocation(l,t),this},i.prototype.load=function(){return this.gl.uniform2f(this.u,this.x,this.y),this},i}();t.Vec2=d;var v=function(){function i(i,n,e){void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=0),this.x=i,this.y=n,this.z=e,this.u=null,this.gl=t.gl}return i.prototype.set=function(t,i,n){return this.x=t,this.y=i,this.z=n,this},i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},i.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this},i.prototype.distance=function(t){var i=t.x-this.x,n=t.y-this.y,e=t.z-this.z;return Math.sqrt(i*i+n*n+e*e)},i.prototype.transformMat4=function(t,i){var n=i.matrix,e=t.x,o=t.y,r=t.z,s=n[3]*e+n[7]*o+n[11]*r+n[15]||1;return this.x=(n[0]*e+n[4]*o+n[8]*r+n[12])/s,this.y=(n[1]*e+n[5]*o+n[9]*r+n[13])/s,this.z=(n[2]*e+n[6]*o+n[10]*r+n[14])/s,this},i.prototype.uniform=function(t){return this.u=this.gl.getUniformLocation(l,t),this},i.prototype.load=function(){return this.gl.uniform3f(this.u,this.x,this.y,this.z),this},i}();t.Vec3=v;var p=function(){function i(i,n,e,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===e&&(e=0),void 0===o&&(o=0),this.x=i,this.y=n,this.z=e,this.w=o,this.u=null,this.gl=t.gl}return i.prototype.set=function(t,i,n,e){return this.x=t,this.y=i,this.z=n,this.w=e,this},i.prototype.lerp=function(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this},i.prototype.uniform=function(t){return this.u=this.gl.getUniformLocation(l,t),this},i.prototype.load=function(){return this.gl.uniform4f(this.u,this.x,this.y,this.z,this.w),this},i}();t.Vec4=p;!function(t){function i(t){return[t+0,t+1,t+2,t+0,t+2,t+3,t+4,t+5,t+6,t+4,t+6,t+7,t+8,t+9,t+10,t+8,t+10,t+11,t+12,t+13,t+14,t+12,t+14,t+15,t+16,t+17,t+18,t+16,t+18,t+19,t+20,t+21,t+22,t+20,t+22,t+23]}function n(){return[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]}function e(t,i,n,e,o,r){return[t-e,i-o,n+r,t+e,i-o,n+r,t+e,i+o,n+r,t-e,i+o,n+r,t-e,i-o,n-r,t-e,i+o,n-r,t+e,i+o,n-r,t+e,i-o,n-r,t-e,i+o,n-r,t-e,i+o,n+r,t+e,i+o,n+r,t+e,i+o,n-r,t-e,i-o,n-r,t+e,i-o,n-r,t+e,i-o,n+r,t-e,i-o,n+r,t+e,i-o,n-r,t+e,i+o,n-r,t+e,i+o,n+r,t+e,i-o,n+r,t-e,i-o,n-r,t-e,i-o,n+r,t-e,i+o,n+r,t-e,i+o,n-r]}function o(t,i,n){return[t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n,t,i,n]}t.indices=i,t.normals=n,t.vertices=e,t.colors=o}(t.cube||(t.cube={}))}(e||(e={}));var o;!function(t){function i(i){s=.5*i.width,a=.5*i.height,u=c=t.ex=0,h=f=t.ey=0,l=t.ez=0,m=0,t.speed=.001,d=!1,o(window,"mousemove,touchmove",function(t){return n(t)}),o(i.elem,"mousedown,touchstart",function(t){n(t),d=!0,c=s,f=a,e.elem.style.cursor="move"}),o(window,"mouseup,touchend,touchcancel",function(t){d=!1,e.elem.style.cursor="pointer"})}function n(t){var i,n=t.targetTouches;n?(t.preventDefault(),i=n[0]):i=t,s=i.clientX,a=i.clientY}function o(t,i,n){for(var e=0,o=i.split(",");e<o.length;e++)t.addEventListener(o[e],n,!1)}function r(){d?(u+=(s-c)/200,h+=(a-f)/200,u>Math.PI/2&&(u=Math.PI/2),u<-Math.PI/2&&(u=-Math.PI/2),h>Math.PI/2&&(h=Math.PI/2),h<-Math.PI/2&&(h=-Math.PI/2),v=0,t.ex>-.2&&t.ex<.2&&t.ey>-.2&&t.ey<.2&&t.speed<.15&&(t.speed*=1.005),t.speed>.1&&(t.ez+=.01,t.ez=t.ez%(2*Math.PI))):(v>100&&(u*=.995,h*=.995,t.ez*=.99),t.speed>.004&&(t.speed*=.99),t.speed<.004&&(t.speed*=1.02)),c=s,f=a,t.ex+=.1*(u-t.ex),t.ey+=.1*(h-t.ey),v++}var s,a,u,h,l,c,f,m=0,d=!1;t.init=i,t.move=n,t.add=o;var v=0;t.rotate=r}(o||(o={}));var r=function(){function t(t,i,n){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.matrix=e.mat4().translate(t,i,n).uniform("modelMatrix");Math.abs(t),Math.abs(i);this.fractalCube(0,0,0,1,1,0),this.aPosition=new e.Attribute("aPosition").load(this.vertices,3).loadIndices(this.indices),this.aNormal=new e.Attribute("aNormal").load(this.normals,3),this.aColor=new e.Attribute("aColor").load(this.colors,3)}return t.blockType=function(){var t=[[[-.4,0,-.4,.2,1,.2],[-.4,0,.4,.2,1,.2],[.4,0,-.4,.2,1,.2],[.4,0,.4,.2,1,.2],[-.4,-.4,0,.2,.2,1],[-.4,.4,0,.2,.2,1],[.4,-.4,0,.2,.2,1],[.4,.4,0,.2,.2,1],[0,-.4,-.4,1,.2,.2],[0,.4,-.4,1,.2,.2],[0,-.4,.4,1,.2,.2],[0,.4,.4,1,.2,.2]],[[-.475,0,-.475,.051,1,.051,.5,.4,0],[-.475,0,.475,.051,1,.051,.5,.4,0],[.475,0,-.475,.051,1,.051,.5,.4,0],[.475,0,.475,.051,1,.051,.5,.4,0],[-.475,-.475,0,.051,.051,1,.5,.4,0],[-.475,.475,0,.051,.051,1,.5,.4,0],[.475,-.475,0,.051,.051,1,.5,.4,0],[.475,.475,0,.051,.051,1,.5,.4,0],[0,-.475,-.475,1,.051,.051,.5,.4,0],[0,.475,-.475,1,.051,.051,.5,.4,0],[0,-.475,.475,1,.051,.051,.5,.4,0],[0,.475,.475,1,.051,.051,.5,.4,0]],[[0,0,0,1,1,1]],[[0,0,0,1.01,1.01,1.01,.5,.4,0],[0,0,-.25,1.02,.1,.15,10,9,8],[0,0,0,1.02,.1,.15,10,9,8],[0,0,.25,1.02,.1,.15,10,9,8]],[[0,-.4,0,1,.1,1]],[[0,0,0,.5,.5,.5,1.5,1,0]]];return t[Math.floor(Math.random()*t.length)]},t.concat=function(t,i){for(var n=0,e=i.length;n<e;n++)t.push(i[n])},t.prototype.fractalCube=function(i,n,o,r,s,a){if(!(Math.random()>.85))if(a<s&&Math.random()>.75){var u=.25*r,h=r/(1.75-.25*Math.random()),l=a+1,c=o+Math.random()>.5?u:-u;this.fractalCube(i-u,n-u,c,h,s,l),this.fractalCube(i+u,n-u,c,h,s,l),this.fractalCube(i-u,n+u,c,h,s,l),this.fractalCube(i+u,n+u,c,h,s,l)}else for(var f=t.blockType(),m=0,d=f;m<d.length;m++){var v=d[m];t.concat(this.indices,e.cube.indices(this.vertices.length/3)),t.concat(this.vertices,e.cube.vertices(i+v[0]*r,n+v[1]*r,o+v[2]*r,v[3]*r/2,v[4]*r/2,v[5]*r/2)),t.concat(this.normals,e.cube.normals()),t.concat(this.colors,e.cube.colors(void 0===v[6]?1:v[6],void 0===v[7]?1:v[7],void 0===v[8]?1:v[8]))}},t.prototype.draw=function(){this.matrix.load(),this.aNormal.bind(),this.aColor.bind(),this.aPosition.bind(),s.drawElements(s.TRIANGLES,this.aPosition.numIndices,s.UNSIGNED_SHORT,0)},t}(),s=e.init();s.enable(s.DEPTH_TEST),s.enable(s.CULL_FACE),o.init(e);var a=e.camera,u=[],h=function(t){console.log("layer",t);for(var i=-4;i<=4;i++)for(var n=-3;n<=3;n++)if(0!==i||0!==n){var e=new r(.999*i,.999*n,t);e.aPosition.numElements>0&&u.push(e)}return t-1},l=h(0),c=0,f=e.float().uniform("uTime");e.uResolution=e.vec2().set(e.width,e.height).uniform("uResolution").load();var m=document.querySelector(".info"),d=function(){requestAnimationFrame(d),f.set(++c/20).load(),l>-12?l=h(l-.05):(o.rotate(),a.view.identity().rotateZ(o.ez).rotateX(o.ey).rotateY(o.ex).load());for(var t=0,i=u;t<i.length;t++){var n=i[t];n.matrix.translate(0,0,o.speed),n.matrix.matrix[14]>3&&(n.matrix.matrix[14]-=13),n.draw()}m.innerHTML="\n    cube count = "+u.length+"<br/>\n    cubes[0].matrix.matrix[13]= "+u[0].matrix.matrix[13]+"<br/>\n    cubes[0].matrix.matrix[14]= "+u[0].matrix.matrix[14]+"<br/>\n    cubes[1].matrix.matrix[13]= "+u[1].matrix.matrix[13]+"<br/>\n    cubes[1].matrix.matrix[14]= "+u[1].matrix.matrix[14]+"<br/>\n    z = "+l+"<br/>\n    "};requestAnimationFrame(d)}).call(i,"webgl/deep_structure/app.ts")},2807:function(t,i,n){"use strict";var e={level:"prd"};t.exports=e},2808:function(t,i){t.exports='<html>\n\n<head>\n    <title>Three: </title>\n    <style>\n        body,\n        html {\n            touch-action: none;\n            content-zooming: none;\n            position: absolute;\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n        }\n\n        canvas {\n            position: absolute;\n            display: block;\n            width: 100%;\n            height: 100%;\n            background: #000;\n            cursor: pointer;\n        }\n        .info {\n            position: fixed;\n            left: 0;\n            bottom: 0;\n            background-color: white;\n            color: black;\n            z-index: 100;\n        }\n    </style>\n</head>\n\n<body>\n    <canvas id="canvas"></canvas>\n    <div class="info"></div>\n</body>\n\n</html>'}});
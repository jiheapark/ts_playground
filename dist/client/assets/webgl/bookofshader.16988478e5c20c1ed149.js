!function(t){function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}var r={};a.m=t,a.c=r,a.d=function(t,r,e){a.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},a.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(r,"a",r),r},a.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},a.p="//swcho.github.io/ts_playground/dist/client/assets/",a(a.s=2794)}({139:function(t,a,r){a.glMatrix=r(61),a.mat2=r(378),a.mat2d=r(379),a.mat3=r(274),a.mat4=r(380),a.quat=r(381),a.vec2=r(382),a.vec3=r(275),a.vec4=r(276)},274:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},n.clone=function(t){var a=new e.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromValues=function(t,a,r,n,o,i,u,s,l){var c=new e.ARRAY_TYPE(9);return c[0]=t,c[1]=a,c[2]=r,c[3]=n,c[4]=o,c[5]=i,c[6]=u,c[7]=s,c[8]=l,c},n.set=function(t,a,r,e,n,o,i,u,s,l){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,a){if(t===a){var r=a[1],e=a[2],n=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=e,t[7]=n}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},n.invert=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=a[6],l=a[7],c=a[8],h=c*i-u*l,M=-c*o+u*s,f=l*o-i*s,m=r*h+e*M+n*f;return m?(m=1/m,t[0]=h*m,t[1]=(-c*e+n*l)*m,t[2]=(u*e-n*i)*m,t[3]=M*m,t[4]=(c*r-n*s)*m,t[5]=(-u*r+n*o)*m,t[6]=f*m,t[7]=(-l*r+e*s)*m,t[8]=(i*r-e*o)*m,t):null},n.adjoint=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=a[6],l=a[7],c=a[8];return t[0]=i*c-u*l,t[1]=n*l-e*c,t[2]=e*u-n*i,t[3]=u*s-o*c,t[4]=r*c-n*s,t[5]=n*o-r*u,t[6]=o*l-i*s,t[7]=e*s-r*l,t[8]=r*i-e*o,t},n.determinant=function(t){var a=t[0],r=t[1],e=t[2],n=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return a*(l*o-i*s)+r*(-l*n+i*u)+e*(s*n-o*u)},n.multiply=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=a[6],c=a[7],h=a[8],M=r[0],f=r[1],m=r[2],x=r[3],v=r[4],S=r[5],d=r[6],I=r[7],p=r[8];return t[0]=M*e+f*i+m*l,t[1]=M*n+f*u+m*c,t[2]=M*o+f*s+m*h,t[3]=x*e+v*i+S*l,t[4]=x*n+v*u+S*c,t[5]=x*o+v*s+S*h,t[6]=d*e+I*i+p*l,t[7]=d*n+I*u+p*c,t[8]=d*o+I*s+p*h,t},n.mul=n.multiply,n.translate=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=a[6],c=a[7],h=a[8],M=r[0],f=r[1];return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=M*e+f*i+l,t[7]=M*n+f*u+c,t[8]=M*o+f*s+h,t},n.rotate=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=a[6],c=a[7],h=a[8],M=Math.sin(r),f=Math.cos(r);return t[0]=f*e+M*i,t[1]=f*n+M*u,t[2]=f*o+M*s,t[3]=f*i-M*e,t[4]=f*u-M*n,t[5]=f*s-M*o,t[6]=l,t[7]=c,t[8]=h,t},n.scale=function(t,a,r){var e=r[0],n=r[1];return t[0]=e*a[0],t[1]=e*a[1],t[2]=e*a[2],t[3]=n*a[3],t[4]=n*a[4],t[5]=n*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},n.fromRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},n.fromQuat=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=r+r,u=e+e,s=n+n,l=r*i,c=e*i,h=e*u,M=n*i,f=n*u,m=n*s,x=o*i,v=o*u,S=o*s;return t[0]=1-h-m,t[3]=c-S,t[6]=M+v,t[1]=c+S,t[4]=1-l-m,t[7]=f-x,t[2]=M-v,t[5]=f+x,t[8]=1-l-h,t},n.normalFromMat4=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=a[6],l=a[7],c=a[8],h=a[9],M=a[10],f=a[11],m=a[12],x=a[13],v=a[14],S=a[15],d=r*u-e*i,I=r*s-n*i,p=r*l-o*i,D=e*s-n*u,F=e*l-o*u,b=n*l-o*s,g=c*x-h*m,_=c*v-M*m,y=c*S-f*m,A=h*v-M*x,w=h*S-f*x,E=M*S-f*v,P=d*E-I*w+p*A+D*y-F*_+b*g;return P?(P=1/P,t[0]=(u*E-s*w+l*A)*P,t[1]=(s*y-i*E-l*_)*P,t[2]=(i*w-u*y+l*g)*P,t[3]=(n*w-e*E-o*A)*P,t[4]=(r*E-n*y+o*_)*P,t[5]=(e*y-r*w-o*g)*P,t[6]=(x*b-v*F+S*D)*P,t[7]=(v*p-m*b-S*I)*P,t[8]=(m*F-x*p+S*d)*P,t):null},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t},n.multiplyScalarAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t[4]=a[4]+r[4]*e,t[5]=a[5]+r[5]*e,t[6]=a[6]+r[6]*e,t[7]=a[7]+r[7]*e,t[8]=a[8]+r[8]*e,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],M=a[0],f=a[1],m=a[2],x=a[3],v=a[4],S=a[5],d=t[6],I=a[7],p=a[8];return Math.abs(r-M)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(n-f)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(o-m)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-x)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-v)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-S)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-d)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(c-I)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(h-p)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))},t.exports=n},275:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},n.clone=function(t){var a=new e.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},n.fromValues=function(t,a,r){var n=new e.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=r,n},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},n.set=function(t,a,r,e){return t[0]=a,t[1]=r,t[2]=e,t},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},n.sub=n.subtract,n.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},n.mul=n.multiply,n.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},n.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},n.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},n.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},n.scaleAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t},n.distance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1],n=a[2]-t[2];return Math.sqrt(r*r+e*e+n*n)},n.dist=n.distance,n.squaredDistance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1],n=a[2]-t[2];return r*r+e*e+n*n},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],r=t[1],e=t[2];return Math.sqrt(a*a+r*r+e*e)},n.len=n.length,n.squaredLength=function(t){var a=t[0],r=t[1],e=t[2];return a*a+r*r+e*e},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},n.normalize=function(t,a){var r=a[0],e=a[1],n=a[2],o=r*r+e*e+n*n;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},n.cross=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=r[0],u=r[1],s=r[2];return t[0]=n*s-o*u,t[1]=o*i-e*s,t[2]=e*u-n*i,t},n.lerp=function(t,a,r,e){var n=a[0],o=a[1],i=a[2];return t[0]=n+e*(r[0]-n),t[1]=o+e*(r[1]-o),t[2]=i+e*(r[2]-i),t},n.hermite=function(t,a,r,e,n,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),c=i*(3-2*o);return t[0]=a[0]*u+r[0]*s+e[0]*l+n[0]*c,t[1]=a[1]*u+r[1]*s+e[1]*l+n[1]*c,t[2]=a[2]*u+r[2]*s+e[2]*l+n[2]*c,t},n.bezier=function(t,a,r,e,n,o){var i=1-o,u=i*i,s=o*o,l=u*i,c=3*o*u,h=3*s*i,M=s*o;return t[0]=a[0]*l+r[0]*c+e[0]*h+n[0]*M,t[1]=a[1]*l+r[1]*c+e[1]*h+n[1]*M,t[2]=a[2]*l+r[2]*c+e[2]*h+n[2]*M,t},n.random=function(t,a){a=a||1;var r=2*e.RANDOM()*Math.PI,n=2*e.RANDOM()-1,o=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=n*a,t},n.transformMat4=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=r[3]*e+r[7]*n+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*e+r[4]*n+r[8]*o+r[12])/i,t[1]=(r[1]*e+r[5]*n+r[9]*o+r[13])/i,t[2]=(r[2]*e+r[6]*n+r[10]*o+r[14])/i,t},n.transformMat3=function(t,a,r){var e=a[0],n=a[1],o=a[2];return t[0]=e*r[0]+n*r[3]+o*r[6],t[1]=e*r[1]+n*r[4]+o*r[7],t[2]=e*r[2]+n*r[5]+o*r[8],t},n.transformQuat=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=r[0],u=r[1],s=r[2],l=r[3],c=l*e+u*o-s*n,h=l*n+s*e-i*o,M=l*o+i*n-u*e,f=-i*e-u*n-s*o;return t[0]=c*l+f*-i+h*-s-M*-u,t[1]=h*l+f*-u+M*-i-c*-s,t[2]=M*l+f*-s+c*-u-h*-i,t},n.rotateX=function(t,a,r,e){var n=[],o=[];return n[0]=a[0]-r[0],n[1]=a[1]-r[1],n[2]=a[2]-r[2],o[0]=n[0],o[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),o[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateY=function(t,a,r,e){var n=[],o=[];return n[0]=a[0]-r[0],n[1]=a[1]-r[1],n[2]=a[2]-r[2],o[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),o[1]=n[1],o[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.rotateZ=function(t,a,r,e){var n=[],o=[];return n[0]=a[0]-r[0],n[1]=a[1]-r[1],n[2]=a[2]-r[2],o[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),o[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),o[2]=n[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},n.forEach=function(){var t=n.create();return function(a,r,e,n,o,i){var u,s;for(r||(r=3),e||(e=0),s=n?Math.min(n*r+e,a.length):a.length,u=e;u<s;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2];return a}}(),n.angle=function(t,a){var r=n.fromValues(t[0],t[1],t[2]),e=n.fromValues(a[0],a[1],a[2]);n.normalize(r,r),n.normalize(e,e);var o=n.dot(r,e);return o>1?0:Math.acos(o)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=a[0],u=a[1],s=a[2];return Math.abs(r-i)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=n},276:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},n.clone=function(t){var a=new e.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.fromValues=function(t,a,r,n){var o=new e.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=n,o},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.set=function(t,a,r,e,n){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},n.sub=n.subtract,n.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},n.mul=n.multiply,n.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},n.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},n.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},n.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},n.scaleAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t},n.distance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1],n=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+e*e+n*n+o*o)},n.dist=n.distance,n.squaredDistance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1],n=a[2]-t[2],o=a[3]-t[3];return r*r+e*e+n*n+o*o},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],r=t[1],e=t[2],n=t[3];return Math.sqrt(a*a+r*r+e*e+n*n)},n.len=n.length,n.squaredLength=function(t){var a=t[0],r=t[1],e=t[2],n=t[3];return a*a+r*r+e*e+n*n},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},n.normalize=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=r*r+e*e+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=e*i,t[2]=n*i,t[3]=o*i),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},n.lerp=function(t,a,r,e){var n=a[0],o=a[1],i=a[2],u=a[3];return t[0]=n+e*(r[0]-n),t[1]=o+e*(r[1]-o),t[2]=i+e*(r[2]-i),t[3]=u+e*(r[3]-u),t},n.random=function(t,a){return a=a||1,t[0]=e.RANDOM(),t[1]=e.RANDOM(),t[2]=e.RANDOM(),t[3]=e.RANDOM(),n.normalize(t,t),n.scale(t,t,a),t},n.transformMat4=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3];return t[0]=r[0]*e+r[4]*n+r[8]*o+r[12]*i,t[1]=r[1]*e+r[5]*n+r[9]*o+r[13]*i,t[2]=r[2]*e+r[6]*n+r[10]*o+r[14]*i,t[3]=r[3]*e+r[7]*n+r[11]*o+r[15]*i,t},n.transformQuat=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=r[0],u=r[1],s=r[2],l=r[3],c=l*e+u*o-s*n,h=l*n+s*e-i*o,M=l*o+i*n-u*e,f=-i*e-u*n-s*o;return t[0]=c*l+f*-i+h*-s-M*-u,t[1]=h*l+f*-u+M*-i-c*-s,t[2]=M*l+f*-s+c*-u-h*-i,t[3]=a[3],t},n.forEach=function(){var t=n.create();return function(a,r,e,n,o,i){var u,s;for(r||(r=4),e||(e=0),s=n?Math.min(n*r+e,a.length):a.length,u=e;u<s;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],o(t,t,i),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2],a[u+3]=t[3];return a}}(),n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=t[3],u=a[0],s=a[1],l=a[2],c=a[3];return Math.abs(r-u)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-s)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},t.exports=n},2794:function(t,a,r){"use strict";(function(t){var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])};return function(a,r){function e(){this.constructor=a}t(a,r),a.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(a,"__esModule",{value:!0}),r(2795),r(2796);var n=r(622);console.log(t),console.log("Book of shader");var o=function(t){function a(a,e,n){var o=t.call(this,e,r(2797),n,{pos:3})||this;o.elCanvas=a,o.startTime=(new Date).getTime(),o.mousePos={clientX:0,clientY:0};var i=a.getBoundingClientRect(),u=i.top,s=i.left,l=i.right,c=i.bottom,h=i.height,M=i.width;return a.onmousemove=function(t){var a=t.clientX,r=t.clientY,e=Math.round((a-s)/(l-s)*M),n=Math.round((r-u)/(c-u)*h);o.mousePos={clientX:e,clientY:h-n}},o}return e(a,t),a.prototype.drawStart=function(t){this.setAttributeBuffers({pos:[-1,-1,0,1,-1,0,1,1,0,-1,-1,0,-1,1,0,1,1,0]}),this.setUniformValue("u_time",((new Date).getTime()-this.startTime)/1e3);var a=this.elCanvas,r=a.clientWidth,e=a.clientHeight;this.setUniformValue("u_resolution",n._vec2(r,e));var o=this.mousePos,i=o.clientX,u=o.clientY;this.setUniformValue("u_mouse",n._vec2(i,u));var s=this.gl;s.drawArrays(s.TRIANGLES,0,6)},a.prototype.drawObject=function(t,a,r){},a}(n.GLProgram);!function(t,a){void 0===a&&(a=!1);var r=document.getElementById("canvas-element-id"),e=new n.WebGL(r,n.CameraType.TRACKING),i=new o(r,e.getContext(),t);e.setGlProgram(i),e.run({},function(t){e.drawProgram()},a)}(r(2798))}).call(a,"webgl/bookofshader/app.ts")},2795:function(t,a,r){"use strict";var e={level:"prd"};t.exports=e},2796:function(t,a){t.exports="<html>\n    <head>\n        <title>Example</title>\n        <style>\n            canvas {\n                /* cursor: none; */\n            }\n        </style>\n    </head>\n    <body>\n        <canvas id='canvas-element-id' width='800' height='400' tabindex='1'>\n            Your browser does not support the HTML5 canvas element.\n        </canvas>\n    </body>\n</html>"},2797:function(t,a){t.exports="attribute vec3 pos;\nuniform vec3 col;\nvoid main() {\n    gl_Position = vec4(pos, 1.0);\n}\n"},2798:function(t,a){t.exports="\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform vec2 u_resolution;\nuniform vec2 u_mouse;\nuniform float u_time;\n\nfloat plot(vec2 st, float pct){\n  return  smoothstep( pct-0.02, pct, st.y) - \n          smoothstep( pct, pct+0.02, st.y);\n}\n\nvoid main() {\n    vec2 temp = u_mouse;\n    float temp2 = u_time;\n\n    vec2 st = gl_FragCoord.xy / u_resolution;\n    vec3 color = vec3(st.x);\n\n    // float y = sin(st.x);\n    // float y = sin(st.x - u_time);\n    // float y = (sin(st.x * 10.) / 2.) + 0.5;\n    // float y = (sin((st.x - u_time) * 3.14) / 2.) + 0.5;\n    // float y = (abs(sin((st.x - u_time) * 3.14)));\n    // float y = (abs(sin((st.x - fract(u_time)) * 3.14)));\n    // float y = (abs(sin((st.x - fract(u_time)) * 3.14)));\n    // float y = mod(st.x, 0.5);\n    float y = fract(u_time);\n\n    float pct = plot(st, y);\n    color = (1.0 - pct) * color + pct * vec3(0., 1., 0.);\n\n    gl_FragColor = vec4(color, 1.);\n}"},304:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e="\nvoid main(void) {\n    gl_Position = vec4(position, 1.0);\n}\n",n=function(){function t(t,a,r,n){this.gl=t,this.attributeSizes=n,this.program=t.createProgram(),this.setVertexShader(a||e),this.setFragmentShader(r),t.clearColor(1,1,1,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0)}return t.prototype.createShader=function(t,a){var r=this.gl,e=r.createShader(t);if(r.shaderSource(e,a),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS)){var n=r.getShaderInfoLog(e);console.error("shader log",n)}return r.attachShader(this.program,e),e},t.prototype.setVertexShader=function(t){var a=this.gl;this.vertexShader&&a.detachShader(this.program,this.vertexShader),this.vertexShader=this.createShader(a.VERTEX_SHADER,t)},t.prototype.setFragmentShader=function(t){var a=this.gl;this.fragmentShader&&a.detachShader(this.program,this.fragmentShader),this.fragmentShader=this.createShader(a.FRAGMENT_SHADER,t)},t.prototype.getProgram=function(){return this.program},t.prototype.setAttributeBuffers=function(t){var a=this.gl,r=this.program;if(!this.attributeLocations){for(var e={},n=0,o=Object.keys(t);n<o.length;n++){var i=o[n];e[i]=a.getAttribLocation(r,i)}this.attributeLocations=e}for(var u=this.attributeSizes,s=this.attributeLocations,l=0,c=Object.keys(s);l<c.length;l++){var h=c[l],M=s[h],f=u[h];if(-1!==M){var m=t[h];m?(m instanceof WebGLBuffer?a.bindBuffer(a.ARRAY_BUFFER,m):(a.bindBuffer(a.ARRAY_BUFFER,a.createBuffer()),a.bufferData(a.ARRAY_BUFFER,new Float32Array(m),a.STATIC_DRAW)),a.vertexAttribPointer(M,f,a.FLOAT,!1,0,0),a.enableVertexAttribArray(M)):a.disableVertexAttribArray(M)}}},t.prototype.setUniformValue=function(t,a,r){void 0===r&&(r=!1);var e=this.gl,n=e.getUniformLocation(this.program,t),o=a.length;if(!n)return void console.error("uniform "+t+" not found");if(void 0===o)r?e.uniform1i(n,a):e.uniform1f(n,a);else{if(a[0]&&a[0].length){for(var i=a[0].length,u=new Float32Array(o*i),s=a,l=0;l<o;l+=1)u.set(s[l],i*l);o=a[0].length,a=u}2===o?e.uniform2fv(n,a):3===o?e.uniform3fv(n,a):4===o?e.uniform4fv(n,a):16===o?e.uniformMatrix4fv(n,!1,a):console.error("coundn't configure uniform "+t+" with len "+o)}},t}();a.GLProgram=n},378:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var a=new e.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,a,r,n){var o=new e.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=n,o},n.set=function(t,a,r,e,n){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t},n.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},n.invert=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=r*o-n*e;return i?(i=1/i,t[0]=o*i,t[1]=-e*i,t[2]=-n*i,t[3]=r*i,t):null},n.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=r[0],s=r[1],l=r[2],c=r[3];return t[0]=e*u+o*s,t[1]=n*u+i*s,t[2]=e*l+o*c,t[3]=n*l+i*c,t},n.mul=n.multiply,n.rotate=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+o*u,t[1]=n*s+i*u,t[2]=e*-u+o*s,t[3]=n*-u+i*s,t},n.scale=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=r[0],s=r[1];return t[0]=e*u,t[1]=n*u,t[2]=o*s,t[3]=i*s,t},n.fromRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,a,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,a,r]},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},n.sub=n.subtract,n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=t[3],u=a[0],s=a[1],l=a[2],c=a[3];return Math.abs(r-u)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-s)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},n.multiplyScalarAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t},t.exports=n},379:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var a=new e.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,a,r,n,o,i){var u=new e.ARRAY_TYPE(6);return u[0]=t,u[1]=a,u[2]=r,u[3]=n,u[4]=o,u[5]=i,u},n.set=function(t,a,r,e,n,o,i){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t[4]=o,t[5]=i,t},n.invert=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=r*o-e*n;return s?(s=1/s,t[0]=o*s,t[1]=-e*s,t[2]=-n*s,t[3]=r*s,t[4]=(n*u-o*i)*s,t[5]=(e*i-r*u)*s,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=r[0],c=r[1],h=r[2],M=r[3],f=r[4],m=r[5];return t[0]=e*l+o*c,t[1]=n*l+i*c,t[2]=e*h+o*M,t[3]=n*h+i*M,t[4]=e*f+o*m+u,t[5]=n*f+i*m+s,t},n.mul=n.multiply,n.rotate=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*l,t[1]=n*c+i*l,t[2]=e*-l+o*c,t[3]=n*-l+i*c,t[4]=u,t[5]=s,t},n.scale=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=r[0],c=r[1];return t[0]=e*l,t[1]=n*l,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=s,t},n.translate=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=r[0],c=r[1];return t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=e*l+o*c+u,t[5]=n*l+i*c+s,t},n.fromRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t},n.multiplyScalarAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t[4]=a[4]+r[4]*e,t[5]=a[5]+r[5]*e,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=a[0],c=a[1],h=a[2],M=a[3],f=a[4],m=a[5];return Math.abs(r-l)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-h)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-M)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-f)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))&&Math.abs(s-m)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))},t.exports=n},380:function(t,a,r){var e=r(61),n={scalar:{},SIMD:{}};n.create=function(){var t=new e.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var a=new e.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.fromValues=function(t,a,r,n,o,i,u,s,l,c,h,M,f,m,x,v){var S=new e.ARRAY_TYPE(16);return S[0]=t,S[1]=a,S[2]=r,S[3]=n,S[4]=o,S[5]=i,S[6]=u,S[7]=s,S[8]=l,S[9]=c,S[10]=h,S[11]=M,S[12]=f,S[13]=m,S[14]=x,S[15]=v,S},n.set=function(t,a,r,e,n,o,i,u,s,l,c,h,M,f,m,x,v){return t[0]=a,t[1]=r,t[2]=e,t[3]=n,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=c,t[10]=h,t[11]=M,t[12]=f,t[13]=m,t[14]=x,t[15]=v,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.scalar.transpose=function(t,a){if(t===a){var r=a[1],e=a[2],n=a[3],o=a[6],i=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=e,t[9]=o,t[11]=a[14],t[12]=n,t[13]=i,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},n.SIMD.transpose=function(t,a){var r,e,n,o,i,u,s,l,c,h;return r=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.shuffle(r,e,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(r,e,2,3,6,7),u=SIMD.Float32x4.shuffle(n,o,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),h=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,h),t},n.transpose=e.USE_SIMD?n.SIMD.transpose:n.scalar.transpose,n.scalar.invert=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=a[6],l=a[7],c=a[8],h=a[9],M=a[10],f=a[11],m=a[12],x=a[13],v=a[14],S=a[15],d=r*u-e*i,I=r*s-n*i,p=r*l-o*i,D=e*s-n*u,F=e*l-o*u,b=n*l-o*s,g=c*x-h*m,_=c*v-M*m,y=c*S-f*m,A=h*v-M*x,w=h*S-f*x,E=M*S-f*v,P=d*E-I*w+p*A+D*y-F*_+b*g;return P?(P=1/P,t[0]=(u*E-s*w+l*A)*P,t[1]=(n*w-e*E-o*A)*P,t[2]=(x*b-v*F+S*D)*P,t[3]=(M*F-h*b-f*D)*P,t[4]=(s*y-i*E-l*_)*P,t[5]=(r*E-n*y+o*_)*P,t[6]=(v*p-m*b-S*I)*P,t[7]=(c*b-M*p+f*I)*P,t[8]=(i*w-u*y+l*g)*P,t[9]=(e*y-r*w-o*g)*P,t[10]=(m*F-x*p+S*d)*P,t[11]=(h*p-c*F-f*d)*P,t[12]=(u*_-i*A-s*g)*P,t[13]=(r*A-e*_+n*g)*P,t[14]=(x*I-m*D-v*d)*P,t[15]=(c*D-h*I+M*d)*P,t):null},n.SIMD.invert=function(t,a){var r,e,n,o,i,u,s,l,c,h,M=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8),x=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(M,f,0,1,4,5),e=SIMD.Float32x4.shuffle(m,x,0,1,4,5),r=SIMD.Float32x4.shuffle(i,e,0,2,4,6),e=SIMD.Float32x4.shuffle(e,i,1,3,5,7),i=SIMD.Float32x4.shuffle(M,f,2,3,6,7),o=SIMD.Float32x4.shuffle(m,x,2,3,6,7),n=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(e,i),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(e,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),c=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(e,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),n=SIMD.Float32x4.swizzle(n,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),l=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(r,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,i)),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(e,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),c),h=SIMD.Float32x4.mul(r,u),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),i=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(i,i))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,c)),t):null},n.invert=e.USE_SIMD?n.SIMD.invert:n.scalar.invert,n.scalar.adjoint=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=a[4],u=a[5],s=a[6],l=a[7],c=a[8],h=a[9],M=a[10],f=a[11],m=a[12],x=a[13],v=a[14],S=a[15];return t[0]=u*(M*S-f*v)-h*(s*S-l*v)+x*(s*f-l*M),t[1]=-(e*(M*S-f*v)-h*(n*S-o*v)+x*(n*f-o*M)),t[2]=e*(s*S-l*v)-u*(n*S-o*v)+x*(n*l-o*s),t[3]=-(e*(s*f-l*M)-u*(n*f-o*M)+h*(n*l-o*s)),t[4]=-(i*(M*S-f*v)-c*(s*S-l*v)+m*(s*f-l*M)),t[5]=r*(M*S-f*v)-c*(n*S-o*v)+m*(n*f-o*M),t[6]=-(r*(s*S-l*v)-i*(n*S-o*v)+m*(n*l-o*s)),t[7]=r*(s*f-l*M)-i*(n*f-o*M)+c*(n*l-o*s),t[8]=i*(h*S-f*x)-c*(u*S-l*x)+m*(u*f-l*h),t[9]=-(r*(h*S-f*x)-c*(e*S-o*x)+m*(e*f-o*h)),t[10]=r*(u*S-l*x)-i*(e*S-o*x)+m*(e*l-o*u),t[11]=-(r*(u*f-l*h)-i*(e*f-o*h)+c*(e*l-o*u)),t[12]=-(i*(h*v-M*x)-c*(u*v-s*x)+m*(u*M-s*h)),t[13]=r*(h*v-M*x)-c*(e*v-n*x)+m*(e*M-n*h),t[14]=-(r*(u*v-s*x)-i*(e*v-n*x)+m*(e*s-n*u)),t[15]=r*(u*M-s*h)-i*(e*M-n*h)+c*(e*s-n*u),t},n.SIMD.adjoint=function(t,a){var r,e,n,o,i,u,s,l,c,h,M,f,m,r=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),n=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12);return c=SIMD.Float32x4.shuffle(r,e,0,1,4,5),u=SIMD.Float32x4.shuffle(n,o,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(r,e,2,3,6,7),l=SIMD.Float32x4.shuffle(n,o,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.mul(u,c),M=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),m=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),f=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),m),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),M),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(l,c)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),m),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,M),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,m),t},n.adjoint=e.USE_SIMD?n.SIMD.adjoint:n.scalar.adjoint,n.determinant=function(t){var a=t[0],r=t[1],e=t[2],n=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],h=t[10],M=t[11],f=t[12],m=t[13],x=t[14],v=t[15];return(a*i-r*o)*(h*v-M*x)-(a*u-e*o)*(c*v-M*m)+(a*s-n*o)*(c*x-h*m)+(r*u-e*i)*(l*v-M*f)-(r*s-n*i)*(l*x-h*f)+(e*s-n*u)*(l*m-c*f)},n.SIMD.multiply=function(t,a,r){var e=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(r,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,c);var h=SIMD.Float32x4.load(r,8),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));SIMD.Float32x4.store(t,8,M);var f=SIMD.Float32x4.load(r,12),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,m),t},n.scalar.multiply=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=a[6],c=a[7],h=a[8],M=a[9],f=a[10],m=a[11],x=a[12],v=a[13],S=a[14],d=a[15],I=r[0],p=r[1],D=r[2],F=r[3];return t[0]=I*e+p*u+D*h+F*x,t[1]=I*n+p*s+D*M+F*v,t[2]=I*o+p*l+D*f+F*S,t[3]=I*i+p*c+D*m+F*d,I=r[4],p=r[5],D=r[6],F=r[7],t[4]=I*e+p*u+D*h+F*x,t[5]=I*n+p*s+D*M+F*v,t[6]=I*o+p*l+D*f+F*S,t[7]=I*i+p*c+D*m+F*d,I=r[8],p=r[9],D=r[10],F=r[11],t[8]=I*e+p*u+D*h+F*x,t[9]=I*n+p*s+D*M+F*v,t[10]=I*o+p*l+D*f+F*S,t[11]=I*i+p*c+D*m+F*d,I=r[12],p=r[13],D=r[14],F=r[15],t[12]=I*e+p*u+D*h+F*x,t[13]=I*n+p*s+D*M+F*v,t[14]=I*o+p*l+D*f+F*S,t[15]=I*i+p*c+D*m+F*d,t},n.multiply=e.USE_SIMD?n.SIMD.multiply:n.scalar.multiply,n.mul=n.multiply,n.scalar.translate=function(t,a,r){var e,n,o,i,u,s,l,c,h,M,f,m,x=r[0],v=r[1],S=r[2];return a===t?(t[12]=a[0]*x+a[4]*v+a[8]*S+a[12],t[13]=a[1]*x+a[5]*v+a[9]*S+a[13],t[14]=a[2]*x+a[6]*v+a[10]*S+a[14],t[15]=a[3]*x+a[7]*v+a[11]*S+a[15]):(e=a[0],n=a[1],o=a[2],i=a[3],u=a[4],s=a[5],l=a[6],c=a[7],h=a[8],M=a[9],f=a[10],m=a[11],t[0]=e,t[1]=n,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=c,t[8]=h,t[9]=M,t[10]=f,t[11]=m,t[12]=e*x+u*v+h*S+a[12],t[13]=n*x+s*v+M*S+a[13],t[14]=o*x+l*v+f*S+a[14],t[15]=i*x+c*v+m*S+a[15]),t},n.SIMD.translate=function(t,a,r){var e=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,0,0,0,0)),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(e,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},n.translate=e.USE_SIMD?n.SIMD.translate:n.scalar.translate,n.scalar.scale=function(t,a,r){var e=r[0],n=r[1],o=r[2];return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*n,t[5]=a[5]*n,t[6]=a[6]*n,t[7]=a[7]*n,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.SIMD.scale=function(t,a,r){var e,n,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return e=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,0,0,0,0))),n=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},n.scale=e.USE_SIMD?n.SIMD.scale:n.scalar.scale,n.rotate=function(t,a,r,n){var o,i,u,s,l,c,h,M,f,m,x,v,S,d,I,p,D,F,b,g,_,y,A,w,E=n[0],P=n[1],z=n[2],R=Math.sqrt(E*E+P*P+z*z);return Math.abs(R)<e.EPSILON?null:(R=1/R,E*=R,P*=R,z*=R,o=Math.sin(r),i=Math.cos(r),u=1-i,s=a[0],l=a[1],c=a[2],h=a[3],M=a[4],f=a[5],m=a[6],x=a[7],v=a[8],S=a[9],d=a[10],I=a[11],p=E*E*u+i,D=P*E*u+z*o,F=z*E*u-P*o,b=E*P*u-z*o,g=P*P*u+i,_=z*P*u+E*o,y=E*z*u+P*o,A=P*z*u-E*o,w=z*z*u+i,t[0]=s*p+M*D+v*F,t[1]=l*p+f*D+S*F,t[2]=c*p+m*D+d*F,t[3]=h*p+x*D+I*F,t[4]=s*b+M*g+v*_,t[5]=l*b+f*g+S*_,t[6]=c*b+m*g+d*_,t[7]=h*b+x*g+I*_,t[8]=s*y+M*A+v*w,t[9]=l*y+f*A+S*w,t[10]=c*y+m*A+d*w,t[11]=h*y+x*A+I*w,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},n.scalar.rotateX=function(t,a,r){var e=Math.sin(r),n=Math.cos(r),o=a[4],i=a[5],u=a[6],s=a[7],l=a[8],c=a[9],h=a[10],M=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*n+l*e,t[5]=i*n+c*e,t[6]=u*n+h*e,t[7]=s*n+M*e,t[8]=l*n-o*e,t[9]=c*n-i*e,t[10]=h*n-u*e,t[11]=M*n-s*e,t},n.SIMD.rotateX=function(t,a,r){var e=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,e))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,e))),t},n.rotateX=e.USE_SIMD?n.SIMD.rotateX:n.scalar.rotateX,n.scalar.rotateY=function(t,a,r){var e=Math.sin(r),n=Math.cos(r),o=a[0],i=a[1],u=a[2],s=a[3],l=a[8],c=a[9],h=a[10],M=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n-l*e,t[1]=i*n-c*e,t[2]=u*n-h*e,t[3]=s*n-M*e,t[8]=o*e+l*n,t[9]=i*e+c*n,t[10]=u*e+h*n,t[11]=s*e+M*n,t},n.SIMD.rotateY=function(t,a,r){var e=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,e))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),t},n.rotateY=e.USE_SIMD?n.SIMD.rotateY:n.scalar.rotateY,n.scalar.rotateZ=function(t,a,r){var e=Math.sin(r),n=Math.cos(r),o=a[0],i=a[1],u=a[2],s=a[3],l=a[4],c=a[5],h=a[6],M=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*n+l*e,t[1]=i*n+c*e,t[2]=u*n+h*e,t[3]=s*n+M*e,t[4]=l*n-o*e,t[5]=c*n-i*e,t[6]=h*n-u*e,t[7]=M*n-s*e,t},n.SIMD.rotateZ=function(t,a,r){var e=SIMD.Float32x4.splat(Math.sin(r)),n=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,e))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(o,e))),t},n.rotateZ=e.USE_SIMD?n.SIMD.rotateZ:n.scalar.rotateZ,n.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},n.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,a,r){var n,o,i,u=r[0],s=r[1],l=r[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<e.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,n=Math.sin(a),o=Math.cos(a),i=1-o,t[0]=u*u*i+o,t[1]=s*u*i+l*n,t[2]=l*u*i-s*n,t[3]=0,t[4]=u*s*i-l*n,t[5]=s*s*i+o,t[6]=l*s*i+u*n,t[7]=0,t[8]=u*l*i+s*n,t[9]=s*l*i-u*n,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,a){var r=Math.sin(a),e=Math.cos(a);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=e+e,s=n+n,l=o+o,c=e*u,h=e*s,M=e*l,f=n*s,m=n*l,x=o*l,v=i*u,S=i*s,d=i*l;return t[0]=1-(f+x),t[1]=h+d,t[2]=M-S,t[3]=0,t[4]=h-d,t[5]=1-(c+x),t[6]=m+v,t[7]=0,t[8]=M+S,t[9]=m-v,t[10]=1-(c+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},n.getRotation=function(t,a){var r=a[0]+a[5]+a[10],e=0;return r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(a[6]-a[9])/e,t[1]=(a[8]-a[2])/e,t[2]=(a[1]-a[4])/e):a[0]>a[5]&a[0]>a[10]?(e=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/e,t[0]=.25*e,t[1]=(a[1]+a[4])/e,t[2]=(a[8]+a[2])/e):a[5]>a[10]?(e=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/e,t[0]=(a[1]+a[4])/e,t[1]=.25*e,t[2]=(a[6]+a[9])/e):(e=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/e,t[0]=(a[8]+a[2])/e,t[1]=(a[6]+a[9])/e,t[2]=.25*e),t},n.fromRotationTranslationScale=function(t,a,r,e){var n=a[0],o=a[1],i=a[2],u=a[3],s=n+n,l=o+o,c=i+i,h=n*s,M=n*l,f=n*c,m=o*l,x=o*c,v=i*c,S=u*s,d=u*l,I=u*c,p=e[0],D=e[1],F=e[2];return t[0]=(1-(m+v))*p,t[1]=(M+I)*p,t[2]=(f-d)*p,t[3]=0,t[4]=(M-I)*D,t[5]=(1-(h+v))*D,t[6]=(x+S)*D,t[7]=0,t[8]=(f+d)*F,t[9]=(x-S)*F,t[10]=(1-(h+m))*F,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,a,r,e,n){var o=a[0],i=a[1],u=a[2],s=a[3],l=o+o,c=i+i,h=u+u,M=o*l,f=o*c,m=o*h,x=i*c,v=i*h,S=u*h,d=s*l,I=s*c,p=s*h,D=e[0],F=e[1],b=e[2],g=n[0],_=n[1],y=n[2];return t[0]=(1-(x+S))*D,t[1]=(f+p)*D,t[2]=(m-I)*D,t[3]=0,t[4]=(f-p)*F,t[5]=(1-(M+S))*F,t[6]=(v+d)*F,t[7]=0,t[8]=(m+I)*b,t[9]=(v-d)*b,t[10]=(1-(M+x))*b,t[11]=0,t[12]=r[0]+g-(t[0]*g+t[4]*_+t[8]*y),t[13]=r[1]+_-(t[1]*g+t[5]*_+t[9]*y),t[14]=r[2]+y-(t[2]*g+t[6]*_+t[10]*y),t[15]=1,t},n.fromQuat=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=r+r,u=e+e,s=n+n,l=r*i,c=e*i,h=e*u,M=n*i,f=n*u,m=n*s,x=o*i,v=o*u,S=o*s;return t[0]=1-h-m,t[1]=c+S,t[2]=M-v,t[3]=0,t[4]=c-S,t[5]=1-l-m,t[6]=f+x,t[7]=0,t[8]=M+v,t[9]=f-x,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,a,r,e,n,o,i){var u=1/(r-a),s=1/(n-e),l=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(n+e)*s,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},n.perspective=function(t,a,r,e,n){var o=1/Math.tan(a/2),i=1/(e-n);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+e)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*e*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,a,r,e){var n=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),i=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(n+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(n-o)*l*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t},n.ortho=function(t,a,r,e,n,o,i){var u=1/(a-r),s=1/(e-n),l=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(a+r)*u,t[13]=(n+e)*s,t[14]=(i+o)*l,t[15]=1,t},n.lookAt=function(t,a,r,o){var i,u,s,l,c,h,M,f,m,x,v=a[0],S=a[1],d=a[2],I=o[0],p=o[1],D=o[2],F=r[0],b=r[1],g=r[2];return Math.abs(v-F)<e.EPSILON&&Math.abs(S-b)<e.EPSILON&&Math.abs(d-g)<e.EPSILON?n.identity(t):(M=v-F,f=S-b,m=d-g,x=1/Math.sqrt(M*M+f*f+m*m),M*=x,f*=x,m*=x,i=p*m-D*f,u=D*M-I*m,s=I*f-p*M,x=Math.sqrt(i*i+u*u+s*s),x?(x=1/x,i*=x,u*=x,s*=x):(i=0,u=0,s=0),l=f*s-m*u,c=m*i-M*s,h=M*u-f*i,x=Math.sqrt(l*l+c*c+h*h),x?(x=1/x,l*=x,c*=x,h*=x):(l=0,c=0,h=0),t[0]=i,t[1]=l,t[2]=M,t[3]=0,t[4]=u,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=h,t[10]=m,t[11]=0,t[12]=-(i*v+u*S+s*d),t[13]=-(l*v+c*S+h*d),t[14]=-(M*v+f*S+m*d),t[15]=1,t)},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t},n.sub=n.subtract,n.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},n.multiplyScalarAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t[2]=a[2]+r[2]*e,t[3]=a[3]+r[3]*e,t[4]=a[4]+r[4]*e,t[5]=a[5]+r[5]*e,t[6]=a[6]+r[6]*e,t[7]=a[7]+r[7]*e,t[8]=a[8]+r[8]*e,t[9]=a[9]+r[9]*e,t[10]=a[10]+r[10]*e,t[11]=a[11]+r[11]*e,t[12]=a[12]+r[12]*e,t[13]=a[13]+r[13]*e,t[14]=a[14]+r[14]*e,t[15]=a[15]+r[15]*e,t},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},n.equals=function(t,a){var r=t[0],n=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],h=t[8],M=t[9],f=t[10],m=t[11],x=t[12],v=t[13],S=t[14],d=t[15],I=a[0],p=a[1],D=a[2],F=a[3],b=a[4],g=a[5],_=a[6],y=a[7],A=a[8],w=a[9],E=a[10],P=a[11],z=a[12],R=a[13],L=a[14],T=a[15];return Math.abs(r-I)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(I))&&Math.abs(n-p)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-D)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(D))&&Math.abs(i-F)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(u-b)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-g)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-_)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-y)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(h-A)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(M-w)<=e.EPSILON*Math.max(1,Math.abs(M),Math.abs(w))&&Math.abs(f-E)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(m-P)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(x-z)<=e.EPSILON*Math.max(1,Math.abs(x),Math.abs(z))&&Math.abs(v-R)<=e.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(S-L)<=e.EPSILON*Math.max(1,Math.abs(S),Math.abs(L))&&Math.abs(d-T)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))},t.exports=n},381:function(t,a,r){var e=r(61),n=r(274),o=r(275),i=r(276),u={};u.create=function(){var t=new e.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(e,n,i){var s=o.dot(n,i);return s<-.999999?(o.cross(t,a,n),o.length(t)<1e-6&&o.cross(t,r,n),o.normalize(t,t),u.setAxisAngle(e,t,Math.PI),e):s>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(t,n,i),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+s,u.normalize(e,e))}}(),u.setAxes=function(){var t=n.create();return function(a,r,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],u.normalize(a,u.fromMat3(a,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,a,r){r*=.5;var e=Math.sin(r);return t[0]=e*a[0],t[1]=e*a[1],t[2]=e*a[2],t[3]=Math.cos(r),t},u.getAxisAngle=function(t,a){var r=2*Math.acos(a[3]),e=Math.sin(r/2);return 0!=e?(t[0]=a[0]/e,t[1]=a[1]/e,t[2]=a[2]/e):(t[0]=1,t[1]=0,t[2]=0),r},u.add=i.add,u.multiply=function(t,a,r){var e=a[0],n=a[1],o=a[2],i=a[3],u=r[0],s=r[1],l=r[2],c=r[3];return t[0]=e*c+i*u+n*l-o*s,t[1]=n*c+i*s+o*u-e*l,t[2]=o*c+i*l+e*s-n*u,t[3]=i*c-e*u-n*s-o*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,a,r){r*=.5;var e=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+i*u,t[1]=n*s+o*u,t[2]=o*s-n*u,t[3]=i*s-e*u,t},u.rotateY=function(t,a,r){r*=.5;var e=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s-o*u,t[1]=n*s+i*u,t[2]=o*s+e*u,t[3]=i*s-n*u,t},u.rotateZ=function(t,a,r){r*=.5;var e=a[0],n=a[1],o=a[2],i=a[3],u=Math.sin(r),s=Math.cos(r);return t[0]=e*s+n*u,t[1]=n*s-e*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},u.calculateW=function(t,a){var r=a[0],e=a[1],n=a[2];return t[0]=r,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-n*n)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,a,r,e){var n,o,i,u,s,l=a[0],c=a[1],h=a[2],M=a[3],f=r[0],m=r[1],x=r[2],v=r[3];return o=l*f+c*m+h*x+M*v,o<0&&(o=-o,f=-f,m=-m,x=-x,v=-v),1-o>1e-6?(n=Math.acos(o),i=Math.sin(n),u=Math.sin((1-e)*n)/i,s=Math.sin(e*n)/i):(u=1-e,s=e),t[0]=u*l+s*f,t[1]=u*c+s*m,t[2]=u*h+s*x,t[3]=u*M+s*v,t},u.sqlerp=function(){var t=u.create(),a=u.create();return function(r,e,n,o,i,s){return u.slerp(t,e,i,s),u.slerp(a,n,o,s),u.slerp(r,t,a,2*s*(1-s)),r}}(),u.invert=function(t,a){var r=a[0],e=a[1],n=a[2],o=a[3],i=r*r+e*e+n*n+o*o,u=i?1/i:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-n*u,t[3]=o*u,t},u.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,a){var r,e=a[0]+a[4]+a[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var n=0;a[4]>a[0]&&(n=1),a[8]>a[3*n+n]&&(n=2);var o=(n+1)%3,i=(n+2)%3;r=Math.sqrt(a[3*n+n]-a[3*o+o]-a[3*i+i]+1),t[n]=.5*r,r=.5/r,t[3]=(a[3*o+i]-a[3*i+o])*r,t[o]=(a[3*o+n]+a[3*n+o])*r,t[i]=(a[3*i+n]+a[3*n+i])*r}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},382:function(t,a,r){var e=r(61),n={};n.create=function(){var t=new e.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},n.clone=function(t){var a=new e.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},n.fromValues=function(t,a){var r=new e.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},n.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},n.set=function(t,a,r){return t[0]=a,t[1]=r,t},n.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},n.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},n.sub=n.subtract,n.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},n.mul=n.multiply,n.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},n.div=n.divide,n.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},n.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},n.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},n.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},n.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},n.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},n.scaleAndAdd=function(t,a,r,e){return t[0]=a[0]+r[0]*e,t[1]=a[1]+r[1]*e,t},n.distance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1];return Math.sqrt(r*r+e*e)},n.dist=n.distance,n.squaredDistance=function(t,a){var r=a[0]-t[0],e=a[1]-t[1];return r*r+e*e},n.sqrDist=n.squaredDistance,n.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},n.len=n.length,n.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},n.sqrLen=n.squaredLength,n.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},n.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},n.normalize=function(t,a){var r=a[0],e=a[1],n=r*r+e*e;return n>0&&(n=1/Math.sqrt(n),t[0]=a[0]*n,t[1]=a[1]*n),t},n.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},n.cross=function(t,a,r){var e=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=e,t},n.lerp=function(t,a,r,e){var n=a[0],o=a[1];return t[0]=n+e*(r[0]-n),t[1]=o+e*(r[1]-o),t},n.random=function(t,a){a=a||1;var r=2*e.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},n.transformMat2=function(t,a,r){var e=a[0],n=a[1];return t[0]=r[0]*e+r[2]*n,t[1]=r[1]*e+r[3]*n,t},n.transformMat2d=function(t,a,r){var e=a[0],n=a[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t},n.transformMat3=function(t,a,r){var e=a[0],n=a[1];return t[0]=r[0]*e+r[3]*n+r[6],t[1]=r[1]*e+r[4]*n+r[7],t},n.transformMat4=function(t,a,r){var e=a[0],n=a[1];return t[0]=r[0]*e+r[4]*n+r[12],t[1]=r[1]*e+r[5]*n+r[13],t},n.forEach=function(){var t=n.create();return function(a,r,e,n,o,i){var u,s;for(r||(r=2),e||(e=0),s=n?Math.min(n*r+e,a.length):a.length,u=e;u<s;u+=r)t[0]=a[u],t[1]=a[u+1],o(t,t,i),a[u]=t[0],a[u+1]=t[1];return a}}(),n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},n.equals=function(t,a){var r=t[0],n=t[1],o=a[0],i=a[1];return Math.abs(r-o)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=e.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))},t.exports=n},383:function(t,a,r){"use strict";function e(t,a){return t instanceof Array?s.vec2.clone(t):s.vec2.fromValues(t,a)}function n(t,a,r){return t instanceof Array?s.vec3.clone(t):s.vec3.fromValues(t,a,r)}function o(t,a,r,e){return t instanceof Array?s.vec4.clone(t):s.vec4.fromValues(t,a,r,e)}function i(t){return u({position:n(0,0,0),ambient:o(0,0,0,0),diffuse:o(0,0,0,0),specular:o(0,0,0,0)},t)}var u=this&&this.__assign||Object.assign||function(t){for(var a,r=1,e=arguments.length;r<e;r++){a=arguments[r];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t};Object.defineProperty(a,"__esModule",{value:!0});var s=r(139);a._vec2=e,a._vec3=n,a._vec4=o,a._light=i},61:function(t,a){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var e=Math.PI/180;r.toRadian=function(t){return t*e},r.equals=function(t,a){return Math.abs(t-a)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=r},622:function(t,a,r){"use strict";function e(t){for(var r in t)a.hasOwnProperty(r)||(a[r]=t[r])}Object.defineProperty(a,"__esModule",{value:!0});var n=r(623);a.Camera=n.Camera,a.CameraType=n.CameraType;var o=r(624),i=r(625),u=r(627);e(r(383)),e(r(628));var s=(Math.PI,function(){function t(t,a){void 0===a&&(a=n.CameraType.TRACKING),this.elCanvas=t,t=t||document.createElement("canvas"),this.context=t.getContext("webgl");var r=this.elCanvas,e=r.clientWidth,s=r.clientHeight;this.context.viewport(0,0,e,s),this.camera=new n.Camera(a),this.cameraInteractor=new o.CameraInteractor(this.camera,t),this.scene=new i.Scene(this.context),this.sceneTransform=new u.SceneTransform(this.elCanvas,this.context,this.camera)}return t.prototype.getContext=function(){return this.context},t.prototype.setGlProgram=function(t){var a=this.context,r=t.getProgram();a.linkProgram(r),a.useProgram(r),this.glProgram=t},t.prototype.setCamera=function(t,a,r){this.camera.setPosition(t),this.camera.setAzimuth(a),this.camera.setElevation(r)},t.prototype.addObject=function(t){return this.scene.addObject(t)},t.prototype.drawProgram=function(t){void 0===t&&(t=!1);var a=this.sceneTransform.getTransformMat();this.glProgram.drawStart(a);for(var r=0,e=this.scene.getGlObjects();r<e.length;r++){var n=e[r];this.glProgram.drawObject(a,n,t)}},t.prototype.canvasResize=function(){var t=this.elCanvas,a=t.clientWidth,r=t.clientHeight;t.width==a&&t.height==r||(t.width=a,t.height=r)},t.prototype.run=function(t,a,r){var e=this;void 0===r&&(r=!1);var n=function(){e.canvasResize(),e.context.viewport(0,0,e.elCanvas.clientWidth,e.elCanvas.clientHeight),a.call(e,t),r&&requestAnimationFrame(n)};n()},t}());a.WebGL=s},623:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e,n=r(139);!function(t){t[t.ORBIT=0]="ORBIT",t[t.TRACKING=1]="TRACKING"}(e=a.CameraType||(a.CameraType={}));var o=Math.PI/180,i=function(){function t(t){this.type=t,this.matrix=n.mat4.create(),this.up=n.vec4.create(),this.right=n.vec4.create(),this.normal=n.vec4.create(),this.position=n.vec3.create(),this.azimuth=0,this.elevation=0,this.steps=0}return t.prototype.setType=function(t){this.type=t},t.prototype.update=function(){var t=this.matrix;this.type===e.TRACKING?(n.mat4.identity(t),n.mat4.translate(t,t,this.position),n.mat4.rotateY(t,t,this.azimuth*o),n.mat4.rotateX(t,t,this.elevation*o)):(n.mat4.identity(t),n.mat4.rotateY(t,t,this.azimuth*o),n.mat4.rotateX(t,t,this.elevation*o),n.mat4.translate(t,t,this.position)),n.vec4.transformMat4(this.right,[1,0,0,0],t),n.vec4.transformMat4(this.up,[0,1,0,0],t),n.vec4.transformMat4(this.normal,[0,0,1,0],t)},t.prototype.changeX=function(t){this.position[0]+=t,this.update()},t.prototype.changeY=function(t){this.position[1]+=t,this.update()},t.prototype.changeZ=function(t){this.position[2]+=t,this.update()},t.prototype.setPosition=function(t){n.vec3.copy(this.position,t),this.update()},t.prototype.setFocus=function(t){var a=n.vec3.create();n.vec3.subtract(a,this.position,t),n.vec3.normalize(a,a),this.update()},t.prototype.getPosition=function(){return this.position},t.prototype.changeAzimuth=function(t){this.azimuth+=t,(this.azimuth>360||this.azimuth<-360)&&(this.azimuth%=360),this.update()},t.prototype.setAzimuth=function(t){this.changeAzimuth(t-this.azimuth)},t.prototype.changeElevation=function(t){this.elevation+=t,(this.elevation>360||this.elevation<-360)&&(this.elevation%=360),this.update()},t.prototype.setElevation=function(t){this.changeElevation(t-this.elevation)},t.prototype.goHome=function(t){this.setPosition(t),this.setAzimuth(0),this.setElevation(0),this.steps=0},t.prototype.setFromMVMatrix=function(t){this.matrix=n.mat4.create(),n.mat4.identity(this.matrix),n.mat4.invert(this.matrix,t),n.mat4.getTranslation(this.position,this.matrix)},t.prototype.getMVTransform=function(){var t=n.mat4.create();return n.mat4.invert(t,this.matrix),t},t.prototype.getMatrix=function(){return this.matrix},t.prototype.dolly=function(t){var a=n.vec3.create();n.vec3.copy(a,this.position);var r=n.vec3.create();n.vec3.normalize(r,this.normal);var o=t,i=n.vec3.create();this.type===e.TRACKING?(i[0]=a[0]-o*r[0],i[1]=a[1]-o*r[1],i[2]=a[2]-o*r[2]):(i[0]=a[0],i[1]=a[1],i[2]=a[2]-o),this.setPosition(i),this.steps=o},t.prototype.panHorizontal=function(t){var a=n.vec3.create();n.vec3.copy(a,this.position);var r=n.vec3.create();n.vec3.normalize(r,this.right);var o=t,i=n.vec3.create();this.type===e.TRACKING?(i[0]=a[0]-o*r[0],i[1]=a[1]-o*r[1],i[2]=a[2]-o*r[2]):(i[0]=a[0],i[1]=a[1],i[2]=a[2]-o),this.setPosition(i),this.steps=o},t}();a.Camera=i},624:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function t(t,a){var r=this;this.camera=t,this.elCanvas=a,this.dloc=0,this.dstep=0,this.elCanvas.onmousedown=function(t){return r.onMouseDown(t)},this.elCanvas.onmouseup=function(t){return r.onMouseUp(t)},this.elCanvas.onmousemove=function(t){return r.onMouseMove(t)},this.elCanvas.onkeydown=function(t){return r.onKeyDown(t)},this.elCanvas.onkeyup=function(t){return r.onKeyUp(t)}}return t.prototype.translate=function(t){var a=20*t/this.elCanvas.height;this.camera.dolly(a)},t.prototype.rotate=function(t,a){var r=-20/this.elCanvas.height,e=-20/this.elCanvas.width,n=t*e*10,o=a*r*10;this.camera.changeAzimuth(n),this.camera.changeElevation(o)},t.prototype.onMouseDown=function(t){this.dragging=!0,this.x=t.clientX,this.y=t.clientY,this.button=t.button;var a=this.camera.getPosition();this.dstep=Math.max(a[0],a[1],a[2])/100},t.prototype.onMouseUp=function(t){this.dragging=!1},t.prototype.onMouseMove=function(t){if(this.lastX=this.x,this.lastY=this.y,this.x=t.clientX,this.y=t.clientY,this.dragging){this.ctrl=t.ctrlKey,this.alt=t.altKey;var a=this.x-this.lastX,r=this.y-this.lastY;0===this.button&&(this.alt?this.dolly(r):this.rotate(a,r))}},t.prototype.onKeyDown=function(t){var a=this;this.key=t.keyCode,this.ctrl=t.ctrlKey;var r={38:function(){return a.camera.changeElevation(10)},40:function(){return a.camera.changeElevation(-10)},37:function(){return a.camera.changeAzimuth(-10)},39:function(){return a.camera.changeAzimuth(10)},87:function(){return a.camera.dolly(.5)},83:function(){return a.camera.dolly(-.5)},65:function(){return a.camera.panHorizontal(.5)},68:function(){return a.camera.panHorizontal(-.5)}},e=r[this.key];e?e():console.log(this.key)},t.prototype.onKeyUp=function(t){17===t.keyCode&&(this.ctrl=!1)},t.prototype.dolly=function(t){this.dloc+=0<t?this.dstep:-this.dstep,this.camera.dolly(this.dloc)},t}();a.CameraInteractor=e},625:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=r(626),n=function(){function t(t){this.context=t,this.glObjects=[]}return t.prototype.addObject=function(t){var a=this.context,r=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t.vertices),a.STATIC_DRAW);var n=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,n),a.bufferData(a.ARRAY_BUFFER,new Float32Array(e.calculateNormals(t.vertices,t.indices)),a.STATIC_DRAW);var o=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,o),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.indices),a.STATIC_DRAW);var i={object:t,vbo:r,nbo:n,ibo:o,iboLen:t.indices.length,wireframe:t.wireframe};if(t.colors){var u=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,u),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t.colors),a.STATIC_DRAW),i.cbo=u}if(t.texture_coords){var s=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,new Float32Array(t.texture_coords),a.STATIC_DRAW),i.tbo=s}return this.glObjects.push(i),i},t.prototype.getGlObjects=function(){return this.glObjects},t}();a.Scene=n},626:function(t,a,r){"use strict";function e(t){var a,r,e=null,n=document.getElementById(t);if(null==n)return alert("there is no canvas on this page"),null;a=n.width,r=n.height;for(var o=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0,u=o;i<u.length;i++){var s=u[i];try{e=n.getContext(s)}catch(t){}if(e)break}return null==e?(alert("Could not initialise WebGL"),null):{context:e,width:a,height:r}}function n(t,a){var r=document.getElementById(a);if(!r)return null;for(var e="",n=r.firstChild;n;)3==n.nodeType&&(e+=n.textContent),n=n.nextSibling;var o;if("x-shader/x-fragment"===r.type)o=t.createShader(t.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==r.type)return null;o=t.createShader(t.VERTEX_SHADER)}return t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)?o:(alert(t.getShaderInfoLog(o)),null)}function o(t,a){var r=t.createShader(t.VERTEX_SHADER);return t.shaderSource(r,a),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(t.getShaderInfoLog(r)),null)}function i(t,a){var r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,a),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert(t.getShaderInfoLog(r)),null)}function u(t){u(t)}function s(t,a){for(var r=0,r=0,e=[],n=0;n<t.length;n+=3)e[n+r]=0,e[n+1]=0,e[n+2]=0;for(var n=0;n<a.length;n+=3){var o=[],i=[],u=[];o[r]=t[3*a[n+2]+r]-t[3*a[n+1]+r],o[1]=t[3*a[n+2]+1]-t[3*a[n+1]+1],o[2]=t[3*a[n+2]+2]-t[3*a[n+1]+2],i[r]=t[3*a[n]+r]-t[3*a[n+1]+r],i[1]=t[3*a[n]+1]-t[3*a[n+1]+1],i[2]=t[3*a[n]+2]-t[3*a[n+1]+2],u[r]=o[1]*i[2]-o[2]*i[1],u[1]=o[2]*i[r]-o[r]*i[2],u[2]=o[r]*i[1]-o[1]*i[r];for(var s=0;s<3;s++)e[3*a[n+s]+r]=e[3*a[n+s]+r]+u[r],e[3*a[n+s]+1]=e[3*a[n+s]+1]+u[1],e[3*a[n+s]+2]=e[3*a[n+s]+2]+u[2]}for(var n=0;n<t.length;n+=3){var l=[];l[r]=e[n+r],l[1]=e[n+1],l[2]=e[n+2];var c=Math.sqrt(l[r]*l[r]+l[1]*l[1]+l[2]*l[2]);0==c&&(c=1),l[r]=l[r]/c,l[1]=l[1]/c,l[2]=l[2]/c,e[n+r]=l[r],e[n+1]=l[1],e[n+2]=l[2]}return e}function l(t,a){for(var r=t,e=[],n=0;n<r.length;n++)e[n]=0;return e}Object.defineProperty(a,"__esModule",{value:!0}),a.getGLContext=e,a.getShader=n,a.getVertShaderFromSource=o,a.getFragShaderFromSource=i,a.requestAnimFrame=u,a.calculateNormals=s,a.calculateTangents=l},627:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=r(139),n=function(){function t(t,a,r){this.elCanvas=t,this.context=a,this.camera=r,this.stack=[],this.mvMatrix=e.mat4.create(),this.pMatrix=e.mat4.create(),this.nMatrix=e.mat4.create(),this.cMatrix=e.mat4.create(),this.transformMat={mvMatrix:e.mat4.create(),nMatrix:e.mat4.create(),pMatrix:e.mat4.create()}}return t.prototype.getTransformMat=function(){var t=this.transformMat,a=t.mvMatrix,r=t.nMatrix,n=t.pMatrix,o=this.camera.getMatrix();return e.mat4.invert(a,o),e.mat4.transpose(r,o),e.mat4.perspective(n,45,this.elCanvas.clientWidth/this.elCanvas.clientHeight,.1,1e3),this.transformMat},t}();a.SceneTransform=n},628:function(t,a,r){"use strict";function e(t){for(var r in t)a.hasOwnProperty(r)||(a[r]=t[r])}Object.defineProperty(a,"__esModule",{value:!0}),e(r(304)),e(r(629)),e(r(632))},629:function(t,a,r){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])};return function(a,r){function e(){this.constructor=a}t(a,r),a.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(a,"__esModule",{value:!0});var n=r(139),o=r(304),i=function(t){function a(a){return t.call(this,a,r(630),r(631),{aVertexPosition:3,aVertexNormal:3,aVertexColor:4,aVertexTextureCoords:2})||this}return e(a,t),a.prototype.drawStart=function(t){this.setUniformValue("uPMatrix",t.pMatrix)},a.prototype.drawObject=function(t,a,r){void 0===r&&(r=!1);var e=this.gl;this.setAttributeBuffers({aVertexPosition:a.vbo,aVertexNormal:a.nbo,aVertexColor:a.cbo,aVertexTextureCoords:a.tbo}),a.tbo&&a.texture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.setUniformValue("uSampler",0,!0),this.setUniformValue("uRenderTexture",!0));var o=n.mat4.create(),i=n.mat4.create();if(a.object.position){var u=a.object.position,s=u.x,l=u.y,c=u.z,h=n.vec3.create();n.vec3.set(h,s,l,c),n.mat4.translate(o,t.mvMatrix,h)}else n.mat4.copy(o,t.mvMatrix);n.mat4.invert(i,o),n.mat4.transpose(i,i),this.setUniformValue("uMVMatrix",o),this.setUniformValue("uNMatrix",i),this.setUniformValue("uPerVertexColor",!!a.cbo),this.setUniformValue("uWireframe",!!a.object.wireframe),this.setUniformValue("uMaterialDiffuse",a.object.diffuse||[1,1,1,1]),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a.ibo),r||a.wireframe?e.drawElements(e.LINES,a.iboLen,e.UNSIGNED_SHORT,0):(e.enable(e.CULL_FACE),e.cullFace(e.FRONT),e.drawElements(e.TRIANGLES,a.iboLen,e.UNSIGNED_SHORT,0),e.cullFace(e.BACK),e.drawElements(e.TRIANGLES,a.iboLen,e.UNSIGNED_SHORT,0),e.disable(e.CULL_FACE))},a}(o.GLProgram);a.GoraudLambertian=i},630:function(t,a){t.exports="\nattribute vec3 aVertexPosition;\nattribute vec3 aVertexNormal;\nattribute vec4 aVertexColor;\nattribute vec2 aVertexTextureCoords;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uNMatrix;\n\nuniform vec3 uLightPosition;\nuniform vec4 uLightDiffuse;\n\nuniform vec4 uMaterialDiffuse;\n\nuniform bool uWireframe;\nuniform bool uPerVertexColor;\n\nvarying vec4 vFinalColor;\nvarying vec2 vTextureCoords;\n\nvoid main(void) {\n\n    if (uWireframe) {\n        if (uPerVertexColor) {\n            vFinalColor = aVertexColor;\n        } else {\n            vFinalColor = uMaterialDiffuse;\n        }\n    } else {\n        // vec3 N = normalize(vec3(uNMatrix * vec4(aVertexNormal, 1.0)));\n        vec3 N = vec3(uNMatrix * vec4(aVertexNormal, 1.0));\n\n        vec3 L = normalize(-uLightPosition);\n\n        // FIX\n        // L = vec3(uNMatrix * vec4(L, 0.0));\n\n        float lambertTerm = max(dot(N, -L), 0.20);\n        vFinalColor = uMaterialDiffuse * uLightDiffuse * lambertTerm;\n        vFinalColor.a = 1.0;\n    }\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoords = aVertexTextureCoords;\n}"},631:function(t,a){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D uSampler;\nuniform bool uRenderTexture;\n\nvarying vec4 vFinalColor;\nvarying vec2 vTextureCoords;\n\nvoid main(void) {\n    if (uRenderTexture) {\n        gl_FragColor = vFinalColor * texture2D(uSampler, vTextureCoords);\n    } else {\n        gl_FragColor = vFinalColor;\n    }\n}"},632:function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var r in a)a.hasOwnProperty(r)&&(t[r]=a[r])};return function(a,r){function e(){this.constructor=a}t(a,r),a.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0});var gl_matrix_1=__webpack_require__(139),def_1=__webpack_require__(383),program_1=__webpack_require__(304),parse=function(_a,source){var lenLights=_a.lenLights;return eval("`"+source+"`")},PhongProgram=function(t){function a(a,r){var e=t.call(this,a,parse({lenLights:r.length},__webpack_require__(633)),parse({lenLights:r.length},__webpack_require__(634)),{aVertexPosition:3,aVertexNormal:3,aVertexColor:4})||this;return e.lights=r,e}return __extends(a,t),a.prototype.drawStart=function(t){t.pMatrix&&this.setUniformValue("uPMatrix",t.pMatrix),this.setUniformValue("uLightPosition",this.lights.map(function(t){return t.position})),this.setUniformValue("uLightDiffuse",this.lights.map(function(t){return t.diffuse}))},a.prototype.drawObject=function(t,a,r){void 0===r&&(r=!1);var e=this.gl,n=gl_matrix_1.mat4.create(),o=gl_matrix_1.mat4.create();if(a.object.position){var i=a.object.position,u=i.x,s=i.y,l=i.z,c=gl_matrix_1.vec3.create();gl_matrix_1.vec3.set(c,u,s,l),gl_matrix_1.mat4.translate(n,t.mvMatrix,c)}else gl_matrix_1.mat4.copy(n,t.mvMatrix);gl_matrix_1.mat4.invert(o,n),gl_matrix_1.mat4.transpose(o,o),this.setUniformValue("uLightSource",!1),this.setUniformValue("uMVMatrix",n),this.setUniformValue("uNMatrix",o),this.setUniformValue("uWireframe",!!a.object.wireframe),this.setUniformValue("uMaterialDiffuse",def_1._vec4(a.object.diffuse||[1,1,1,1])),this.setUniformValue("uMaterialAmbient",def_1._vec4(a.object.ambiant||[1,1,1,1])),this.setAttributeBuffers({aVertexPosition:a.vbo,aVertexNormal:a.nbo,aVertexColor:a.cbo}),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a.ibo),e.drawElements(r||a.wireframe?e.LINES:e.TRIANGLES,a.iboLen,e.UNSIGNED_SHORT,0)},a}(program_1.GLProgram);exports.PhongProgram=PhongProgram},633:function(t,a){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\n\nattribute vec3 aVertexPosition;\nattribute vec3 aVertexNormal;\nattribute vec4 aVertextColor;\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\nuniform mat4 uNMatrix;\n\nuniform vec4 uMaterialDiffuse;\nuniform vec3 uLightPosition[${lenLights}];\n\nvarying vec3 vNormal;\nvarying vec3 vLightRay[${lenLights}];\n\nvoid main(void) {\n    vec4 vertext = uMVMatrix * vec4(aVertexPosition, 1.0);\n    vNormal = vec3(uNMatrix * vec4(aVertexNormal, 1.0));\n    for (int i = 0; i < ${lenLights}; i++) {\n        vec4 lightPosition = uMVMatrix * vec4(uLightPosition[i], 1.0);\n        vLightRay[i] = vertext.xyz - lightPosition.xyz;\n    }\n\n    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n}"},634:function(t,a){t.exports="#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform bool uWireframe;\nuniform vec4 uMaterialAmbient;\nuniform vec4 uMaterialDiffuse;\n\nuniform bool uLightSource;\nuniform vec4 uLightAmbient;\nuniform vec4 uLightDiffuse[${lenLights}];\nuniform float uCutoff;\n\nvarying vec3 vNormal;\nvarying vec3 vLightRay[${lenLights}];\n\nvoid main(void) {\n    if (uWireframe || uLightSource) {\n        gl_FragColor = uMaterialDiffuse;\n    } else {\n        vec4 Ia = uLightAmbient * uMaterialAmbient;\n        vec4 finalColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n        vec3 N = normalize(vNormal);\n        vec3 L = vec3(0.0);\n        float lambertTerm = 0.0;\n\n        for (int i = 0; i < ${lenLights}; i++) {\n            L = normalize(vLightRay[i]);\n            lambertTerm = dot(N, -L);\n            if (lambertTerm > uCutoff) {\n                finalColor += uLightDiffuse[i] * uMaterialDiffuse * lambertTerm;\n            }\n        }\n\n        finalColor += Ia;\n        finalColor.a = 1.0;\n        gl_FragColor = finalColor;\n    }\n}"}});
!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="//swcho.github.io/ts_playground/dist/client/assets/",e(e.s=1928)}(Array(49).concat([function(t,e,n){"use strict";function i(t){return t>1?0:t<-1?u:Math.acos(t)}function r(t){return t>1?c:t<-1?-c:Math.asin(t)}function o(t){return(t=O(t/2))*t}n.d(e,"i",function(){return s}),n.d(e,"j",function(){return a}),n.d(e,"o",function(){return u}),n.d(e,"l",function(){return c}),n.d(e,"q",function(){return l}),n.d(e,"w",function(){return h}),n.d(e,"h",function(){return f}),n.d(e,"r",function(){return p}),n.d(e,"a",function(){return d}),n.d(e,"d",function(){return y}),n.d(e,"e",function(){return _}),n.d(e,"g",function(){return v}),n.d(e,"f",function(){return m}),n.d(e,"k",function(){return g}),n.d(e,"n",function(){return b}),n.d(e,"p",function(){return w}),n.d(e,"t",function(){return O}),n.d(e,"s",function(){return x}),n.d(e,"u",function(){return T}),n.d(e,"v",function(){return S}),e.b=i,e.c=r,e.m=o;var s=1e-6,a=1e-12,u=Math.PI,c=u/2,l=u/4,h=2*u,f=180/u,p=u/180,d=Math.abs,y=Math.atan,_=Math.atan2,v=Math.cos,m=Math.ceil,g=Math.exp,b=(Math.floor,Math.log),w=Math.pow,O=Math.sin,x=Math.sign||function(t){return t>0?1:t<0?-1:0},T=Math.sqrt,S=Math.tan},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(524);n.d(e,"a",function(){return i.a});var r=n(1958);n.d(e,"d",function(){return r.a});var o=n(824);n.d(e,"e",function(){return o.a});var s=n(1959);n.d(e,"f",function(){return s.a});var a=n(525);n.d(e,"g",function(){return a.a});var u=n(526);n.d(e,"h",function(){return u.a});var c=n(1960);n.d(e,"i",function(){return c.a});var l=n(1988);n.d(e,"j",function(){return l.a});var h=n(237);n.d(e,"k",function(){return h.b});var f=n(530);n.d(e,"l",function(){return f.a});var p=n(825);n.d(e,"m",function(){return p.a});var d=n(828);n.d(e,"n",function(){return d.b});var y=n(1989);n.d(e,"o",function(){return y.a});var _=n(1990);n.d(e,"p",function(){return _.a});var v=n(531);n.d(e,"q",function(){return v.a});var m=n(528);n.d(e,"c",function(){return m.c}),n.d(e,"b",function(){return m.a})},,,,,,,,function(t,e,n){"use strict";function i(t,e,n,s){function a(e){return t(e=new Date(+e)),e}return a.floor=a,a.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},a.range=function(n,i,r){var o=[];if(n=a.ceil(n),r=null==r?1:Math.floor(r),!(n<i&&r>0))return o;do{o.push(new Date(+n))}while(e(n,r),t(n),n<i);return o},a.filter=function(n){return i(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(a.count=function(e,i){return r.setTime(+e),o.setTime(+i),t(r),t(o),Math.floor(n(r,o))},a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?a.filter(s?function(e){return s(e)%t==0}:function(e){return a.count(0,e)%t==0}):a:null}),a}e.a=i;var r=new Date,o=new Date},,,function(t,e,n){"use strict";var i=n(812);n.d(e,"b",function(){return i.c}),n.d(e,"d",function(){return i.b}),n.d(e,"c",function(){return i.a});var r=n(308);n.d(e,"a",function(){return r.a});var o=n(813);n.d(e,"e",function(){return o.a});var s=n(1934);n.d(e,"f",function(){return s.a});var a=n(1935);n.d(e,"g",function(){return a.a});var u=n(815);n.d(e,"h",function(){return u.a});var c=n(817);n.d(e,"i",function(){return c.a});var l=n(1936);n.d(e,"j",function(){return l.a});var h=n(1939);n.d(e,"w",function(){return h.a});var f=n(1940);n.d(e,"x",function(){return f.a});var p=n(821);n.d(e,"y",function(){return p.a});var d=n(1941);n.d(e,"k",function(){return d.a});var y=n(1942);n.d(e,"l",function(){return y.a});var _=n(1943);n.d(e,"m",function(){return _.a});var v=n(1944);n.d(e,"n",function(){return v.a});var m=n(822);n.d(e,"o",function(){return m.a});var g=n(814);n.d(e,"p",function(){return g.a});var b=n(1945);n.d(e,"q",function(){return b.a});var w=n(522);n.d(e,"r",function(){return w.a});var O=n(819);n.d(e,"s",function(){return O.a});var x=n(1946);n.d(e,"t",function(){return x.a});var T=n(1947);n.d(e,"u",function(){return T.a});var S=n(1948);n.d(e,"v",function(){return S.a});var j=n(820);n.d(e,"B",function(){return j.a}),n.d(e,"z",function(){return j.b}),n.d(e,"A",function(){return j.c});var k=n(823);n.d(e,"C",function(){return k.a});var M=n(816);n.d(e,"D",function(){return M.a});var A=n(1949);n.d(e,"E",function(){return A.a})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";function i(t,e){this._groups=t,this._parents=e}function r(){return new i([[document.documentElement]],q)}n.d(e,"c",function(){return q}),e.a=i;var o=n(1961),s=n(1962),a=n(1963),u=n(1964),c=n(826),l=n(1966),h=n(1967),f=n(1968),p=n(1969),d=n(1970),y=n(1971),_=n(1972),v=n(1973),m=n(1974),g=n(1975),b=n(1976),w=n(828),O=n(1977),x=n(1978),T=n(1979),S=n(1980),j=n(1981),k=n(1982),M=n(1983),A=n(1984),P=n(1985),E=n(1986),N=n(528),C=n(1987),q=[null];i.prototype=r.prototype={constructor:i,select:o.a,selectAll:s.a,filter:a.a,data:u.a,enter:c.b,exit:l.a,merge:h.a,order:f.a,sort:p.a,call:d.a,nodes:y.a,node:_.a,size:v.a,empty:m.a,each:g.a,attr:b.a,style:w.a,property:O.a,classed:x.a,text:T.a,html:S.a,raise:j.a,lower:k.a,append:M.a,insert:A.a,remove:P.a,datum:E.a,on:N.b,dispatch:C.a},e.b=r},function(t,e,n){"use strict";var i=n(532);n.d(e,"a",function(){return i.a});var r=n(835);n.d(e,"b",function(){return r.a});var o=n(535);n.d(e,"c",function(){return o.b});var s=n(833);n.d(e,"d",function(){return s.a});var a=n(836);n.d(e,"g",function(){return a.a});var u=n(403);n.d(e,"m",function(){return u.a});var c=n(837);n.d(e,"n",function(){return c.a});var l=n(1995);n.d(e,"r",function(){return l.a});var h=n(838);n.d(e,"s",function(){return h.a});var f=n(1996);n.d(e,"t",function(){return f.a}),n.d(e,"u",function(){return f.b});var p=n(1999);n.d(e,"v",function(){return p.a});var d=n(832);n.d(e,"o",function(){return d.a}),n.d(e,"p",function(){return d.b}),n.d(e,"q",function(){return d.c});var y=n(2e3);n.d(e,"j",function(){return y.a}),n.d(e,"k",function(){return y.b});var _=n(2001);n.d(e,"l",function(){return _.a});var v=n(2002);n.d(e,"h",function(){return v.a}),n.d(e,"i",function(){return v.b});var m=n(2003);n.d(e,"e",function(){return m.b}),n.d(e,"f",function(){return m.a});var g=n(2004);n.d(e,"w",function(){return g.a})},function(t,e,n){"use strict";function i(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>h)throw new Error("too late");return n}function r(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>p)throw new Error("too late");return n}function o(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function s(t,e,n){function i(t){n.state=f,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)}function r(i){var l,h,_,m;if(n.state!==f)return s();for(l in c)if(m=c[l],m.name===n.name){if(m.state===d)return Object(u.c)(r);m.state===y?(m.state=v,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete c[l]):+l<e&&(m.state=v,m.timer.stop(),delete c[l])}if(Object(u.c)(function(){n.state===d&&(n.state=y,n.timer.restart(o,n.delay,n.time),o(i))}),n.state=p,n.on.call("start",t,t.__data__,n.index,n.group),n.state===p){for(n.state=d,a=new Array(_=n.tween.length),l=0,h=-1;l<_;++l)(m=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(a[++h]=m);a.length=h+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=_,1),r=-1,o=a.length;++r<o;)a[r].call(null,i);n.state===_&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){n.state=v,n.timer.stop(),delete c[e];for(var i in c)return;delete t.__transition}var a,c=t.__transition;c[e]=n,n.timer=Object(u.d)(i,0,n.time)}n.d(e,"c",function(){return f}),n.d(e,"d",function(){return p}),n.d(e,"b",function(){return _}),n.d(e,"a",function(){return v}),e.g=i,e.h=r,e.f=o;var a=n(291),u=n(404),c=Object(a.a)("start","end","interrupt"),l=[],h=0,f=1,p=2,d=3,y=4,_=5,v=6;e.e=function(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};s(t,n,{name:e,index:i,group:r,on:c,tween:l,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:h})}},,,,,function(t,e,n){"use strict";var i=n(533);n.d(e,"a",function(){return i.e}),n.d(e,"f",function(){return i.g}),n.d(e,"d",function(){return i.f});var r=n(1993);n.d(e,"e",function(){return r.a}),n.d(e,"c",function(){return r.b});var o=n(1994);n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function i(t){return Object(p.b)({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function r(t){return o(function(){return t})()}function o(t){function e(t){return t=w(t[0]*h.r,t[1]*h.r),[t[0]*k+m,g-t[1]*k]}function n(t){return(t=w.invert((t[0]-m)/k,(g-t[1])/k))&&[t[0]*h.h,t[1]*h.h]}function r(t,e){return t=v(t,e),[t[0]*k+m,g-t[1]*k]}function o(){w=Object(c.a)(b=Object(f.b)(N,C,q),v);var t=v(P,E);return m=M-t[0]*k,g=A+t[1]*k,p()}function p(){return S=j=null,e}var v,m,g,b,w,O,x,T,S,j,k=150,M=480,A=250,P=0,E=0,N=0,C=0,q=0,F=null,R=s.a,B=null,L=l.a,I=.5,D=Object(y.a)(r,I);return e.stream=function(t){return S&&j===t?S:S=_(i(b)(R(D(L(j=t)))))},e.preclip=function(t){return arguments.length?(R=t,F=void 0,p()):R},e.postclip=function(t){return arguments.length?(L=t,B=O=x=T=null,p()):L},e.clipAngle=function(t){return arguments.length?(R=+t?Object(a.a)(F=t*h.r):(F=null,s.a),p()):F*h.h},e.clipExtent=function(t){return arguments.length?(L=null==t?(B=O=x=T=null,l.a):Object(u.a)(B=+t[0][0],O=+t[0][1],x=+t[1][0],T=+t[1][1]),p()):null==B?null:[[B,O],[x,T]]},e.scale=function(t){return arguments.length?(k=+t,o()):k},e.translate=function(t){return arguments.length?(M=+t[0],A=+t[1],o()):[M,A]},e.center=function(t){return arguments.length?(P=t[0]%360*h.r,E=t[1]%360*h.r,o()):[P*h.h,E*h.h]},e.rotate=function(t){return arguments.length?(N=t[0]%360*h.r,C=t[1]%360*h.r,q=t.length>2?t[2]%360*h.r:0,o()):[N*h.h,C*h.h,q*h.h]},e.precision=function(t){return arguments.length?(D=Object(y.a)(r,I=t*t),p()):Object(h.u)(I)},e.fitExtent=function(t,n){return Object(d.a)(e,t,n)},e.fitSize=function(t,n){return Object(d.b)(e,t,n)},function(){return v=t.apply(this,arguments),e.invert=v.invert&&n,o()}}e.a=r,e.b=o;var s=n(851),a=n(857),u=n(408),c=n(850),l=n(546),h=n(49),f=n(407),p=n(409),d=n(549),y=n(2098),_=Object(p.b)({point:function(t,e){this.stream.point(t*h.r,e*h.r)}})},,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"d",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"e",function(){return a});var i=1e3,r=6e4,o=36e5,s=864e5,a=6048e5},,,,,,,function(t,e,n){"use strict";function i(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function r(t){return Object(s.k)().transition(t)}function o(){return++T}e.a=i,e.b=r,e.c=o;var s=n(125),a=n(2010),u=n(2011),c=n(2012),l=n(2013),h=n(2014),f=n(2015),p=n(2016),d=n(2017),y=n(2018),_=n(2019),v=n(2020),m=n(2021),g=n(2022),b=n(2023),w=n(2024),O=n(2025),x=n(405),T=0,S=s.k.prototype;i.prototype=r.prototype={constructor:i,select:_.a,selectAll:v.a,filter:f.a,merge:p.a,selection:m.a,transition:O.a,call:S.call,nodes:S.nodes,node:S.node,size:S.size,empty:S.empty,each:S.each,on:d.a,attr:a.a,attrTween:u.a,style:g.a,styleTween:b.a,text:w.a,remove:y.a,tween:x.a,delay:c.a,duration:l.a,ease:h.a}},function(t,e,n){"use strict";function i(){}e.a=i},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(1956);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var i=n(2045);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t,e){t&&a.hasOwnProperty(t.type)&&a[t.type](t,e)}function r(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function o(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)r(t[n],e,1);e.polygonEnd()}var s={Feature:function(t,e){i(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)i(n[r].geometry,e)}},a={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){r(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)r(n[i],e,0)},Polygon:function(t,e){o(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)o(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)i(n[r],e)}};e.a=function(t,e){t&&s.hasOwnProperty(t.type)?s[t.type](t,e):i(t,e)}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return o});var i=Array.prototype,r=i.map,o=i.slice},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},,,,,,,,,,,,,function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(){this.reset()}function r(t,e,n){var i=t.s=e+n,r=i-e,o=i-r;t.t=e-o+(n-r)}e.a=function(){return new i},i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){r(o,t,this.t),r(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i},function(t,e,n){"use strict";e.a=function(){return Math.random()}},function(t,e,n){var i;!function(r,o){void 0!==(i=function(){return o()}.call(e,n,e,t))&&(t.exports=i)}(0,function(){"use strict";function t(t){t(e)}var e;/**
	 *  Tone.js
	 *  @author Yotam Mann
	 *  @license http://opensource.org/licenses/MIT MIT License
	 *  @copyright 2014-2017 Yotam Mann
	 */
return function(t){e=t()}(function(){var t=function(){};t.prototype.toString=function(){for(var e in t){var n=e[0].match(/^[A-Z]$/),i=t[e]===this.constructor;if(t.isFunction(t[e])&&n&&i)return e}return"Tone"},t.prototype.dispose=function(){return this},t.prototype.set=function(e,n,i){if(t.isObject(e))i=n;else if(t.isString(e)){var r={};r[e]=n,e=r}t:for(var o in e){n=e[o];var s=this;if(-1!==o.indexOf(".")){for(var a=o.split("."),u=0;u<a.length-1;u++)if((s=s[a[u]])instanceof t){a.splice(0,u+1);var c=a.join(".");s.set(c,n);continue t}o=a[a.length-1]}var l=s[o];t.isUndef(l)||(t.Signal&&l instanceof t.Signal||t.Param&&l instanceof t.Param?l.value!==n&&(t.isUndef(i)?l.value=n:l.rampTo(n,i)):l instanceof AudioParam?l.value!==n&&(l.value=n):l instanceof t?l.set(n):l!==n&&(s[o]=n))}return this},t.prototype.get=function(e){t.isUndef(e)?e=this._collectDefaults(this.constructor):t.isString(e)&&(e=[e]);for(var n={},i=0;i<e.length;i++){var r=e[i],o=this,s=n;if(-1!==r.indexOf(".")){for(var a=r.split("."),u=0;u<a.length-1;u++){var c=a[u];s[c]=s[c]||{},s=s[c],o=o[c]}r=a[a.length-1]}var l=o[r];t.isObject(e[r])?s[r]=l.get():t.Signal&&l instanceof t.Signal?s[r]=l.value:t.Param&&l instanceof t.Param?s[r]=l.value:l instanceof AudioParam?s[r]=l.value:l instanceof t?s[r]=l.get():t.isFunction(l)||t.isUndef(l)||(s[r]=l)}return n},t.prototype._collectDefaults=function(e){var n=[];if(t.isUndef(e.defaults)||(n=Object.keys(e.defaults)),!t.isUndef(e._super))for(var i=this._collectDefaults(e._super),r=0;r<i.length;r++)-1===n.indexOf(i[r])&&n.push(i[r]);return n},t.defaults=function(e,n,i){var r={};if(1===e.length&&t.isObject(e[0]))r=e[0];else for(var o=0;o<n.length;o++)r[n[o]]=e[o];return t.isUndef(i.defaults)?t.isObject(i)?t.defaultArg(r,i):r:t.defaultArg(r,i.defaults)},t.defaultArg=function(e,n){if(t.isObject(e)&&t.isObject(n)){var i={};for(var r in e)i[r]=t.defaultArg(n[r],e[r]);for(var o in n)i[o]=t.defaultArg(e[o],n[o]);return i}return t.isUndef(e)?n:e},t.connectSeries=function(){for(var e=arguments[0],n=1;n<arguments.length;n++){var i=arguments[n];e.connect(i),e=i}return t},t.isUndef=function(t){return void 0===t},t.isFunction=function(t){return"function"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object},t.isBoolean=function(t){return"boolean"==typeof t},t.isArray=function(t){return Array.isArray(t)},t.isString=function(t){return"string"==typeof t},t.isNote=function(e){return t.isString(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)},t.noOp=function(){},t.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},t.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},t.State={Started:"started",Stopped:"stopped",Paused:"paused"},t.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},t.dbToGain=function(t){return Math.pow(2,t/6)},t.gainToDb=function(t){return Math.log(t)/Math.LN10*20},t.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},t.prototype.now=function(){return t.context.now()},t.now=function(){return t.context.now()},t.isPast=function(e){e<t.context.currentTime&&console.warn("Time '"+e+"' is in the past. Scheduled time must be ≥ AudioContext.currentTime")},t.extend=function(e,n){function i(){}t.isUndef(n)&&(n=t),i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e,e._super=n};var e=null;return Object.defineProperty(t,"context",{get:function(){return e},set:function(n){e=t.Context&&n instanceof t.Context?n:new t.Context(n),t.Context.emit("init",e)}}),Object.defineProperty(t.prototype,"context",{get:function(){return t.context}}),t.setContext=function(e){t.context=e},Object.defineProperty(t.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(t.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(t,"supported",{get:function(){var t=window.hasOwnProperty("AudioContext")||window.hasOwnProperty("webkitAudioContext"),e=window.hasOwnProperty("Promise"),n=window.hasOwnProperty("Worker");return t&&e&&n}}),Object.defineProperty(t,"initialized",{get:function(){return null!==e}}),t.getContext=function(e){if(t.initialized)e(t.context);else{var n=function(){e(t.context),t.Context.off("init",n)};t.Context.on("init",n)}return t},t.version="r11",window.TONE_SILENCE_VERSION_LOGGING||console.log("%c * Tone.js "+t.version+" * ","background: #000; color: #fff"),t}),t(function(t){return t.Emitter=function(){t.call(this),this._events={}},t.extend(t.Emitter),t.Emitter.prototype.on=function(t,e){for(var n=t.split(/\W+/),i=0;i<n.length;i++){var r=n[i];this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}return this},t.Emitter.prototype.off=function(e,n){for(var i=e.split(/\W+/),r=0;r<i.length;r++)if(e=i[r],this._events.hasOwnProperty(e))if(t.isUndef(n))this._events[e]=[];else for(var o=this._events[e],s=0;s<o.length;s++)o[s]===n&&o.splice(s,1);return this},t.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var n=this._events[t],i=0,r=n.length;i<r;i++)n[i].apply(this,e)}return this},t.Emitter.mixin=function(e){var n=["on","off","emit"];e._events={};for(var i=0;i<n.length;i++){var r=n[i],o=t.Emitter.prototype[r];e[r]=o}return t.Emitter},t.Emitter.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=null,this},t.Emitter}),t(function(t){return t.Timeline=function(){var e=t.defaults(arguments,["memory"],t.Timeline);t.call(this),this._timeline=[],this._toRemove=[],this._toAdd=[],this._iterating=!1,this.memory=e.memory},t.extend(t.Timeline),t.Timeline.defaults={memory:1/0},Object.defineProperty(t.Timeline.prototype,"length",{get:function(){return this._timeline.length}}),t.Timeline.prototype.add=function(e){if(t.isUndef(e.time))throw new Error("Tone.Timeline: events must have a time attribute");if(this._iterating)this._toAdd.push(e);else{var n=this._search(e.time);if(this._timeline.splice(n+1,0,e),this.length>this.memory){var i=this.length-this.memory;this._timeline.splice(0,i)}}return this},t.Timeline.prototype.remove=function(t){if(this._iterating)this._toRemove.push(t);else{var e=this._timeline.indexOf(t);-1!==e&&this._timeline.splice(e,1)}return this},t.Timeline.prototype.get=function(e,n){n=t.defaultArg(n,"time");var i=this._search(e,n);return-1!==i?this._timeline[i]:null},t.Timeline.prototype.peek=function(){return this._timeline[0]},t.Timeline.prototype.shift=function(){return this._timeline.shift()},t.Timeline.prototype.getAfter=function(e,n){n=t.defaultArg(n,"time");var i=this._search(e,n);return i+1<this._timeline.length?this._timeline[i+1]:null},t.Timeline.prototype.getBefore=function(e,n){n=t.defaultArg(n,"time");var i=this._timeline.length;if(i>0&&this._timeline[i-1][n]<e)return this._timeline[i-1];var r=this._search(e,n);return r-1>=0?this._timeline[r-1]:null},t.Timeline.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},t.Timeline.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},t.Timeline.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},t.Timeline.prototype._search=function(e,n){if(0===this._timeline.length)return-1;n=t.defaultArg(n,"time");var i=0,r=this._timeline.length,o=r;if(r>0&&this._timeline[r-1][n]<=e)return r-1;for(;i<o;){var s=Math.floor(i+(o-i)/2),a=this._timeline[s],u=this._timeline[s+1];if(a[n]===e){for(var c=s;c<this._timeline.length;c++){this._timeline[c][n]===e&&(s=c)}return s}if(a[n]<e&&u[n]>e)return s;a[n]>e?o=s:i=s+1}return-1},t.Timeline.prototype._iterate=function(e,n,i){this._iterating=!0,n=t.defaultArg(n,0),i=t.defaultArg(i,this._timeline.length-1);for(var r=n;r<=i;r++)e.call(this,this._timeline[r]);this._iterating=!1,this._toRemove.forEach(function(t){this.remove(t)}.bind(this)),this._toRemove=[],this._toAdd.forEach(function(t){this.add(t)}.bind(this)),this._toAdd=[]},t.Timeline.prototype.forEach=function(t){return this._iterate(t),this},t.Timeline.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},t.Timeline.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},t.Timeline.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},t.Timeline.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e.call(this,n)},0,n),this},t.Timeline.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=null,this._toRemove=null,this._toAdd=null,this},t.Timeline}),t(function(t){!window.hasOwnProperty("AudioContext")&&window.hasOwnProperty("webkitAudioContext")&&(window.AudioContext=window.webkitAudioContext),t.Context=function(){t.Emitter.call(this);var n=t.defaults(arguments,["context"],t.Context);n.context||(n.context=new window.AudioContext),this._context=n.context;for(var i in this._context)this._defineProperty(this._context,i);this._latencyHint=n.latencyHint,this._constants={},this.lookAhead=n.lookAhead,this._computedUpdateInterval=0,this._ticker=new e(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval),this._timeouts=new t.Timeline,this._timeoutIds=0,this.on("tick",this._timeoutLoop.bind(this))},t.extend(t.Context,t.Emitter),t.Emitter.mixin(t.Context),t.Context.defaults={clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.03},t.Context.prototype._defineProperty=function(e,n){t.isUndef(this[n])&&Object.defineProperty(this,n,{get:function(){return"function"==typeof e[n]?e[n].bind(e):e[n]},set:function(t){e[n]=t}})},t.Context.prototype.now=function(){return this._context.currentTime+this.lookAhead},t.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants[t]=r,r},t.Context.prototype._timeoutLoop=function(){for(var t=this.now();this._timeouts&&this._timeouts.length&&this._timeouts.peek().time<=t;)this._timeouts.shift().callback()},t.Context.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,time:n+e,id:this._timeoutIds}),this._timeoutIds},t.Context.prototype.clearTimeout=function(t){return this._timeouts.forEach(function(e){e.id===t&&this.remove(e)}),this},Object.defineProperty(t.Context.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t}}),Object.defineProperty(t.Context.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t}}),Object.defineProperty(t.Context.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(e){var n=e;if(this._latencyHint=e,t.isString(e))switch(e){case"interactive":n=.1,this._context.latencyHint=e;break;case"playback":n=.8,this._context.latencyHint=e;break;case"balanced":n=.25,this._context.latencyHint=e;break;case"fastest":this._context.latencyHint="interactive",n=.01}this.lookAhead=n,this.updateInterval=n/3}}),t.Context.prototype.dispose=function(){t.Context.emit("close",this),t.Emitter.prototype.dispose.call(this),this._ticker.dispose(),this._ticker=null,this._timeouts.dispose(),this._timeouts=null;for(var e in this._constants)this._constants[e].disconnect();return this._constants=null,this.close(),this};var e=function(e,n,i){this._type=n,this._updateInterval=i,this._callback=t.defaultArg(e,t.noOp),this._createClock()};return e.Type={Worker:"worker",Timeout:"timeout",Offline:"offline"},e.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob(["var timeoutTime = "+(1e3*this._updateInterval).toFixed(1)+";self.onmessage = function(msg){\ttimeoutTime = parseInt(msg.data);};function tick(){\tsetTimeout(tick, timeoutTime);\tself.postMessage('tick');}tick();"]),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},e.prototype._createTimeout=function(){this._timeout=setTimeout(function(){this._createTimeout(),this._callback()}.bind(this),1e3*this._updateInterval)},e.prototype._createClock=function(){if(this._type===e.Type.Worker)try{this._createWorker()}catch(t){this._type=e.Type.Timeout,this._createClock()}else this._type===e.Type.Timeout&&this._createTimeout()},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),this._type===e.Type.Worker&&this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()}}),e.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._worker&&(this._worker.terminate(),this._worker.onmessage=null,this._worker=null)},e.prototype.dispose=function(){this._disposeClock(),this._callback=null},t.getContext(function(){function e(e,n,r){if(e.input)r=t.defaultArg(r,0),t.isArray(e.input)?this.connect(e.input[r]):this.connect(e.input,n,r);else try{e instanceof AudioNode?i.call(this,e,n,r):i.call(this,e,n)}catch(t){throw new Error("error connecting to node: "+e+"\n"+t)}}function n(e,n,i){if(e&&e.input&&t.isArray(e.input))i=t.defaultArg(i,0),this.disconnect(e.input[i],n,0);else if(e&&e.input)this.disconnect(e.input,n,i);else try{r.apply(this,arguments)}catch(t){throw new Error("error disconnecting node: "+e+"\n"+t)}}var i=AudioNode.prototype.connect,r=AudioNode.prototype.disconnect;AudioNode.prototype.connect!==e&&(AudioNode.prototype.connect=e,AudioNode.prototype.disconnect=n)}),t.supported?t.context=new t.Context:console.warn("This browser does not support Tone.js"),t.Context}),t(function(t){return t.AudioNode=function(){t.call(this);var e=t.defaults(arguments,["context"],{context:t.context});this._context=e.context},t.extend(t.AudioNode),Object.defineProperty(t.AudioNode.prototype,"context",{get:function(){return this._context}}),t.AudioNode.prototype.createInsOuts=function(t,e){1===t?this.input=this.context.createGain():t>1&&(this.input=new Array(t)),1===e?this.output=this.context.createGain():e>1&&(this.output=new Array(e))},Object.defineProperty(t.AudioNode.prototype,"numberOfInputs",{get:function(){return this.input?t.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(t.AudioNode.prototype,"numberOfOutputs",{get:function(){return this.output?t.isArray(this.output)?this.output.length:1:0}}),t.AudioNode.prototype.connect=function(e,n,i){return t.isArray(this.output)?(n=t.defaultArg(n,0),this.output[n].connect(e,0,i)):this.output.connect(e,n,i),this},t.AudioNode.prototype.disconnect=function(e,n,i){t.isArray(this.output)?t.isNumber(e)?this.output[e].disconnect():(n=t.defaultArg(n,0),this.output[n].disconnect(e,0,i)):this.output.disconnect.apply(this.output,arguments)},t.AudioNode.prototype.chain=function(){for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},t.AudioNode.prototype.fan=function(){for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},window.AudioNode&&(AudioNode.prototype.chain=t.AudioNode.prototype.chain,AudioNode.prototype.fan=t.AudioNode.prototype.fan),t.AudioNode.prototype.dispose=function(){return t.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),t.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this._context=null,this},t.AudioNode}),t(function(t){return t.SignalBase=function(){t.AudioNode.call(this)},t.extend(t.SignalBase,t.AudioNode),t.SignalBase.prototype.connect=function(e,n,i){return t.Signal&&t.Signal===e.constructor||t.Param&&t.Param===e.constructor||t.TimelineSignal&&t.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),t.AudioNode.prototype.connect.call(this,e,n,i),this},t.SignalBase}),t(function(t){return t.WaveShaper=function(e,n){t.SignalBase.call(this),this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||t.isUndef(e)?this._curve=new Float32Array(t.defaultArg(e,1024)):t.isFunction(e)&&(this._curve=new Float32Array(t.defaultArg(n,1024)),this.setMap(e))},t.extend(t.WaveShaper,t.SignalBase),t.WaveShaper.prototype.setMap=function(t){for(var e=0,n=this._curve.length;e<n;e++){var i=e/(n-1)*2-1;this._curve[e]=t(i,e)}return this._shaper.curve=this._curve,this},Object.defineProperty(t.WaveShaper.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._curve=new Float32Array(t),this._shaper.curve=this._curve}}),Object.defineProperty(t.WaveShaper.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){if(-1===["none","2x","4x"].indexOf(t))throw new RangeError("Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'");this._shaper.oversample=t}}),t.WaveShaper.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},t.WaveShaper}),t(function(t){return t.TimeBase=function(e,n){if(!(this instanceof t.TimeBase))return new t.TimeBase(e,n);if(this._expr=this._noOp,e instanceof t.TimeBase)this.copy(e);else if(!t.isUndef(n)||t.isNumber(e)){n=t.defaultArg(n,this._defaultUnits);var i=this._primaryExpressions[n].method;this._expr=i.bind(this,e)}else t.isString(e)?this.set(e):t.isUndef(e)&&(this._expr=this._defaultExpr())},t.extend(t.TimeBase),t.TimeBase.prototype.set=function(t){return this._expr=this._parseExprString(t),this},t.TimeBase.prototype.clone=function(){var t=new this.constructor;return t.copy(this),t},t.TimeBase.prototype.copy=function(t){var e=t._expr();return this.set(e)},t.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\d+)n/i,method:function(t){return t=parseInt(t),1===t?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/t)}},t:{regexp:/^(\d+)t/i,method:function(t){return t=parseInt(t),this._beatsToUnits(8/(3*parseInt(t)))}},m:{regexp:/^(\d+)m/i,method:function(t){return this._beatsToUnits(parseInt(t)*this._timeSignature())}},i:{regexp:/^(\d+)i/i,method:function(t){return this._ticksToUnits(parseInt(t))}},hz:{regexp:/^(\d+(?:\.\d+)?)hz/i,method:function(t){return this._frequencyToUnits(parseFloat(t))}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=0;return t&&"0"!==t&&(i+=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(i+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i}},s:{regexp:/^(\d+(?:\.\d+)?s)/,method:function(t){return this._secondsToUnits(parseFloat(t))}},samples:{regexp:/^(\d+)samples/,method:function(t){return parseInt(t)/this.context.sampleRate}},default:{regexp:/^(\d+(?:\.\d+)?)/,method:function(t){return this._primaryExpressions[this._defaultUnits].method.call(this,t)}}},t.TimeBase.prototype._binaryExpressions={"+":{regexp:/^\+/,precedence:2,method:function(t,e){return t()+e()}},"-":{regexp:/^\-/,precedence:2,method:function(t,e){return t()-e()}},"*":{regexp:/^\*/,precedence:1,method:function(t,e){return t()*e()}},"/":{regexp:/^\//,precedence:1,method:function(t,e){return t()/e()}}},t.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\-/,method:function(t){return-t()}}},t.TimeBase.prototype._syntaxGlue={"(":{regexp:/^\(/},")":{regexp:/^\)/}},t.TimeBase.prototype._tokenize=function(t){for(var e=-1,n=[];t.length>0;){t=t.trim();var i=function(t,e){for(var n=["_binaryExpressions","_unaryExpressions","_primaryExpressions","_syntaxGlue"],i=0;i<n.length;i++){var r=e[n[i]];for(var o in r){var s=r[o],a=s.regexp,u=t.match(a);if(null!==u)return{method:s.method,precedence:s.precedence,regexp:s.regexp,value:u[0]}}}throw new SyntaxError("Tone.TimeBase: Unexpected token "+t)}(t,this);n.push(i),t=t.substr(i.value.length)}return{next:function(){return n[++e]},peek:function(){return n[e+1]}}},t.TimeBase.prototype._matchGroup=function(e,n,i){if(!t.isUndef(e))for(var r in n){var o=n[r];if(o.regexp.test(e.value)){if(t.isUndef(i))return o;if(o.precedence===i)return o}}return!1},t.TimeBase.prototype._parseBinary=function(e,n){t.isUndef(n)&&(n=2);var i;i=n<0?this._parseUnary(e):this._parseBinary(e,n-1);for(var r=e.peek();r&&this._matchGroup(r,this._binaryExpressions,n);)r=e.next(),i=r.method.bind(this,i,this._parseBinary(e,n-1)),r=e.peek();return i},t.TimeBase.prototype._parseUnary=function(t){var e,n;e=t.peek();var i=this._matchGroup(e,this._unaryExpressions);return i?(e=t.next(),n=this._parseUnary(t),i.method.bind(this,n)):this._parsePrimary(t)},t.TimeBase.prototype._parsePrimary=function(e){var n,i;if(n=e.peek(),t.isUndef(n))throw new SyntaxError("Tone.TimeBase: Unexpected end of expression");if(this._matchGroup(n,this._primaryExpressions)){n=e.next();var r=n.value.match(n.regexp);return n.method.bind(this,r[1],r[2],r[3])}if(n&&"("===n.value){if(e.next(),i=this._parseBinary(e),!(n=e.next())||")"!==n.value)throw new SyntaxError("Expected )");return i}throw new SyntaxError("Tone.TimeBase: Cannot process token "+n.value)},t.TimeBase.prototype._parseExprString=function(e){t.isString(e)||(e=e.toString());var n=this._tokenize(e);return this._parseBinary(n)},t.TimeBase.prototype._noOp=function(){return 0},t.TimeBase.prototype._defaultExpr=function(){return this._noOp},t.TimeBase.prototype._defaultUnits="s",t.TimeBase.prototype._frequencyToUnits=function(t){return 1/t},t.TimeBase.prototype._beatsToUnits=function(e){return 60/t.Transport.bpm.value*e},t.TimeBase.prototype._secondsToUnits=function(t){return t},t.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/t.Transport.PPQ)},t.TimeBase.prototype._timeSignature=function(){return t.Transport.timeSignature},t.TimeBase.prototype._pushExpr=function(e,n,i){return e instanceof t.TimeBase||(e=new this.constructor(e,i)),this._expr=this._binaryExpressions[n].method.bind(this,this._expr,e._expr),this},t.TimeBase.prototype.add=function(t,e){return this._pushExpr(t,"+",e)},t.TimeBase.prototype.sub=function(t,e){return this._pushExpr(t,"-",e)},t.TimeBase.prototype.mult=function(t,e){return this._pushExpr(t,"*",e)},t.TimeBase.prototype.div=function(t,e){return this._pushExpr(t,"/",e)},t.TimeBase.prototype.valueOf=function(){return this._expr()},t.TimeBase.prototype.dispose=function(){this._expr=null},t.TimeBase}),t(function(t){return t.Time=function(e,n){if(!(this instanceof t.Time))return new t.Time(e,n);this._plusNow=!1,t.TimeBase.call(this,e,n)},t.extend(t.Time,t.TimeBase),t.Time.prototype._unaryExpressions=Object.create(t.TimeBase.prototype._unaryExpressions),t.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){return t.Transport.nextSubdivision(e())}},t.Time.prototype._unaryExpressions.now={regexp:/^\+/,method:function(t){return this._plusNow=!0,t()}},t.Time.prototype.quantize=function(e,n){return n=t.defaultArg(n,1),this._expr=function(t,e,n){return t=t(),e=e.toSeconds(),t+(Math.round(t/e)*e-t)*n}.bind(this,this._expr,new this.constructor(e),n),this},t.Time.prototype.addNow=function(){return this._plusNow=!0,this},t.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},t.Time.prototype.copy=function(e){return t.TimeBase.prototype.copy.call(this,e),this._plusNow=e._plusNow,this},t.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=["1m","2n","4n","8n","16n","32n","64n","128n"],n=this._toNotationHelper(t,e),i=["1m","2n","2t","4n","4t","8n","8t","16n","16t","32n","32t","64n","64t","128n"],r=this._toNotationHelper(t,i);return r.split("+").length<n.split("+").length?r:n},t.Time.prototype._toNotationHelper=function(t,e){for(var n=this._notationToUnits(e[e.length-1]),i="",r=0;r<e.length;r++){var o=this._notationToUnits(e[r]),s=t/o;if(1-s%1<1e-6&&(s+=1e-6),(s=Math.floor(s))>0){if(i+=1===s?e[r]:s.toString()+"*"+e[r],(t-=s*o)<n)break;i+=" + "}}return""===i&&(i="0"),i},t.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,n=[e.n,e.t,e.m],i=0;i<n.length;i++){var r=n[i],o=t.match(r.regexp);if(o)return r.method.call(this,o[1])}},t.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,n=Math.floor(e/this._timeSignature()),i=e%1*4;return e=Math.floor(e)%this._timeSignature(),i=i.toString(),i.length>3&&(i=parseFloat(parseFloat(i).toFixed(3))),[n,e,i].join(":")},t.Time.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},t.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},t.Time.prototype.toSeconds=function(){return this.valueOf()},t.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},t.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},t.Time}),t(function(t){t.Frequency=function(e,n){if(!(this instanceof t.Frequency))return new t.Frequency(e,n);t.TimeBase.call(this,e,n)},t.extend(t.Frequency,t.TimeBase),t.Frequency.prototype._primaryExpressions=Object.create(t.TimeBase.prototype._primaryExpressions),t.Frequency.prototype._primaryExpressions.midi={regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return this.midiToFrequency(t)}},t.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var i=e[t.toLowerCase()],r=i+12*(parseInt(n)+1);return this.midiToFrequency(r)}},t.Frequency.prototype._primaryExpressions.tr={regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var i=1;return t&&"0"!==t&&(i*=this._beatsToUnits(this._timeSignature()*parseFloat(t))),e&&"0"!==e&&(i*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}},t.Frequency.prototype.transpose=function(e){return this._expr=function(e,n){return e()*t.intervalToFrequencyRatio(n)}.bind(this,this._expr,e),this},t.Frequency.prototype.harmonize=function(e){return this._expr=function(e,n){for(var i=e(),r=[],o=0;o<n.length;o++)r[o]=i*t.intervalToFrequencyRatio(n[o]);return r}.bind(this,this._expr,e),this},t.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},t.Frequency.prototype.toNote=function(){var e=this.valueOf(),i=Math.log(e/t.Frequency.A4)/Math.LN2,r=Math.round(12*i)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),n[r%12]+o.toString()},t.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},t.Frequency.prototype.toFrequency=function(){return this.valueOf()},t.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*t.Transport.PPQ)},t.Frequency.prototype._frequencyToUnits=function(t){return t},t.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(t.Transport.bpm.value*t.Transport.PPQ))},t.Frequency.prototype._beatsToUnits=function(e){return 1/t.TimeBase.prototype._beatsToUnits.call(this,e)},t.Frequency.prototype._secondsToUnits=function(t){return 1/t},t.Frequency.prototype._defaultUnits="hz";var e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},n=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return t.Frequency.A4=440,t.Frequency.prototype.midiToFrequency=function(e){return t.Frequency.A4*Math.pow(2,(e-69)/12)},t.Frequency.prototype.frequencyToMidi=function(e){return 69+Math.round(12*Math.log(e/t.Frequency.A4)/Math.LN2)},t.Frequency}),t(function(t){return t.TransportTime=function(e,n){if(!(this instanceof t.TransportTime))return new t.TransportTime(e,n);t.Time.call(this,e,n)},t.extend(t.TransportTime,t.Time),t.TransportTime.prototype._unaryExpressions=Object.create(t.Time.prototype._unaryExpressions),t.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(e){var n=this._secondsToTicks(e()),i=Math.ceil(t.Transport.ticks/n);return this._ticksToUnits(i*n)}},t.TransportTime.prototype._secondsToTicks=function(e){var n=this._beatsToUnits(1),i=e/n;return Math.round(i*t.Transport.PPQ)},t.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?t.Transport.ticks:0)},t.TransportTime.prototype.toTicks=function(){return this.valueOf()},t.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?t.Transport.seconds:0)},t.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},t.TransportTime}),t(function(t){return t.Type={Default:"number",Time:"time",Frequency:"frequency",TransportTime:"transportTime",Ticks:"ticks",NormalRange:"normalRange",AudioRange:"audioRange",Decibels:"db",Interval:"interval",BPM:"bpm",Positive:"positive",Gain:"gain",Cents:"cents",Degrees:"degrees",MIDI:"midi",BarsBeatsSixteenths:"barsBeatsSixteenths",Samples:"samples",Hertz:"hertz",Note:"note",Milliseconds:"milliseconds",Seconds:"seconds",Notation:"notation"},t.prototype.toSeconds=function(e){return t.isNumber(e)?e:t.isUndef(e)?this.now():t.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return t.isNumber(e)?e:t.isString(e)||t.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return t.isNumber(e)||t.isString(e)?new t.TransportTime(e).toTicks():t.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}),t(function(t){return t.Param=function(){var e=t.defaults(arguments,["param","units","convert"],t.Param);t.AudioNode.call(this),this._param=this.input=e.param,this.units=e.units,this.convert=e.convert,this.overridden=!1,this._lfo=null,t.isObject(e.lfo)?this.value=e.lfo:t.isUndef(e.value)||(this.value=e.value)},t.extend(t.Param,t.AudioNode),t.Param.defaults={units:t.Type.Default,convert:!0,param:void 0},Object.defineProperty(t.Param.prototype,"value",{get:function(){return this._toUnits(this._param.value)},set:function(e){if(t.isObject(e)){if(t.isUndef(t.LFO))throw new Error("Include 'Tone.LFO' to use an LFO as a Param value.");this._lfo&&this._lfo.dispose(),this._lfo=new t.LFO(e).start(),this._lfo.connect(this.input)}else{var n=this._fromUnits(e);this._param.cancelScheduledValues(0),this._param.value=n}}}),t.Param.prototype._fromUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Time:return this.toSeconds(e);case t.Type.Frequency:return this.toFrequency(e);case t.Type.Decibels:return t.dbToGain(e);case t.Type.NormalRange:return Math.min(Math.max(e,0),1);case t.Type.AudioRange:return Math.min(Math.max(e,-1),1);case t.Type.Positive:return Math.max(e,0);default:return e}},t.Param.prototype._toUnits=function(e){if(!this.convert&&!t.isUndef(this.convert))return e;switch(this.units){case t.Type.Decibels:return t.gainToDb(e);default:return e}},t.Param.prototype._minOutput=1e-5,t.Param.prototype.setValueAtTime=function(e,n){return n=this.toSeconds(n),t.isPast(n),this._param.setValueAtTime(this._fromUnits(e),n),this},t.Param.prototype.setRampPoint=function(e){e=t.defaultArg(e,this.now()),this.cancelAndHoldAtTime(this.context.currentTime);var n=this._param.value;return 0===n&&(n=this._minOutput),this._param.setValueAtTime(n,e),this},t.Param.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),t.isPast(n),this._param.linearRampToValueAtTime(e,n),this},t.Param.prototype.exponentialRampToValueAtTime=function(e,n){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),n=this.toSeconds(n),t.isPast(n),this._param.exponentialRampToValueAtTime(e,n),this},t.Param.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},t.Param.prototype.getTimeConstant=function(t){return Math.log(this.toSeconds(t)+1)/Math.log(200)},t.Param.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.setTargetAtTime(t,n,this.getTimeConstant(e)),this},t.Param.prototype.setTargetAtTime=function(t,e,n){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),n=Math.max(this._minOutput,n),this._param.setTargetAtTime(t,this.toSeconds(e),n),this},t.Param.prototype.setValueCurveAtTime=function(t,e,n){n=this.toSeconds(n),e=this.toSeconds(e),this.setValueAtTime(t[0],e);for(var i=n/(t.length-1),r=1;r<t.length;r++)this._param.linearRampToValueAtTime(this._fromUnits(t[r]),e+r*i);return this},t.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},t.Param.prototype.cancelAndHoldAtTime=function(t){if(t=this.toSeconds(t),this._param.cancelAndHoldAtTime)this._param.cancelAndHoldAtTime(t);else{var e=this.context.currentTime;this._param.cancelScheduledValues(e);var n=this._param.value;0===n&&(n=this._minOutput),this._param.setValueAtTime(n,e+this.sampleTime)}return this},t.Param.prototype.rampTo=function(e,n,i){return n=t.defaultArg(n,.1),this.units===t.Type.Frequency||this.units===t.Type.BPM||this.units===t.Type.Decibels?this.exponentialRampTo(e,n,i):this.linearRampTo(e,n,i),this},Object.defineProperty(t.Param.prototype,"lfo",{get:function(){return this._lfo}}),t.Param.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},t.Param}),t(function(t){return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),t.Gain=function(){var e=t.defaults(arguments,["gain","units"],t.Gain);t.AudioNode.call(this),this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new t.Param({param:this._gainNode.gain,units:e.units,value:e.gain,convert:e.convert}),this._readOnly("gain")},t.extend(t.Gain,t.AudioNode),t.Gain.defaults={gain:1,convert:!0},t.Gain.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable("gain"),this.gain.dispose(),this.gain=null},t.Gain}),t(function(t){return t.Signal=function(){var e=t.defaults(arguments,["value","units"],t.Signal),n=t.context.createGain();e.param=n.gain,t.Param.call(this,e),this.output=n,this.input=this._param=this.output.gain,this.context.getConstant(1).connect(this.output)},t.extend(t.Signal,t.Param),t.Signal.defaults={value:0,units:t.Type.Default,convert:!0},t.Signal.prototype.connect=t.SignalBase.prototype.connect,t.Signal.prototype.dispose=function(){return t.Param.prototype.dispose.call(this),this},t.Signal}),t(function(t){return t.TimelineSignal=function(){var e=t.defaults(arguments,["value","units"],t.Signal);t.Signal.call(this,e),this._events=new t.Timeline(100),this._initial=this._fromUnits(this._param.value),this.value=e.value,delete this.input},t.extend(t.TimelineSignal,t.Signal),t.TimelineSignal.Type={Linear:"linear",Exponential:"exponential",Target:"target",Set:"set"},Object.defineProperty(t.TimelineSignal.prototype,"value",{get:function(){var t=this.now(),e=this.getValueAtTime(t);return this._toUnits(e)},set:function(t){if(this._events){var e=this._fromUnits(t);this._initial=e,this.cancelScheduledValues(),this._param.value=e}}}),t.TimelineSignal.prototype.setValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Set,value:e,time:n}),this._param.setValueAtTime(e,n),this},t.TimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return e=this._fromUnits(e),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Linear,value:e,time:n}),this._param.linearRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){n=this.toSeconds(n);var i=this._searchBefore(n);i&&0===i.value&&this.setValueAtTime(this._minOutput,i.time),e=this._fromUnits(e);var r=Math.max(e,this._minOutput);return this._events.add({type:t.TimelineSignal.Type.Exponential,value:r,time:n}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,n-this.sampleTime),this.setValueAtTime(0,n)):this._param.exponentialRampToValueAtTime(e,n),this},t.TimelineSignal.prototype.setTargetAtTime=function(e,n,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=Math.max(this._minOutput,i),n=this.toSeconds(n),this._events.add({type:t.TimelineSignal.Type.Target,value:e,time:n,constant:i}),this._param.setTargetAtTime(e,n,i),this},t.TimelineSignal.prototype.setValueCurveAtTime=function(e,n,i,r){r=t.defaultArg(r,1),i=this.toSeconds(i),n=this.toSeconds(n);var o=i/(e.length-1);this.setValueAtTime(e[0]*r,n);for(var s=1;s<e.length;s++)this.linearRampToValueAtTime(e[s]*r,n+s*o);return this},t.TimelineSignal.prototype.cancelScheduledValues=function(t){return t=this.toSeconds(t),this._events.cancel(t),this._param.cancelScheduledValues(t),this},t.TimelineSignal.prototype.cancelAndHoldAtTime=function(t){return this.setRampPoint(this.toSeconds(t)),this},t.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var n=this._toUnits(this.getValueAtTime(e)),i=this._searchBefore(e);if(i&&i.time===e)this.cancelScheduledValues(e+this.sampleTime);else{var r=this._searchAfter(e);r&&(this.cancelScheduledValues(e),r.type===t.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(n,e):r.type===t.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(n,e))}return this.setValueAtTime(n,e),this},t.TimelineSignal.prototype.linearRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.linearRampToValueAtTime(t,n),this},t.TimelineSignal.prototype.exponentialRampToValueBetween=function(t,e,n){return this.setRampPoint(e),this.exponentialRampToValueAtTime(t,n),this},t.TimelineSignal.prototype._searchBefore=function(t){return this._events.get(t)},t.TimelineSignal.prototype._searchAfter=function(t){return this._events.getAfter(t)},t.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var n=this._searchAfter(e),i=this._searchBefore(e),r=this._initial;if(null===i)r=this._initial;else if(i.type===t.TimelineSignal.Type.Target){var o,s=this._events.getBefore(i.time);o=null===s?this._initial:s.value,r=this._exponentialApproach(i.time,o,i.value,i.constant,e)}else r=null===n?i.value:n.type===t.TimelineSignal.Type.Linear?this._linearInterpolate(i.time,i.value,n.time,n.value,e):n.type===t.TimelineSignal.Type.Exponential?this._exponentialInterpolate(i.time,i.value,n.time,n.value,e):i.value;return r},t.TimelineSignal.prototype.connect=t.SignalBase.prototype.connect,t.TimelineSignal.prototype._exponentialApproach=function(t,e,n,i,r){return n+(e-n)*Math.exp(-(r-t)/i)},t.TimelineSignal.prototype._linearInterpolate=function(t,e,n,i,r){return e+(r-t)/(n-t)*(i-e)},t.TimelineSignal.prototype._exponentialInterpolate=function(t,e,n,i,r){return(e=Math.max(this._minOutput,e))*Math.pow(i/e,(r-t)/(n-t))},t.TimelineSignal.prototype.dispose=function(){t.Signal.prototype.dispose.call(this),this._events.dispose(),this._events=null},t.TimelineSignal}),t(function(t){return t.Pow=function(e){t.SignalBase.call(this),this._exp=t.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,"value",{get:function(){return this._exp},set:function(t){this._exp=t,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}),t(function(t){return t.Envelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.AudioNode.call(this),this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this._attackCurve="linear",this._releaseCurve="exponential",this._sig=this.output=new t.TimelineSignal,this._sig.setValueAtTime(0,0),this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve},t.extend(t.Envelope,t.AudioNode),t.Envelope.defaults={attack:.01,decay:.1,sustain:.5,release:1,attackCurve:"linear",releaseCurve:"exponential"},Object.defineProperty(t.Envelope.prototype,"value",{get:function(){return this.getValueAtTime(this.now())}}),Object.defineProperty(t.Envelope.prototype,"attackCurve",{get:function(){if(t.isString(this._attackCurve))return this._attackCurve;if(t.isArray(this._attackCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].In===this._attackCurve)return e;return this._attackCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];t.isObject(n)?this._attackCurve=n.In:this._attackCurve=n}else{if(!t.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._attackCurve=e}}}),Object.defineProperty(t.Envelope.prototype,"releaseCurve",{get:function(){if(t.isString(this._releaseCurve))return this._releaseCurve;if(t.isArray(this._releaseCurve)){for(var e in t.Envelope.Type)if(t.Envelope.Type[e].Out===this._releaseCurve)return e;return this._releaseCurve}},set:function(e){if(t.Envelope.Type.hasOwnProperty(e)){var n=t.Envelope.Type[e];t.isObject(n)?this._releaseCurve=n.Out:this._releaseCurve=n}else{if(!t.isArray(e))throw new Error("Tone.Envelope: invalid curve: "+e);this._releaseCurve=e}}}),t.Envelope.prototype.triggerAttack=function(e,n){e=this.toSeconds(e);var i=this.toSeconds(this.attack),r=i,o=this.toSeconds(this.decay);n=t.defaultArg(n,1);var s=this.getValueAtTime(e);if(s>0){r=(1-s)/(1/r)}if("linear"===this._attackCurve)this._sig.linearRampTo(n,r,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(n,r,e);else if(r>0){this._sig.setRampPoint(e);var a=this._attackCurve;if(r<i){var u=1-r/i,c=Math.floor(u*this._attackCurve.length);a=this._attackCurve.slice(c),a[0]=s}this._sig.setValueCurveAtTime(a,e,r,n)}return this._sig.targetRampTo(n*this.sustain,o,r+e),this},t.Envelope.prototype.triggerRelease=function(e){e=this.toSeconds(e);var n=this.getValueAtTime(e);if(n>0){var i=this.toSeconds(this.release);if("linear"===this._releaseCurve)this._sig.linearRampTo(0,i,e);else if("exponential"===this._releaseCurve)this._sig.targetRampTo(0,i,e);else{var r=this._releaseCurve;t.isArray(r)&&(this._sig.setRampPoint(e),this._sig.setValueCurveAtTime(r,e,i,n))}}return this},t.Envelope.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},t.Envelope.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},t.Envelope.prototype.cancel=function(t){return this._sig.cancelScheduledValues(t),this},t.Envelope.prototype.connect=t.Signal.prototype.connect,function(){function e(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}var n,i,r=[];for(n=0;n<128;n++)r[n]=Math.sin(n/127*(Math.PI/2));var o=[];for(n=0;n<127;n++){i=n/127;var s=Math.sin(i*(2*Math.PI)*6.4-Math.PI/2)+1;o[n]=s/10+.83*i}o[127]=1;var a=[];for(n=0;n<128;n++)a[n]=Math.ceil(n/127*5)/5;var u=[];for(n=0;n<128;n++)i=n/127,u[n]=.5*(1-Math.cos(Math.PI*i));var c=[];for(n=0;n<128;n++){i=n/127;var l=4*Math.pow(i,3)+.2,h=Math.cos(l*Math.PI*2*i);c[n]=Math.abs(h*(1-i))}t.Envelope.Type={linear:"linear",exponential:"exponential",bounce:{In:e(c),Out:c},cosine:{In:r,Out:function(t){return t.slice(0).reverse()}(r)},step:{In:a,Out:e(a)},ripple:{In:o,Out:e(o)},sine:{In:u,Out:e(u)}}}(),t.Envelope.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._sig.dispose(),this._sig=null,this._attackCurve=null,this._releaseCurve=null,this},t.Envelope}),t(function(t){return t.AmplitudeEnvelope=function(){t.Envelope.apply(this,arguments),this.input=this.output=new t.Gain,this._sig.connect(this.output.gain)},t.extend(t.AmplitudeEnvelope,t.Envelope),t.AmplitudeEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this},t.AmplitudeEnvelope}),t(function(t){return window.AnalyserNode&&!AnalyserNode.prototype.getFloatTimeDomainData&&(AnalyserNode.prototype.getFloatTimeDomainData=function(t){var e=new Uint8Array(t.length);this.getByteTimeDomainData(e);for(var n=0;n<e.length;n++)t[n]=(e[n]-128)/128}),t.Analyser=function(){var e=t.defaults(arguments,["type","size"],t.Analyser);t.AudioNode.call(this),this._analyser=this.input=this.output=this.context.createAnalyser(),this._type=e.type,this._buffer=null,this.size=e.size,this.type=e.type},t.extend(t.Analyser,t.AudioNode),t.Analyser.defaults={size:1024,type:"fft",smoothing:.8},t.Analyser.Type={Waveform:"waveform",FFT:"fft"},t.Analyser.prototype.getValue=function(){return this._type===t.Analyser.Type.FFT?this._analyser.getFloatFrequencyData(this._buffer):this._type===t.Analyser.Type.Waveform&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(t.Analyser.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)}}),Object.defineProperty(t.Analyser.prototype,"type",{get:function(){return this._type},set:function(e){if(e!==t.Analyser.Type.Waveform&&e!==t.Analyser.Type.FFT)throw new TypeError("Tone.Analyser: invalid type: "+e);this._type=e}}),Object.defineProperty(t.Analyser.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t}}),t.Analyser.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.disconnect(),this._analyser=null,this._buffer=null},t.Analyser}),t(function(t){return t.Compressor=function(){var e=t.defaults(arguments,["threshold","ratio"],t.Compressor);t.AudioNode.call(this),this._compressor=this.input=this.output=this.context.createDynamicsCompressor(),this.threshold=new t.Param({param:this._compressor.threshold,units:t.Type.Decibels,convert:!1}),this.attack=new t.Param(this._compressor.attack,t.Type.Time),this.release=new t.Param(this._compressor.release,t.Type.Time),this.knee=new t.Param({param:this._compressor.knee,units:t.Type.Decibels,convert:!1}),this.ratio=new t.Param({param:this._compressor.ratio,convert:!1}),this._readOnly(["knee","release","attack","ratio","threshold"]),this.set(e)},t.extend(t.Compressor,t.AudioNode),t.Compressor.defaults={ratio:12,threshold:-24,release:.25,attack:.003,knee:30},t.Compressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["knee","release","attack","ratio","threshold"]),this._compressor.disconnect(),this._compressor=null,this.attack.dispose(),this.attack=null,this.release.dispose(),this.release=null,this.threshold.dispose(),this.threshold=null,this.ratio.dispose(),this.ratio=null,this.knee.dispose(),this.knee=null,this},t.Compressor}),t(function(t){return t.Add=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new t.Gain,this._param=this.input[1]=new t.Signal(e),this._param.connect(this._sum)},t.extend(t.Add,t.Signal),t.Add.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this},t.Add}),t(function(t){return t.Multiply=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new t.Gain,this._param=this.input[1]=this.output.gain,this._param.value=t.defaultArg(e,0)},t.extend(t.Multiply,t.Signal),t.Multiply.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},t.Multiply}),t(function(t){return t.Negate=function(){t.SignalBase.call(this),this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}),t(function(t){return t.Subtract=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new t.Gain,this._neg=new t.Negate,this._param=this.input[1]=new t.Signal(e),this._param.chain(this._neg,this._sum)},t.extend(t.Subtract,t.Signal),t.Subtract.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this},t.Subtract}),t(function(t){return t.GreaterThanZero=function(){t.SignalBase.call(this),this._thresh=this.output=new t.WaveShaper(function(t){return t<=0?0:1},127),this._scale=this.input=new t.Multiply(1e4),this._scale.connect(this._thresh)},t.extend(t.GreaterThanZero,t.SignalBase),t.GreaterThanZero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},t.GreaterThanZero}),t(function(t){return t.GreaterThan=function(e){t.Signal.call(this),this.createInsOuts(2,0),this._param=this.input[0]=new t.Subtract(e),this.input[1]=this._param.input[1],this._gtz=this.output=new t.GreaterThanZero,this._param.connect(this._gtz)},t.extend(t.GreaterThan,t.Signal),t.GreaterThan.prototype.dispose=function(){return t.Signal.prototype.dispose.call(this),this._gtz.dispose(),this._gtz=null,this},t.GreaterThan}),t(function(t){return t.Abs=function(){t.SignalBase.call(this),this._abs=this.input=this.output=new t.WaveShaper(function(t){return 0===t?0:Math.abs(t)},127)},t.extend(t.Abs,t.SignalBase),t.Abs.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},t.Abs}),t(function(t){return t.Modulo=function(e){t.SignalBase.call(this),this.createInsOuts(1,0),this._shaper=new t.WaveShaper(Math.pow(2,16)),this._multiply=new t.Multiply,this._subtract=this.output=new t.Subtract,this._modSignal=new t.Signal(e),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(e)},t.extend(t.Modulo,t.SignalBase),t.Modulo.prototype._setWaveShaper=function(t){this._shaper.setMap(function(e){return Math.floor((e+1e-4)/t)})},Object.defineProperty(t.Modulo.prototype,"value",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),t.Modulo.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},t.Modulo}),t(function(t){return t.AudioToGain=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return(t+1)/2})},t.extend(t.AudioToGain,t.SignalBase),t.AudioToGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.AudioToGain}),t(function(t){function e(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),n._eval(e[1]).connect(i,0,1),i}function n(t,e,n){var i=new t;return n._eval(e[0]).connect(i,0,0),i}function i(t){return t?parseFloat(t):void 0}function r(t){return t&&t.args?parseFloat(t.args):void 0}return t.Expr=function(){t.SignalBase.call(this);var e=this._replacements(Array.prototype.slice.call(arguments)),n=this._parseInputs(e);this._nodes=[],this.input=new Array(n);for(var i=0;i<n;i++)this.input[i]=this.context.createGain();var r,o=this._parseTree(e);try{r=this._eval(o)}catch(t){throw this._disposeNodes(),new Error("Tone.Expr: Could evaluate expression: "+e)}this.output=r},t.extend(t.Expr,t.SignalBase),t.Expr._Expressions={value:{signal:{regexp:/^\d+\.\d+|^\d+/,method:function(e){return new t.Signal(i(e))}},input:{regexp:/^\$\d/,method:function(t,e){return e.input[i(t.substr(1))]}}},glue:{"(":{regexp:/^\(/},")":{regexp:/^\)/},",":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:n.bind(this,t.Abs)},mod:{regexp:/^mod/,method:function(e,n){var i=r(e[1]),o=new t.Modulo(i);return n._eval(e[0]).connect(o),o}},pow:{regexp:/^pow/,method:function(e,n){var i=r(e[1]),o=new t.Pow(i);return n._eval(e[0]).connect(o),o}},a2g:{regexp:/^a2g/,method:function(e,n){var i=new t.AudioToGain;return n._eval(e[0]).connect(i),i}}},binary:{"+":{regexp:/^\+/,precedence:1,method:e.bind(this,t.Add)},"-":{regexp:/^\-/,precedence:1,method:function(i,r){return 1===i.length?n(t.Negate,i,r):e(t.Subtract,i,r)}},"*":{regexp:/^\*/,precedence:0,method:e.bind(this,t.Multiply)}},unary:{"-":{regexp:/^\-/,method:n.bind(this,t.Negate)},"!":{regexp:/^\!/,method:n.bind(this,t.NOT)}}},t.Expr.prototype._parseInputs=function(t){var e=t.match(/\$\d/g),n=0;if(null!==e)for(var i=0;i<e.length;i++){var r=parseInt(e[i].substr(1))+1;n=Math.max(n,r)}return n},t.Expr.prototype._replacements=function(t){for(var e=t.shift(),n=0;n<t.length;n++)e=e.replace(/\%/i,t[n]);return e},t.Expr.prototype._tokenize=function(e){for(var n=-1,i=[];e.length>0;){e=e.trim();var r=function(e){for(var n in t.Expr._Expressions){var i=t.Expr._Expressions[n];for(var r in i){var o=i[r],s=o.regexp,a=e.match(s);if(null!==a)return{type:n,value:a[0],method:o.method}}}throw new SyntaxError("Tone.Expr: Unexpected token "+e)}(e);i.push(r),e=e.substr(r.value.length)}return{next:function(){return i[++n]},peek:function(){return i[n+1]}}},t.Expr.prototype._parseTree=function(e){function n(t,e){return!l(t)&&"glue"===t.type&&t.value===e}function i(e,n,i){var r=t.Expr._Expressions[n];if(!l(e))for(var o in r){var s=r[o];if(s.regexp.test(e.value)){if(l(i))return!0;if(s.precedence===i)return!0}}return!1}function r(t){l(t)&&(t=5);var e;e=t<0?o():r(t-1);for(var n=c.peek();i(n,"binary",t);)n=c.next(),e={operator:n.value,method:n.method,args:[e,r(t-1)]},n=c.peek();return e}function o(){var t,e;return t=c.peek(),i(t,"unary")?(t=c.next(),e=o(),{operator:t.value,method:t.method,args:[e]}):s()}function s(){var t,e;if(t=c.peek(),l(t))throw new SyntaxError("Tone.Expr: Unexpected termination of expression");if("func"===t.type)return t=c.next(),a(t);if("value"===t.type)return t=c.next(),{method:t.method,args:t.value};if(n(t,"(")){if(c.next(),e=r(),t=c.next(),!n(t,")"))throw new SyntaxError("Expected )");return e}throw new SyntaxError("Tone.Expr: Parse error, cannot process token "+t.value)}function a(t){var e,i=[];if(e=c.next(),!n(e,"("))throw new SyntaxError('Tone.Expr: Expected ( in a function call "'+t.value+'"');if(e=c.peek(),n(e,")")||(i=u()),e=c.next(),!n(e,")"))throw new SyntaxError('Tone.Expr: Expected ) in a function call "'+t.value+'"');return{method:t.method,args:i,name:name}}function u(){for(var t,e,i=[];;){if(e=r(),l(e))break;if(i.push(e),t=c.peek(),!n(t,","))break;c.next()}return i}var c=this._tokenize(e),l=t.isUndef.bind(this);return r()},t.Expr.prototype._eval=function(e){if(!t.isUndef(e)){var n=e.method(e.args,this);return this._nodes.push(n),n}},t.Expr.prototype._disposeNodes=function(){for(var e=0;e<this._nodes.length;e++){var n=this._nodes[e];t.isFunction(n.dispose)?n.dispose():t.isFunction(n.disconnect)&&n.disconnect(),n=null,this._nodes[e]=null}this._nodes=null},t.Expr.prototype.dispose=function(){t.SignalBase.prototype.dispose.call(this),this._disposeNodes()},t.Expr}),t(function(t){return t.EqualPowerGain=function(){t.SignalBase.call(this),this._eqPower=this.input=this.output=new t.WaveShaper(function(e){return Math.abs(e)<.001?0:t.equalPowerScale(e)}.bind(this),4096)},t.extend(t.EqualPowerGain,t.SignalBase),t.EqualPowerGain.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},t.EqualPowerGain}),t(function(t){return t.CrossFade=function(e){t.AudioNode.call(this),this.createInsOuts(2,1),this.a=this.input[0]=new t.Gain,this.b=this.input[1]=new t.Gain,this.fade=new t.Signal(t.defaultArg(e,.5),t.Type.NormalRange),this._equalPowerA=new t.EqualPowerGain,this._equalPowerB=new t.EqualPowerGain,this._invert=new t.Expr("1 - $0"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly("fade")},t.extend(t.CrossFade,t.AudioNode),t.CrossFade.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("fade"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},t.CrossFade}),t(function(t){return t.Filter=function(){var e=t.defaults(arguments,["frequency","type","rolloff"],t.Filter);t.AudioNode.call(this),this.createInsOuts(1,1),this._filters=[],this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(0,t.Type.Cents),this.gain=new t.Signal({value:e.gain,convert:!1}),this.Q=new t.Signal(e.Q),this._type=e.type,this._rolloff=e.rolloff,this.rolloff=e.rolloff,this._readOnly(["detune","frequency","gain","Q"])},t.extend(t.Filter,t.AudioNode),t.Filter.defaults={type:"lowpass",frequency:350,rolloff:-12,Q:1,gain:0},Object.defineProperty(t.Filter.prototype,"type",{get:function(){return this._type},set:function(t){if(-1===["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t))throw new TypeError("Tone.Filter: invalid type "+t);this._type=t;for(var e=0;e<this._filters.length;e++)this._filters[e].type=t}}),Object.defineProperty(t.Filter.prototype,"rolloff",{get:function(){return this._rolloff},set:function(e){e=parseInt(e,10);var n=[-12,-24,-48,-96],i=n.indexOf(e);if(-1===i)throw new RangeError("Tone.Filter: rolloff can only be -12, -24, -48 or -96");i+=1,this._rolloff=e,this.input.disconnect();for(var r=0;r<this._filters.length;r++)this._filters[r].disconnect(),this._filters[r]=null;this._filters=new Array(i);for(var o=0;o<i;o++){var s=this.context.createBiquadFilter();s.type=this._type,this.frequency.connect(s.frequency),this.detune.connect(s.detune),this.Q.connect(s.Q),this.gain.connect(s.gain),this._filters[o]=s}var a=[this.input].concat(this._filters).concat([this.output]);t.connectSeries.apply(t,a)}}),t.Filter.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this);for(var e=0;e<this._filters.length;e++)this._filters[e].disconnect(),this._filters[e]=null;return this._filters=null,this._writable(["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.frequency=null,this.Q=null,this.detune.dispose(),this.detune=null,this.gain.dispose(),this.gain=null,this},t.Filter}),t(function(t){return t.MultibandSplit=function(){var e=t.defaults(arguments,["lowFrequency","highFrequency"],t.MultibandSplit);t.AudioNode.call(this),this.input=new t.Gain,this.output=new Array(3),this.low=this.output[0]=new t.Filter(0,"lowpass"),this._lowMidFilter=new t.Filter(0,"highpass"),this.mid=this.output[1]=new t.Filter(0,"lowpass"),this.high=this.output[2]=new t.Filter(0,"highpass"),this.lowFrequency=new t.Signal(e.lowFrequency,t.Type.Frequency),this.highFrequency=new t.Signal(e.highFrequency,t.Type.Frequency),this.Q=new t.Signal(e.Q),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.connect(this.low.frequency),this.lowFrequency.connect(this._lowMidFilter.frequency),this.highFrequency.connect(this.mid.frequency),this.highFrequency.connect(this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandSplit,t.AudioNode),t.MultibandSplit.defaults={lowFrequency:400,highFrequency:2500,Q:1},t.MultibandSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.low=null,this._lowMidFilter.dispose(),this._lowMidFilter=null,this.mid.dispose(),this.mid=null,this.high.dispose(),this.high=null,this.lowFrequency.dispose(),this.lowFrequency=null,this.highFrequency.dispose(),this.highFrequency=null,this.Q.dispose(),this.Q=null,this},t.MultibandSplit}),t(function(t){return t.EQ3=function(){var e=t.defaults(arguments,["low","mid","high"],t.EQ3);t.AudioNode.call(this),this.output=new t.Gain,this._multibandSplit=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this._lowGain=new t.Gain(e.low,t.Type.Decibels),this._midGain=new t.Gain(e.mid,t.Type.Decibels),this._highGain=new t.Gain(e.high,t.Type.Decibels),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),this._readOnly(["low","mid","high","lowFrequency","highFrequency"])},t.extend(t.EQ3,t.AudioNode),t.EQ3.defaults={low:0,mid:0,high:0,lowFrequency:400,highFrequency:2500},t.EQ3.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this._multibandSplit=null,this.lowFrequency=null,this.highFrequency=null,this._lowGain.dispose(),this._lowGain=null,this._midGain.dispose(),this._midGain=null,this._highGain.dispose(),this._highGain=null,this.low=null,this.mid=null,this.high=null,this.Q=null,this},t.EQ3}),t(function(t){return t.Scale=function(e,n){t.SignalBase.call(this),this._outputMin=t.defaultArg(e,0),this._outputMax=t.defaultArg(n,1),this._scale=this.input=new t.Multiply(1),this._add=this.output=new t.Add(0),this._scale.connect(this._add),this._setRange()},t.extend(t.Scale,t.SignalBase),Object.defineProperty(t.Scale.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(t.Scale.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),t.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},t.Scale.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},t.Scale}),t(function(t){return t.ScaleExp=function(e,n,i){t.SignalBase.call(this),this._scale=this.output=new t.Scale(e,n),this._exp=this.input=new t.Pow(t.defaultArg(i,2)),this._exp.connect(this._scale)},t.extend(t.ScaleExp,t.SignalBase),Object.defineProperty(t.ScaleExp.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),Object.defineProperty(t.ScaleExp.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaleExp.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),t.ScaleExp.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaleExp}),t(function(t){return window.DelayNode&&!AudioContext.prototype.createDelay&&(AudioContext.prototype.createDelay=AudioContext.prototype.createDelayNode),t.Delay=function(){var e=t.defaults(arguments,["delayTime","maxDelay"],t.Delay);t.AudioNode.call(this),this._delayNode=this.input=this.output=this.context.createDelay(this.toSeconds(e.maxDelay)),this.delayTime=new t.Param({param:this._delayNode.delayTime,units:t.Type.Time,value:e.delayTime}),this._readOnly("delayTime")},t.extend(t.Delay,t.AudioNode),t.Delay.defaults={maxDelay:1,delayTime:0},t.Delay.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._delayNode.disconnect(),this._delayNode=null,this._writable("delayTime"),this.delayTime=null,this},t.Delay}),t(function(t){return t.FeedbackCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance"],t.FeedbackCombFilter);t.AudioNode.call(this),this._delay=this.input=this.output=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._feedback,this._delay),this._readOnly(["resonance","delayTime"])},t.extend(t.FeedbackCombFilter,t.AudioNode),t.FeedbackCombFilter.defaults={delayTime:.1,resonance:.5},t.FeedbackCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["resonance","delayTime"]),this._delay.dispose(),this._delay=null,this.delayTime=null,this._feedback.dispose(),this._feedback=null,this.resonance=null,this},t.FeedbackCombFilter}),t(function(t){return t.FFT=function(){var e=t.defaults(arguments,["size"],t.FFT);e.type=t.Analyser.Type.FFT,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.FFT,t.AudioNode),t.FFT.defaults={size:1024},t.FFT.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.FFT.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.FFT.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.FFT}),t(function(t){return t.Follower=function(){var e=t.defaults(arguments,["attack","release"],t.Follower);t.AudioNode.call(this),this.createInsOuts(1,1),this._abs=new t.Abs,this._filter=this.context.createBiquadFilter(),this._filter.type="lowpass",this._filter.frequency.value=0,this._filter.Q.value=-100,this._frequencyValues=new t.WaveShaper,this._sub=new t.Subtract,this._delay=new t.Delay(this.blockTime),this._mult=new t.Multiply(1e4),this._attack=e.attack,this._release=e.release,this.input.chain(this._abs,this._filter,this.output),this._abs.connect(this._sub,0,1),this._filter.chain(this._delay,this._sub),this._sub.chain(this._mult,this._frequencyValues,this._filter.frequency),this._setAttackRelease(this._attack,this._release)},t.extend(t.Follower,t.AudioNode),t.Follower.defaults={attack:.05,release:.5},t.Follower.prototype._setAttackRelease=function(e,n){var i=this.blockTime;e=t.Time(e).toFrequency(),n=t.Time(n).toFrequency(),e=Math.max(e,i),n=Math.max(n,i),this._frequencyValues.setMap(function(t){return t<=0?e:n})},Object.defineProperty(t.Follower.prototype,"attack",{get:function(){return this._attack},set:function(t){this._attack=t,this._setAttackRelease(this._attack,this._release)}}),Object.defineProperty(t.Follower.prototype,"release",{get:function(){return this._release},set:function(t){this._release=t,this._setAttackRelease(this._attack,this._release)}}),t.Follower.prototype.connect=t.Signal.prototype.connect,t.Follower.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._filter.disconnect(),this._filter=null,this._frequencyValues.disconnect(),this._frequencyValues=null,this._delay.dispose(),this._delay=null,this._sub.disconnect(),this._sub=null,this._abs.dispose(),this._abs=null,this._mult.dispose(),this._mult=null,this._curve=null,this},t.Follower}),t(function(t){return t.ScaledEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.Envelope.call(this,e),e=t.defaultArg(e,t.ScaledEnvelope.defaults),this._exp=this.output=new t.Pow(e.exponent),this._scale=this.output=new t.Scale(e.min,e.max),this._sig.chain(this._exp,this._scale)},t.extend(t.ScaledEnvelope,t.Envelope),t.ScaledEnvelope.defaults={min:0,max:1,exponent:1},Object.defineProperty(t.ScaledEnvelope.prototype,"min",{get:function(){return this._scale.min},set:function(t){this._scale.min=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"max",{get:function(){return this._scale.max},set:function(t){this._scale.max=t}}),Object.defineProperty(t.ScaledEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.ScaledEnvelope.prototype.dispose=function(){return t.Envelope.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._exp.dispose(),this._exp=null,this},t.ScaledEnvelope}),t(function(t){return t.FrequencyEnvelope=function(){var e=t.defaults(arguments,["attack","decay","sustain","release"],t.Envelope);t.ScaledEnvelope.call(this,e),e=t.defaultArg(e,t.FrequencyEnvelope.defaults),this._octaves=e.octaves,this.baseFrequency=e.baseFrequency,this.octaves=e.octaves},t.extend(t.FrequencyEnvelope,t.Envelope),t.FrequencyEnvelope.defaults={baseFrequency:200,octaves:4,exponent:2},Object.defineProperty(t.FrequencyEnvelope.prototype,"baseFrequency",{get:function(){return this._scale.min},set:function(t){this._scale.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._scale.max=this.baseFrequency*Math.pow(2,t)}}),Object.defineProperty(t.FrequencyEnvelope.prototype,"exponent",{get:function(){return this._exp.value},set:function(t){this._exp.value=t}}),t.FrequencyEnvelope.prototype.dispose=function(){return t.ScaledEnvelope.prototype.dispose.call(this),this},t.FrequencyEnvelope}),t(function(t){return t.Gate=function(){var e=t.defaults(arguments,["threshold","attack","release"],t.Gate);t.AudioNode.call(this),this.createInsOuts(1,1),this._follower=new t.Follower(e.attack,e.release),this._gt=new t.GreaterThan(t.dbToGain(e.threshold)),this.input.connect(this.output),this.input.chain(this._gt,this._follower,this.output.gain)},t.extend(t.Gate,t.AudioNode),t.Gate.defaults={attack:.1,release:.1,threshold:-40},Object.defineProperty(t.Gate.prototype,"threshold",{get:function(){return t.gainToDb(this._gt.value)},set:function(e){this._gt.value=t.dbToGain(e)}}),Object.defineProperty(t.Gate.prototype,"attack",{get:function(){return this._follower.attack},set:function(t){this._follower.attack=t}}),Object.defineProperty(t.Gate.prototype,"release",{get:function(){return this._follower.release},set:function(t){this._follower.release=t}}),t.Gate.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._follower.dispose(),this._gt.dispose(),this._follower=null,this._gt=null,this},t.Gate}),t(function(t){function e(t){return function(e,n){n=this.toSeconds(n),t.apply(this,arguments);var i=this._events.get(n),r=this._events.previousEvent(i),o=this._getTickUntilEvent(r,n-this.sampleTime);return i.ticks=Math.max(o,0),this}}return t.TickSignal=function(e){e=t.defaultArg(e,1),t.TimelineSignal.call(this,{units:t.Type.Ticks,value:e}),this._events.memory=1/0},t.extend(t.TickSignal,t.TimelineSignal),t.TickSignal.prototype.setValueAtTime=e(t.TimelineSignal.prototype.setValueAtTime),t.TickSignal.prototype.linearRampToValueAtTime=e(t.TimelineSignal.prototype.linearRampToValueAtTime),t.TickSignal.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e),t=this._fromUnits(t);for(var i=this._events.get(e),r=0;r<=5;r++){var o=n*r+e,s=this._exponentialApproach(i.time,i.value,t,n,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},t.TickSignal.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e),t=this._fromUnits(t);var n=this._events.get(e);null===n&&(n={value:this._initial,time:0});for(var i=(e-n.time)/5,r=0;r<=5;r++){var o=i*r+n.time,s=this._exponentialInterpolate(n.time,n.value,e,t,o);this.linearRampToValueAtTime(this._toUnits(s),o)}return this},t.TickSignal.prototype._getTickUntilEvent=function(t,e){null===t&&(t={ticks:0,time:0});var n=this.getValueAtTime(t.time),i=this.getValueAtTime(e);return.5*(e-t.time)*(n+i)+t.ticks},t.TickSignal.prototype.getTickAtTime=function(t){t=this.toSeconds(t);var e=this._events.get(t);return this._getTickUntilEvent(e,t)},t.TickSignal.prototype.getDurationOfTicks=function(t,e){e=this.toSeconds(e);var n=this.getTickAtTime(e);return this.getTimeOfTick(n+t)-e},t.TickSignal.prototype.getTimeOfTick=function(e){var n=this._events.get(e,"ticks"),i=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&i&&i.type===t.TimelineSignal.Type.Linear&&n.value!==i.value){var r=this.getValueAtTime(n.time),o=this.getValueAtTime(i.time),s=(o-r)/(i.time-n.time),a=Math.sqrt(Math.pow(r,2)-2*s*(n.ticks-e)),u=(-r+a)/s,c=(-r-a)/s;return(u>0?u:c)+n.time}return n?0===n.value?1/0:n.time+(e-n.ticks)/n.value:e/this._initial},t.TickSignal}),t(function(t){return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(t,e){return this.add({state:t,time:e}),this},t.TimelineState}),t(function(t){return t.Clock=function(){var e=t.defaults(arguments,["callback","frequency"],t.Clock);t.Emitter.call(this),this.callback=e.callback,this._nextTick=0,this._lastState=t.State.Stopped,this.frequency=new t.TickSignal(e.frequency,t.Type.Frequency),this._readOnly("frequency"),this.ticks=0,this._state=new t.TimelineState(t.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on("tick",this._boundLoop)},t.extend(t.Clock,t.Emitter),t.Clock.defaults={callback:t.noOp,frequency:1},Object.defineProperty(t.Clock.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())}}),t.Clock.prototype.start=function(e,n){return e=this.toSeconds(e),this._state.getValueAtTime(e)!==t.State.Started&&(this._state.setStateAtTime(t.State.Started,e),this._state.get(e).offset=n),this},t.Clock.prototype.stop=function(e){return e=this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this},t.Clock.prototype.pause=function(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)===t.State.Started&&this._state.setStateAtTime(t.State.Paused,e),this},t.Clock.prototype._loop=function(){var e=this.now()+this.context.updateInterval,n=this._state.get(e);if(n){if(n.state!==this._lastState)switch(this._lastState=n.state,n.state){case t.State.Started:t.isUndef(n.offset)||(this.ticks=n.offset),this._nextTick=n.time,this.emit("start",n.time,this.ticks);break;case t.State.Stopped:this.ticks=0,this.emit("stop",n.time);break;case t.State.Paused:this.emit("pause",n.time)}for(;e>this._nextTick&&this._state;){var i=this._nextTick;if(this.frequency&&(this._nextTick+=this.frequency.getDurationOfTicks(1,this._nextTick),n.state===t.State.Started))try{this.callback(i),this.ticks++}catch(t){throw this.ticks++,t}}}},t.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},t.Clock.prototype.dispose=function(){t.Emitter.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._writable("frequency"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},t.Clock}),t(function(t){t.IntervalTimeline=function(){t.call(this),this._root=null,this._length=0},t.extend(t.IntervalTimeline),t.IntervalTimeline.prototype.add=function(n){if(t.isUndef(n.time)||t.isUndef(n.duration))throw new Error("Tone.IntervalTimeline: events must have time and duration parameters");var i=new e(n.time,n.time+n.duration,n);for(null===this._root?this._root=i:this._root.insert(i),this._length++;null!==i;)i.updateHeight(),i.updateMax(),this._rebalance(i),i=i.parent;return this},t.IntervalTimeline.prototype.remove=function(t){if(null!==this._root){var e=[];this._root.search(t.time,e);for(var n=0;n<e.length;n++){var i=e[n];if(i.event===t){this._removeNode(i),this._length--;break}}}return this},Object.defineProperty(t.IntervalTimeline.prototype,"length",{get:function(){return this._length}}),t.IntervalTimeline.prototype.cancel=function(t){return this.forEachAfter(t,function(t){this.remove(t)}.bind(this)),this},t.IntervalTimeline.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},t.IntervalTimeline.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},t.IntervalTimeline.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e,n,i=t.getBalance();if(i>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent=e.parent,e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),this._rebalance(n)}t.dispose()},t.IntervalTimeline.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),i=t.right;t.right=i.left,i.left=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},t.IntervalTimeline.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),i=t.left;t.left=i.right,i.right=t,null!==e?n?e.left=i:e.right=i:this._setRoot(i)},t.IntervalTimeline.prototype._rebalance=function(t){var e=t.getBalance();e>1?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},t.IntervalTimeline.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],i=1;i<e.length;i++)e[i].low>n.low&&(n=e[i]);return n.event}}return null},t.IntervalTimeline.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){e.push(t)});for(var n=0;n<e.length;n++){var i=e[n].event;i&&t(i)}}return this},t.IntervalTimeline.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n);for(var i=n.length-1;i>=0;i--){var r=n[i].event;r&&e(r)}}return this},t.IntervalTimeline.prototype.forEachAfter=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n);for(var i=n.length-1;i>=0;i--){e(n[i].event)}}return this},t.IntervalTimeline.prototype.dispose=function(){var t=[];null!==this._root&&this._root.traverse(function(e){t.push(e)});for(var e=0;e<t.length;e++)t[e].dispose();return t=null,this._root=null,this};var e=function(t,e,n){this.event=n,this.low=t,this.high=e,this.max=this.high,this._left=null,this._right=null,this.parent=null,this.height=0};return e.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},e.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},e.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},e.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},e.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},e.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},e.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},e.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}}),e.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t.IntervalTimeline}),t(function(t){return t.TransportEvent=function(e,n){n=t.defaultArg(n,t.TransportEvent.defaults),t.call(this),this.Transport=e,this.id=t.TransportEvent._eventId++,this.time=n.time,this.callback=n.callback,this._once=n.once},t.extend(t.TransportEvent),t.TransportEvent.defaults={once:!1,callback:t.noOp},t.TransportEvent._eventId=0,t.TransportEvent.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.Transport&&this.Transport.clear(this.id))},t.TransportEvent.prototype.dispose=function(){return t.prototype.dispose.call(this),this.Transport=null,this.callback=null,this},t.TransportEvent}),t(function(t){return t.TransportRepeatEvent=function(e,n){t.TransportEvent.call(this,e,n),n=t.defaultArg(n,t.TransportRepeatEvent.defaults),this.duration=n.duration,this._interval=n.interval,this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this),this.Transport.on("start loopStart",this._boundRestart),this._restart()},t.extend(t.TransportRepeatEvent,t.TransportEvent),t.TransportRepeatEvent.defaults={duration:1/0,interval:1},t.TransportRepeatEvent.prototype.invoke=function(e){this._createEvents(),t.TransportEvent.prototype.invoke.call(this,e)},t.TransportRepeatEvent.prototype._createEvents=function(){var e=this.Transport.ticks;e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i")))},t.TransportRepeatEvent.prototype._restart=function(){this.Transport.clear(this._currentId),this.Transport.clear(this._nextId);var e=this.Transport.ticks;this._nextTick=this.time,e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i")),this._nextTick+=this._interval,this._nextId=this.Transport.scheduleOnce(this.invoke.bind(this),t.TransportTime(this._nextTick,"i"))},t.TransportRepeatEvent.prototype.dispose=function(){return this.Transport.clear(this._currentId),this.Transport.clear(this._nextId),this.Transport.off("start loopStart",this._boundRestart),this._boundCreateEvents=null,t.TransportEvent.prototype.dispose.call(this),this},t.TransportRepeatEvent}),t(function(t){t.Transport=function(){t.Emitter.call(this),t.getContext(function(){this.loop=!1,this._loopStart=0,this._loopEnd=0,this._ppq=e.defaults.PPQ,this._clock=new t.Clock({callback:this._processTick.bind(this),frequency:0}),this._bindClockEvents(),this.bpm=this._clock.frequency,this.bpm._toUnits=this._toUnits.bind(this),this.bpm._fromUnits=this._fromUnits.bind(this),this.bpm.units=t.Type.BPM,this.bpm.value=e.defaults.bpm,this._readOnly("bpm"),this._timeSignature=e.defaults.timeSignature,this._scheduledEvents={},this._timeline=new t.Timeline,this._repeatedEvents=new t.IntervalTimeline,this._syncedSignals=[],this._swingTicks=e.defaults.PPQ/2,this._swingAmount=0}.bind(this))},t.extend(t.Transport,t.Emitter),t.Transport.defaults={bpm:120,swing:0,swingSubdivision:"8n",timeSignature:4,loopStart:0,loopEnd:"4m",PPQ:192},t.Transport.prototype._processTick=function(e){var n=this._clock.ticks;if(this._swingAmount>0&&n%this._ppq!=0&&n%(2*this._swingTicks)!=0){var i=n%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(i*Math.PI)*this._swingAmount;e+=t.Time(2*this._swingTicks/3,"i")*r}this.loop&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.ticks=this._loopStart,n=this._loopStart,this.emit("loopStart",e,this.seconds),this.emit("loop",e)),this._timeline.forEachAtTime(n,function(t){t.invoke(e)})},t.Transport.prototype.schedule=function(e,n){var i=new t.TransportEvent(this,{time:this.toTicks(n),callback:e});return this._addEvent(i,this._timeline)},t.Transport.prototype.scheduleRepeat=function(e,n,i,r){var o=new t.TransportRepeatEvent(this,{callback:e,interval:this.toTicks(n),time:this.toTicks(i),duration:this.toTicks(t.defaultArg(r,1/0))});return this._addEvent(o,this._repeatedEvents)},t.Transport.prototype.scheduleOnce=function(e,n){var i=new t.TransportEvent(this,{time:this.toTicks(n),callback:e,once:!0});return this._addEvent(i,this._timeline)},t.Transport.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},t.Transport.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},t.Transport.prototype.cancel=function(e){return e=t.defaultArg(e,0),e=this.toTicks(e),this._timeline.cancel(e),this._repeatedEvents.cancel(e),this},t.Transport.prototype._bindClockEvents=function(){this._clock.on("start",function(e,n){n=t.Time(this._clock.ticks,"i").toSeconds(),this.emit("start",e,n)}.bind(this)),this._clock.on("stop",function(t){this.emit("stop",t)}.bind(this)),this._clock.on("pause",function(t){this.emit("pause",t)}.bind(this))},Object.defineProperty(t.Transport.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())}}),t.Transport.prototype.start=function(e,n){return t.isUndef(n)||(n=this.toTicks(n)),this._clock.start(e,n),this},t.Transport.prototype.stop=function(t){return this._clock.stop(t),this},t.Transport.prototype.pause=function(t){return this._clock.pause(t),this},t.Transport.prototype.toggle=function(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!==t.State.Started?this.start(e):this.stop(e),this},Object.defineProperty(t.Transport.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(e){t.isArray(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}}),Object.defineProperty(t.Transport.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)}}),t.Transport.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Transport.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t}}),Object.defineProperty(t.Transport.prototype,"swingSubdivision",{get:function(){return t.Time(this._swingTicks,"i").toNotation()},set:function(t){this._swingTicks=this.toTicks(t)}}),Object.defineProperty(t.Transport.prototype,"position",{get:function(){return t.TransportTime(this.ticks,"i").toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"seconds",{get:function(){return t.TransportTime(this.ticks,"i").toSeconds()},set:function(t){var e=this.toTicks(t);this.ticks=e}}),Object.defineProperty(t.Transport.prototype,"progress",{get:function(){return this.loop?(this.ticks-this._loopStart)/(this._loopEnd-this._loopStart):0}}),Object.defineProperty(t.Transport.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(e){if(this._clock.ticks!==e){var n=this.now();this.state===t.State.Started?(this.emit("stop",n),this._clock.ticks=e,this.emit("start",n,this.seconds)):this._clock.ticks=e}}}),Object.defineProperty(t.Transport.prototype,"PPQ",{get:function(){return this._ppq},set:function(t){var e=this.bpm.value;this._ppq=t,this.bpm.value=e}}),t.Transport.prototype._fromUnits=function(t){return 1/(60/t/this.PPQ)},t.Transport.prototype._toUnits=function(t){return t/this.PPQ*60},t.Transport.prototype.nextSubdivision=function(e){e=this.toSeconds(e);var n;if(this.state!==t.State.Started)return 0;n=this._clock._nextTick;var i=t.Time(this.ticks,"i"),r=e-i%e;return 0===r&&(r=e),n+r},t.Transport.prototype.syncSignal=function(e,n){n||(n=0!==e._param.value?e._param.value/this.bpm._param.value:0);var i=new t.Gain(n);return this.bpm.chain(i,e._param),this._syncedSignals.push({ratio:i,signal:e,initial:e._param.value}),e._param.value=0,this},t.Transport.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal._param.value=n.initial,this._syncedSignals.splice(e,1))}return this},t.Transport.prototype.dispose=function(){return t.Emitter.prototype.dispose.call(this),this._clock.dispose(),this._clock=null,this._writable("bpm"),this.bpm=null,this._timeline.dispose(),this._timeline=null,this._repeatedEvents.dispose(),this._repeatedEvents=null,this};var e=t.Transport;return t.Transport=new e,t.Context.on("init",function(n){n.Transport instanceof e?t.Transport=n.Transport:t.Transport=new e,n.Transport=t.Transport}),t.Context.on("close",function(t){t.Transport instanceof e&&t.Transport.dispose()}),t.Transport}),t(function(t){return t.Volume=function(){var e=t.defaults(arguments,["volume"],t.Volume);t.AudioNode.call(this),this.output=this.input=new t.Gain(e.volume,t.Type.Decibels),this._unmutedVolume=e.volume,this.volume=this.output.gain,this._readOnly("volume"),this.mute=e.mute},t.extend(t.Volume,t.AudioNode),t.Volume.defaults={volume:0,mute:!1},Object.defineProperty(t.Volume.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}}),t.Volume.prototype.dispose=function(){return this.input.dispose(),t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this.volume.dispose(),this.volume=null,this},t.Volume}),t(function(t){t.Master=function(){t.AudioNode.call(this),t.getContext(function(){this.createInsOuts(1,0),this._volume=this.output=new t.Volume,this.volume=this._volume.volume,this._readOnly("volume"),this.input.chain(this.output,this.context.destination)}.bind(this))},t.extend(t.Master,t.AudioNode),t.Master.defaults={volume:0,mute:!1},Object.defineProperty(t.Master.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Master.prototype.chain=function(){this.input.disconnect(),this.input.chain.apply(this.input,arguments),arguments[arguments.length-1].connect(this.output)},t.Master.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null},t.AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this},window.AudioNode&&(AudioNode.prototype.toMaster=function(){return this.connect(t.Master),this});var e=t.Master;return t.Master=new e,t.Context.on("init",function(n){n.Master instanceof e?t.Master=n.Master:t.Master=new e,n.Master=t.Master}),t.Context.on("close",function(t){t.Master instanceof e&&t.Master.dispose()}),t.Master}),t(function(t){return t.Source=function(e){e=t.defaultArg(e,t.Source.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._state=new t.TimelineState(t.State.Stopped),this._state.memory=10,this._synced=!1,this._scheduled=[],this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=e.mute},t.extend(t.Source,t.AudioNode),t.Source.defaults={volume:0,mute:!1},Object.defineProperty(t.Source.prototype,"state",{get:function(){return this._synced?t.Transport.state===t.State.Started?this._state.getValueAtTime(t.Transport.seconds):t.State.Stopped:this._state.getValueAtTime(this.now())}}),Object.defineProperty(t.Source.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.Source.prototype._start=t.noOp,t.Source.prototype._stop=t.noOp,t.Source.prototype.start=function(e,n,i){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this.retrigger||this._state.getValueAtTime(e)!==t.State.Started||this.stop(e),this._state.setStateAtTime(t.State.Started,e),this._synced){var r=this._state.get(e);r.offset=t.defaultArg(n,0),r.duration=i;var o=t.Transport.schedule(function(t){this._start(t,n,i)}.bind(this),e);this._scheduled.push(o)}else this._start.apply(this,arguments);return this},t.Source.prototype.stop=function(e){if(e=t.isUndef(e)&&this._synced?t.Transport.seconds:this.toSeconds(e),this._state.cancel(e),this._state.setStateAtTime(t.State.Stopped,e),this._synced){var n=t.Transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop.apply(this,arguments);return this},t.Source.prototype.sync=function(){return this._synced=!0,this._syncedStart=function(e,n){if(n>0){var i=this._state.get(n);if(i&&i.state===t.State.Started&&i.time!==n){var r,o=n-this.toSeconds(i.time);i.duration&&(r=this.toSeconds(i.duration)-o),this._start(e,this.toSeconds(i.offset)+o,r)}}}.bind(this),this._syncedStop=function(e){this._state.getValueAtTime(t.Transport.seconds)===t.State.Started&&this._stop(e)}.bind(this),t.Transport.on("start loopStart",this._syncedStart),t.Transport.on("stop pause loopEnd",this._syncedStop),this},t.Source.prototype.unsync=function(){this._synced&&(t.Transport.off("stop pause loopEnd",this._syncedStop),t.Transport.off("start loopStart",this._syncedStart)),this._synced=!1;for(var e=0;e<this._scheduled.length;e++){var n=this._scheduled[e];t.Transport.clear(n)}return this._scheduled=[],this._state.cancel(0),this},t.Source.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this.unsync(),this._scheduled=null,this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this._state.dispose(),this._state=null},t.Source}),t(function(t){return window.OscillatorNode&&!OscillatorNode.prototype.start&&(OscillatorNode.prototype.start=OscillatorNode.prototype.noteOn,OscillatorNode.prototype.stop=OscillatorNode.prototype.noteOff,OscillatorNode.prototype.setPeriodicWave||(OscillatorNode.prototype.setPeriodicWave=OscillatorNode.prototype.setWaveTable),AudioContext.prototype.createPeriodicWave||(AudioContext.prototype.createPeriodicWave=AudioContext.prototype.createWaveTable)),t.Oscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.Oscillator);t.Source.call(this,e),this._oscillator=null,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._wave=null,this._partials=t.defaultArg(e.partials,[1]),this._phase=e.phase,this._type=null,this.type=e.type,this.phase=this._phase,this._readOnly(["frequency","detune"])},t.extend(t.Oscillator,t.Source),t.Oscillator.defaults={type:"sine",frequency:440,detune:0,phase:0,partials:[]},t.Oscillator.Type={Sine:"sine",Triangle:"triangle",Sawtooth:"sawtooth",Square:"square",Custom:"custom"},t.Oscillator.prototype._start=function(e){this._oscillator=this.context.createOscillator(),this._oscillator.setPeriodicWave(this._wave),this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),e=this.toSeconds(e),t.isPast(e),this._oscillator.start(e)},t.Oscillator.prototype._stop=function(e){return this._oscillator&&(e=this.toSeconds(e),t.isPast(e),this._oscillator.stop(e),this._oscillator=null),this},t.Oscillator.prototype.syncFrequency=function(){return t.Transport.syncSignal(this.frequency),this},t.Oscillator.prototype.unsyncFrequency=function(){return t.Transport.unsyncSignal(this.frequency),this},Object.defineProperty(t.Oscillator.prototype,"type",{get:function(){return this._type},set:function(t){var e=this._getRealImaginary(t,this._phase),n=this.context.createPeriodicWave(e[0],e[1]);this._wave=n,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),this._type=t}}),t.Oscillator.prototype._getRealImaginary=function(e,n){var i=2048,r=new Float32Array(i),o=new Float32Array(i),s=1;if(e===t.Oscillator.Type.Custom)s=this._partials.length+1,i=s;else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);a&&(s=parseInt(a[2])+1,e=a[1],s=Math.max(s,2),i=s)}for(var u=1;u<i;++u){var c,l=2/(u*Math.PI);switch(e){case t.Oscillator.Type.Sine:c=u<=s?1:0;break;case t.Oscillator.Type.Square:c=1&u?2*l:0;break;case t.Oscillator.Type.Sawtooth:c=l*(1&u?1:-1);break;case t.Oscillator.Type.Triangle:c=1&u?l*l*2*(u-1>>1&1?-1:1):0;break;case t.Oscillator.Type.Custom:c=this._partials[u-1];break;default:throw new TypeError("Tone.Oscillator: invalid type: "+e)}0!==c?(r[u]=-c*Math.sin(n*u),o[u]=c*Math.cos(n*u)):(r[u]=0,o[u]=0)}return[r,o]},t.Oscillator.prototype._inverseFFT=function(t,e,n){for(var i=0,r=t.length,o=0;o<r;o++)i+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return i},t.Oscillator.prototype._getInitialValue=function(){for(var t=this._getRealImaginary(this._type,0),e=t[0],n=t[1],i=0,r=2*Math.PI,o=0;o<8;o++)i=Math.max(this._inverseFFT(e,n,o/8*r),i);return-this._inverseFFT(e,n,this._phase)/i},Object.defineProperty(t.Oscillator.prototype,"partials",{get:function(){return this._type!==t.Oscillator.Type.Custom?[]:this._partials},set:function(e){this._partials=e,this.type=t.Oscillator.Type.Custom}}),Object.defineProperty(t.Oscillator.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type}}),t.Oscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._oscillator&&(this._oscillator.disconnect(),this._oscillator=null),this._wave=null,this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._partials=null,this},t.Oscillator}),t(function(t){return t.Zero=function(){t.SignalBase.call(this),this._gain=this.input=this.output=new t.Gain,this.context.getConstant(0).connect(this._gain)},t.extend(t.Zero,t.SignalBase),t.Zero.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._gain.dispose(),this._gain=null,this},t.Zero}),t(function(t){return t.LFO=function(){var e=t.defaults(arguments,["frequency","min","max"],t.LFO);t.AudioNode.call(this),this._oscillator=new t.Oscillator({frequency:e.frequency,type:e.type}),this.frequency=this._oscillator.frequency,this.amplitude=this._oscillator.volume,this.amplitude.units=t.Type.NormalRange,this.amplitude.value=e.amplitude,this._stoppedSignal=new t.Signal(0,t.Type.AudioRange),this._zeros=new t.Zero,this._stoppedValue=0,this._a2g=new t.AudioToGain,this._scaler=this.output=new t.Scale(e.min,e.max),this._units=t.Type.Default,this.units=e.units,this._oscillator.chain(this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),this._readOnly(["amplitude","frequency"]),this.phase=e.phase},t.extend(t.LFO,t.AudioNode),t.LFO.defaults={type:"sine",min:0,max:1,phase:0,frequency:"4n",amplitude:1,units:t.Type.Default},t.LFO.prototype.start=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this},t.LFO.prototype.stop=function(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this},t.LFO.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},t.LFO.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(t.LFO.prototype,"min",{get:function(){return this._toUnits(this._scaler.min)},set:function(t){t=this._fromUnits(t),this._scaler.min=t}}),Object.defineProperty(t.LFO.prototype,"max",{get:function(){return this._toUnits(this._scaler.max)},set:function(t){t=this._fromUnits(t),this._scaler.max=t}}),Object.defineProperty(t.LFO.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator._getInitialValue(),this._stoppedSignal.value=this._stoppedValue}}),Object.defineProperty(t.LFO.prototype,"units",{get:function(){return this._units},set:function(t){var e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}}),Object.defineProperty(t.LFO.prototype,"mute",{get:function(){return this._oscillator.mute},set:function(t){this._oscillator.mute=t}}),Object.defineProperty(t.LFO.prototype,"state",{get:function(){return this._oscillator.state}}),t.LFO.prototype.connect=function(e){return e.constructor!==t.Signal&&e.constructor!==t.Param&&e.constructor!==t.TimelineSignal||(this.convert=e.convert,this.units=e.units),t.Signal.prototype.connect.apply(this,arguments),this},t.LFO.prototype._fromUnits=t.Param.prototype._fromUnits,t.LFO.prototype._toUnits=t.Param.prototype._toUnits,t.LFO.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["amplitude","frequency"]),this._oscillator.dispose(),this._oscillator=null,this._stoppedSignal.dispose(),this._stoppedSignal=null,this._zeros.dispose(),this._zeros=null,this._scaler.dispose(),this._scaler=null,this._a2g.dispose(),this._a2g=null,this.frequency=null,this.amplitude=null,this},t.LFO}),t(function(t){return t.Limiter=function(){var e=t.defaults(arguments,["threshold"],t.Limiter);t.AudioNode.call(this),this._compressor=this.input=this.output=new t.Compressor({attack:.001,decay:.001,threshold:e.threshold}),this.threshold=this._compressor.threshold,this._readOnly("threshold")},t.extend(t.Limiter,t.AudioNode),t.Limiter.defaults={threshold:-12},t.Limiter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._compressor.dispose(),this._compressor=null,this._writable("threshold"),this.threshold=null,this},t.Limiter}),t(function(t){return t.LowpassCombFilter=function(){var e=t.defaults(arguments,["delayTime","resonance","dampening"],t.LowpassCombFilter);t.AudioNode.call(this),this.createInsOuts(1,1),this._delay=this.input=new t.Delay(e.delayTime),this.delayTime=this._delay.delayTime,this._lowpass=this.output=this.context.createBiquadFilter(),this._lowpass.Q.value=-3.0102999566398125,this._lowpass.type="lowpass",this.dampening=new t.Param({param:this._lowpass.frequency,units:t.Type.Frequency,value:e.dampening}),this._feedback=new t.Gain(e.resonance,t.Type.NormalRange),this.resonance=this._feedback.gain,this._delay.chain(this._lowpass,this._feedback,this._delay),this._readOnly(["dampening","resonance","delayTime"])},t.extend(t.LowpassCombFilter,t.AudioNode),t.LowpassCombFilter.defaults={delayTime:.1,resonance:.5,dampening:3e3},t.LowpassCombFilter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["dampening","resonance","delayTime"]),this.dampening.dispose(),this.dampening=null,this.resonance.dispose(),this.resonance=null,this._delay.dispose(),this._delay=null,this.delayTime=null,this._lowpass.disconnect(),this._lowpass=null,this._feedback.disconnect(),this._feedback=null,this},t.LowpassCombFilter}),t(function(t){return t.Merge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.left=this.input[0]=new t.Gain,this.right=this.input[1]=new t.Gain,this._merger=this.output=this.context.createChannelMerger(2),this.left.connect(this._merger,0,0),this.right.connect(this._merger,0,1),this.left.channelCount=1,this.right.channelCount=1,this.left.channelCountMode="explicit",this.right.channelCountMode="explicit"},t.extend(t.Merge,t.AudioNode),t.Merge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._merger.disconnect(),this._merger=null,this},t.Merge}),t(function(t){return t.Meter=function(){var e=t.defaults(arguments,["smoothing"],t.Meter);t.AudioNode.call(this),this.input=this.output=this._analyser=new t.Analyser("waveform",1024),this.smoothing=e.smoothing},t.extend(t.Meter,t.AudioNode),t.Meter.defaults={smoothing:.8},t.Meter.prototype.getLevel=function(){this._analyser.type="fft";var t=this._analyser.getValue();return Math.max.apply(this,t)+28},t.Meter.prototype.getValue=function(){return this._analyser.type="waveform",this._analyser.getValue()[0]},Object.defineProperty(t.Meter.prototype,"smoothing",{get:function(){return this._analyser.smoothing},set:function(t){this._analyser.smoothing=t}}),t.Meter.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null,this},t.Meter}),t(function(t){return t.Split=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._splitter=this.input=this.context.createChannelSplitter(2),this._splitter.channelCount=2,this._splitter.channelCountMode="explicit",this.left=this.output[0]=new t.Gain,this.right=this.output[1]=new t.Gain,this._splitter.connect(this.left,0,0),this._splitter.connect(this.right,1,0)},t.extend(t.Split,t.AudioNode),t.Split.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.disconnect(),this.left.dispose(),this.left=null,this.right.dispose(),this.right=null,this._splitter=null,this},t.Split}),t(function(t){return t.MidSideSplit=function(){t.AudioNode.call(this),this.createInsOuts(0,2),this._split=this.input=new t.Split,this.mid=this.output[0]=new t.Expr("($0 + $1) * $2"),this.side=this.output[1]=new t.Expr("($0 - $1) * $2"),this._split.connect(this.mid,0,0),this._split.connect(this.mid,1,1),this._split.connect(this.side,0,0),this._split.connect(this.side,1,1),this.context.getConstant(Math.SQRT1_2).connect(this.mid,0,2),this.context.getConstant(Math.SQRT1_2).connect(this.side,0,2)},t.extend(t.MidSideSplit,t.AudioNode),t.MidSideSplit.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._split.dispose(),this._split=null,this},t.MidSideSplit}),t(function(t){return t.MidSideMerge=function(){t.AudioNode.call(this),this.createInsOuts(2,0),this.mid=this.input[0]=new t.Gain,this._left=new t.Expr("($0 + $1) * $2"),this.side=this.input[1]=new t.Gain,this._right=new t.Expr("($0 - $1) * $2"),this._merge=this.output=new t.Merge,this.mid.connect(this._left,0,0),this.side.connect(this._left,0,1),this.mid.connect(this._right,0,0),this.side.connect(this._right,0,1),this._left.connect(this._merge,0,0),this._right.connect(this._merge,0,1),this.context.getConstant(Math.SQRT1_2).connect(this._left,0,2),this.context.getConstant(Math.SQRT1_2).connect(this._right,0,2)},t.extend(t.MidSideMerge,t.AudioNode),t.MidSideMerge.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._left.dispose(),this._left=null,this._right.dispose(),this._right=null,this._merge.dispose(),this._merge=null,this},t.MidSideMerge}),t(function(t){return t.MidSideCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(e,t.MidSideCompressor.defaults),this._midSideSplit=this.input=new t.MidSideSplit,this._midSideMerge=this.output=new t.MidSideMerge,this.mid=new t.Compressor(e.mid),this.side=new t.Compressor(e.side),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),this._readOnly(["mid","side"])},t.extend(t.MidSideCompressor,t.AudioNode),t.MidSideCompressor.defaults={mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}},t.MidSideCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["mid","side"]),this.mid.dispose(),this.mid=null,this.side.dispose(),this.side=null,this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this},t.MidSideCompressor}),t(function(t){return t.Mono=function(){t.AudioNode.call(this),this.createInsOuts(1,0),this._merge=this.output=new t.Merge,this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1),this.input.gain.value=t.dbToGain(-10)},t.extend(t.Mono),t.Mono.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._merge.dispose(),this._merge=null,this},t.Mono}),t(function(t){return t.MultibandCompressor=function(e){t.AudioNode.call(this),e=t.defaultArg(arguments,t.MultibandCompressor.defaults),this._splitter=this.input=new t.MultibandSplit({lowFrequency:e.lowFrequency,highFrequency:e.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new t.Gain,this.low=new t.Compressor(e.low),this.mid=new t.Compressor(e.mid),this.high=new t.Compressor(e.high),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),this._readOnly(["high","mid","low","highFrequency","lowFrequency"])},t.extend(t.MultibandCompressor,t.AudioNode),t.MultibandCompressor.defaults={low:t.Compressor.defaults,mid:t.Compressor.defaults,high:t.Compressor.defaults,lowFrequency:250,highFrequency:2e3},t.MultibandCompressor.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._splitter.dispose(),this._writable(["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this._splitter=null,this.low=null,this.mid=null,this.high=null,this.lowFrequency=null,this.highFrequency=null,this},t.MultibandCompressor}),t(function(t){return t.Panner=function(e){t.AudioNode.call(this),t.Panner.hasStereoPanner?(this._panner=this.input=this.output=this.context.createStereoPanner(),this.pan=this._panner.pan):(this._crossFade=new t.CrossFade,this._merger=this.output=new t.Merge,this._splitter=this.input=new t.Split,this.pan=new t.Signal(0,t.Type.AudioRange),this._zero=new t.Zero,this._a2g=new t.AudioToGain,this._zero.connect(this._a2g),this.pan.chain(this._a2g,this._crossFade.fade),this._splitter.connect(this._crossFade,0,0),this._splitter.connect(this._crossFade,1,1),this._crossFade.a.connect(this._merger,0,0),this._crossFade.b.connect(this._merger,0,1)),this.pan.value=t.defaultArg(e,0),this._readOnly("pan")},t.extend(t.Panner,t.AudioNode),t.Panner.hasStereoPanner=t.context&&t.isFunction(t.context.createStereoPanner),t.Panner.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable("pan"),t.Panner.hasStereoPanner?(this._panner.disconnect(),this._panner=null,this.pan=null):(this._zero.dispose(),this._zero=null,this._crossFade.dispose(),this._crossFade=null,this._splitter.dispose(),this._splitter=null,this._merger.dispose(),this._merger=null,this.pan.dispose(),this.pan=null,this._a2g.dispose(),this._a2g=null),this},t.Panner}),t(function(t){return t.Panner3D=function(){var e=t.defaults(arguments,["positionX","positionY","positionZ"],t.Panner3D);t.AudioNode.call(this),this._panner=this.input=this.output=this.context.createPanner(),this._panner.panningModel=e.panningModel,this._panner.maxDistance=e.maxDistance,this._panner.distanceModel=e.distanceModel,this._panner.coneOuterGain=e.coneOuterGain,this._panner.coneOuterAngle=e.coneOuterAngle,this._panner.coneInnerAngle=e.coneInnerAngle,this._panner.refDistance=e.refDistance,this._panner.rolloffFactor=e.rolloffFactor,this._orientation=[e.orientationX,e.orientationY,e.orientationZ],this._position=[e.positionX,e.positionY,e.positionZ],this.orientationX=e.orientationX,this.orientationY=e.orientationY,this.orientationZ=e.orientationZ,this.positionX=e.positionX,this.positionY=e.positionY,this.positionZ=e.positionZ},t.extend(t.Panner3D,t.AudioNode),t.Panner3D.defaults={positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",maxDistance:1e4,distanceModel:"inverse",coneOuterGain:0,coneOuterAngle:360,coneInnerAngle:360,refDistance:1,rolloffFactor:1},t.Panner3D.prototype._rampTimeConstant=.01,t.Panner3D.prototype.setPosition=function(t,e,n){if(this._panner.positionX){var i=this.now();this._panner.positionX.setTargetAtTime(t,i,this._rampTimeConstant),this._panner.positionY.setTargetAtTime(e,i,this._rampTimeConstant),this._panner.positionZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this._panner.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Panner3D.prototype.setOrientation=function(t,e,n){if(this._panner.orientationX){var i=this.now();this._panner.orientationX.setTargetAtTime(t,i,this._rampTimeConstant),this._panner.orientationY.setTargetAtTime(e,i,this._rampTimeConstant),this._panner.orientationZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this._panner.setOrientation(t,e,n);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Panner3D.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Panner3D.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Panner3D.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Panner3D.prototype,"orientationX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Panner3D.prototype,"orientationY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Panner3D.prototype,"orientationZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),t.Panner3D._aliasProperty=function(e){Object.defineProperty(t.Panner3D.prototype,e,{set:function(t){this._panner[e]=t},get:function(){return this._panner[e]}})},t.Panner3D._aliasProperty("panningModel"),t.Panner3D._aliasProperty("refDistance"),t.Panner3D._aliasProperty("rolloffFactor"),t.Panner3D._aliasProperty("distanceModel"),t.Panner3D._aliasProperty("coneInnerAngle"),t.Panner3D._aliasProperty("coneOuterAngle"),t.Panner3D._aliasProperty("coneOuterGain"),t.Panner3D._aliasProperty("maxDistance"),t.Panner3D.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._panner.disconnect(),this._panner=null,this._orientation=null,this._position=null,this},t.Panner3D}),t(function(t){return t.PanVol=function(){var e=t.defaults(arguments,["pan","volume"],t.PanVol);t.AudioNode.call(this),this._panner=this.input=new t.Panner(e.pan),this.pan=this._panner.pan,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,this._readOnly(["pan","volume"])},t.extend(t.PanVol,t.AudioNode),t.PanVol.defaults={pan:0,volume:0,mute:!1},Object.defineProperty(t.PanVol.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.PanVol.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._writable(["pan","volume"]),this._panner.dispose(),this._panner=null,this.pan=null,this._volume.dispose(),this._volume=null,this.volume=null,this},t.PanVol}),t(function(t){return t.Solo=function(){var e=t.defaults(arguments,["solo"],t.Solo);t.AudioNode.call(this),this.input=this.output=new t.Gain,this._soloBind=this._soloed.bind(this),this.context.on("solo",this._soloBind),this.solo=e.solo},t.extend(t.Solo,t.AudioNode),t.Solo.defaults={solo:!1},Object.defineProperty(t.Solo.prototype,"solo",{get:function(){return this._isSoloed()},set:function(t){t?this._addSolo():this._removeSolo(),this.context.emit("solo",this)}}),Object.defineProperty(t.Solo.prototype,"muted",{get:function(){return 0===this.input.gain.value}}),t.Solo.prototype._addSolo=function(){t.isArray(this.context._currentSolo)||(this.context._currentSolo=[]),this._isSoloed()||this.context._currentSolo.push(this)},t.Solo.prototype._removeSolo=function(){if(this._isSoloed()){var t=this.context._currentSolo.indexOf(this);this.context._currentSolo.splice(t,1)}},t.Solo.prototype._isSoloed=function(){return!!t.isArray(this.context._currentSolo)&&(0!==this.context._currentSolo.length&&-1!==this.context._currentSolo.indexOf(this))},t.Solo.prototype._noSolos=function(){return!t.isArray(this.context._currentSolo)||0===this.context._currentSolo.length},t.Solo.prototype._soloed=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},t.Solo.prototype.dispose=function(){return this.context.off("solo",this._soloBind),this._removeSolo(),this._soloBind=null,t.AudioNode.prototype.dispose.call(this),this},t.Solo}),t(function(t){return t.Waveform=function(){var e=t.defaults(arguments,["size"],t.Waveform);e.type=t.Analyser.Type.Waveform,t.AudioNode.call(this),this._analyser=this.input=this.output=new t.Analyser(e)},t.extend(t.Waveform,t.AudioNode),t.Waveform.defaults={size:1024},t.Waveform.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(t.Waveform.prototype,"size",{get:function(){return this._analyser.size},set:function(t){this._analyser.size=t}}),t.Waveform.prototype.dispose=function(){t.AudioNode.prototype.dispose.call(this),this._analyser.dispose(),this._analyser=null},t.Waveform}),t(function(t){return t.CtrlInterpolate=function(){var e=t.defaults(arguments,["values","index"],t.CtrlInterpolate);t.call(this),this.values=e.values,this.index=e.index},t.extend(t.CtrlInterpolate),t.CtrlInterpolate.defaults={index:0,values:[]},Object.defineProperty(t.CtrlInterpolate.prototype,"value",{get:function(){var t=this.index;t=Math.min(t,this.values.length-1);var e=Math.floor(t),n=this.values[e],i=this.values[Math.ceil(t)];return this._interpolate(t-e,n,i)}}),t.CtrlInterpolate.prototype._interpolate=function(e,n,i){if(t.isArray(n)){for(var r=[],o=0;o<n.length;o++)r[o]=this._interpolate(e,n[o],i[o]);return r}if(t.isObject(n)){var s={};for(var a in n)s[a]=this._interpolate(e,n[a],i[a]);return s}return n=this._toNumber(n),i=this._toNumber(i),(1-e)*n+e*i},t.CtrlInterpolate.prototype._toNumber=function(e){return t.isNumber(e)?e:this.toSeconds(e)},t.CtrlInterpolate.prototype.dispose=function(){this.values=null},t.CtrlInterpolate}),t(function(t){return t.CtrlMarkov=function(e,n){t.call(this),this.values=t.defaultArg(e,{}),this.value=t.defaultArg(n,Object.keys(this.values)[0])},t.extend(t.CtrlMarkov),t.CtrlMarkov.prototype.next=function(){if(this.values.hasOwnProperty(this.value)){var e=this.values[this.value];if(t.isArray(e))for(var n=this._getProbDistribution(e),i=Math.random(),r=0,o=0;o<n.length;o++){var s=n[o];if(i>r&&i<r+s){var a=e[o];t.isObject(a)?this.value=a.value:this.value=a}r+=s}else this.value=e}return this.value},t.CtrlMarkov.prototype._getProbDistribution=function(e){for(var n=[],i=0,r=!1,o=0;o<e.length;o++){var s=e[o];t.isObject(s)?(r=!0,n[o]=s.probability):n[o]=1/e.length,i+=n[o]}if(r)for(var a=0;a<n.length;a++)n[a]=n[a]/i;return n},t.CtrlMarkov.prototype.dispose=function(){this.values=null},t.CtrlMarkov}),t(function(t){return t.CtrlPattern=function(){var e=t.defaults(arguments,["values","type"],t.CtrlPattern);t.call(this),this.values=e.values,this.index=0,this._type=null,this._shuffled=null,this._direction=null,this.type=e.type},t.extend(t.CtrlPattern),t.CtrlPattern.Type={Up:"up",Down:"down",UpDown:"upDown",DownUp:"downUp",AlternateUp:"alternateUp",AlternateDown:"alternateDown",Random:"random",RandomWalk:"randomWalk",RandomOnce:"randomOnce"},t.CtrlPattern.defaults={type:t.CtrlPattern.Type.Up,values:[]},Object.defineProperty(t.CtrlPattern.prototype,"value",{get:function(){if(0!==this.values.length){if(1===this.values.length)return this.values[0];this.index=Math.min(this.index,this.values.length-1);var e=this.values[this.index];return this.type===t.CtrlPattern.Type.RandomOnce&&(this.values.length!==this._shuffled.length&&this._shuffleValues(),e=this.values[this._shuffled[this.index]]),e}}}),Object.defineProperty(t.CtrlPattern.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._shuffled=null,this._type===t.CtrlPattern.Type.Up||this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.RandomOnce||this._type===t.CtrlPattern.Type.AlternateUp?this.index=0:this._type!==t.CtrlPattern.Type.Down&&this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this.index=this.values.length-1),this._type===t.CtrlPattern.Type.UpDown||this._type===t.CtrlPattern.Type.AlternateUp?this._direction=t.CtrlPattern.Type.Up:this._type!==t.CtrlPattern.Type.DownUp&&this._type!==t.CtrlPattern.Type.AlternateDown||(this._direction=t.CtrlPattern.Type.Down),this._type===t.CtrlPattern.Type.RandomOnce?this._shuffleValues():this._type===t.CtrlPattern.Random&&(this.index=Math.floor(Math.random()*this.values.length))}}),t.CtrlPattern.prototype.next=function(){var e=this.type;return e===t.CtrlPattern.Type.Up?++this.index>=this.values.length&&(this.index=0):e===t.CtrlPattern.Type.Down?--this.index<0&&(this.index=this.values.length-1):e===t.CtrlPattern.Type.UpDown||e===t.CtrlPattern.Type.DownUp?(this._direction===t.CtrlPattern.Type.Up?this.index++:this.index--,this.index<0?(this.index=1,this._direction=t.CtrlPattern.Type.Up):this.index>=this.values.length&&(this.index=this.values.length-2,this._direction=t.CtrlPattern.Type.Down)):e===t.CtrlPattern.Type.Random?this.index=Math.floor(Math.random()*this.values.length):e===t.CtrlPattern.Type.RandomWalk?Math.random()<.5?(this.index--,this.index=Math.max(this.index,0)):(this.index++,this.index=Math.min(this.index,this.values.length-1)):e===t.CtrlPattern.Type.RandomOnce?++this.index>=this.values.length&&(this.index=0,this._shuffleValues()):e===t.CtrlPattern.Type.AlternateUp?(this._direction===t.CtrlPattern.Type.Up?(this.index+=2,this._direction=t.CtrlPattern.Type.Down):(this.index-=1,this._direction=t.CtrlPattern.Type.Up),this.index>=this.values.length&&(this.index=0,this._direction=t.CtrlPattern.Type.Up)):e===t.CtrlPattern.Type.AlternateDown&&(this._direction===t.CtrlPattern.Type.Up?(this.index+=1,this._direction=t.CtrlPattern.Type.Down):(this.index-=2,this._direction=t.CtrlPattern.Type.Up),this.index<0&&(this.index=this.values.length-1,this._direction=t.CtrlPattern.Type.Down)),this.value},t.CtrlPattern.prototype._shuffleValues=function(){var t=[];this._shuffled=[];for(var e=0;e<this.values.length;e++)t[e]=e;for(;t.length>0;){var n=t.splice(Math.floor(t.length*Math.random()),1);this._shuffled.push(n[0])}},t.CtrlPattern.prototype.dispose=function(){this._shuffled=null,this.values=null},t.CtrlPattern}),t(function(t){return t.CtrlRandom=function(){var e=t.defaults(arguments,["min","max"],t.CtrlRandom);t.call(this),this.min=e.min,this.max=e.max,this.integer=e.integer},t.extend(t.CtrlRandom),t.CtrlRandom.defaults={min:0,max:1,integer:!1},Object.defineProperty(t.CtrlRandom.prototype,"value",{get:function(){var t=this.toSeconds(this.min),e=this.toSeconds(this.max),n=Math.random(),i=n*t+(1-n)*e;return this.integer&&(i=Math.floor(i)),i}}),t.CtrlRandom}),t(function(t){return window.AudioBuffer&&!AudioBuffer.prototype.copyToChannel&&(AudioBuffer.prototype.copyToChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<i.length;r++)i[r+n]=t[r]},AudioBuffer.prototype.copyFromChannel=function(t,e,n){var i=this.getChannelData(e);n=n||0;for(var r=0;r<t.length;r++)t[r]=i[r+n]}),t.Buffer=function(){var e=t.defaults(arguments,["url","onload","onerror"],t.Buffer);t.call(this),this._buffer=null,this._reversed=e.reverse,this._xhr=null,e.url instanceof AudioBuffer||e.url instanceof t.Buffer?(this.set(e.url),e.onload&&e.onload(this)):t.isString(e.url)&&this.load(e.url,e.onload,e.onerror)},t.extend(t.Buffer),t.Buffer.defaults={url:void 0,reverse:!1},t.Buffer.prototype.set=function(e){return e instanceof t.Buffer?this._buffer=e.get():this._buffer=e,this},t.Buffer.prototype.get=function(){return this._buffer},t.Buffer.prototype.load=function(e,n,i){return new Promise(function(r,o){this._xhr=t.Buffer.load(e,function(t){this._xhr=null,this.set(t),r(this),n&&n(this)}.bind(this),function(t){this._xhr=null,o(t),i&&i(t)}.bind(this))}.bind(this))},t.Buffer.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=null,this._xhr&&(t.Buffer._removeFromDownloadQueue(this._xhr),this._xhr.abort(),this._xhr=null),this},Object.defineProperty(t.Buffer.prototype,"loaded",{get:function(){return this.length>0}}),Object.defineProperty(t.Buffer.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0}}),Object.defineProperty(t.Buffer.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0}}),Object.defineProperty(t.Buffer.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0}}),t.Buffer.prototype.fromArray=function(t){var e=t[0].length>0,n=e?t.length:1,i=e?t[0].length:t.length,r=this.context.createBuffer(n,i,this.context.sampleRate);e||1!==n||(t=[t]);for(var o=0;o<n;o++)r.copyToChannel(t[o],o);return this._buffer=r,this},t.Buffer.prototype.toMono=function(e){if(t.isNumber(e))this.fromArray(this.toArray(e));else{for(var n=new Float32Array(this.length),i=this.numberOfChannels,r=0;r<i;r++)for(var o=this.toArray(r),s=0;s<o.length;s++)n[s]+=o[s];n=n.map(function(t){return t/i}),this.fromArray(n)}return this},t.Buffer.prototype.toArray=function(e){if(t.isNumber(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var n=[],i=0;i<this.numberOfChannels;i++)n[i]=this.getChannelData(i);return n},t.Buffer.prototype.getChannelData=function(t){return this._buffer.getChannelData(t)},t.Buffer.prototype.slice=function(e,n){n=t.defaultArg(n,this.duration);for(var i=Math.floor(this.context.sampleRate*this.toSeconds(e)),r=Math.floor(this.context.sampleRate*this.toSeconds(n)),o=[],s=0;s<this.numberOfChannels;s++)o[s]=this.toArray(s).slice(i,r);return(new t.Buffer).fromArray(o)},t.Buffer.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)Array.prototype.reverse.call(this.getChannelData(t));return this},Object.defineProperty(t.Buffer.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())}}),t.Emitter.mixin(t.Buffer),t.Buffer._downloadQueue=[],t.Buffer.baseUrl="",t.Buffer.fromArray=function(e){return(new t.Buffer).fromArray(e)},t.Buffer._removeFromDownloadQueue=function(e){var n=t.Buffer._downloadQueue.indexOf(e);-1!==n&&t.Buffer._downloadQueue.splice(n,1)},t.Buffer.load=function(e,n,i){function r(e){if(t.Buffer._removeFromDownloadQueue(l),t.Buffer.emit("error",e),!i)throw e;i(e)}function o(){for(var e=0,n=0;n<t.Buffer._downloadQueue.length;n++)e+=t.Buffer._downloadQueue[n].progress;t.Buffer.emit("progress",e/t.Buffer._downloadQueue.length)}n=t.defaultArg(n,t.noOp);var s=e.match(/\[(.+\|?)+\]$/);if(s){for(var a=s[1].split("|"),u=a[0],c=0;c<a.length;c++)if(t.Buffer.supportsType(a[c])){u=a[c];break}e=e.replace(s[0],u)}var l=new XMLHttpRequest;return l.open("GET",t.Buffer.baseUrl+e,!0),l.responseType="arraybuffer",l.progress=0,t.Buffer._downloadQueue.push(l),l.addEventListener("load",function(){200===l.status?t.context.decodeAudioData(l.response,function(e){l.progress=1,o(),n(e),t.Buffer._removeFromDownloadQueue(l),0===t.Buffer._downloadQueue.length&&t.Buffer.emit("load")},function(){t.Buffer._removeFromDownloadQueue(l),r("Tone.Buffer: could not decode audio data: "+e)}):r("Tone.Buffer: could not locate file: "+e)}),l.addEventListener("error",r),l.addEventListener("progress",function(t){t.lengthComputable&&(l.progress=t.loaded/t.total*.95,o())}),l.send(),l},t.Buffer.cancelDownloads=function(){return t.Buffer._downloadQueue.slice().forEach(function(e){t.Buffer._removeFromDownloadQueue(e),e.abort()}),t.Buffer},t.Buffer.supportsType=function(t){var e=t.split(".");return e=e[e.length-1],""!==document.createElement("audio").canPlayType("audio/"+e)},t.loaded=function(){function e(){t.Buffer.off("load",n),t.Buffer.off("error",i)}var n,i;return new Promise(function(e,r){n=function(){e()},i=function(){r()},t.Buffer.on("load",n),t.Buffer.on("error",i)}).then(e).catch(function(t){throw e(),new Error(t)})},t.Buffer}),t(function(t){return t.Buffers=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var i=t.defaults(n,["onload","baseUrl"],t.Buffers);t.call(this),this._buffers={},this.baseUrl=i.baseUrl,this._loadingCount=0;for(var r in e)this._loadingCount++,this.add(r,e[r],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Buffers),t.Buffers.defaults={onload:t.noOp,baseUrl:""},t.Buffers.prototype.has=function(t){return this._buffers.hasOwnProperty(t)},t.Buffers.prototype.get=function(t){if(this.has(t))return this._buffers[t];throw new Error("Tone.Buffers: no buffer named "+t)},t.Buffers.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Buffers.prototype,"loaded",{get:function(){var t=!0;for(var e in this._buffers){var n=this.get(e);t=t&&n.loaded}return t}}),t.Buffers.prototype.add=function(e,n,i){return i=t.defaultArg(i,t.noOp),n instanceof t.Buffer?(this._buffers[e]=n,i(this)):n instanceof AudioBuffer?(this._buffers[e]=new t.Buffer(n),i(this)):t.isString(n)&&(this._buffers[e]=new t.Buffer(this.baseUrl+n,i)),this},t.Buffers.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e in this._buffers)this._buffers[e].dispose();return this._buffers=null,this},t.Buffers}),t(function(t){var e={};return t.prototype.send=function(n,i){e.hasOwnProperty(n)||(e[n]=this.context.createGain()),i=t.defaultArg(i,0);var r=new t.Gain(i,t.Type.Decibels);return this.output.chain(r,e[n]),r},t.prototype.receive=function(t,n){return e.hasOwnProperty(t)||(e[t]=this.context.createGain()),e[t].connect(this,0,n),this},t.Context.on("init",function(t){t.Buses?e=t.Buses:(e={},t.Buses=e)}),t}),t(function(t){return t.Draw=function(){t.call(this),this._events=new t.Timeline,this.expiration=.25,this.anticipation=.008,this._boundDrawLoop=this._drawLoop.bind(this)},t.extend(t.Draw),t.Draw.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&requestAnimationFrame(this._boundDrawLoop),this},t.Draw.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},t.Draw.prototype._drawLoop=function(){for(var e=t.now();this._events.length&&this._events.peek().time-this.anticipation<=e;){var n=this._events.shift();e-n.time<=this.expiration&&n.callback()}this._events.length>0&&requestAnimationFrame(this._boundDrawLoop)},t.Draw=new t.Draw,t.Draw}),t(function(t){t.Listener=function(){t.call(this),this._orientation=[0,0,0,0,0,0],this._position=[0,0,0],t.getContext(function(){this.set(e.defaults)}.bind(this))},t.extend(t.Listener),t.Listener.defaults={positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:1,upX:0,upY:1,upZ:0},t.Listener.prototype._rampTimeConstant=.01,t.Listener.prototype.setPosition=function(t,e,n){if(this.context.listener.positionX){var i=this.now();this.context.listener.positionX.setTargetAtTime(t,i,this._rampTimeConstant),this.context.listener.positionY.setTargetAtTime(e,i,this._rampTimeConstant),this.context.listener.positionZ.setTargetAtTime(n,i,this._rampTimeConstant)}else this.context.listener.setPosition(t,e,n);return this._position=Array.prototype.slice.call(arguments),this},t.Listener.prototype.setOrientation=function(t,e,n,i,r,o){if(this.context.listener.forwardX){var s=this.now();this.context.listener.forwardX.setTargetAtTime(t,s,this._rampTimeConstant),this.context.listener.forwardY.setTargetAtTime(e,s,this._rampTimeConstant),this.context.listener.forwardZ.setTargetAtTime(n,s,this._rampTimeConstant),this.context.listener.upX.setTargetAtTime(i,s,this._rampTimeConstant),this.context.listener.upY.setTargetAtTime(r,s,this._rampTimeConstant),this.context.listener.upZ.setTargetAtTime(o,s,this._rampTimeConstant)}else this.context.listener.setOrientation(t,e,n,i,r,o);return this._orientation=Array.prototype.slice.call(arguments),this},Object.defineProperty(t.Listener.prototype,"positionX",{set:function(t){this._position[0]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[0]}}),Object.defineProperty(t.Listener.prototype,"positionY",{set:function(t){this._position[1]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[1]}}),Object.defineProperty(t.Listener.prototype,"positionZ",{set:function(t){this._position[2]=t,this.setPosition.apply(this,this._position)},get:function(){return this._position[2]}}),Object.defineProperty(t.Listener.prototype,"forwardX",{set:function(t){this._orientation[0]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[0]}}),Object.defineProperty(t.Listener.prototype,"forwardY",{set:function(t){this._orientation[1]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[1]}}),Object.defineProperty(t.Listener.prototype,"forwardZ",{set:function(t){this._orientation[2]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[2]}}),Object.defineProperty(t.Listener.prototype,"upX",{set:function(t){this._orientation[3]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[3]}}),Object.defineProperty(t.Listener.prototype,"upY",{set:function(t){this._orientation[4]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[4]}}),Object.defineProperty(t.Listener.prototype,"upZ",{set:function(t){this._orientation[5]=t,this.setOrientation.apply(this,this._orientation)},get:function(){return this._orientation[5]}}),t.Listener.prototype.dispose=function(){return this._orientation=null,this._position=null,this};var e=t.Listener;return t.Listener=new e,t.Context.on("init",function(n){n.Listener instanceof e?t.Listener=n.Listener:t.Listener=new e,n.Listener=t.Listener}),t.Listener}),t(function(t){return!window.hasOwnProperty("OfflineAudioContext")&&window.hasOwnProperty("webkitOfflineAudioContext")&&(window.OfflineAudioContext=window.webkitOfflineAudioContext),t.OfflineContext=function(e,n,i){var r=new OfflineAudioContext(e,n*i,i);t.Context.call(this,{context:r,clockSource:"offline",lookAhead:0,updateInterval:128/i}),this._duration=n,this._currentTime=0},t.extend(t.OfflineContext,t.Context),t.OfflineContext.prototype.now=function(){return this._currentTime},t.OfflineContext.prototype.render=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=this.blockTime;return new Promise(function(t){this._context.oncomplete=function(e){t(e.renderedBuffer)},this._context.startRendering()}.bind(this))},t.OfflineContext.prototype.close=function(){this._context=null},t.OfflineContext}),t(function(t){return t.Offline=function(e,n){var i=t.context.sampleRate,r=t.context,o=new t.OfflineContext(2,n,i);t.context=o,e(t.Transport);var s=o.render();return t.context=r,s.then(function(e){return new t.Buffer(e)})},t.Offline}),t(function(t){return t.Effect=function(){var e=t.defaults(arguments,["wet"],t.Effect);t.AudioNode.call(this),this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this.effectSend=new t.Gain,this.effectReturn=new t.Gain,this.input.connect(this._dryWet.a),this.input.connect(this.effectSend),this.effectReturn.connect(this._dryWet.b),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.Effect,t.AudioNode),t.Effect.defaults={wet:1},t.Effect.prototype.connectEffect=function(t){return this.effectSend.chain(t,this.effectReturn),this},t.Effect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this.effectSend.dispose(),this.effectSend=null,this.effectReturn.dispose(),this.effectReturn=null,this._writable(["wet"]),this.wet=null,this},t.Effect}),t(function(t){return t.AutoFilter=function(){var e=t.defaults(arguments,["frequency","baseFrequency","octaves"],t.AutoFilter);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.filter=new t.Filter(e.filter),this._octaves=0,this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.type=e.type,this._readOnly(["frequency","depth"]),this.octaves=e.octaves,this.baseFrequency=e.baseFrequency},t.extend(t.AutoFilter,t.Effect),t.AutoFilter.defaults={frequency:1,type:"sine",depth:1,baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}},t.AutoFilter.prototype.start=function(t){return this._lfo.start(t),this},t.AutoFilter.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoFilter.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoFilter.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoFilter.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),Object.defineProperty(t.AutoFilter.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}}),Object.defineProperty(t.AutoFilter.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._lfo.max=this.baseFrequency*Math.pow(2,t)}}),t.AutoFilter.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this.filter.dispose(),this.filter=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null,this},t.AutoFilter}),t(function(t){return t.AutoPanner=function(){var e=t.defaults(arguments,["frequency"],t.AutoPanner);t.Effect.call(this,e),this._lfo=new t.LFO({frequency:e.frequency,amplitude:e.depth,min:-1,max:1}),this.depth=this._lfo.amplitude,this._panner=new t.Panner,this.frequency=this._lfo.frequency,this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this.type=e.type,this._readOnly(["depth","frequency"])},t.extend(t.AutoPanner,t.Effect),t.AutoPanner.defaults={frequency:1,type:"sine",depth:1},t.AutoPanner.prototype.start=function(t){return this._lfo.start(t),this},t.AutoPanner.prototype.stop=function(t){return this._lfo.stop(t),this},t.AutoPanner.prototype.sync=function(t){return this._lfo.sync(t),this},t.AutoPanner.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(t.AutoPanner.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.AutoPanner.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._lfo.dispose(),this._lfo=null,this._panner.dispose(),this._panner=null,this._writable(["depth","frequency"]),this.frequency=null,this.depth=null,this},t.AutoPanner}),t(function(t){return t.AutoWah=function(){var e=t.defaults(arguments,["baseFrequency","octaves","sensitivity"],t.AutoWah);t.Effect.call(this,e),this.follower=new t.Follower(e.follower),this._sweepRange=new t.ScaleExp(0,1,.5),this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this._inputBoost=new t.Gain,this._bandpass=new t.Filter({rolloff:-48,frequency:0,Q:e.Q}),this._peaking=new t.Filter(0,"peaking"),this._peaking.gain.value=e.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this.follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=e.sensitivity,this._readOnly(["gain","Q"])},t.extend(t.AutoWah,t.Effect),t.AutoWah.defaults={baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:{attack:.3,release:.5}},Object.defineProperty(t.AutoWah.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._setSweepRange()}}),Object.defineProperty(t.AutoWah.prototype,"sensitivity",{get:function(){return t.gainToDb(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/t.dbToGain(e)}}),t.AutoWah.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},t.AutoWah.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this.follower.dispose(),this.follower=null,this._sweepRange.dispose(),this._sweepRange=null,this._bandpass.dispose(),this._bandpass=null,this._peaking.dispose(),this._peaking=null,this._inputBoost.dispose(),this._inputBoost=null,this._writable(["gain","Q"]),this.gain=null,this.Q=null,this},t.AutoWah}),t(function(t){return t.BitCrusher=function(){var e=t.defaults(arguments,["bits"],t.BitCrusher);t.Effect.call(this,e);var n=1/Math.pow(2,e.bits-1);this._subtract=new t.Subtract,this._modulo=new t.Modulo(n),this._bits=e.bits,this.effectSend.fan(this._subtract,this._modulo),this._modulo.connect(this._subtract,0,1),this._subtract.connect(this.effectReturn)},t.extend(t.BitCrusher,t.Effect),t.BitCrusher.defaults={bits:4},Object.defineProperty(t.BitCrusher.prototype,"bits",{get:function(){return this._bits},set:function(t){this._bits=t;var e=1/Math.pow(2,t-1);this._modulo.value=e}}),t.BitCrusher.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._subtract.dispose(),this._subtract=null,this._modulo.dispose(),this._modulo=null,this},t.BitCrusher}),t(function(t){return t.Chebyshev=function(){var e=t.defaults(arguments,["order"],t.Chebyshev);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._order=e.order,this.connectEffect(this._shaper),this.order=e.order,this.oversample=e.oversample},t.extend(t.Chebyshev,t.Effect),t.Chebyshev.defaults={order:1,oversample:"none"},t.Chebyshev.prototype._getCoefficient=function(t,e,n){return n.hasOwnProperty(e)?n[e]:(n[e]=0===e?0:1===e?t:2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n),n[e])},Object.defineProperty(t.Chebyshev.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t;for(var e=new Array(4096),n=e.length,i=0;i<n;++i){var r=2*i/n-1;e[i]=0===r?0:this._getCoefficient(r,t,{})}this._shaper.curve=e}}),Object.defineProperty(t.Chebyshev.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Chebyshev.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Chebyshev}),t(function(t){return t.StereoEffect=function(){t.AudioNode.call(this);var e=t.defaults(arguments,["wet"],t.Effect);this.createInsOuts(1,1),this._dryWet=new t.CrossFade(e.wet),this.wet=this._dryWet.fade,this._split=new t.Split,this.effectSendL=this._split.left,this.effectSendR=this._split.right,this._merge=new t.Merge,this.effectReturnL=this._merge.left,this.effectReturnR=this._merge.right,this.input.connect(this._split),this.input.connect(this._dryWet,0,0),this._merge.connect(this._dryWet,0,1),this._dryWet.connect(this.output),this._readOnly(["wet"])},t.extend(t.StereoEffect,t.Effect),t.StereoEffect.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._dryWet.dispose(),this._dryWet=null,this._split.dispose(),this._split=null,this._merge.dispose(),this._merge=null,this.effectSendL=null,this.effectSendR=null,this.effectReturnL=null,this.effectReturnR=null,this._writable(["wet"]),this.wet=null,this},t.StereoEffect}),t(function(t){return t.FeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.Effect.call(this,e),this._feedbackGain=new t.Gain(e.feedback,t.Type.NormalRange),this.feedback=this._feedbackGain.gain,this.effectReturn.chain(this._feedbackGain,this.effectSend),this._readOnly(["feedback"])},t.extend(t.FeedbackEffect,t.Effect),t.FeedbackEffect.defaults={feedback:.125},t.FeedbackEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._writable(["feedback"]),this._feedbackGain.dispose(),this._feedbackGain=null,this.feedback=null,this},t.FeedbackEffect}),t(function(t){return t.StereoXFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackLR=new t.Gain,this._feedbackRL=new t.Gain,this.effectReturnL.chain(this._feedbackLR,this.effectSendR),this.effectReturnR.chain(this._feedbackRL,this.effectSendL),this.feedback.fan(this._feedbackLR.gain,this._feedbackRL.gain),this._readOnly(["feedback"])},t.extend(t.StereoXFeedbackEffect,t.StereoEffect),t.StereoXFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackLR.dispose(),this._feedbackLR=null,this._feedbackRL.dispose(),this._feedbackRL=null,this},t.StereoXFeedbackEffect}),t(function(t){return t.Chorus=function(){var e=t.defaults(arguments,["frequency","delayTime","depth"],t.Chorus);t.StereoXFeedbackEffect.call(this,e),this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new t.LFO({frequency:e.frequency,min:0,max:1}),this._lfoR=new t.LFO({frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new t.Delay,this._delayNodeR=new t.Delay,this.frequency=this._lfoL.frequency,this.effectSendL.chain(this._delayNodeL,this.effectReturnL),this.effectSendR.chain(this._delayNodeR,this.effectReturnR),this.effectSendL.connect(this.effectReturnL),this.effectSendR.connect(this.effectReturnR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this._lfoL.start(),this._lfoR.start(),this._lfoL.frequency.connect(this._lfoR.frequency),this.depth=this._depth,this.frequency.value=e.frequency,this.type=e.type,this._readOnly(["frequency"]),this.spread=e.spread},t.extend(t.Chorus,t.StereoXFeedbackEffect),t.Chorus.defaults={frequency:1.5,delayTime:3.5,depth:.7,feedback:.1,type:"sine",spread:180},Object.defineProperty(t.Chorus.prototype,"depth",{get:function(){return this._depth},set:function(t){this._depth=t;var e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}}),Object.defineProperty(t.Chorus.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(t){this._delayTime=t/1e3,this.depth=this._depth}}),Object.defineProperty(t.Chorus.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Chorus.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Chorus.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._delayNodeL.dispose(),this._delayNodeL=null,this._delayNodeR.dispose(),this._delayNodeR=null,this._writable("frequency"),this.frequency=null,this},t.Chorus}),t(function(t){return t.Convolver=function(){var e=t.defaults(arguments,["url","onload"],t.Convolver);t.Effect.call(this,e),this._convolver=this.context.createConvolver(),this._buffer=new t.Buffer,t.isString(e.url)?this._buffer.load(e.url,function(t){this.buffer=t,e.onload()}.bind(this)):e.url&&(this.buffer=e.url,e.onload()),this.connectEffect(this._convolver)},t.extend(t.Convolver,t.Effect),t.Convolver.defaults={onload:t.noOp},Object.defineProperty(t.Convolver.prototype,"buffer",{get:function(){return this._buffer.get()},set:function(t){this._buffer.set(t),this._convolver.buffer=this._buffer.get()}}),t.Convolver.prototype.load=function(t,e){return this._buffer.load(t,function(t){this.buffer=t,e&&e()}.bind(this))},t.Convolver.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._convolver.disconnect(),this._convolver=null,this._buffer.dispose(),this._buffer=null,this},t.Convolver}),t(function(t){return t.Distortion=function(){var e=t.defaults(arguments,["distortion"],t.Distortion);t.Effect.call(this,e),this._shaper=new t.WaveShaper(4096),this._distortion=e.distortion,this.connectEffect(this._shaper),this.distortion=e.distortion,this.oversample=e.oversample},t.extend(t.Distortion,t.Effect),t.Distortion.defaults={distortion:.4,oversample:"none"},Object.defineProperty(t.Distortion.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,n=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))})}}),Object.defineProperty(t.Distortion.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t}}),t.Distortion.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this},t.Distortion}),t(function(t){return t.FeedbackDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.FeedbackDelay);t.FeedbackEffect.call(this,e),this._delayNode=new t.Delay(e.delayTime),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),this._readOnly(["delayTime"])},t.extend(t.FeedbackDelay,t.FeedbackEffect),t.FeedbackDelay.defaults={delayTime:.25},t.FeedbackDelay.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._writable(["delayTime"]),this.delayTime=null,this},t.FeedbackDelay}),t(function(t){var e=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],n=[225,556,441,341];return t.Freeverb=function(){var i=t.defaults(arguments,["roomSize","dampening"],t.Freeverb);t.StereoEffect.call(this,i),this.roomSize=new t.Signal(i.roomSize,t.Type.NormalRange),this.dampening=new t.Signal(i.dampening,t.Type.Frequency),this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];for(var r=0;r<n.length;r++){var o=this.context.createBiquadFilter();o.type="allpass",o.frequency.value=n[r],this._allpassFiltersL.push(o)}for(var s=0;s<n.length;s++){var a=this.context.createBiquadFilter();a.type="allpass",a.frequency.value=n[s],this._allpassFiltersR.push(a)}for(var u=0;u<e.length;u++){var c=new t.LowpassCombFilter(e[u]);u<e.length/2?this.effectSendL.chain(c,this._allpassFiltersL[0]):this.effectSendR.chain(c,this._allpassFiltersR[0]),this.roomSize.connect(c.resonance),this.dampening.connect(c.dampening),this._combFilters.push(c)}t.connectSeries.apply(t,this._allpassFiltersL),t.connectSeries.apply(t,this._allpassFiltersR),this._allpassFiltersL[this._allpassFiltersL.length-1].connect(this.effectReturnL),this._allpassFiltersR[this._allpassFiltersR.length-1].connect(this.effectReturnR),this._readOnly(["roomSize","dampening"])},t.extend(t.Freeverb,t.StereoEffect),t.Freeverb.defaults={roomSize:.7,dampening:3e3},t.Freeverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFiltersL.length;e++)this._allpassFiltersL[e].disconnect(),this._allpassFiltersL[e]=null;this._allpassFiltersL=null;for(var n=0;n<this._allpassFiltersR.length;n++)this._allpassFiltersR[n].disconnect(),this._allpassFiltersR[n]=null;this._allpassFiltersR=null;for(var i=0;i<this._combFilters.length;i++)this._combFilters[i].dispose(),this._combFilters[i]=null;return this._combFilters=null,this._writable(["roomSize","dampening"]),this.roomSize.dispose(),this.roomSize=null,this.dampening.dispose(),this.dampening=null,this},t.Freeverb}),t(function(t){var e=[.06748,.06404,.08212,.09004],n=[.773,.802,.753,.733],i=[347,113,37];return t.JCReverb=function(){var r=t.defaults(arguments,["roomSize"],t.JCReverb);t.StereoEffect.call(this,r),this.roomSize=new t.Signal(r.roomSize,t.Type.NormalRange),this._scaleRoomSize=new t.Scale(-.733,.197),this._allpassFilters=[],this._feedbackCombFilters=[];for(var o=0;o<i.length;o++){var s=this.context.createBiquadFilter();s.type="allpass",s.frequency.value=i[o],this._allpassFilters.push(s)}for(var a=0;a<e.length;a++){var u=new t.FeedbackCombFilter(e[a],.1);this._scaleRoomSize.connect(u.resonance),u.resonance.value=n[a],this._allpassFilters[this._allpassFilters.length-1].connect(u),a<e.length/2?u.connect(this.effectReturnL):u.connect(this.effectReturnR),this._feedbackCombFilters.push(u)}this.roomSize.connect(this._scaleRoomSize),t.connectSeries.apply(t,this._allpassFilters),this.effectSendL.connect(this._allpassFilters[0]),this.effectSendR.connect(this._allpassFilters[0]),this._readOnly(["roomSize"])},t.extend(t.JCReverb,t.StereoEffect),t.JCReverb.defaults={roomSize:.5},t.JCReverb.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this);for(var e=0;e<this._allpassFilters.length;e++)this._allpassFilters[e].disconnect(),this._allpassFilters[e]=null;this._allpassFilters=null;for(var n=0;n<this._feedbackCombFilters.length;n++)this._feedbackCombFilters[n].dispose(),this._feedbackCombFilters[n]=null;return this._feedbackCombFilters=null,this._writable(["roomSize"]),this.roomSize.dispose(),this.roomSize=null,this._scaleRoomSize.dispose(),this._scaleRoomSize=null,this},t.JCReverb}),t(function(t){return t.MidSideEffect=function(){t.Effect.apply(this,arguments),this._midSideSplit=new t.MidSideSplit,this._midSideMerge=new t.MidSideMerge,this.midSend=this._midSideSplit.mid,this.sideSend=this._midSideSplit.side,this.midReturn=this._midSideMerge.mid,this.sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)},t.extend(t.MidSideEffect,t.Effect),t.MidSideEffect.prototype.dispose=function(){return t.Effect.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideSplit=null,this._midSideMerge.dispose(),this._midSideMerge=null,this.midSend=null,this.sideSend=null,this.midReturn=null,this.sideReturn=null,this},t.MidSideEffect}),t(function(t){return t.Phaser=function(){var e=t.defaults(arguments,["frequency","octaves","baseFrequency"],t.Phaser);t.StereoEffect.call(this,e),this._lfoL=new t.LFO(e.frequency,0,1),this._lfoR=new t.LFO(e.frequency,0,1),this._lfoR.phase=180,this._baseFrequency=e.baseFrequency,this._octaves=e.octaves,this.Q=new t.Signal(e.Q,t.Type.Positive),this._filtersL=this._makeFilters(e.stages,this._lfoL,this.Q),this._filtersR=this._makeFilters(e.stages,this._lfoR,this.Q),this.frequency=this._lfoL.frequency,this.frequency.value=e.frequency,this.effectSendL.connect(this._filtersL[0]),this.effectSendR.connect(this._filtersR[0]),this._filtersL[e.stages-1].connect(this.effectReturnL),this._filtersR[e.stages-1].connect(this.effectReturnR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=e.baseFrequency,this.octaves=e.octaves,this._lfoL.start(),this._lfoR.start(),this._readOnly(["frequency","Q"])},t.extend(t.Phaser,t.StereoEffect),t.Phaser.defaults={frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350},t.Phaser.prototype._makeFilters=function(e,n,i){for(var r=new Array(e),o=0;o<e;o++){var s=this.context.createBiquadFilter();s.type="allpass",i.connect(s.Q),n.connect(s.frequency),r[o]=s}return t.connectSeries.apply(t,r),r},Object.defineProperty(t.Phaser.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t;var e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}}),Object.defineProperty(t.Phaser.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(t){this._baseFrequency=t,this._lfoL.min=t,this._lfoR.min=t,this.octaves=this._octaves}}),t.Phaser.prototype.dispose=function(){t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","Q"]),this.Q.dispose(),this.Q=null,this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null;for(var e=0;e<this._filtersL.length;e++)this._filtersL[e].disconnect(),this._filtersL[e]=null;this._filtersL=null;for(var n=0;n<this._filtersR.length;n++)this._filtersR[n].disconnect(),this._filtersR[n]=null;return this._filtersR=null,this.frequency=null,this},t.Phaser}),t(function(t){return t.PingPongDelay=function(){var e=t.defaults(arguments,["delayTime","feedback"],t.PingPongDelay);t.StereoXFeedbackEffect.call(this,e),this._leftDelay=new t.Delay(0,e.maxDelayTime),this._rightDelay=new t.Delay(0,e.maxDelayTime),this._rightPreDelay=new t.Delay(0,e.maxDelayTime),this.delayTime=new t.Signal(e.delayTime,t.Type.Time),this.effectSendL.chain(this._leftDelay,this.effectReturnL),this.effectSendR.chain(this._rightPreDelay,this._rightDelay,this.effectReturnR),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackLR.disconnect(),this._feedbackLR.connect(this._rightDelay),this._readOnly(["delayTime"])},t.extend(t.PingPongDelay,t.StereoXFeedbackEffect),t.PingPongDelay.defaults={delayTime:.25,maxDelayTime:1},t.PingPongDelay.prototype.dispose=function(){return t.StereoXFeedbackEffect.prototype.dispose.call(this),this._leftDelay.dispose(),this._leftDelay=null,this._rightDelay.dispose(),this._rightDelay=null,this._rightPreDelay.dispose(),this._rightPreDelay=null,this._writable(["delayTime"]),this.delayTime.dispose(),this.delayTime=null,this},t.PingPongDelay}),t(function(t){return t.PitchShift=function(){var e=t.defaults(arguments,["pitch"],t.PitchShift);t.FeedbackEffect.call(this,e),this._frequency=new t.Signal(0),this._delayA=new t.Delay(0,1),this._lfoA=new t.LFO({min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new t.Delay(0,1),this._lfoB=new t.LFO({min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new t.CrossFade,this._crossFadeLFO=new t.LFO({min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new t.Delay(e.delayTime),this.delayTime=this._feedbackDelay.delayTime,this._readOnly("delayTime"),this._pitch=e.pitch,this._windowSize=e.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);var n=this.now();this._lfoA.start(n),this._lfoB.start(n),this._crossFadeLFO.start(n),this.windowSize=this._windowSize},t.extend(t.PitchShift,t.FeedbackEffect),t.PitchShift.defaults={pitch:0,windowSize:.1,delayTime:0,feedback:0},Object.defineProperty(t.PitchShift.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e;var n=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,n=t.intervalToFrequencyRatio(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,n=t.intervalToFrequencyRatio(e)-1),this._frequency.value=n*(1.2/this._windowSize)}}),Object.defineProperty(t.PitchShift.prototype,"windowSize",{get:function(){return this._windowSize},set:function(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}}),t.PitchShift.prototype.dispose=function(){return t.FeedbackEffect.prototype.dispose.call(this),this._frequency.dispose(),this._frequency=null,this._delayA.disconnect(),this._delayA=null,this._delayB.disconnect(),this._delayB=null,this._lfoA.dispose(),this._lfoA=null,this._lfoB.dispose(),this._lfoB=null,this._crossFade.dispose(),this._crossFade=null,this._crossFadeLFO.dispose(),this._crossFadeLFO=null,this._writable("delayTime"),this._feedbackDelay.dispose(),this._feedbackDelay=null,this.delayTime=null,this},t.PitchShift}),t(function(t){return t.StereoFeedbackEffect=function(){var e=t.defaults(arguments,["feedback"],t.FeedbackEffect);t.StereoEffect.call(this,e),this.feedback=new t.Signal(e.feedback,t.Type.NormalRange),this._feedbackL=new t.Gain,this._feedbackR=new t.Gain,this.effectReturnL.chain(this._feedbackL,this.effectSendL),this.effectReturnR.chain(this._feedbackR,this.effectSendR),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),this._readOnly(["feedback"])},t.extend(t.StereoFeedbackEffect,t.StereoEffect),t.StereoFeedbackEffect.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["feedback"]),this.feedback.dispose(),this.feedback=null,this._feedbackL.dispose(),this._feedbackL=null,this._feedbackR.dispose(),this._feedbackR=null,this},t.StereoFeedbackEffect}),t(function(t){return t.StereoWidener=function(){var e=t.defaults(arguments,["width"],t.StereoWidener);t.MidSideEffect.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._midMult=new t.Expr("$0 * ($1 * (1 - $2))"),this._sideMult=new t.Expr("$0 * ($1 * $2)"),this._two=new t.Signal(2),this._two.connect(this._midMult,0,1),this.width.connect(this._midMult,0,2),this._two.connect(this._sideMult,0,1),this.width.connect(this._sideMult,0,2),this.midSend.chain(this._midMult,this.midReturn),this.sideSend.chain(this._sideMult,this.sideReturn),this._readOnly(["width"])},t.extend(t.StereoWidener,t.MidSideEffect),t.StereoWidener.defaults={width:.5},t.StereoWidener.prototype.dispose=function(){return t.MidSideEffect.prototype.dispose.call(this),this._writable(["width"]),this.width.dispose(),this.width=null,this._midMult.dispose(),this._midMult=null,this._sideMult.dispose(),this._sideMult=null,this._two.dispose(),this._two=null,this},t.StereoWidener}),t(function(t){return t.Tremolo=function(){var e=t.defaults(arguments,["frequency","depth"],t.Tremolo);t.StereoEffect.call(this,e),this._lfoL=new t.LFO({phase:e.spread,min:1,max:0}),this._lfoR=new t.LFO({phase:e.spread,min:1,max:0}),this._amplitudeL=new t.Gain,this._amplitudeR=new t.Gain,this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.depth=new t.Signal(e.depth,t.Type.NormalRange),this._readOnly(["frequency","depth"]),this.effectSendL.chain(this._amplitudeL,this.effectReturnL),this.effectSendR.chain(this._amplitudeR,this.effectReturnR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.type=e.type,this.spread=e.spread},t.extend(t.Tremolo,t.StereoEffect),t.Tremolo.defaults={frequency:10,type:"sine",depth:.5,spread:180},t.Tremolo.prototype.start=function(t){return this._lfoL.start(t),this._lfoR.start(t),this},t.Tremolo.prototype.stop=function(t){return this._lfoL.stop(t),this._lfoR.stop(t),this},t.Tremolo.prototype.sync=function(t){return this._lfoL.sync(t),this._lfoR.sync(t),this},t.Tremolo.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},Object.defineProperty(t.Tremolo.prototype,"type",{get:function(){return this._lfoL.type},set:function(t){this._lfoL.type=t,this._lfoR.type=t}}),Object.defineProperty(t.Tremolo.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}}),t.Tremolo.prototype.dispose=function(){return t.StereoEffect.prototype.dispose.call(this),this._writable(["frequency","depth"]),this._lfoL.dispose(),this._lfoL=null,this._lfoR.dispose(),this._lfoR=null,this._amplitudeL.dispose(),this._amplitudeL=null,this._amplitudeR.dispose(),this._amplitudeR=null,this.frequency=null,this.depth=null,this},t.Tremolo}),t(function(t){return t.Vibrato=function(){var e=t.defaults(arguments,["frequency","depth"],t.Vibrato);t.Effect.call(this,e),this._delayNode=new t.Delay(0,e.maxDelay),this._lfo=new t.LFO({type:e.type,min:0,max:e.maxDelay,frequency:e.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=e.depth,this._readOnly(["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)},t.extend(t.Vibrato,t.Effect),t.Vibrato.defaults={maxDelay:.005,frequency:5,depth:.1,type:"sine"},Object.defineProperty(t.Vibrato.prototype,"type",{get:function(){return this._lfo.type},set:function(t){this._lfo.type=t}}),t.Vibrato.prototype.dispose=function(){t.Effect.prototype.dispose.call(this),this._delayNode.dispose(),this._delayNode=null,this._lfo.dispose(),this._lfo=null,this._writable(["frequency","depth"]),this.frequency=null,this.depth=null},t.Vibrato}),t(function(t){return t.Event=function(){var e=t.defaults(arguments,["callback","value"],t.Event);t.call(this),this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._state=new t.TimelineState(t.State.Stopped),this._playbackRate=1,this._startOffset=0,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this.playbackRate=e.playbackRate},t.extend(t.Event),t.Event.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,value:null,probability:1,mute:!1,humanize:!1},t.Event.prototype._rescheduleEvents=function(e){return e=t.defaultArg(e,-1),this._state.forEachFrom(e,function(e){var n;if(e.state===t.State.Started){t.isUndef(e.id)||t.Transport.clear(e.id);var i=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop){n=1/0,t.isNumber(this._loop)&&(n=this._loop*this._getLoopDuration());var r=this._state.getAfter(i);null!==r&&(n=Math.min(n,r.time-i)),n!==1/0&&(this._state.setStateAtTime(t.State.Stopped,i+n+1),n=t.Time(n,"i"));var o=t.Time(this._getLoopDuration(),"i");e.id=t.Transport.scheduleRepeat(this._tick.bind(this),o,t.TransportTime(i,"i"),n)}else e.id=t.Transport.schedule(this._tick.bind(this),i+"i")}}.bind(this)),this},Object.defineProperty(t.Event.prototype,"state",{get:function(){return this._state.getValueAtTime(t.Transport.ticks)}}),Object.defineProperty(t.Event.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t}}),Object.defineProperty(t.Event.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t}}),Object.defineProperty(t.Event.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t}}),t.Event.prototype.start=function(e){return e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Stopped&&(this._state.add({state:t.State.Started,time:e,id:void 0}),this._rescheduleEvents(e)),this},t.Event.prototype.stop=function(e){if(this.cancel(e),e=this.toTicks(e),this._state.getValueAtTime(e)===t.State.Started){this._state.setStateAtTime(t.State.Stopped,e);var n=this._state.getBefore(e),i=e;null!==n&&(i=n.time),this._rescheduleEvents(i)}return this},t.Event.prototype.cancel=function(e){return e=t.defaultArg(e,-1/0),e=this.toTicks(e),this._state.forEachFrom(e,function(e){t.Transport.clear(e.id)}),this._state.cancel(e),this},t.Event.prototype._tick=function(e){if(!this.mute&&this._state.getValueAtTime(t.Transport.ticks)===t.State.Started){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;t.isBoolean(this.humanize)||(n=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*n}this.callback(e,this.value)}},t.Event.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(t.Event.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}}),Object.defineProperty(t.Event.prototype,"progress",{get:function(){if(this._loop){var e=t.Transport.ticks,n=this._state.get(e);if(null!==n&&n.state===t.State.Started){var i=this._getLoopDuration();return(e-n.time)%i/i}return 0}return 0}}),t.Event.prototype.dispose=function(){this.cancel(),this._state.dispose(),this._state=null,this.callback=null,this.value=null},t.Event}),t(function(t){return t.Loop=function(){var e=t.defaults(arguments,["callback","interval"],t.Loop);t.call(this),this._event=new t.Event({callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability}),this.callback=e.callback,this.iterations=e.iterations},t.extend(t.Loop),t.Loop.defaults={interval:"4n",callback:t.noOp,playbackRate:1,iterations:1/0,probability:!0,mute:!1},t.Loop.prototype.start=function(t){return this._event.start(t),this},t.Loop.prototype.stop=function(t){return this._event.stop(t),this},t.Loop.prototype.cancel=function(t){return this._event.cancel(t),this},t.Loop.prototype._tick=function(t){this.callback(t)},Object.defineProperty(t.Loop.prototype,"state",{get:function(){return this._event.state}}),Object.defineProperty(t.Loop.prototype,"progress",{get:function(){return this._event.progress}}),Object.defineProperty(t.Loop.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(t){this._event.loopEnd=t}}),Object.defineProperty(t.Loop.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(t){this._event.playbackRate=t}}),Object.defineProperty(t.Loop.prototype,"humanize",{get:function(){return this._event.humanize},set:function(t){this._event.humanize=t}}),Object.defineProperty(t.Loop.prototype,"probability",{get:function(){return this._event.probability},set:function(t){this._event.probability=t}}),Object.defineProperty(t.Loop.prototype,"mute",{get:function(){return this._event.mute},set:function(t){this._event.mute=t}}),Object.defineProperty(t.Loop.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(t){this._event.loop=t===1/0||t}}),t.Loop.prototype.dispose=function(){this._event.dispose(),this._event=null,this.callback=null},t.Loop}),t(function(t){return t.Part=function(){var e=t.defaults(arguments,["callback","events"],t.Part);t.Event.call(this,e),this._events=[];for(var n=0;n<e.events.length;n++)Array.isArray(e.events[n])?this.add(e.events[n][0],e.events[n][1]):this.add(e.events[n])},t.extend(t.Part,t.Event),t.Part.defaults={callback:t.noOp,loop:!1,loopEnd:"1m",loopStart:0,playbackRate:1,probability:1,humanize:!1,mute:!1,events:[]},t.Part.prototype.start=function(e,n){var i=this.toTicks(e);return this._state.getValueAtTime(i)!==t.State.Started&&(n=this._loop?t.defaultArg(n,this._loopStart):t.defaultArg(n,0),n=this.toTicks(n),this._state.add({state:t.State.Started,time:i,offset:n}),this._forEach(function(t){this._startNote(t,i,n)})),this},t.Part.prototype._startNote=function(e,n,i){n-=i,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<i&&(n+=this._getLoopDuration()),e.start(t.TransportTime(n,"i"))):e.startOffset<this._loopStart&&e.startOffset>=i&&(e.loop=!1,e.start(t.TransportTime(n,"i"))):e.startOffset>=i&&e.start(t.TransportTime(n,"i"))},Object.defineProperty(t.Part.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t,this._forEach(function(t){t.startOffset+=this._startOffset})}}),t.Part.prototype.stop=function(e){var n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime(t.State.Stopped,n),this._forEach(function(t){t.stop(e)}),this},t.Part.prototype.at=function(e,n){e=t.TransportTime(e);for(var i=t.Time(1,"i").toSeconds(),r=0;r<this._events.length;r++){var o=this._events[r];if(Math.abs(e.toTicks()-o.startOffset)<i)return t.isUndef(n)||(o.value=n),o}return t.isUndef(n)?null:(this.add(e,n),this._events[this._events.length-1])},t.Part.prototype.add=function(e,n){e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e);var i;return n instanceof t.Event?(i=n,i.callback=this._tick.bind(this)):i=new t.Event({callback:this._tick.bind(this),value:n}),i.startOffset=e,i.set({loopEnd:this.loopEnd,loopStart:this.loopStart,loop:this.loop,humanize:this.humanize,playbackRate:this.playbackRate,probability:this.probability}),this._events.push(i),this._restartEvent(i),this},t.Part.prototype._restartEvent=function(e){this._state.forEach(function(n){n.state===t.State.Started?this._startNote(e,n.time,n.offset):e.stop(t.TransportTime(n.time,"i"))}.bind(this))},t.Part.prototype.remove=function(e,n){e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e);for(var i=this._events.length-1;i>=0;i--){var r=this._events[i];r instanceof t.Part?r.remove(e,n):r.startOffset===e&&(t.isUndef(n)||!t.isUndef(n)&&r.value===n)&&(this._events.splice(i,1),r.dispose())}return this},t.Part.prototype.removeAll=function(){return this._forEach(function(t){t.dispose()}),this._events=[],this},t.Part.prototype.cancel=function(t){return this._forEach(function(e){e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},t.Part.prototype._forEach=function(e,n){if(this._events){n=t.defaultArg(n,this);for(var i=this._events.length-1;i>=0;i--){var r=this._events[i];r instanceof t.Part?r._forEach(e,n):e.call(n,r)}}return this},t.Part.prototype._setAll=function(t,e){this._forEach(function(n){n[t]=e})},t.Part.prototype._tick=function(t,e){this.mute||this.callback(t,e)},t.Part.prototype._testLoopBoundries=function(e){e.startOffset<this._loopStart||e.startOffset>=this._loopEnd?e.cancel(0):e.state===t.State.Stopped&&this._restartEvent(e)},Object.defineProperty(t.Part.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)}}),Object.defineProperty(t.Part.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)}}),Object.defineProperty(t.Part.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._forEach(function(e){e._loopStart=this._loopStart,e._loopEnd=this._loopEnd,e.loop=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopEnd",{get:function(){return t.TransportTime(this._loopEnd,"i").toNotation()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(e){e.loopEnd=t,this._testLoopBoundries(e)})}}),Object.defineProperty(t.Part.prototype,"loopStart",{get:function(){return t.TransportTime(this._loopStart,"i").toNotation()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=this.loopStart,this._testLoopBoundries(t)})}}),Object.defineProperty(t.Part.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)}}),Object.defineProperty(t.Part.prototype,"length",{get:function(){return this._events.length}}),t.Part.prototype.dispose=function(){return this.removeAll(),this._state.dispose(),this._state=null,this.callback=null,this._events=null,this},t.Part}),t(function(t){return t.Pattern=function(){var e=t.defaults(arguments,["callback","values","pattern"],t.Pattern);t.Loop.call(this,e),this._pattern=new t.CtrlPattern({values:e.values,type:e.pattern,index:e.index})},t.extend(t.Pattern,t.Loop),t.Pattern.defaults={pattern:t.CtrlPattern.Type.Up,callback:t.noOp,values:[]},t.Pattern.prototype._tick=function(t){this.callback(t,this._pattern.value),this._pattern.next()},Object.defineProperty(t.Pattern.prototype,"index",{get:function(){return this._pattern.index},set:function(t){this._pattern.index=t}}),Object.defineProperty(t.Pattern.prototype,"values",{get:function(){return this._pattern.values},set:function(t){this._pattern.values=t}}),Object.defineProperty(t.Pattern.prototype,"value",{get:function(){return this._pattern.value}}),Object.defineProperty(t.Pattern.prototype,"pattern",{get:function(){return this._pattern.type},set:function(t){this._pattern.type=t}}),t.Pattern.prototype.dispose=function(){t.Loop.prototype.dispose.call(this),this._pattern.dispose(),this._pattern=null},t.Pattern}),t(function(t){return t.Sequence=function(){var e=t.defaults(arguments,["callback","events","subdivision"],t.Sequence),n=e.events;if(delete e.events,t.Part.call(this,e),this._subdivision=this.toTicks(e.subdivision),t.isUndef(e.loopEnd)&&!t.isUndef(n)&&(this._loopEnd=n.length*this._subdivision),this._loop=!0,!t.isUndef(n))for(var i=0;i<n.length;i++)this.add(i,n[i])},t.extend(t.Sequence,t.Part),t.Sequence.defaults={subdivision:"4n"},Object.defineProperty(t.Sequence.prototype,"subdivision",{get:function(){return t.Time(this._subdivision,"i").toNotation()}}),t.Sequence.prototype.at=function(e,n){return t.isArray(n)&&this.remove(e),t.Part.prototype.at.call(this,this._indexTime(e),n)},t.Sequence.prototype.add=function(e,n){if(null===n)return this;if(t.isArray(n)){var i=Math.round(this._subdivision/n.length);n=new t.Sequence(this._tick.bind(this),n,t.Time(i,"i"))}return t.Part.prototype.add.call(this,this._indexTime(e),n),this},t.Sequence.prototype.remove=function(e,n){return t.Part.prototype.remove.call(this,this._indexTime(e),n),this},t.Sequence.prototype._indexTime=function(e){return e instanceof t.TransportTime?e:t.TransportTime(e*this._subdivision+this.startOffset,"i")},t.Sequence.prototype.dispose=function(){return t.Part.prototype.dispose.call(this),this},t.Sequence}),t(function(t){return t.PulseOscillator=function(){var e=t.defaults(arguments,["frequency","width"],t.Oscillator);t.Source.call(this,e),this.width=new t.Signal(e.width,t.Type.NormalRange),this._widthGate=new t.Gain,this._sawtooth=new t.Oscillator({frequency:e.frequency,detune:e.detune,type:"sawtooth",phase:e.phase}),this.frequency=this._sawtooth.frequency,this.detune=this._sawtooth.detune,this._thresh=new t.WaveShaper(function(t){return t<0?-1:1}),this._sawtooth.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),this._readOnly(["width","frequency","detune"])},t.extend(t.PulseOscillator,t.Source),t.PulseOscillator.defaults={frequency:440,detune:0,phase:0,width:.2},t.PulseOscillator.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},t.PulseOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.setValueAtTime(0,t)},Object.defineProperty(t.PulseOscillator.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t}}),Object.defineProperty(t.PulseOscillator.prototype,"type",{get:function(){return"pulse"}}),Object.defineProperty(t.PulseOscillator.prototype,"partials",{get:function(){return[]}}),t.PulseOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._sawtooth.dispose(),this._sawtooth=null,this._writable(["width","frequency","detune"]),this.width.dispose(),this.width=null,this._widthGate.dispose(),this._widthGate=null,this._thresh.dispose(),this._thresh=null,this.frequency=null,this.detune=null,this},t.PulseOscillator}),t(function(t){return t.PWMOscillator=function(){var e=t.defaults(arguments,["frequency","modulationFrequency"],t.PWMOscillator);t.Source.call(this,e),this._pulse=new t.PulseOscillator(e.modulationFrequency),this._pulse._sawtooth.type="sine",this._modulator=new t.Oscillator({frequency:e.frequency,detune:e.detune,phase:e.phase}),this._scale=new t.Multiply(2),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this.modulationFrequency=this._pulse.frequency,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),this._readOnly(["modulationFrequency","frequency","detune"])},t.extend(t.PWMOscillator,t.Source),t.PWMOscillator.defaults={frequency:440,detune:0,phase:0,modulationFrequency:.4},t.PWMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},t.PWMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},Object.defineProperty(t.PWMOscillator.prototype,"type",{get:function(){return"pwm"}}),Object.defineProperty(t.PWMOscillator.prototype,"partials",{get:function(){return[]}}),Object.defineProperty(t.PWMOscillator.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t}}),t.PWMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._pulse.dispose(),this._pulse=null,this._scale.dispose(),this._scale=null,this._modulator.dispose(),this._modulator=null,this._writable(["modulationFrequency","frequency","detune"]),this.frequency=null,this.detune=null,this.modulationFrequency=null,this},t.PWMOscillator}),t(function(t){return t.FMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.FMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=this._carrier.detune,this.detune.value=e.detune,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),this.phase=e.phase,this._readOnly(["modulationIndex","frequency","detune","harmonicity"])},t.extend(t.FMOscillator,t.Source),t.FMOscillator.defaults={frequency:440,detune:0,phase:0,modulationIndex:2,modulationType:"square",harmonicity:1},t.FMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.FMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.FMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.FMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.FMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.FMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["modulationIndex","frequency","detune","harmonicity"]),this.frequency.dispose(),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this.modulationIndex.dispose(),this.modulationIndex=null,this},t.FMOscillator}),t(function(t){return t.AMOscillator=function(){var e=t.defaults(arguments,["frequency","type","modulationType"],t.AMOscillator);t.Source.call(this,e),this._carrier=new t.Oscillator(e.frequency,e.type),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this.detune.value=e.detune,this._modulator=new t.Oscillator(e.frequency,e.modulationType),this._modulationScale=new t.AudioToGain,this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.connect(this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this.phase=e.phase,this._readOnly(["frequency","detune","harmonicity"])},t.extend(t.AMOscillator,t.Oscillator),t.AMOscillator.defaults={frequency:440,detune:0,phase:0,modulationType:"square",harmonicity:1},t.AMOscillator.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._carrier.start(t)},t.AMOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._carrier.stop(t)},Object.defineProperty(t.AMOscillator.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t}}),Object.defineProperty(t.AMOscillator.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t}}),Object.defineProperty(t.AMOscillator.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t}}),t.AMOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune","harmonicity"]),this.frequency=null,this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this._modulationNode.dispose(),this._modulationNode=null,this._modulationScale.dispose(),this._modulationScale=null,this},t.AMOscillator}),t(function(t){return t.FatOscillator=function(){var e=t.defaults(arguments,["frequency","type","spread"],t.FatOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._oscillators=[],this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=t.defaultArg(e.partials,[]),this.count=e.count,this._readOnly(["frequency","detune"])},t.extend(t.FatOscillator,t.Source),t.FatOscillator.defaults={frequency:440,detune:0,phase:0,spread:20,count:3,type:"sawtooth"},t.FatOscillator.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){e.start(t)})},t.FatOscillator.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){e.stop(t)})},t.FatOscillator.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t.call(this,this._oscillators[e],e)},Object.defineProperty(t.FatOscillator.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){e.type=t})}}),Object.defineProperty(t.FatOscillator.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach(function(t,i){t.detune.value=e+n*i})}}}),Object.defineProperty(t.FatOscillator.prototype,"count",{get:function(){return this._oscillators.length},set:function(e){if(e=Math.max(e,1),this._oscillators.length!==e){this._forEach(function(t){t.dispose()}),this._oscillators=[];for(var n=0;n<e;n++){var i=new t.Oscillator;this.type===t.Oscillator.Type.Custom?i.partials=this._partials:i.type=this._type,i.phase=this._phase,i.volume.value=-6-e,this.frequency.connect(i.frequency),this.detune.connect(i.detune),i.connect(this.output),this._oscillators[n]=i}this.spread=this._spread,this.state===t.State.Started&&this._forEach(function(t){t.start()})}}}),Object.defineProperty(t.FatOscillator.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){e.phase=t})}}),Object.defineProperty(t.FatOscillator.prototype,"partials",{get:function(){return this._partials},set:function(e){this._partials=e,this._type=t.Oscillator.Type.Custom,this._forEach(function(t){t.partials=e})}}),t.FatOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this._forEach(function(t){t.dispose()}),this._oscillators=null,this._partials=null,this},t.FatOscillator}),t(function(t){t.OmniOscillator=function(){var e=t.defaults(arguments,["frequency","type"],t.OmniOscillator);t.Source.call(this,e),this.frequency=new t.Signal(e.frequency,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this._sourceType=void 0,this._oscillator=null,this.type=e.type,this._readOnly(["frequency","detune"]),this.set(e)},t.extend(t.OmniOscillator,t.Source),t.OmniOscillator.defaults={frequency:440,detune:0,type:"sine",phase:0};var e={Pulse:"PulseOscillator",PWM:"PWMOscillator",Osc:"Oscillator",FM:"FMOscillator",AM:"AMOscillator",Fat:"FatOscillator"};return t.OmniOscillator.prototype._start=function(t){this._oscillator.start(t)},t.OmniOscillator.prototype._stop=function(t){this._oscillator.stop(t)},Object.defineProperty(t.OmniOscillator.prototype,"type",{get:function(){var t="";return this._sourceType===e.FM?t="fm":this._sourceType===e.AM?t="am":this._sourceType===e.Fat&&(t="fat"),t+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator(e.FM),this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator(e.AM),this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator(e.Fat),this._oscillator.type=t.substr(3)):"pwm"===t?this._createNewOscillator(e.PWM):"pulse"===t?this._createNewOscillator(e.Pulse):(this._createNewOscillator(e.Osc),this._oscillator.type=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._oscillator.partials=t}}),t.OmniOscillator.prototype.set=function(e,n){return"type"===e?this.type=n:t.isObject(e)&&e.hasOwnProperty("type")&&(this.type=e.type),t.prototype.set.apply(this,arguments),this},t.OmniOscillator.prototype._createNewOscillator=function(e){if(e!==this._sourceType){this._sourceType=e;var n=t[e],i=this.now();if(null!==this._oscillator){var r=this._oscillator;r.stop(i),this.context.setTimeout(function(){r.dispose(),r=null},this.blockTime)}this._oscillator=new n,this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this.state===t.State.Started&&this._oscillator.start(i)}},Object.defineProperty(t.OmniOscillator.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t}}),Object.defineProperty(t.OmniOscillator.prototype,"width",{get:function(){if(this._sourceType===e.Pulse)return this._oscillator.width}}),Object.defineProperty(t.OmniOscillator.prototype,"count",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.count},set:function(t){this._sourceType===e.Fat&&(this._oscillator.count=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"spread",{get:function(){if(this._sourceType===e.Fat)return this._oscillator.spread},set:function(t){this._sourceType===e.Fat&&(this._oscillator.spread=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationType",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.modulationType},set:function(t){this._sourceType!==e.FM&&this._sourceType!==e.AM||(this._oscillator.modulationType=t)}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationIndex",{get:function(){if(this._sourceType===e.FM)return this._oscillator.modulationIndex}}),Object.defineProperty(t.OmniOscillator.prototype,"harmonicity",{get:function(){if(this._sourceType===e.FM||this._sourceType===e.AM)return this._oscillator.harmonicity}}),Object.defineProperty(t.OmniOscillator.prototype,"modulationFrequency",{get:function(){if(this._sourceType===e.PWM)return this._oscillator.modulationFrequency}}),t.OmniOscillator.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this._writable(["frequency","detune"]),this.detune.dispose(),this.detune=null,this.frequency.dispose(),this.frequency=null,this._oscillator.dispose(),this._oscillator=null,this._sourceType=null,this},t.OmniOscillator}),t(function(t){return t.Instrument=function(e){e=t.defaultArg(e,t.Instrument.defaults),t.AudioNode.call(this),this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume")},t.extend(t.Instrument,t.AudioNode),t.Instrument.defaults={volume:0},t.Instrument.prototype.triggerAttack=t.noOp,t.Instrument.prototype.triggerRelease=t.noOp,t.Instrument.prototype.triggerAttackRelease=function(t,e,n,i){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,i),this.triggerRelease(n+e),this},t.Instrument.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable(["volume"]),this.volume=null,this},t.Instrument}),t(function(t){return t.Monophonic=function(e){e=t.defaultArg(e,t.Monophonic.defaults),t.Instrument.call(this,e),this.portamento=e.portamento},t.extend(t.Monophonic,t.Instrument),t.Monophonic.defaults={portamento:0},t.Monophonic.prototype.triggerAttack=function(t,e,n){return e=this.toSeconds(e),this._triggerEnvelopeAttack(e,n),this.setNote(t,e),this},t.Monophonic.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this._triggerEnvelopeRelease(t),this},t.Monophonic.prototype._triggerEnvelopeAttack=function(){},t.Monophonic.prototype._triggerEnvelopeRelease=function(){},t.Monophonic.prototype.setNote=function(t,e){if(e=this.toSeconds(e),this.portamento>0){var n=this.frequency.value;this.frequency.setValueAtTime(n,e);var i=this.toSeconds(this.portamento);this.frequency.exponentialRampToValueAtTime(t,e+i)}else this.frequency.setValueAtTime(t,e);return this},t.Monophonic}),t(function(t){return t.Synth=function(e){e=t.defaultArg(e,t.Synth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.envelope,this.output),this.oscillator.start(),this._readOnly(["oscillator","frequency","detune","envelope"])},t.extend(t.Synth,t.Monophonic),t.Synth.defaults={oscillator:{type:"triangle"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}},t.Synth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.Synth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this},t.Synth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.frequency=null,this.detune=null,this},t.Synth}),t(function(t){return t.AMSynth=function(e){e=t.defaultArg(e,t.AMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth,this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth,this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this._modulationScale=new t.AudioToGain,this._modulationNode=new t.Gain,this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),this._readOnly(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.AMSynth,t.Monophonic),t.AMSynth.defaults={harmonicity:3,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.AMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t,e),this},t.AMSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.AMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationScale.dispose(),this._modulationScale=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.AMSynth}),t(function(t){return t.MonoSynth=function(e){e=t.defaultArg(e,t.MonoSynth.defaults),t.Monophonic.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new t.Filter(e.filter),this.filterEnvelope=new t.FrequencyEnvelope(e.filterEnvelope),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.oscillator.chain(this.filter,this.envelope,this.output),this.oscillator.start(),this.filterEnvelope.connect(this.filter.frequency),this._readOnly(["oscillator","frequency","detune","filter","filterEnvelope","envelope"])},t.extend(t.MonoSynth,t.Monophonic),t.MonoSynth.defaults={frequency:"C4",detune:0,oscillator:{type:"square"},filter:{Q:6,type:"lowpass",rolloff:-24},envelope:{attack:.005,decay:.1,sustain:.9,release:1},filterEnvelope:{attack:.06,decay:.2,sustain:.5,release:2,baseFrequency:200,octaves:7,exponent:2}},t.MonoSynth.prototype._triggerEnvelopeAttack=function(t,e){return this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this},t.MonoSynth.prototype._triggerEnvelopeRelease=function(t){return this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this},t.MonoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this.filterEnvelope.dispose(),this.filterEnvelope=null,this.filter.dispose(),this.filter=null,this.frequency=null,this.detune=null,this},t.MonoSynth}),t(function(t){return t.DuoSynth=function(e){e=t.defaultArg(e,t.DuoSynth.defaults),t.Monophonic.call(this,e),this.voice0=new t.MonoSynth(e.voice0),this.voice0.volume.value=-10,this.voice1=new t.MonoSynth(e.voice1),this.voice1.volume.value=-10,this._vibrato=new t.LFO(e.vibratoRate,-50,50),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new t.Gain(e.vibratoAmount,t.Type.Positive),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new t.Signal(440,t.Type.Frequency),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),this._readOnly(["voice0","voice1","frequency","vibratoAmount","vibratoRate"])},t.extend(t.DuoSynth,t.Monophonic),t.DuoSynth.defaults={vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}},voice1:{volume:-10,portamento:0,oscillator:{type:"sine"},filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}},t.DuoSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.voice0.envelope.triggerAttack(t,e),this.voice1.envelope.triggerAttack(t,e),this.voice0.filterEnvelope.triggerAttack(t),this.voice1.filterEnvelope.triggerAttack(t),this},t.DuoSynth.prototype._triggerEnvelopeRelease=function(t){return this.voice0.triggerRelease(t),this.voice1.triggerRelease(t),this},t.DuoSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),this.voice0.dispose(),this.voice0=null,this.voice1.dispose(),this.voice1=null,this.frequency.dispose(),this.frequency=null,this._vibratoGain.dispose(),this._vibratoGain=null,this._vibrato=null,this.harmonicity.dispose(),this.harmonicity=null,this.vibratoAmount.dispose(),this.vibratoAmount=null,this.vibratoRate=null,this},t.DuoSynth}),t(function(t){return t.FMSynth=function(e){e=t.defaultArg(e,t.FMSynth.defaults),t.Monophonic.call(this,e),this._carrier=new t.Synth(e.carrier),this._carrier.volume.value=-10,this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope.set(e.envelope),this._modulator=new t.Synth(e.modulator),this._modulator.volume.value=-10,this.modulation=this._modulator.oscillator.set(e.modulation),this.modulationEnvelope=this._modulator.envelope.set(e.modulationEnvelope),this.frequency=new t.Signal(440,t.Type.Frequency),this.detune=new t.Signal(e.detune,t.Type.Cents),this.harmonicity=new t.Multiply(e.harmonicity),this.harmonicity.units=t.Type.Positive,this.modulationIndex=new t.Multiply(e.modulationIndex),this.modulationIndex.units=t.Type.Positive,this._modulationNode=new t.Gain(0),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this._readOnly(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"])},t.extend(t.FMSynth,t.Monophonic),t.FMSynth.defaults={harmonicity:3,modulationIndex:10,detune:0,oscillator:{type:"sine"},envelope:{attack:.01,decay:.01,sustain:1,release:.5},modulation:{type:"square"},modulationEnvelope:{attack:.5,decay:0,sustain:1,release:.5}},t.FMSynth.prototype._triggerEnvelopeAttack=function(t,e){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.modulationEnvelope.triggerAttack(t),this},t.FMSynth.prototype._triggerEnvelopeRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.modulationEnvelope.triggerRelease(t),this},t.FMSynth.prototype.dispose=function(){return t.Monophonic.prototype.dispose.call(this),this._writable(["frequency","harmonicity","modulationIndex","oscillator","envelope","modulation","modulationEnvelope","detune"]),this._carrier.dispose(),this._carrier=null,this._modulator.dispose(),this._modulator=null,this.frequency.dispose(),this.frequency=null,this.detune.dispose(),this.detune=null,this.modulationIndex.dispose(),this.modulationIndex=null,this.harmonicity.dispose(),this.harmonicity=null,this._modulationNode.dispose(),this._modulationNode=null,this.oscillator=null,this.envelope=null,this.modulationEnvelope=null,this.modulation=null,this},t.FMSynth}),t(function(t){return t.MembraneSynth=function(e){e=t.defaultArg(e,t.MembraneSynth.defaults),t.Instrument.call(this,e),this.oscillator=new t.OmniOscillator(e.oscillator).start(),this.envelope=new t.AmplitudeEnvelope(e.envelope),this.octaves=e.octaves,this.pitchDecay=e.pitchDecay,this.oscillator.chain(this.envelope,this.output),this._readOnly(["oscillator","envelope"])},t.extend(t.MembraneSynth,t.Instrument),t.MembraneSynth.defaults={pitchDecay:.05,octaves:10,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:1.4,attackCurve:"exponential"}},t.MembraneSynth.prototype.triggerAttack=function(t,e,n){e=this.toSeconds(e),t=this.toFrequency(t);var i=t*this.octaves;return this.oscillator.frequency.setValueAtTime(i,e),this.oscillator.frequency.exponentialRampToValueAtTime(t,e+this.toSeconds(this.pitchDecay)),this.envelope.triggerAttack(e,n),this},t.MembraneSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.MembraneSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["oscillator","envelope"]),this.oscillator.dispose(),this.oscillator=null,this.envelope.dispose(),this.envelope=null,this},t.MembraneSynth}),t(function(t){var e=[1,1.483,1.932,2.546,2.63,3.897];return t.MetalSynth=function(n){n=t.defaultArg(n,t.MetalSynth.defaults),t.Instrument.call(this,n),this.frequency=new t.Signal(n.frequency,t.Type.Frequency),this._oscillators=[],this._freqMultipliers=[],this._amplitue=new t.Gain(0).connect(this.output),this._highpass=new t.Filter({type:"highpass",Q:-3.0102999566398125}).connect(this._amplitue),this._octaves=n.octaves,this._filterFreqScaler=new t.Scale(n.resonance,7e3),this.envelope=new t.Envelope({attack:n.envelope.attack,attackCurve:"linear",decay:n.envelope.decay,sustain:0,release:n.envelope.release}).chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitue.gain);for(var i=0;i<e.length;i++){var r=new t.FMOscillator({type:"square",modulationType:"square",harmonicity:n.harmonicity,modulationIndex:n.modulationIndex});r.connect(this._highpass).start(),this._oscillators[i]=r;var o=new t.Multiply(e[i]);this._freqMultipliers[i]=o,this.frequency.chain(o,r.frequency)}this.octaves=n.octaves},t.extend(t.MetalSynth,t.Instrument),t.MetalSynth.defaults={frequency:200,envelope:{attack:.001,decay:1.4,release:.2},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5},t.MetalSynth.prototype.triggerAttack=function(e,n){return e=this.toSeconds(e),n=t.defaultArg(n,1),this.envelope.triggerAttack(e,n),this},t.MetalSynth.prototype.triggerRelease=function(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this},t.MetalSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},Object.defineProperty(t.MetalSynth.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].modulationIndex.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].harmonicity.value=t}}),Object.defineProperty(t.MetalSynth.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=t,this.octaves=this._octaves}}),Object.defineProperty(t.MetalSynth.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}}),t.MetalSynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this._oscillators.length;e++)this._oscillators[e].dispose(),this._freqMultipliers[e].dispose();this._oscillators=null,this._freqMultipliers=null,this.frequency.dispose(),this.frequency=null,this._filterFreqScaler.dispose(),this._filterFreqScaler=null,this._amplitue.dispose(),this._amplitue=null,this.envelope.dispose(),this.envelope=null,this._highpass.dispose(),this._highpass=null},t.MetalSynth}),t(function(t){return window.AudioBufferSourceNode&&!AudioBufferSourceNode.prototype.start&&(AudioBufferSourceNode.prototype.start=AudioBufferSourceNode.prototype.noteGrainOn,AudioBufferSourceNode.prototype.stop=AudioBufferSourceNode.prototype.noteOff),t.BufferSource=function(){var e=t.defaults(arguments,["buffer","onload"],t.BufferSource);t.AudioNode.call(this),this.onended=e.onended,this._startTime=-1,this._stopTime=-1,this._gainNode=this.output=new t.Gain,this._source=this.context.createBufferSource(),this._source.connect(this._gainNode),this._buffer=new t.Buffer(e.buffer,e.onload),this.playbackRate=new t.Param(this._source.playbackRate,t.Type.Positive),this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut,this.curve=e.curve,this._gain=1,this._onendedTimeout=-1,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.playbackRate.value=e.playbackRate},t.extend(t.BufferSource,t.AudioNode),t.BufferSource.defaults={onended:t.noOp,onload:t.noOp,loop:!1,loopStart:0,loopEnd:0,fadeIn:0,fadeOut:0,curve:"linear",playbackRate:1},Object.defineProperty(t.BufferSource.prototype,"state",{get:function(){var e=this.now();return-1!==this._startTime&&e>=this._startTime&&e<this._stopTime?t.State.Started:t.State.Stopped}}),t.BufferSource.prototype.start=function(e,n,i,r,o){if(-1!==this._startTime)throw new Error("Tone.BufferSource can only be started once.");if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");e=this.toSeconds(e),n=this.loop?t.defaultArg(n,this.loopStart):t.defaultArg(n,0),n=this.toSeconds(n),r=t.defaultArg(r,1),this._gain=r,o=this.toSeconds(t.defaultArg(o,this.fadeIn)),this.fadeIn=o,o>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(this._gain,e+o):this._gainNode.gain.setTargetAtTime(this._gain,e,this._gainNode.gain.getTimeConstant(o))):this._gainNode.gain.setValueAtTime(r,e),this._startTime=e;var s=this.toSeconds(t.defaultArg(i,this.buffer.duration-n));if(s=Math.max(s,0),(!this.loop||this.loop&&!t.isUndef(i))&&(this.loop||(s=Math.min(s,this.buffer.duration-n)),this.stop(e+s,this.fadeOut)),this.loop){var a=this.loopEnd||this.buffer.duration,u=this.loopStart,c=a-u;n>a&&(n=(n-u)%c+u)}return this._source.buffer=this.buffer.get(),this._source.loopEnd=this.loopEnd||this.buffer.duration,t.isPast(e),this._source.start(e,n),this},t.BufferSource.prototype.stop=function(e,n){if(!this.buffer.loaded)throw new Error("Tone.BufferSource: buffer is either not set or not loaded.");if(e=this.toSeconds(e),-1===this._stopTime||this._stopTime>e){if(e<=this._startTime)return this._gainNode.gain.cancelScheduledValues(e),this._gainNode.gain.value=0,this;e=Math.max(this._startTime+this.fadeIn+this.sampleTime,e),this._gainNode.gain.cancelScheduledValues(e),this._stopTime=e,n=this.toSeconds(t.defaultArg(n,this.fadeOut));var i=Math.min(e-this._startTime-this.fadeIn-this.sampleTime,this.buffer.duration);n=Math.min(i,n);var r=e-n;n>this.sampleTime?(this._gainNode.gain.setValueAtTime(this._gain,r),"linear"===this.curve?this._gainNode.gain.linearRampToValueAtTime(0,e):this._gainNode.gain.setTargetAtTime(0,r,this._gainNode.gain.getTimeConstant(n))):this._gainNode.gain.setValueAtTime(0,e),t.context.clearTimeout(this._onendedTimeout),this._onendedTimeout=t.context.setTimeout(this._onended.bind(this),this._stopTime-this.now())}return this},t.BufferSource.prototype._onended=function(){this.onended(this)},Object.defineProperty(t.BufferSource.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.BufferSource.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.BufferSource.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t}}),t.BufferSource.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.onended=null,this._source.disconnect(),this._source=null,this._gainNode.dispose(),this._gainNode=null,this._buffer.dispose(),this._buffer=null,this._startTime=-1,this.playbackRate=null,t.context.clearTimeout(this._onendedTimeout),this},t.BufferSource}),t(function(t){function e(){for(var e in n)i[e]=(new t.Buffer).fromArray(n[e])}t.Noise=function(){var e=t.defaults(arguments,["type"],t.Noise);t.Source.call(this,e),this._source=null,this._type=e.type,this._playbackRate=e.playbackRate},t.extend(t.Noise,t.Source),t.Noise.defaults={type:"white",playbackRate:1},Object.defineProperty(t.Noise.prototype,"type",{get:function(){return this._type},set:function(e){if(this._type!==e){if(!(e in i))throw new TypeError("Tone.Noise: invalid type: "+e);if(this._type=e,this.state===t.State.Started){var n=this.now();this._stop(n),this._start(n)}}}}),Object.defineProperty(t.Noise.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),t.Noise.prototype._start=function(e){var n=i[this._type];this._source=new t.BufferSource(n).connect(this.output),this._source.loop=!0,this._source.playbackRate.value=this._playbackRate,this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))},t.Noise.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},t.Noise.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer=null,this};var n={pink:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var i,r,o,s,a,u,c;i=r=o=s=a=u=c=0;for(var l=0;l<220500;l++){var h=2*Math.random()-1;i=.99886*i+.0555179*h,r=.99332*r+.0750759*h,o=.969*o+.153852*h,s=.8665*s+.3104856*h,a=.55*a+.5329522*h,u=-.7616*u-.016898*h,n[l]=i+r+o+s+a+u+c+.5362*h,n[l]*=.11,c=.115926*h}}return t}(),brown:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var i=0,r=0;r<220500;r++){var o=2*Math.random()-1;n[r]=(i+.02*o)/1.02,i=n[r],n[r]*=3.5}}return t}(),white:function(){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var i=0;i<220500;i++)n[i]=2*Math.random()-1}return t}()},i={};return t.getContext(e),t.Context.on("init",e),t.Noise}),t(function(t){return t.NoiseSynth=function(e){e=t.defaultArg(e,t.NoiseSynth.defaults),t.Instrument.call(this,e),this.noise=new t.Noise,this.envelope=new t.AmplitudeEnvelope(e.envelope),this.noise.chain(this.envelope,this.output),this.noise.start(),this._readOnly(["noise","envelope"])},t.extend(t.NoiseSynth,t.Instrument),t.NoiseSynth.defaults={noise:{type:"white"},envelope:{attack:.005,decay:.1,sustain:0}},t.NoiseSynth.prototype.triggerAttack=function(t,e){return this.envelope.triggerAttack(t,e),this},t.NoiseSynth.prototype.triggerRelease=function(t){return this.envelope.triggerRelease(t),this},t.NoiseSynth.prototype.triggerAttackRelease=function(t,e,n){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this},t.NoiseSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._writable(["noise","envelope"]),this.noise.dispose(),this.noise=null,this.envelope.dispose(),this.envelope=null,this},t.NoiseSynth}),t(function(t){return t.PluckSynth=function(e){e=t.defaultArg(e,t.PluckSynth.defaults),t.Instrument.call(this,e),this._noise=new t.Noise("pink"),this.attackNoise=e.attackNoise,this._lfcf=new t.LowpassCombFilter({resonance:e.resonance,dampening:e.dampening}),this.resonance=this._lfcf.resonance,this.dampening=this._lfcf.dampening,this._noise.connect(this._lfcf),this._lfcf.connect(this.output),this._readOnly(["resonance","dampening"])},t.extend(t.PluckSynth,t.Instrument),t.PluckSynth.defaults={attackNoise:1,dampening:4e3,resonance:.9},t.PluckSynth.prototype.triggerAttack=function(t,e){t=this.toFrequency(t),e=this.toSeconds(e);var n=1/t;return this._lfcf.delayTime.setValueAtTime(n,e),this._noise.start(e),this._noise.stop(e+n*this.attackNoise),this},t.PluckSynth.prototype.dispose=function(){return t.Instrument.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this._noise=null,this._lfcf=null,this._writable(["resonance","dampening"]),this.dampening=null,this.resonance=null,this},t.PluckSynth}),t(function(t){return t.PolySynth=function(){var e=t.defaults(arguments,["polyphony","voice"],t.PolySynth);t.Instrument.call(this,e),e=t.defaultArg(e,t.Instrument.defaults),e.polyphony=Math.min(t.PolySynth.MAX_POLYPHONY,e.polyphony),this.voices=new Array(e.polyphony),this._triggers=new Array(e.polyphony),this.detune=new t.Signal(e.detune,t.Type.Cents),this._readOnly("detune");for(var n=0;n<e.polyphony;n++){var i=new e.voice(arguments[2],arguments[3]);this.voices[n]=i,i.connect(this.output),i.hasOwnProperty("detune")&&this.detune.connect(i.detune),this._triggers[n]={release:-1,note:null,voice:i}}},t.extend(t.PolySynth,t.Instrument),t.PolySynth.defaults={polyphony:4,volume:0,detune:0,voice:t.Synth},t.PolySynth.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var i=0;i<t.length;i++){for(var r=t[i],o=this._triggers[0],s=1;s<this._triggers.length;s++)this._triggers[s].release<o.release&&(o=this._triggers[s],s);o.release=1/0,o.note=JSON.stringify(r),o.voice.triggerAttack(r,e,n)}return this},t.PolySynth.prototype.triggerAttackRelease=function(e,n,i,r){if(i=this.toSeconds(i),this.triggerAttack(e,i,r),t.isArray(n)&&t.isArray(e))for(var o=0;o<e.length;o++){var s=n[Math.min(o,n.length-1)];this.triggerRelease(e[o],i+this.toSeconds(s))}else this.triggerRelease(e,i+this.toSeconds(n));return this},t.PolySynth.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]),e=this.toSeconds(e);for(var n=0;n<t.length;n++)for(var i=JSON.stringify(t[n]),r=0;r<this._triggers.length;r++){var o=this._triggers[r];o.note===i&&o.release>e&&(o.voice.triggerRelease(e),o.release=e)}return this},t.PolySynth.prototype.set=function(t,e,n){for(var i=0;i<this.voices.length;i++)this.voices[i].set(t,e,n);return this},t.PolySynth.prototype.get=function(t){return this.voices[0].get(t)},t.PolySynth.prototype.releaseAll=function(t){t=this.toSeconds(t);for(var e=0;e<this._triggers.length;e++){var n=this._triggers[e];n.release>t&&(n.release=t,n.voice.triggerRelease(t))}return this},t.PolySynth.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this);for(var e=0;e<this.voices.length;e++)this.voices[e].dispose(),this.voices[e]=null;return this._writable("detune"),this.detune.dispose(),this.detune=null,this.voices=null,this._triggers=null,this},t.PolySynth.MAX_POLYPHONY=20,t.PolySynth}),t(function(t){return t.Sampler=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var i=t.defaults(n,["onload","baseUrl"],t.Sampler);t.Instrument.call(this,i);var r={};for(var o in e)if(t.isNote(o)){var s=t.Frequency(o).toMidi();r[s]=e[o]}else{if(isNaN(parseFloat(o)))throw new Error("Tone.Sampler: url keys must be the note's pitch");r[o]=e[o]}this._buffers=new t.Buffers(r,i.onload,i.baseUrl),this._activeSources={},this.attack=i.attack,this.release=i.release},t.extend(t.Sampler,t.Instrument),t.Sampler.defaults={attack:0,release:.1,onload:t.noOp,baseUrl:""},t.Sampler.prototype._findClosest=function(t){for(var e=0;e<24;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}return null},t.Sampler.prototype.triggerAttack=function(e,n,i){var r=t.Frequency(e).toMidi(),o=this._findClosest(r);if(null!==o){var s=r-o,a=this._buffers.get(s),u=new t.BufferSource({buffer:a,playbackRate:t.intervalToFrequencyRatio(o),fadeIn:this.attack,fadeOut:this.release,curve:"exponential"}).connect(this.output);u.start(n,0,a.duration,i),t.isArray(this._activeSources[r])||(this._activeSources[r]=[]),this._activeSources[r].push({note:r,source:u})}return this},t.Sampler.prototype.triggerRelease=function(e,n){var i=t.Frequency(e).toMidi();if(this._activeSources[i]&&this._activeSources[i].length){var r=this._activeSources[i].shift().source;n=this.toSeconds(n),r.stop(n+this.release,this.release)}},t.Sampler.prototype.triggerAttackRelease=function(t,e,n,i){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(t,n,i),this.triggerRelease(t,n+e),this},t.Sampler.prototype.add=function(e,n,i){if(t.isNote(e)){var r=t.Frequency(e).toMidi();this._buffers.add(r,n,i)}else{if(isNaN(parseFloat(e)))throw new Error("Tone.Sampler: note must be the note's pitch. Instead got "+e);this._buffers.add(e,n,i)}},Object.defineProperty(t.Sampler.prototype,"loaded",{get:function(){return this._buffers.loaded}}),t.Sampler.prototype.dispose=function(){t.Instrument.prototype.dispose.call(this),this._buffers.dispose(),this._buffers=null;for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.source.dispose()});return this._activeSources=null,this},t.Sampler}),t(function(t){return t.GainToAudio=function(){t.SignalBase.call(this),this._norm=this.input=this.output=new t.WaveShaper(function(t){return 2*Math.abs(t)-1})},t.extend(t.GainToAudio,t.SignalBase),t.GainToAudio.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},t.GainToAudio}),t(function(t){return t.Normalize=function(e,n){t.SignalBase.call(this),this._inputMin=t.defaultArg(e,0),this._inputMax=t.defaultArg(n,1),this._sub=this.input=new t.Add(0),this._div=this.output=new t.Multiply(1),this._sub.connect(this._div),this._setRange()},t.extend(t.Normalize,t.SignalBase),Object.defineProperty(t.Normalize.prototype,"min",{get:function(){return this._inputMin},set:function(t){this._inputMin=t,this._setRange()}}),Object.defineProperty(t.Normalize.prototype,"max",{get:function(){return this._inputMax},set:function(t){this._inputMax=t,this._setRange()}}),t.Normalize.prototype._setRange=function(){this._sub.value=-this._inputMin,this._div.value=1/(this._inputMax-this._inputMin)},t.Normalize.prototype.dispose=function(){return t.SignalBase.prototype.dispose.call(this),this._sub.dispose(),this._sub=null,this._div.dispose(),this._div=null,this},t.Normalize}),t(function(t){return t.TransportTimelineSignal=function(){t.TimelineSignal.apply(this,arguments),this.output=this._outputSig=new t.Signal(this._initial),this._lastVal=this.value,this._synced=t.Transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._bindAnchorValue=this._anchorValue.bind(this),t.Transport.on("start stop pause",this._bindAnchorValue),this._events.memory=1/0},t.extend(t.TransportTimelineSignal,t.TimelineSignal),t.TransportTimelineSignal.prototype._onTick=function(e){var n=this.getValueAtTime(t.Transport.seconds);this._lastVal!==n&&(this._lastVal=n,this._outputSig.linearRampToValueAtTime(n,e))},t.TransportTimelineSignal.prototype._anchorValue=function(e){var n=this.getValueAtTime(t.Transport.ticks);return this._lastVal=n,this._outputSig.cancelScheduledValues(e),this._outputSig.setValueAtTime(n,e),this},t.TransportTimelineSignal.prototype.getValueAtTime=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.getValueAtTime.call(this,e)},t.TransportTimelineSignal.prototype.setValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.setValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.linearRampToValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.linearRampToValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.exponentialRampToValueAtTime=function(e,n){return n=this.toTicks(n),t.TimelineSignal.prototype.exponentialRampToValueAtTime.call(this,e,n),this},t.TransportTimelineSignal.prototype.setTargetAtTime=function(e,n,i){return n=this.toTicks(n),t.TimelineSignal.prototype.setTargetAtTime.call(this,e,n,i),this},t.TransportTimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toTicks(e),t.TimelineSignal.prototype.cancelScheduledValues.call(this,e),this},t.TransportTimelineSignal.prototype.setValueCurveAtTime=function(e,n,i,r){return n=this.toTicks(n),i=this.toTicks(i),t.TimelineSignal.prototype.setValueCurveAtTime.call(this,e,n,i,r),this},t.TransportTimelineSignal.prototype.dispose=function(){t.Transport.clear(this._synced),t.Transport.off("start stop pause",this._syncedCallback),this._events.cancel(0),t.TimelineSignal.prototype.dispose.call(this),this._outputSig.dispose(),this._outputSig=null},t.TransportTimelineSignal}),t(function(t){return t.MultiPlayer=function(e){console.warn("Tone.MultiPlayer is deprecated. Use Tone.Players instead."),1!==arguments.length||t.isUndef(arguments[0])||arguments[0].hasOwnProperty("urls")||(e={urls:e});var n=t.defaults(arguments,["urls","onload"],t.MultiPlayer);t.Source.call(this,n),n.urls instanceof t.Buffers?this.buffers=n.urls:this.buffers=new t.Buffers(n.urls,n.onload),this._activeSources={},this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut},t.extend(t.MultiPlayer,t.Source),t.MultiPlayer.defaults={onload:t.noOp,fadeIn:0,fadeOut:0},t.MultiPlayer.prototype._makeSource=function(e){var n;t.isString(e)||t.isNumber(e)?n=this.buffers.get(e).get():e instanceof t.Buffer?n=e.get():e instanceof AudioBuffer&&(n=e);var i=new t.BufferSource(n).connect(this.output);return this._activeSources.hasOwnProperty(e)||(this._activeSources[e]=[]),this._activeSources[e].push(i),i},t.MultiPlayer.prototype.start=function(e,n,i,r,o,s){n=this.toSeconds(n);var a=this._makeSource(e);return a.start(n,i,r,t.defaultArg(s,1),this.fadeIn),r&&a.stop(n+this.toSeconds(r),this.fadeOut),o=t.defaultArg(o,0),a.playbackRate.value=t.intervalToFrequencyRatio(o),this},t.MultiPlayer.prototype.startLoop=function(e,n,i,r,o,s,a){n=this.toSeconds(n);var u=this._makeSource(e);return u.loop=!0,u.loopStart=this.toSeconds(t.defaultArg(r,0)),u.loopEnd=this.toSeconds(t.defaultArg(o,0)),u.start(n,i,void 0,t.defaultArg(a,1),this.fadeIn),s=t.defaultArg(s,0),u.playbackRate.value=t.intervalToFrequencyRatio(s),this},t.MultiPlayer.prototype.stop=function(t,e){if(!this._activeSources[t]||!this._activeSources[t].length)throw new Error("Tone.MultiPlayer: cannot stop a buffer that hasn't been started or is already stopped");return e=this.toSeconds(e),this._activeSources[t].shift().stop(e,this.fadeOut),this},t.MultiPlayer.prototype.stopAll=function(t){t=this.toSeconds(t);for(var e in this._activeSources)for(var n=this._activeSources[e],i=0;i<n.length;i++)n[i].stop(t);return this},t.MultiPlayer.prototype.add=function(t,e,n){return this.buffers.add(t,e,n),this},Object.defineProperty(t.MultiPlayer.prototype,"state",{get:function(){return this._activeSources.length>0?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.MultiPlayer.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.MultiPlayer.prototype.dispose=function(){t.Source.prototype.dispose.call(this);for(var e in this._activeSources)this._activeSources[e].forEach(function(t){t.dispose()});return this.buffers.dispose(),this.buffers=null,this._activeSources=null,this},t.MultiPlayer}),t(function(t){return t.GrainPlayer=function(){var e=t.defaults(arguments,["url","onload"],t.GrainPlayer);t.Source.call(this,e),this.buffer=new t.Buffer(e.url,e.onload),this._clock=new t.Clock(this._tick.bind(this),e.grainSize),this._loopStart=0,this._loopEnd=0,this._activeSources=[],this._playbackRate=e.playbackRate,this._grainSize=e.grainSize,this._overlap=e.overlap,this.detune=e.detune,this.overlap=e.overlap,this.loop=e.loop,this.playbackRate=e.playbackRate,this.grainSize=e.grainSize,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.reverse=e.reverse,this._clock.on("stop",this._onstop.bind(this))},t.extend(t.GrainPlayer,t.Source),t.GrainPlayer.defaults={onload:t.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1},t.GrainPlayer.prototype._start=function(e,n,i){n=t.defaultArg(n,0),n=this.toSeconds(n),e=this.toSeconds(e),this._offset=n,this._clock.start(e),i&&this.stop(e+this.toSeconds(i))},t.GrainPlayer.prototype._stop=function(t){this._clock.stop(t)},t.GrainPlayer.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.stop(t,0)})},t.GrainPlayer.prototype._tick=function(e){var n=this._offset<this._overlap?0:this._overlap,i=new t.BufferSource({buffer:this.buffer,fadeIn:n,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:t.intervalToFrequencyRatio(this.detune/100)}).connect(this.output);i.start(e,this._offset),this._offset+=this.grainSize,i.stop(e+this.grainSize),this._activeSources.push(i),i.onended=function(){var t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}.bind(this)},t.GrainPlayer.prototype.seek=function(t,e){return this._offset=this.toSeconds(t),this._tick(this.toSeconds(e)),this},Object.defineProperty(t.GrainPlayer.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)}}),Object.defineProperty(t.GrainPlayer.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t}}),Object.defineProperty(t.GrainPlayer.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.value=this._playbackRate/this._grainSize}}),Object.defineProperty(t.GrainPlayer.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)}}),t.GrainPlayer.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),this.buffer.dispose(),this.buffer=null,this._clock.dispose(),this._clock=null,this._activeSources.forEach(function(t){t.dispose()}),this._activeSources=null,this},t.GrainPlayer}),t(function(t){return t.Player=function(e){var n;e instanceof t.Buffer?(e=e.get(),n=t.Player.defaults):n=t.defaults(arguments,["url","onload"],t.Player),t.Source.call(this,n),this._source=null,this.autostart=n.autostart,this._buffer=new t.Buffer({url:n.url,onload:this._onload.bind(this,n.onload),reverse:n.reverse}),e instanceof AudioBuffer&&this._buffer.set(e),this._loop=n.loop,this._loopStart=n.loopStart,this._loopEnd=n.loopEnd,this._playbackRate=n.playbackRate,this.retrigger=n.retrigger,this.fadeIn=n.fadeIn,this.fadeOut=n.fadeOut},t.extend(t.Player,t.Source),t.Player.defaults={onload:t.noOp,playbackRate:1,loop:!1,autostart:!1,loopStart:0,loopEnd:0,retrigger:!1,reverse:!1,fadeIn:0,fadeOut:0},t.Player.prototype.load=function(t,e){return this._buffer.load(t,this._onload.bind(this,e))},t.Player.prototype._onload=function(e){e=t.defaultArg(e,t.noOp),e(this),this.autostart&&this.start()},t.Player.prototype._start=function(e,n,i){return n=this._loop?t.defaultArg(n,this._loopStart):t.defaultArg(n,0),n=this.toSeconds(n),i=t.defaultArg(i,Math.max(this._buffer.duration-n,0)),i=this.toSeconds(i),e=this.toSeconds(e),this._source=new t.BufferSource({buffer:this._buffer,loop:this._loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:this._playbackRate,fadeIn:this.fadeIn,fadeOut:this.fadeOut}).connect(this.output),this._loop||this._synced||this._state.setStateAtTime(t.State.Stopped,e+i),this._loop?this._source.start(e,n):this._source.start(e,n,i),this},t.Player.prototype._stop=function(t){return this._source&&this._source.stop(this.toSeconds(t)),this},t.Player.prototype.seek=function(e,n){return n=this.toSeconds(n),this._state.getValueAtTime(n)===t.State.Started&&(e=this.toSeconds(e),this._stop(n),this._start(n,e)),this},t.Player.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(t.Player.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._source&&(this._source.loopStart=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._source&&(this._source.loopEnd=this.toSeconds(t))}}),Object.defineProperty(t.Player.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)}}),Object.defineProperty(t.Player.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._source&&(this._source.loop=t)}}),Object.defineProperty(t.Player.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}}),Object.defineProperty(t.Player.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t}}),Object.defineProperty(t.Player.prototype,"loaded",{get:function(){return this._buffer.loaded}}),t.Player.prototype.dispose=function(){return t.Source.prototype.dispose.call(this),null!==this._source&&(this._source.disconnect(),this._source=null),this._buffer.dispose(),this._buffer=null,this},t.Player}),t(function(t){return t.Players=function(e){var n=Array.prototype.slice.call(arguments);n.shift();var i=t.defaults(n,["onload"],t.Players);t.call(this),this._volume=this.output=new t.Volume(i.volume),this.volume=this._volume.volume,this._readOnly("volume"),this._volume.output.output.channelCount=2,this._volume.output.output.channelCountMode="explicit",this.mute=i.mute,this._players={},this._loadingCount=0,this._fadeIn=i.fadeIn,this._fadeOut=i.fadeOut;for(var r in e)this._loadingCount++,this.add(r,e[r],this._bufferLoaded.bind(this,i.onload))},t.extend(t.Players,t.AudioNode),t.Players.defaults={volume:0,mute:!1,onload:t.noOp,fadeIn:0,fadeOut:0},t.Players.prototype._bufferLoaded=function(t){0===--this._loadingCount&&t&&t(this)},Object.defineProperty(t.Players.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),Object.defineProperty(t.Players.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._forEach(function(e){e.fadeIn=t})}}),Object.defineProperty(t.Players.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._forEach(function(e){e.fadeOut=t})}}),Object.defineProperty(t.Players.prototype,"state",{get:function(){var e=!1;return this._forEach(function(n){e=e||n.state===t.State.Started}),e?t.State.Started:t.State.Stopped}}),t.Players.prototype.has=function(t){return this._players.hasOwnProperty(t)},t.Players.prototype.get=function(t){if(this.has(t))return this._players[t];throw new Error("Tone.Players: no player named "+t)},t.Players.prototype._forEach=function(t){for(var e in this._players)t(this._players[e],e);return this},Object.defineProperty(t.Players.prototype,"loaded",{get:function(){var t=!0;return this._forEach(function(e){t=t&&e.loaded}),t}}),t.Players.prototype.add=function(e,n,i){return this._players[e]=new t.Player(n,i).connect(this.output),this._players[e].fadeIn=this._fadeIn,this._players[e].fadeOut=this._fadeOut,this},t.Players.prototype.stopAll=function(t){this._forEach(function(e){e.stop(t)})},t.Players.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this._volume.dispose(),this._volume=null,this._writable("volume"),this.volume=null,this.output=null,this._forEach(function(t){t.dispose()}),this._players=null,this},t.Players}),t(function(t){return t.UserMedia=function(){var e=t.defaults(arguments,["volume"],t.UserMedia);t.AudioNode.call(this),this._mediaStream=null,this._stream=null,this._device=null,this._volume=this.output=new t.Volume(e.volume),this.volume=this._volume.volume,this._readOnly("volume"),this.mute=e.mute},t.extend(t.UserMedia,t.AudioNode),t.UserMedia.defaults={volume:0,mute:!1},t.UserMedia.prototype.open=function(e){return e=t.defaultArg(e,"default"),t.UserMedia.enumerateDevices().then(function(n){var i;if(t.isNumber(e))i=n[e];else if(!(i=n.find(function(t){return t.label===e||t.deviceId===e})))throw new Error("Tone.UserMedia: no matching device: "+e);this._device=i;var r={audio:{deviceId:i.deviceId,echoCancellation:!1,sampleRate:this.context.sampleRate}};return navigator.mediaDevices.getUserMedia(r).then(function(t){return this._stream||(this._stream=t,this._mediaStream=this.context.createMediaStreamSource(t),this._mediaStream.connect(this.output)),this}.bind(this))}.bind(this))},t.UserMedia.prototype.close=function(){return this._stream&&(this._stream.getAudioTracks().forEach(function(t){t.stop()}),this._stream=null,this._mediaStream.disconnect(),this._mediaStream=null),this._device=null,this},t.UserMedia.enumerateDevices=function(){return navigator.mediaDevices.enumerateDevices().then(function(t){return t.filter(function(t){return"audioinput"===t.kind})})},Object.defineProperty(t.UserMedia.prototype,"state",{get:function(){return this._stream&&this._stream.active?t.State.Started:t.State.Stopped}}),Object.defineProperty(t.UserMedia.prototype,"deviceId",{get:function(){if(this._device)return this._device.deviceId}}),Object.defineProperty(t.UserMedia.prototype,"groupId",{get:function(){if(this._device)return this._device.groupId}}),Object.defineProperty(t.UserMedia.prototype,"label",{get:function(){if(this._device)return this._device.label}}),Object.defineProperty(t.UserMedia.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t}}),t.UserMedia.prototype.dispose=function(){return t.AudioNode.prototype.dispose.call(this),this.close(),this._writable("volume"),this._volume.dispose(),this._volume=null,this.volume=null,this},Object.defineProperty(t.UserMedia,"supported",{get:function(){return!t.isUndef(navigator.mediaDevices)&&t.isFunction(navigator.mediaDevices.getUserMedia)}}),t.UserMedia}),e})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";function i(t,e){return function(n){return t+n*e}}function r(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function o(t,e){var n=e-t;return n?i(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(u.a)(isNaN(t)?e:t)}function s(t){return 1==(t=+t)?a:function(e,n){return n-e?r(e,n,t):Object(u.a)(isNaN(e)?n:e)}}function a(t,e){var n=e-t;return n?i(t,n):Object(u.a)(isNaN(t)?e:t)}e.c=o,e.b=s,e.a=a;var u=n(834)},function(t,e,n){"use strict";var i=n(2046);n.d(e,"d",function(){return i.a});var r=n(2047);n.d(e,"e",function(){return r.a});var o=n(538);n.d(e,"c",function(){return o.a});var s=n(2048);n.d(e,"b",function(){return s.a});var a=n(2049);n.d(e,"f",function(){return a.a});var u=n(2050);n.d(e,"a",function(){return u.a})},function(t,e,n){"use strict";function i(t){return[Object(l.e)(t[1],t[0]),Object(l.c)(t[2])]}function r(t){var e=t[0],n=t[1],i=Object(l.g)(n);return[i*Object(l.g)(e),i*Object(l.t)(e),Object(l.t)(n)]}function o(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function a(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function u(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function c(t){var e=Object(l.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}e.g=i,e.a=r,e.d=o,e.c=s,e.b=a,e.f=u,e.e=c;var l=n(49)},function(t,e,n){"use strict";function i(t){return function(e,n){var i=Object(o.g)(e),r=Object(o.g)(n),s=t(i*r);return[s*r*Object(o.t)(e),s*Object(o.t)(n)]}}function r(t){return function(e,n){var i=Object(o.u)(e*e+n*n),r=t(i),s=Object(o.t)(r),a=Object(o.g)(r);return[Object(o.e)(e*s,i*a),Object(o.c)(i&&n*s/i)]}}e.b=i,e.a=r;var o=n(49)},function(t,e,n){"use strict";e.a=function(t,e,n,i,r){for(var o,s=t.children,a=-1,u=s.length,c=t.value&&(i-e)/t.value;++a<u;)o=s[a],o.y0=n,o.y1=r,o.x0=e,o.x1=e+=o.value*c}},function(t,e,n){"use strict";function i(t){var e=t.domain;return t.ticks=function(t){var n=e();return Object(o.B)(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Object(u.a)(e(),t,n)},t.nice=function(n){null==n&&(n=10);var i,r=e(),s=0,a=r.length-1,u=r[s],c=r[a];return c<u&&(i=u,u=c,c=i,i=s,s=a,a=i),i=Object(o.z)(u,c,n),i>0?(u=Math.floor(u/i)*i,c=Math.ceil(c/i)*i,i=Object(o.z)(u,c,n)):i<0&&(u=Math.ceil(u*i)/i,c=Math.floor(c*i)/i,i=Object(o.z)(u,c,n)),i>0?(r[s]=Math.floor(u/i)*i,r[a]=Math.ceil(c/i)*i,e(r)):i<0&&(r[s]=Math.ceil(u*i)/i,r[a]=Math.floor(c*i)/i,e(r)),t},t}function r(){var t=Object(a.b)(a.c,s.m);return t.copy=function(){return Object(a.a)(t,r())},i(t)}e.b=i,e.a=r;var o=n(136),s=n(238),a=n(412),u=n(2158)},function(t,e,n){"use strict";e.a=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}},function(t,e,n){"use strict";function i(t){return t>1?0:t<-1?p:Math.acos(t)}function r(t){return t>=1?d:t<=-1?-d:Math.asin(t)}n.d(e,"a",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return c}),n.d(e,"k",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"f",function(){return f}),n.d(e,"j",function(){return p}),n.d(e,"g",function(){return d}),n.d(e,"m",function(){return y}),e.b=i,e.c=r;var o=Math.abs,s=Math.atan2,a=Math.cos,u=Math.max,c=Math.min,l=Math.sin,h=Math.sqrt,f=1e-12,p=Math.PI,d=p/2,y=2*p},function(t,e,n){"use strict";e.a=function(t,e){if((r=t.length)>1)for(var n,i,r,o=1,s=t[e[0]],a=s.length;o<r;++o)for(i=s,s=t[e[o]],n=0;n<a;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}},function(t,e,n){"use strict";e.a=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}},function(t,e,n){"use strict";function i(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function r(t,e){return e[1]-t[1]||e[0]-t[0]}function o(t,e){var n,i,o,y=t.sort(r).pop();for(c=[],a=new Array(t.length),s=new d.b,u=new d.b;;)if(o=f.c,y&&(!o||y[1]<o.y||y[1]===o.y&&y[0]<o.x))y[0]===n&&y[1]===i||(Object(l.a)(y),n=y[0],i=y[1]),y=t.pop();else{if(!o)break;Object(l.b)(o.arc)}if(Object(h.d)(),e){var _=+e[0][0],v=+e[0][1],m=+e[1][0],g=+e[1][1];Object(p.a)(_,v,m,g),Object(h.b)(_,v,m,g)}this.edges=c,this.cells=a,s=u=c=a=null}n.d(e,"f",function(){return y}),n.d(e,"g",function(){return _}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return c}),e.d=o;var s,a,u,c,l=n(2217),h=n(890),f=n(891),p=n(563),d=n(562),y=1e-6,_=1e-12;o.prototype={constructor:o,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Object(h.a)(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(s=(o=n.halfedges).length)for(var o,s,a,u=n.site,c=-1,l=e[o[s-1]],h=l.left===u?l.right:l.left;++c<s;)a=h,l=e[o[c]],h=l.left===u?l.right:l.left,a&&h&&r<a.index&&r<h.index&&i(u,a,h)<0&&t.push([u.data,a.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var u=t-r.site[0],c=e-r.site[1],l=u*u+c*c;do{r=o.cells[i=s],s=null,r.halfedges.forEach(function(n){var i=o.edges[n],a=i.left;if(a!==r.site&&a||(a=i.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;h<l&&(l=h,s=a.index)}})}while(null!==s);return o._found=i,null==n||l<=n*n?r.site:null}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return t+e*n}}},function(t,e,n){"use strict";var i=n(537);n.d(e,"b",function(){return i.b}),n.d(e,"d",function(){return i.c}),n.d(e,"e",function(){return i.d});var r=n(2007);n.d(e,"c",function(){return r.a});var o=n(2008);n.d(e,"a",function(){return o.a})},function(t,e,n){"use strict";function i(t,e){var n,i;return function(){var r=Object(s.h)(this,t),o=r.tween;if(o!==n){i=n=o;for(var a=0,u=i.length;a<u;++a)if(i[a].name===e){i=i.slice(),i.splice(a,1);break}}r.tween=i}}function r(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Object(s.h)(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var u={name:e,value:n},c=0,l=r.length;c<l;++c)if(r[c].name===e){r[c]=u;break}c===l&&r.push(u)}o.tween=r}}function o(t,e,n){var i=t._id;return t.each(function(){var t=Object(s.h)(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Object(s.f)(t,i).value[e]}}e.b=o;var s=n(239);e.a=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o,a=Object(s.f)(this.node(),n).tween,u=0,c=a.length;u<c;++u)if((o=a[u]).name===t)return o.value;return null}return this.each((null==e?i:r)(n,t,e))}},function(t,e,n){"use strict";var i=n(545);e.a=function(t){return t=Object(i.a)(Math.abs(t)),t?t[1]:NaN}},function(t,e,n){"use strict";function i(t,e){return[t>c.o?t-c.w:t<-c.o?t+c.w:t,e]}function r(t,e,n){return(t%=c.w)?e||n?Object(u.a)(s(t),a(e,n)):s(t):e||n?a(e,n):i}function o(t){return function(e,n){return e+=t,[e>c.o?e-c.w:e<-c.o?e+c.w:e,n]}}function s(t){var e=o(t);return e.invert=o(-t),e}function a(t,e){function n(t,e){var n=Object(c.g)(e),a=Object(c.g)(t)*n,u=Object(c.t)(t)*n,l=Object(c.t)(e),h=l*i+a*r;return[Object(c.e)(u*o-h*s,a*i-l*r),Object(c.c)(h*o+u*s)]}var i=Object(c.g)(t),r=Object(c.t)(t),o=Object(c.g)(e),s=Object(c.t)(e);return n.invert=function(t,e){var n=Object(c.g)(e),a=Object(c.g)(t)*n,u=Object(c.t)(t)*n,l=Object(c.t)(e),h=l*o-u*s;return[Object(c.e)(u*o+l*s,a*i+h*r),Object(c.c)(h*i-a*r)]},n}e.b=r;var u=n(850),c=n(49);i.invert=i,e.a=function(t){function e(e){return e=t(e[0]*c.r,e[1]*c.r),e[0]*=c.h,e[1]*=c.h,e}return t=r(t[0]*c.r,t[1]*c.r,t.length>2?t[2]*c.r:0),e.invert=function(e){return e=t.invert(e[0]*c.r,e[1]*c.r),e[0]*=c.h,e[1]*=c.h,e},e}},function(t,e,n){"use strict";function i(t,e,n,i){function h(r,o){return t<=r&&r<=n&&e<=o&&o<=i}function f(r,o,s,a){var u=0,c=0;if(null==r||(u=p(r,s))!==(c=p(o,s))||y(r,o)<0^s>0)do{a.point(0===u||3===u?t:n,u>1?i:e)}while((u=(u+s+4)%4)!==c);else a.point(o[0],o[1])}function p(i,o){return Object(r.a)(i[0]-t)<r.i?o>0?0:3:Object(r.a)(i[0]-n)<r.i?o>0?2:1:Object(r.a)(i[1]-e)<r.i?o>0?1:0:o>0?3:2}function d(t,e){return y(t.x,e.x)}function y(t,e){var n=p(t,1),i=p(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){function p(t,e){h(t,e)&&N.point(t,e)}function y(){for(var e=0,n=0,r=O.length;n<r;++n)for(var o,s,a=O[n],u=1,c=a.length,l=a[0],h=l[0],f=l[1];u<c;++u)o=h,s=f,l=a[u],h=l[0],f=l[1],s<=i?f>i&&(h-o)*(i-s)>(f-s)*(t-o)&&++e:f<=i&&(h-o)*(i-s)<(f-s)*(t-o)&&--e;return e}function _(){N=C,w=[],O=[],E=!0}function v(){var t=y(),e=E&&t,n=(w=Object(u.n)(w)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),f(null,null,1,r),r.lineEnd()),n&&Object(a.a)(w,d,t,f,r),r.polygonEnd()),N=r,w=O=x=null}function m(){q.point=b,O&&O.push(x=[]),P=!0,A=!1,k=M=NaN}function g(){w&&(b(T,S),j&&A&&C.rejoin(),w.push(C.result())),q.point=p,A&&N.lineEnd()}function b(r,o){var a=h(r,o);if(O&&x.push([r,o]),P)T=r,S=o,j=a,P=!1,a&&(N.lineStart(),N.point(r,o));else if(a&&A)N.point(r,o);else{var u=[k=Math.max(l,Math.min(c,k)),M=Math.max(l,Math.min(c,M))],f=[r=Math.max(l,Math.min(c,r)),o=Math.max(l,Math.min(c,o))];Object(s.a)(u,f,t,e,n,i)?(A||(N.lineStart(),N.point(u[0],u[1])),N.point(f[0],f[1]),a||N.lineEnd(),E=!1):a&&(N.lineStart(),N.point(r,o),E=!1)}k=r,M=o,A=a}var w,O,x,T,S,j,k,M,A,P,E,N=r,C=Object(o.a)(),q={point:p,lineStart:m,lineEnd:g,polygonStart:_,polygonEnd:v};return q}}e.a=i;var r=n(49),o=n(853),s=n(2088),a=n(854),u=n(136),c=1e9,l=-c},function(t,e,n){"use strict";function i(t){return function(e){var n=new r;for(var i in t)n[i]=t[i];return n.stream=e,n}}function r(){}e.b=i,e.a=function(t){return{stream:i(t)}},r.prototype={constructor:r,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";e.a=function(t,e,n,i,r){for(var o,s=t.children,a=-1,u=s.length,c=t.value&&(r-n)/t.value;++a<u;)o=s[a],o.x0=e,o.x1=i,o.y0=n,o.y1=n+=o.value*c}},function(t,e,n){"use strict";var i=n(554);e.a=function(t,e){return function(n,r){var o=Object(i.a)(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return o.get(r)}return o}}},function(t,e,n){"use strict";function i(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Object(p.a)(e)}function r(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:i(t)}}}function o(t){return function(e,n){var i=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:i(t)}}}function s(t,e,n,i){var r=t[0],o=t[1],s=e[0],a=e[1];return o<r?(r=n(o,r),s=i(a,s)):(r=n(r,o),s=i(s,a)),function(t){return s(r(t))}}function a(t,e,n,i){var r=Math.min(t.length,e.length)-1,o=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)o[a]=n(t[a],t[a+1]),s[a]=i(e[a],e[a+1]);return function(e){var n=Object(l.b)(t,e,1,r)-1;return s[n](o[n](e))}}function u(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function c(t,e){function n(){return c=Math.min(_.length,v.length)>2?a:s,l=p=null,u}function u(e){return(l||(l=c(_,v,g?r(t):t,m)))(+e)}var c,l,p,_=y,v=y,m=h.a,g=!1;return u.invert=function(t){return(p||(p=c(v,_,i,g?o(e):e)))(+t)},u.domain=function(t){return arguments.length?(_=f.a.call(t,d.a),n()):_.slice()},u.range=function(t){return arguments.length?(v=f.b.call(t),n()):v.slice()},u.rangeRound=function(t){return v=f.b.call(t),m=h.r,n()},u.clamp=function(t){return arguments.length?(g=!!t,n()):g},u.interpolate=function(t){return arguments.length?(m=t,n()):m},n()}e.c=i,e.a=u,e.b=c;var l=n(136),h=n(238),f=n(294),p=n(555),d=n(871),y=[0,1]},function(t,e,n){"use strict";var i=n(133);n.d(e,"g",function(){return i.a});var r=n(2164);n.d(e,"h",function(){return r.a}),n.d(e,"i",function(){return r.b}),n.d(e,"L",function(){return r.a}),n.d(e,"M",function(){return r.b});var o=n(2165);n.d(e,"r",function(){return o.a}),n.d(e,"s",function(){return o.b}),n.d(e,"V",function(){return o.a}),n.d(e,"W",function(){return o.b});var s=n(2166);n.d(e,"j",function(){return s.a}),n.d(e,"k",function(){return s.b});var a=n(2167);n.d(e,"e",function(){return a.a}),n.d(e,"f",function(){return a.b});var u=n(2168);n.d(e,"a",function(){return u.b}),n.d(e,"b",function(){return u.a});var c=n(2169);n.d(e,"B",function(){return c.g}),n.d(e,"C",function(){return c.h}),n.d(e,"t",function(){return c.g}),n.d(e,"u",function(){return c.h}),n.d(e,"l",function(){return c.c}),n.d(e,"m",function(){return c.d}),n.d(e,"x",function(){return c.k}),n.d(e,"y",function(){return c.l}),n.d(e,"z",function(){return c.m}),n.d(e,"A",function(){return c.n}),n.d(e,"v",function(){return c.i}),n.d(e,"w",function(){return c.j}),n.d(e,"c",function(){return c.a}),n.d(e,"d",function(){return c.b}),n.d(e,"p",function(){return c.e}),n.d(e,"q",function(){return c.f});var l=n(2170);n.d(e,"n",function(){return l.a}),n.d(e,"o",function(){return l.b});var h=n(2171);n.d(e,"D",function(){return h.a}),n.d(e,"E",function(){return h.b});var f=n(2172);n.d(e,"N",function(){return f.a}),n.d(e,"O",function(){return f.b});var p=n(2173);n.d(e,"J",function(){return p.a}),n.d(e,"K",function(){return p.b});var d=n(2174);n.d(e,"F",function(){return d.a}),n.d(e,"G",function(){return d.b});var y=n(2175);n.d(e,"_5",function(){return y.g}),n.d(e,"_6",function(){return y.h}),n.d(e,"X",function(){return y.g}),n.d(e,"Y",function(){return y.h}),n.d(e,"P",function(){return y.c}),n.d(e,"Q",function(){return y.d}),n.d(e,"_1",function(){return y.k}),n.d(e,"_2",function(){return y.l}),n.d(e,"_3",function(){return y.m}),n.d(e,"_4",function(){return y.n}),n.d(e,"Z",function(){return y.i}),n.d(e,"_0",function(){return y.j}),n.d(e,"H",function(){return y.a}),n.d(e,"I",function(){return y.b}),n.d(e,"T",function(){return y.e}),n.d(e,"U",function(){return y.f});var _=n(2176);n.d(e,"R",function(){return _.a}),n.d(e,"S",function(){return _.b});var v=n(2177);n.d(e,"_7",function(){return v.a}),n.d(e,"_8",function(){return v.b})},function(t,e,n){"use strict";function i(t){this._context=t}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},e.a=function(t){return new i(t)}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function i(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function r(t){this._context=t}e.c=i,e.a=r,r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:i(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:i(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},e.b=function(t){return new r(t)}},function(t,e,n){"use strict";function i(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function r(t,e){this._context=t,this._k=(1-e)/6}e.c=i,e.a=r,r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:i(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:i(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new r(t,e)}return n.tension=function(e){return t(+e)},n}(0)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var i=n(349);e.a=function(t,e,n){if(null==n&&(n=i.a),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,o=(r-1)*e,s=Math.floor(o),a=+n(t[s],s,t);return a+(+n(t[s+1],s+1,t)-a)*(o-s)}}},function(t,e,n){"use strict";var i=n(1957);n.d(e,"a",function(){return i.a});var r=n(829);n.d(e,"b",function(){return r.a}),n.d(e,"c",function(){return r.b})},function(t,e,n){"use strict";function i(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===s.b&&e.documentElement.namespaceURI===s.b?e.createElement(t):e.createElementNS(n,t)}}function r(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var o=n(525),s=n(526);e.a=function(t){var e=Object(o.a)(t);return(e.local?r:i)(e)}},function(t,e,n){"use strict";var i=n(526);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.a.hasOwnProperty(e)?{space:i.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var i="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";var i=n(528);e.a=function(){for(var t,e=i.c;t=e.sourceEvent;)e=t;return e}},function(t,e,n){"use strict";function i(t,e,n){return t=r(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function r(t,e,n){return function(i){var r=l;l=i;try{t.call(this,this.__data__,e,n)}finally{l=r}}}function o(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function s(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?e.length=r:delete this.__on}}}function a(t,e,n){var o=c.hasOwnProperty(t.type)?i:r;return function(i,r,s){var a,u=this.__on,c=o(e,r,s);if(u)for(var l=0,h=u.length;l<h;++l)if((a=u[l]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=c,a.capture=n),void(a.value=e);this.addEventListener(t.type,c,n),a={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(a):this.__on=[a]}}function u(t,e,n,i){var r=l;t.sourceEvent=l,l=t;try{return e.apply(n,i)}finally{l=r}}n.d(e,"c",function(){return l}),e.a=u;var c={},l=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(c={mouseenter:"mouseover",mouseleave:"mouseout"})}e.b=function(t,e,n){var i,r,u=o(t+""),c=u.length;{if(!(arguments.length<2)){for(l=e?a:s,null==n&&(n=!1),i=0;i<c;++i)this.each(l(u[i],e,n));return this}var l=this.node().__on;if(l)for(var h,f=0,p=l.length;f<p;++f)for(i=0,h=l[f];i<c;++i)if((r=u[i]).type===h.type&&r.name===h.name)return h.value}}},function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}},function(t,e,n){"use strict";function i(){}e.a=function(t){return null==t?i:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e,n){"use strict";var i=n(244),r=n(832),o=n(835),s=n(836),a=n(403),u=n(837),c=n(838),l=n(834);e.a=function(t,e){var n,h=typeof e;return null==e||"boolean"===h?Object(l.a)(e):("number"===h?a.a:"string"===h?(n=Object(i.a)(e))?(e=n,r.a):c.a:e instanceof i.a?r.a:e instanceof Date?s.a:Array.isArray(e)?o.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:a.a)(t,e)}},function(t,e,n){"use strict";function i(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=w.exec(t))?(e=parseInt(e[1],16),new c(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=O.exec(t))?o(parseInt(e[1],16)):(e=x.exec(t))?new c(e[1],e[2],e[3],1):(e=T.exec(t))?new c(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=S.exec(t))?s(e[1],e[2],e[3],e[4]):(e=j.exec(t))?s(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=k.exec(t))?l(e[1],e[2]/100,e[3]/100,1):(e=M.exec(t))?l(e[1],e[2]/100,e[3]/100,e[4]):A.hasOwnProperty(t)?o(A[t]):"transparent"===t?new c(NaN,NaN,NaN,0):null}function o(t){return new c(t>>16&255,t>>8&255,255&t,1)}function s(t,e,n,i){return i<=0&&(t=e=n=NaN),new c(t,e,n,i)}function a(t){return t instanceof i||(t=r(t)),t?(t=t.rgb(),new c(t.r,t.g,t.b,t.opacity)):new c}function u(t,e,n,i){return 1===arguments.length?a(t):new c(t,e,n,null==i?1:i)}function c(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function l(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new p(t,e,n,i)}function h(t){if(t instanceof p)return new p(t.h,t.s,t.l,t.opacity);if(t instanceof i||(t=r(t)),!t)return new p;if(t instanceof p)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,s=Math.min(e,n,o),a=Math.max(e,n,o),u=NaN,c=a-s,l=(a+s)/2;return c?(u=e===a?(n-o)/c+6*(n<o):n===a?(o-e)/c+2:(e-n)/c+4,c/=l<.5?a+s:2-a-s,u*=60):c=l>0&&l<1?0:u,new p(u,c,l,t.opacity)}function f(t,e,n,i){return 1===arguments.length?h(t):new p(t,e,n,null==i?1:i)}function p(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function d(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=i,n.d(e,"d",function(){return _}),n.d(e,"c",function(){return v}),e.e=r,e.h=a,e.g=u,e.b=c,e.f=f;var y=n(534),_=.7,v=1/_,m="\\s*([+-]?\\d+)\\s*",g="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",b="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",w=/^#([0-9a-f]{3})$/,O=/^#([0-9a-f]{6})$/,x=new RegExp("^rgb\\("+[m,m,m]+"\\)$"),T=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),S=new RegExp("^rgba\\("+[m,m,m,g]+"\\)$"),j=new RegExp("^rgba\\("+[b,b,b,g]+"\\)$"),k=new RegExp("^hsl\\("+[g,b,b]+"\\)$"),M=new RegExp("^hsla\\("+[g,b,b,g]+"\\)$"),A={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(y.a)(i,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Object(y.a)(c,u,Object(y.b)(i,{brighter:function(t){return t=null==t?v:Math.pow(v,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?_:Math.pow(_,t),new c(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Object(y.a)(p,f,Object(y.b)(i,{brighter:function(t){return t=null==t?v:Math.pow(v,t),new p(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?_:Math.pow(_,t),new p(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new c(d(t>=240?t-240:t+120,r,i),d(t,r,i),d(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(t,e,n){"use strict";function i(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}e.b=i,e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function i(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}e.a=i,e.b=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],s=t[r+1],a=r>0?t[r-1]:2*o-s,u=r<e-1?t[r+2]:2*s-o;return i((n-r/e)*e,a,o,s,u)}}},function(t,e,n){"use strict";var i=(n(2005),n(267));n.d(e,"c",function(){return i.b});var r=n(2036);n.d(e,"a",function(){return r.a});var o=n(839);n.d(e,"b",function(){return o.a})},function(t,e,n){"use strict";function i(){return g||(O(r),g=w.now()+b)}function r(){g=0}function o(){this._call=this._time=this._next=null}function s(t,e,n){var i=new o;return i.restart(t,e,n),i}function a(){i(),++d;for(var t,e=f;e;)(t=g-e._time)>=0&&e._call.call(null,t),e=e._next;--d}function u(){g=(m=w.now())+b,d=y=0;try{a()}finally{d=0,l(),g=0}}function c(){var t=w.now(),e=t-m;e>v&&(b-=e,m=t)}function l(){for(var t,e,n=f,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:f=e);p=t,h(i)}function h(t){if(!d){y&&(y=clearTimeout(y));t-g>24?(t<1/0&&(y=setTimeout(u,t-w.now()-b)),_&&(_=clearInterval(_))):(_||(m=w.now(),_=setInterval(c,v)),d=1,O(u))}}e.b=i,e.a=o,e.c=s,e.d=a;var f,p,d=0,y=0,_=0,v=1e3,m=0,g=0,b=0,w="object"==typeof performance&&performance.now?performance:Date,O="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};o.prototype=s.prototype={constructor:o,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?i():+n)+(null==e?0:+e),this._next||p===this||(p?p._next=this:f=this,p=this),this._call=t,this._time=n,h()},stop:function(){this._call&&(this._call=null,this._time=1/0,h())}}},function(t,e,n){"use strict";function i(){}function r(t,e){var n=new i;if(t instanceof i)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,s=t.length;if(null==e)for(;++o<s;)n.set(o,t[o]);else for(;++o<s;)n.set(e(r=t[o],o,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}n.d(e,"b",function(){return o});var o="$";i.prototype=r.prototype={constructor:i,has:function(t){return o+t in this},get:function(t){return this[o+t]},set:function(t,e){return this[o+t]=e,this},remove:function(t){var e=o+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===o&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===o&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===o&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===o&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===o&&++t;return t},empty:function(){for(var t in this)if(t[0]===o)return!1;return!0},each:function(t){for(var e in this)e[0]===o&&t(this[e],e.slice(1),this)}},e.a=r},function(t,e,n){"use strict";var i=n(540);n.d(e,"e",function(){return i.a});var r=n(2051);n.d(e,"c",function(){return r.c}),n.d(e,"d",function(){return r.d}),n.d(e,"a",function(){return r.a}),n.d(e,"b",function(){return r.b});var o=n(2052);n.d(e,"h",function(){return o.c}),n.d(e,"i",function(){return o.d}),n.d(e,"f",function(){return o.a}),n.d(e,"g",function(){return o.b})},function(t,e,n){"use strict";function i(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function r(t,e){var n=i(t);return function(i,r){return e(n(i),r,t)}}function o(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}var s={},a={},u=34,c=10,l=13;e.a=function(t){function e(t,e){var o,s,a=n(t,function(t,n){if(o)return o(t,n-1);s=t,o=e?r(t,e):i(t)});return a.columns=s,a}function n(t,e){function n(){if(p)return a;if(d)return d=!1,s;var e,n,i=h;if(t.charCodeAt(i)===u){for(;h++<o&&t.charCodeAt(h)!==u||t.charCodeAt(++h)===u;);return(e=h)>=o?p=!0:(n=t.charCodeAt(h++))===c?d=!0:n===l&&(d=!0,t.charCodeAt(h)===c&&++h),t.slice(i+1,e-1).replace(/""/g,'"')}for(;h<o;){if((n=t.charCodeAt(e=h++))===c)d=!0;else if(n===l)d=!0,t.charCodeAt(h)===c&&++h;else if(n!==_)continue;return t.slice(i,e)}return p=!0,t.slice(i,o)}var i,r=[],o=t.length,h=0,f=0,p=o<=0,d=!1;for(t.charCodeAt(o-1)===c&&--o,t.charCodeAt(o-1)===l&&--o;(i=n())!==a;){for(var y=[];i!==s&&i!==a;)y.push(i),i=n();e&&null==(y=e(y,f++))||r.push(y)}return r}function h(e,n){return null==n&&(n=o(e)),[n.map(d).join(t)].concat(e.map(function(e){return n.map(function(t){return d(e[t])}).join(t)})).join("\n")}function f(t){return t.map(p).join("\n")}function p(e){return e.map(d).join(t)}function d(t){return null==t?"":y.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var y=new RegExp('["'+t+"\n\r]"),_=t.charCodeAt(0);return{parse:e,parseRows:n,format:h,formatRows:f}}},function(t,e,n){"use strict";e.a=function(){return 1e-6*(Math.random()-.5)}},function(t,e,n){"use strict";var i=n(2056);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";e.a=function(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}},function(t,e,n){"use strict";var i=n(2074);n.d(e,"b",function(){return i.a}),n.d(e,"a",function(){return i.b}),n.d(e,"d",function(){return i.c});var r=n(844);n.d(e,"c",function(){return r.a});var o=n(845);n.d(e,"e",function(){return o.a});var s=n(2080);n.d(e,"f",function(){return s.a});var a=n(2081);n.d(e,"g",function(){return a.a});var u=n(2082);n.d(e,"h",function(){return u.a})},function(t,e,n){"use strict";e.a=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";function i(t,e){function n(t,e){var n=Object(r.u)(a-2*o*Object(r.t)(e))/o;return[n*Object(r.t)(t*=o),u-n*Object(r.g)(t)]}var i=Object(r.t)(t),o=(i+Object(r.t)(e))/2;if(Object(r.a)(o)<r.i)return Object(s.a)(t);var a=1+i*(2*o-i),u=Object(r.u)(a)/o;return n.invert=function(t,e){var n=u-e;return[Object(r.e)(t,Object(r.a)(n))/o*Object(r.s)(n),Object(r.c)((a-(t*t+n*n)*o*o)/(2*o))]},n}e.a=i;var r=n(49),o=n(548),s=n(2099);e.b=function(){return Object(o.a)(i).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";function i(t){var e=0,n=r.o/3,i=Object(o.b)(t),s=i(e,n);return s.parallels=function(t){return arguments.length?i(e=t[0]*r.r,n=t[1]*r.r):[e*r.h,n*r.h]},s}e.a=i;var r=n(49),o=n(245)},function(t,e,n){"use strict";function i(t,e,n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),Object(o.a)(n,t.stream(s.a));var u=s.a.result(),c=Math.min(i/(u[1][0]-u[0][0]),r/(u[1][1]-u[0][1])),l=+e[0][0]+(i-c*(u[1][0]+u[0][0]))/2,h=+e[0][1]+(r-c*(u[1][1]+u[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*c).translate([l,h])}function r(t,e,n){return i(t,[[0,0],e],n)}e.a=i,e.b=r;var o=n(293),s=n(860)},function(t,e,n){"use strict";function i(t,e){return[t,Object(o.n)(Object(o.v)((o.l+e)/2))]}function r(t){function e(){var e=o.o*h(),a=c(Object(s.a)(c.rotate()).invert([0,0]));return p(null==d?[[a[0]-e,a[1]-e],[a[0]+e,a[1]+e]]:t===i?[[Math.max(a[0]-e,d),n],[Math.min(a[0]+e,r),u]]:[[d,Math.max(a[1]-e,n)],[r,Math.min(a[1]+e,u)]])}var n,r,u,c=Object(a.a)(t),l=c.center,h=c.scale,f=c.translate,p=c.clipExtent,d=null;return c.scale=function(t){return arguments.length?(h(t),e()):h()},c.translate=function(t){return arguments.length?(f(t),e()):f()},c.center=function(t){return arguments.length?(l(t),e()):l()},c.clipExtent=function(t){return arguments.length?(null==t?d=n=r=u=null:(d=+t[0][0],n=+t[0][1],r=+t[1][0],u=+t[1][1]),e()):null==d?null:[[d,n],[r,u]]},e()}e.c=i,e.b=r;var o=n(49),s=n(407),a=n(245);i.invert=function(t,e){return[t,2*Object(o.d)(Object(o.k)(e))-o.l]},e.a=function(){return r(i).scale(961/o.w)}},function(t,e,n){"use strict";function i(t,e){var n,i,r,s,c,l=new u(t),h=+t.value&&(l.value=t.value),f=[l];for(null==e&&(e=o);n=f.pop();)if(h&&(n.value=+n.data.value),(r=e(n.data))&&(c=r.length))for(n.children=new Array(c),s=c-1;s>=0;--s)f.push(i=n.children[s]=new u(r[s])),i.parent=n,i.depth=n.depth+1;return l.eachBefore(a)}function r(){return i(this).eachBefore(s)}function o(t){return t.children}function s(t){t.data=t.data.data}function a(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function u(t){this.data=t,this.depth=this.height=0,this.parent=null}e.c=i,e.b=a,e.a=u;var c=n(2113),l=n(2114),h=n(2115),f=n(2116),p=n(2117),d=n(2118),y=n(2119),_=n(2120),v=n(2121),m=n(2122),g=n(2123);u.prototype=i.prototype={constructor:u,count:c.a,each:l.a,eachAfter:f.a,eachBefore:h.a,sum:p.a,sort:d.a,path:y.a,ancestors:_.a,descendants:v.a,leaves:m.a,links:g.a,copy:r}},function(t,e,n){"use strict";function i(t){return null==t?null:r(t)}function r(t){if("function"!=typeof t)throw new Error;return t}e.a=i,e.b=r},function(t,e,n){"use strict";function i(t,e,n,i,s,a){for(var u,c,l,h,f,p,d,y,_,v,m,g=[],b=e.children,w=0,O=0,x=b.length,T=e.value;w<x;){l=s-n,h=a-i;do{f=b[O++].value}while(!f&&O<x);for(p=d=f,v=Math.max(h/l,l/h)/(T*t),m=f*f*v,_=Math.max(d/m,m/p);O<x;++O){if(f+=c=b[O].value,c<p&&(p=c),c>d&&(d=c),m=f*f*v,(y=Math.max(d/m,m/p))>_){f-=c;break}_=y}g.push(u={value:f,dice:l<h,children:b.slice(w,O)}),u.dice?Object(r.a)(u,n,i,s,T?i+=h*f/T:a):Object(o.a)(u,n,i,T?n+=l*f/T:s,a),T-=f,w=O}return g}n.d(e,"b",function(){return s}),e.c=i;var r=n(354),o=n(410),s=(1+Math.sqrt(5))/2;e.a=function t(e){function n(t,n,r,o,s){i(e,t,n,r,o,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(s)},function(t,e,n){"use strict";function i(t){return function(e,n){t(null==e?n:null)}}function r(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}var o=n(351),s=n(291);e.a=function(t,e){function n(t){var e,n=p.status;if(!n&&r(p)||n>=200&&n<300||304===n){if(c)try{e=c.call(a,p)}catch(t){return void h.call("error",a,t)}else e=p;h.call("load",a,e)}else h.call("error",a,t)}var a,u,c,l,h=Object(s.a)("beforesend","progress","load","error"),f=Object(o.c)(),p=new XMLHttpRequest,d=null,y=null,_=0;if("undefined"==typeof XDomainRequest||"withCredentials"in p||!/^(http(s)?:)?\/\//.test(t)||(p=new XDomainRequest),"onload"in p?p.onload=p.onerror=p.ontimeout=n:p.onreadystatechange=function(t){p.readyState>3&&n(t)},p.onprogress=function(t){h.call("progress",a,t)},a={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?f.get(t):(null==e?f.remove(t):f.set(t,e+""),a)},mimeType:function(t){return arguments.length?(u=null==t?null:t+"",a):u},responseType:function(t){return arguments.length?(l=t,a):l},timeout:function(t){return arguments.length?(_=+t,a):_},user:function(t){return arguments.length<1?d:(d=null==t?null:t+"",a)},password:function(t){return arguments.length<1?y:(y=null==t?null:t+"",a)},response:function(t){return c=t,a},get:function(t,e){return a.send("GET",t,e)},post:function(t,e){return a.send("POST",t,e)},send:function(e,n,r){return p.open(e,t,!0,d,y),null==u||f.has("accept")||f.set("accept",u+",*/*"),p.setRequestHeader&&f.each(function(t,e){p.setRequestHeader(e,t)}),null!=u&&p.overrideMimeType&&p.overrideMimeType(u),null!=l&&(p.responseType=l),_>0&&(p.timeout=_),null==r&&"function"==typeof n&&(r=n,n=null),null!=r&&1===r.length&&(r=i(r)),null!=r&&a.on("error",r).on("load",function(t){r(null,t)}),h.call("beforesend",a,p),p.send(null==n?null:n),a},abort:function(){return p.abort(),a},on:function(){var t=h.on.apply(h,arguments);return t===h?a:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return a.get(e)}return a}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(557);n.d(e,"d",function(){return i.a}),n.d(e,"c",function(){return i.b}),n.d(e,"f",function(){return i.c}),n.d(e,"g",function(){return i.d}),n.d(e,"h",function(){return i.e});var r=n(874);n.d(e,"e",function(){return r.a});var o=n(875);n.d(e,"a",function(){return o.a});var s=n(2178);n.d(e,"b",function(){return s.a})},function(t,e,n){"use strict";function i(t){return r=Object(c.a)(t),o=r.format,s=r.parse,a=r.utcFormat,u=r.utcParse,r}n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return u}),e.a=i;var r,o,s,a,u,c=n(874);i({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})},function(t,e,n){"use strict";var i=n(292),r=n(295),o=n(414),s=n(559);e.a=function(){function t(t){var r,o,s,h=t.length,f=!1;for(null==u&&(l=c(s=Object(i.a)())),r=0;r<=h;++r)!(r<h&&a(o=t[r],r,t))===f&&((f=!f)?l.lineStart():l.lineEnd()),f&&l.point(+e(o,r,t),+n(o,r,t));if(s)return l=null,s+""||null}var e=s.a,n=s.b,a=Object(r.a)(!0),u=null,c=o.a,l=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(r.a)(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Object(r.a)(+e),t):n},t.defined=function(e){return arguments.length?(a="function"==typeof e?e:Object(r.a)(!!e),t):a},t.curve=function(e){return arguments.length?(c=e,null!=u&&(l=c(u)),t):c},t.context=function(e){return arguments.length?(null==e?u=l=null:l=c(u=e),t):u},t}},function(t,e,n){"use strict";function i(t){return t[0]}function r(t){return t[1]}e.a=i,e.b=r},function(t,e,n){"use strict";function i(t,e,n){var i=t._x1,r=t._y1,s=t._x2,a=t._y2;if(t._l01_a>o.f){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>o.f){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*l+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*l+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(i,r,s,a,t._x2,t._y2)}function r(t,e){this._context=t,this._alpha=e}e.b=i;var o=n(357),s=n(417);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:i(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.a=function t(e){function n(t){return e?new r(t,e):new s.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function i(t){for(var e,n=0,i=-1,r=t.length;++i<r;)(e=+t[i][1])&&(n+=e);return n}e.b=i;var r=n(359);e.a=function(t){var e=t.map(i);return Object(r.a)(t).sort(function(t,n){return e[t]-e[n]})}},function(t,e,n){"use strict";function i(){this._=null}function r(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function o(t,e){var n=e,i=e.R,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function s(t,e){var n=e,i=e.L,r=n.U;r?r.L===n?r.L=i:r.R=i:t._=i,i.U=r,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function a(t){for(;t.L;)t=t.L;return t}e.a=r,i.prototype={constructor:i,insert:function(t,e){var n,i,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=a(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(r=i.R,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.R&&(o(this,n),t=n,n=t.U),n.C=!1,i.C=!0,s(this,i))):(r=i.L,r&&r.C?(n.C=r.C=!1,i.C=!0,t=i):(t===n.L&&(s(this,n),t=n,n=t.U),n.C=!1,i.C=!0,o(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,i,r=t.U,u=t.L,c=t.R;if(n=u?c?a(c):u:c,r?r.L===t?r.L=n:r.R=n:this._=n,u&&c?(i=n.C,n.C=t.C,n.L=u,u.U=n,n!==c?(r=n.U,n.U=t.U,t=n.R,r.L=t,n.R=c,c.U=n):(n.U=r,r=n,t=n.R)):(i=t.C,t=n),t&&(t.U=r),!i){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,o(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,s(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,o(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,s(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,o(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,s(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},e.b=i},function(t,e,n){"use strict";function i(t,e,n,i){var r=[null,null],s=c.e.push(r)-1;return r.left=t,r.right=e,n&&o(r,t,e,n),i&&o(r,e,t,i),c.b[t.index].halfedges.push(s),c.b[e.index].halfedges.push(s),r}function r(t,e,n){var i=[e,n];return i.left=t,i}function o(t,e,n,i){t[0]||t[1]?t.left===n?t[1]=i:t[0]=i:(t[0]=i,t.left=e,t.right=n)}function s(t,e,n,i,r){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=a[0],h=a[1],f=0,p=1,d=l-u,y=h-c;if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<f)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>f&&(f=o)}if(o=i-u,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>f&&(f=o)}else if(d>0){if(o<f)return;o<p&&(p=o)}if(o=n-c,y||!(o>0)){if(o/=y,y<0){if(o<f)return;o<p&&(p=o)}else if(y>0){if(o>p)return;o>f&&(f=o)}if(o=r-c,y||!(o<0)){if(o/=y,y<0){if(o>p)return;o>f&&(f=o)}else if(y>0){if(o<f)return;o<p&&(p=o)}return!(f>0||p<1)||(f>0&&(t[0]=[u+f*d,c+f*y]),p<1&&(t[1]=[u+p*d,c+p*y]),!0)}}}}}function a(t,e,n,i,r){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],f=c[1],p=l[0],d=l[1],y=(h+p)/2,_=(f+d)/2;if(d===f){if(y<e||y>=i)return;if(h>p){if(u){if(u[1]>=r)return}else u=[y,n];o=[y,r]}else{if(u){if(u[1]<n)return}else u=[y,r];o=[y,n]}}else if(s=(h-p)/(d-f),a=_-s*y,s<-1||s>1)if(h>p){if(u){if(u[1]>=r)return}else u=[(n-a)/s,n];o=[(r-a)/s,r]}else{if(u){if(u[1]<n)return}else u=[(r-a)/s,r];o=[(n-a)/s,n]}else if(f<d){if(u){if(u[0]>=i)return}else u=[e,s*e+a];o=[i,s*i+a]}else{if(u){if(u[0]<e)return}else u=[i,s*i+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function u(t,e,n,i){for(var r,o=c.e.length;o--;)a(r=c.e[o],t,e,n,i)&&s(r,t,e,n,i)&&(Math.abs(r[0][0]-r[1][0])>c.f||Math.abs(r[0][1]-r[1][1])>c.f)||delete c.e[o]}e.c=i,e.b=r,e.d=o,e.a=u;var c=n(360)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a});var i=n(308),r=n(813),o=Object(r.a)(i.a),s=o.right,a=o.left;e.c=s},function(t,e,n){"use strict";function i(t){return function(e,n){return Object(r.a)(t(e),n)}}var r=n(308);e.a=function(t){return 1===t.length&&(t=i(t)),{left:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)<0?i=o+1:r=o}return i},right:function(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){var o=i+r>>>1;t(e[o],n)>0?r=o:i=o+1}return i}}}},function(t,e,n){"use strict";function i(t,e){return[t,e]}e.b=i,e.a=function(t,e){null==e&&(e=i);for(var n=0,r=t.length-1,o=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(o,o=t[++n]);return s}},function(t,e,n){"use strict";var i=n(816);e.a=function(t,e){var n=Object(i.a)(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var i=n(349);e.a=function(t,e){var n,r,o=t.length,s=0,a=-1,u=0,c=0;if(null==e)for(;++a<o;)isNaN(n=Object(i.a)(t[a]))||(r=n-u,u+=r/++s,c+=r*(n-u));else for(;++a<o;)isNaN(n=Object(i.a)(e(t[a],a,t)))||(r=n-u,u+=r/++s,c+=r*(n-u));if(s>1)return c/(s-1)}},function(t,e,n){"use strict";e.a=function(t,e){var n,i,r,o=t.length,s=-1;if(null==e){for(;++s<o;)if(null!=(n=t[s])&&n>=n)for(i=r=n;++s<o;)null!=(n=t[s])&&(i>n&&(i=n),r<n&&(r=n))}else for(;++s<o;)if(null!=(n=e(t[s],s,t))&&n>=n)for(i=r=n;++s<o;)null!=(n=e(t[s],s,t))&&(i>n&&(i=n),r<n&&(r=n));return[i,r]}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var i=Array.prototype,r=i.slice,o=i.map},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(r);++i<r;)o[i]=t+i*n;return o}},function(t,e,n){"use strict";function i(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),u=i/Math.pow(10,r);return r>=0?(u>=o?10:u>=s?5:u>=a?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(u>=o?10:u>=s?5:u>=a?2:1)}function r(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),u=i/r;return u>=o?r*=10:u>=s?r*=5:u>=a&&(r*=2),e<t?-r:r}e.b=i,e.c=r;var o=Math.sqrt(50),s=Math.sqrt(10),a=Math.sqrt(2);e.a=function(t,e,n){var r,o,s,a,u=-1;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(a=i(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),s=new Array(o=Math.ceil(e-t+1));++u<o;)s[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),s=new Array(o=Math.ceil(t-e+1));++u<o;)s[u]=(t-u)/a;return r&&s.reverse(),s}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.a=function(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&i>n&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&i>n&&(i=n);return i}},function(t,e,n){"use strict";function i(t){return t.length}var r=n(822);e.a=function(t){if(!(s=t.length))return[];for(var e=-1,n=Object(r.a)(t,i),o=new Array(n);++e<n;)for(var s,a=-1,u=o[e]=new Array(s);++a<s;)u[a]=t[a][e];return o}},function(t,e,n){"use strict";var i=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var r=document.documentElement;if(!r.matches){var o=r.webkitMatchesSelector||r.msMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector;i=function(t){return function(){return o.call(this,t)}}}}e.a=i},function(t,e,n){"use strict";function i(){return[]}e.a=function(t){return null==t?i:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";function i(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}e.a=i;var r=n(827),o=n(237);e.b=function(){return new o.a(this._enter||this._groups.map(r.a),this._parents)},i.prototype={constructor:i,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},function(t,e,n){"use strict";e.a=function(t){return new Array(t.length)}},function(t,e,n){"use strict";function i(t){return function(){this.style.removeProperty(t)}}function r(t,e,n){return function(){this.style.setProperty(t,e,n)}}function o(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function s(t,e){return t.style.getPropertyValue(e)||Object(a.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.b=s;var a=n(531);e.a=function(t,e,n){return arguments.length>1?this.each((null==e?i:"function"==typeof e?o:r)(t,e,null==n?"":n)):s(this.node(),t)}},function(t,e,n){"use strict";function i(t,e){var n=t.document.documentElement,i=Object(r.i)(t).on("dragstart.drag",null);e&&(i.on("click.drag",o.a,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}e.b=i;var r=n(125),o=n(830);e.a=function(t){var e=t.document.documentElement,n=Object(r.i)(t).on("dragstart.drag",o.a,!0);"onselectstart"in e?n.on("selectstart.drag",o.a,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}},function(t,e,n){"use strict";function i(){r.c.stopImmediatePropagation()}e.b=i;var r=n(125);e.a=function(){r.c.preventDefault(),r.c.stopImmediatePropagation()}},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r});var i=Math.PI/180,r=180/Math.PI},function(t,e,n){"use strict";function i(t){return function(e){var n,i,o=e.length,s=new Array(o),a=new Array(o),u=new Array(o);for(n=0;n<o;++n)i=Object(r.f)(e[n]),s[n]=i.r||0,a[n]=i.g||0,u[n]=i.b||0;return s=t(s),a=t(a),u=t(u),i.opacity=1,function(t){return i.r=s(t),i.g=a(t),i.b=u(t),i+""}}}n.d(e,"b",function(){return u}),n.d(e,"c",function(){return c});var r=n(244),o=n(535),s=n(833),a=n(350);e.a=function t(e){function n(t,e){var n=i((t=Object(r.f)(t)).r,(e=Object(r.f)(e)).r),o=i(t.g,e.g),s=i(t.b,e.b),u=Object(a.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=o(e),t.b=s(e),t.opacity=u(e),t+""}}var i=Object(a.b)(e);return n.gamma=t,n}(1);var u=i(o.b),c=i(s.a)},function(t,e,n){"use strict";var i=n(535);e.a=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],s=t[r%e],a=t[(r+1)%e],u=t[(r+2)%e];return Object(i.a)((n-r/e)*e,o,s,a,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(532);e.a=function(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,s=new Array(r),a=new Array(r);for(n=0;n<o;++n)s[n]=Object(i.a)(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=s[n](t);return a}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return t=+t,e-=t,function(i){return n.setTime(t+e*i),n}}},function(t,e,n){"use strict";var i=n(532);e.a=function(t,e){var n,r={},o={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=Object(i.a)(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}},function(t,e,n){"use strict";function i(t){return function(){return t}}function r(t){return function(e){return t(e)+""}}var o=n(403),s=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(s.source,"g");e.a=function(t,e){var n,u,c,l=s.lastIndex=a.lastIndex=0,h=-1,f=[],p=[];for(t+="",e+="";(n=s.exec(t))&&(u=a.exec(e));)(c=u.index)>l&&(c=e.slice(l,c),f[h]?f[h]+=c:f[++h]=c),(n=n[0])===(u=u[0])?f[h]?f[h]+=u:f[++h]=u:(f[++h]=null,p.push({i:h,x:Object(o.a)(n,u)})),l=a.lastIndex;return l<e.length&&(c=e.slice(l),f[h]?f[h]+=c:f[++h]=c),f.length<2?p[0]?r(p[0].x):i(e):(e=p.length,function(t){for(var n,i=0;i<e;++i)f[(n=p[i]).i]=n.x(t);return f.join("")})}},function(t,e,n){"use strict";var i=n(239);e.a=function(t,e){var n,r,o,s=t.__transition,a=!0;if(s){e=null==e?null:e+"";for(o in s)(n=s[o]).name===e?(r=n.state>i.d&&n.state<i.b,n.state=i.a,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete s[o]):a=!1;a&&delete t.__transition}}},function(t,e,n){"use strict";var i=n(244),r=n(238);e.a=function(t,e){var n;return("number"==typeof e?r.m:e instanceof i.a?r.o:(n=Object(i.a)(e))?(e=n,r.o):r.s)(t,e)}},function(t,e,n){"use strict";var i=n(2026);n.d(e,"y",function(){return i.a});var r=n(2027);n.d(e,"D",function(){return r.b}),n.d(e,"E",function(){return r.a}),n.d(e,"G",function(){return r.c}),n.d(e,"F",function(){return r.b});var o=n(2028);n.d(e,"m",function(){return o.b}),n.d(e,"n",function(){return o.a}),n.d(e,"p",function(){return o.c}),n.d(e,"o",function(){return o.b});var s=n(2029);n.d(e,"z",function(){return s.b}),n.d(e,"A",function(){return s.a}),n.d(e,"C",function(){return s.c}),n.d(e,"B",function(){return s.b});var a=n(2030);n.d(e,"H",function(){return a.b}),n.d(e,"I",function(){return a.a}),n.d(e,"K",function(){return a.c}),n.d(e,"J",function(){return a.b});var u=n(2031);n.d(e,"u",function(){return u.b}),n.d(e,"v",function(){return u.a}),n.d(e,"x",function(){return u.c}),n.d(e,"w",function(){return u.b});var c=n(2032);n.d(e,"i",function(){return c.b}),n.d(e,"j",function(){return c.a}),n.d(e,"l",function(){return c.c}),n.d(e,"k",function(){return c.b});var l=n(2033);n.d(e,"e",function(){return l.c}),n.d(e,"f",function(){return l.a}),n.d(e,"h",function(){return l.c}),n.d(e,"g",function(){return l.b});var h=n(2034);n.d(e,"a",function(){return h.b}),n.d(e,"b",function(){return h.a}),n.d(e,"d",function(){return h.c}),n.d(e,"c",function(){return h.b});var f=n(2035);n.d(e,"q",function(){return f.c}),n.d(e,"r",function(){return f.a}),n.d(e,"t",function(){return f.c}),n.d(e,"s",function(){return f.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"d",function(){return r}),n.d(e,"b",function(){return s}),n.d(e,"e",function(){return a}),n.d(e,"c",function(){return u});var i=Math.cos,r=Math.sin,o=Math.PI,s=o/2,a=2*o,u=Math.max},function(t,e,n){"use strict";function i(t){return t.x}function r(t){return t.y}e.b=i,e.c=r;var o=n(291),s=n(351),a=n(404),u=Math.PI*(3-Math.sqrt(5));e.a=function(t){function e(){n(),v.call("tick",c),l<h&&(_.stop(),v.call("end",c))}function n(){var e,n,i=t.length;for(l+=(p-l)*f,y.each(function(t){t(l)}),e=0;e<i;++e)n=t[e],null==n.fx?n.x+=n.vx*=d:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=d:(n.y=n.fy,n.vy=0)}function i(){for(var e,n=0,i=t.length;n<i;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(n),o=n*u;e.x=r*Math.cos(o),e.y=r*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function r(e){return e.initialize&&e.initialize(t),e}var c,l=1,h=.001,f=1-Math.pow(h,1/300),p=0,d=.6,y=Object(s.c)(),_=Object(a.d)(e),v=Object(o.a)("tick","end");return null==t&&(t=[]),i(),c={tick:n,restart:function(){return _.restart(e),c},stop:function(){return _.stop(),c},nodes:function(e){return arguments.length?(t=e,i(),y.each(r),c):t},alpha:function(t){return arguments.length?(l=+t,c):l},alphaMin:function(t){return arguments.length?(h=+t,c):h},alphaDecay:function(t){return arguments.length?(f=+t,c):+f},alphaTarget:function(t){return arguments.length?(p=+t,c):p},velocityDecay:function(t){return arguments.length?(d=1-t,c):1-d},force:function(t,e){return arguments.length>1?(null==e?y.remove(t):y.set(t,r(e)),c):y.get(t)},find:function(e,n,i){var r,o,s,a,u,c=0,l=t.length;for(null==i?i=1/0:i*=i,c=0;c<l;++c)a=t[c],r=e-a.x,o=n-a.y,(s=r*r+o*o)<i&&(u=a,i=s);return u},on:function(t,e){return arguments.length>1?(v.on(t,e),c):v.on(t)}}}},function(t,e,n){"use strict";var i=n(406),r=n(2075),o=n(2076),s=n(845),a=n(846),u=n(847),c=n(2079),l=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];e.a=function(t){function e(t){function e(t){var e,o,s,a=b,f=w;if("c"===g)f=O(t)+f,t="";else{t=+t;var y=t<0;if(t=O(Math.abs(t),m),y&&0==+t&&(y=!1),a=(y?"("===r?r:"-":"-"===r||"("===r?"":r)+a,f=f+("s"===g?l[8+u.b/3]:"")+(y&&"("===r?")":""),x)for(e=-1,o=t.length;++e<o;)if(48>(s=t.charCodeAt(e))||s>57){f=(46===s?p+t.slice(e+1):t.slice(e))+f,t=t.slice(0,e);break}}v&&!c&&(t=h(t,1/0));var T=a.length+t.length+f.length,S=T<_?new Array(_-T+1).join(n):"";switch(v&&c&&(t=h(S+t,S.length?_-f.length:1/0),S=""),i){case"<":t=a+t+f+S;break;case"=":t=a+S+t+f;break;case"^":t=S.slice(0,T=S.length>>1)+a+t+f+S.slice(T);break;default:t=S+a+t+f}return d(t)}t=Object(s.a)(t);var n=t.fill,i=t.align,r=t.sign,o=t.symbol,c=t.zero,_=t.width,v=t.comma,m=t.precision,g=t.type,b="$"===o?f[0]:"#"===o&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",w="$"===o?f[1]:/[%p]/.test(g)?y:"",O=a.a[g],x=!g||/[defgprs%]/.test(g);return m=null==m?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=Object(s.a)(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(Object(i.a)(n)/3))),a=Math.pow(10,-o),u=l[8+o/3];return function(t){return r(a*t)+u}}var h=t.grouping&&t.thousands?Object(r.a)(t.grouping,t.thousands):c.a,f=t.currency,p=t.decimal,d=t.numerals?Object(o.a)(t.numerals):c.a,y=t.percent||"%";return{format:e,formatPrefix:n}}},function(t,e,n){"use strict";function i(t){return new r(t)}function r(t){if(!(e=s.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",a=e[4]||"",u=!!e[5],c=e[6]&&+e[6],l=!!e[7],h=e[8]&&+e[8].slice(1),f=e[9]||"";"n"===f?(l=!0,f="g"):o.a[f]||(f=""),(u||"0"===n&&"="===i)&&(u=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=a,this.zero=u,this.width=c,this.comma=l,this.precision=h,this.type=f}e.a=i;var o=n(846),s=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;i.prototype=r.prototype,r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type}},function(t,e,n){"use strict";var i=n(2077),r=n(847),o=n(2078);e.a={"":i.a,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Object(o.a)(100*t,e)},r:o.a,s:r.a,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}}},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var i,r=n(545);e.a=function(t,e){var n=Object(r.a)(t,e);if(!n)return t+"";var o=n[0],s=n[1],a=s-(i=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,u=o.length;return a===u?o:a>u?o+new Array(a-u+1).join("0"):a>0?o.slice(0,a)+"."+o.slice(a):"0."+new Array(1-a).join("0")+Object(r.a)(t,Math.max(0,e+a-1))[0]}},function(t,e,n){"use strict";function i(){m.point=o}function r(){s(a,u)}function o(t,e){m.point=s,a=t,u=e,t*=p.r,e*=p.r,c=t,l=Object(p.g)(e=e/2+p.q),h=Object(p.t)(e)}function s(t,e){t*=p.r,e*=p.r,e=e/2+p.q;var n=t-c,i=n>=0?1:-1,r=i*n,o=Object(p.g)(e),s=Object(p.t)(e),a=h*s,u=l*o+a*Object(p.g)(r),f=a*i*Object(p.t)(r);_.add(Object(p.e)(f,u)),c=t,l=o,h=s}n.d(e,"a",function(){return _}),n.d(e,"b",function(){return m});var a,u,c,l,h,f=n(310),p=n(49),d=n(268),y=n(293),_=Object(f.a)(),v=Object(f.a)(),m={point:d.a,lineStart:d.a,lineEnd:d.a,polygonStart:function(){_.reset(),m.lineStart=i,m.lineEnd=r},polygonEnd:function(){var t=+_;v.add(t<0?p.w+t:t),this.lineStart=this.lineEnd=this.point=d.a},sphere:function(){v.add(p.w)}};e.c=function(t){return v.reset(),Object(y.a)(t,m),2*v}},function(t,e,n){"use strict";function i(t,e,n,i,s,u){if(n){var c=Object(a.g)(e),l=Object(a.t)(e),h=i*n;null==s?(s=e+i*a.w,u=e-h/2):(s=r(c,s),u=r(c,u),(i>0?s<u:s>u)&&(s+=i*a.w));for(var f,p=s;i>0?p>u:p<u;p-=h)f=Object(o.g)([c,-l*Object(a.g)(p),-l*Object(a.t)(p)]),t.point(f[0],f[1])}}function r(t,e){e=Object(o.a)(e),e[0]-=t,Object(o.e)(e);var n=Object(a.b)(-e[1]);return((-e[2]<0?-n:n)+a.w-a.i)%a.w}e.a=i;var o=n(352),s=n(2086),a=n(49),u=n(407);e.b=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=a.h,t[1]*=a.h}function e(){var t=o.apply(this,arguments),e=c.apply(this,arguments)*a.r,s=l.apply(this,arguments)*a.r;return n=[],r=Object(u.b)(-t[0]*a.r,-t[1]*a.r,0).invert,i(h,e,s,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,o=Object(s.a)([0,0]),c=Object(s.a)(90),l=Object(s.a)(6),h={point:t};return e.center=function(t){return arguments.length?(o="function"==typeof t?t:Object(s.a)([+t[0],+t[1]]),e):o},e.radius=function(t){return arguments.length?(c="function"==typeof t?t:Object(s.a)(+t),e):c},e.precision=function(t){return arguments.length?(l="function"==typeof t?t:Object(s.a)(+t),e):l},e}},function(t,e,n){"use strict";e.a=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";function i(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,u){var c=s>0?a.o:-a.o,l=Object(a.a)(s-n);Object(a.a)(l-a.o)<a.i?(t.point(n,i=(i+u)/2>0?a.l:-a.l),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(c,i),t.point(s,i),e=0):o!==c&&l>=a.o&&(Object(a.a)(n-o)<a.i&&(n-=o*a.i),Object(a.a)(s-c)<a.i&&(s-=c*a.i),i=r(n,i,s,u),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(c,i),e=0),t.point(n=s,i=u),o=c},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}function r(t,e,n,i){var r,o,s=Object(a.t)(t-n);return Object(a.a)(s)>a.i?Object(a.d)((Object(a.t)(e)*(o=Object(a.g)(i))*Object(a.t)(n)-Object(a.t)(i)*(r=Object(a.g)(e))*Object(a.t)(t))/(r*o*s)):(e+i)/2}function o(t,e,n,i){var r;if(null==t)r=n*a.l,i.point(-a.o,r),i.point(0,r),i.point(a.o,r),i.point(a.o,0),i.point(a.o,-r),i.point(0,-r),i.point(-a.o,-r),i.point(-a.o,0),i.point(-a.o,r);else if(Object(a.a)(t[0]-e[0])>a.i){var o=t[0]<e[0]?a.o:-a.o;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(e[0],e[1])}var s=n(852),a=n(49);e.a=Object(s.a)(function(){return!0},i,o,[-a.o,-a.l])},function(t,e,n){"use strict";function i(t){return t.length>1}function r(t,e){return((t=t.x)[0]<0?t[1]-a.l-a.i:a.l-t[1])-((e=e.x)[0]<0?e[1]-a.l-a.i:a.l-e[1])}var o=n(853),s=n(854),a=n(49),u=n(856),c=n(136);e.a=function(t,e,n,a){return function(l){function h(e,n){t(e,n)&&l.point(e,n)}function f(t,e){w.point(t,e)}function p(){S.point=f,w.lineStart()}function d(){S.point=h,w.lineEnd()}function y(t,e){b.push([t,e]),x.point(t,e)}function _(){x.lineStart(),b=[]}function v(){y(b[0][0],b[0][1]),x.lineEnd();var t,e,n,r,o=x.clean(),s=O.result(),a=s.length;if(b.pop(),m.push(b),b=null,a)if(1&o){if(n=s[0],(e=n.length-1)>0){for(T||(l.polygonStart(),T=!0),l.lineStart(),t=0;t<e;++t)l.point((r=n[t])[0],r[1]);l.lineEnd()}}else a>1&&2&o&&s.push(s.pop().concat(s.shift())),g.push(s.filter(i))}var m,g,b,w=e(l),O=Object(o.a)(),x=e(O),T=!1,S={point:h,lineStart:p,lineEnd:d,polygonStart:function(){S.point=y,S.lineStart=_,S.lineEnd=v,g=[],m=[]},polygonEnd:function(){S.point=h,S.lineStart=p,S.lineEnd=d,g=Object(c.n)(g);var t=Object(u.a)(m,a);g.length?(T||(l.polygonStart(),T=!0),Object(s.a)(g,r,t,n,l)):t&&(T||(l.polygonStart(),T=!0),l.lineStart(),n(null,null,1,l),l.lineEnd()),T&&(l.polygonEnd(),T=!1),g=m=null},sphere:function(){l.polygonStart(),l.lineStart(),n(null,null,1,l),l.lineEnd(),l.polygonEnd()}};return S}}},function(t,e,n){"use strict";var i=n(268);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:i.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";function i(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function r(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}var o=n(855);e.a=function(t,e,n,s,a){var u,c,l=[],h=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Object(o.a)(r,s)){for(a.lineStart(),u=0;u<e;++u)a.point((r=t[u])[0],r[1]);return void a.lineEnd()}l.push(n=new i(r,t,null,!0)),h.push(n.o=new i(r,null,n,!1)),l.push(n=new i(s,t,null,!1)),h.push(n.o=new i(s,null,n,!0))}}),l.length){for(h.sort(e),r(l),r(h),u=0,c=h.length;u<c;++u)h[u].e=n=!n;for(var f,p,d=l[0];;){for(var y=d,_=!0;y.v;)if((y=y.n)===d)return;f=y.z,a.lineStart();do{if(y.v=y.o.v=!0,y.e){if(_)for(u=0,c=f.length;u<c;++u)a.point((p=f[u])[0],p[1]);else s(y.x,y.n.x,1,a);y=y.n}else{if(_)for(f=y.p.z,u=f.length-1;u>=0;--u)a.point((p=f[u])[0],p[1]);else s(y.x,y.p.x,-1,a);y=y.p}y=y.o,f=y.z,_=!_}while(!y.v);a.lineEnd()}}}},function(t,e,n){"use strict";var i=n(49);e.a=function(t,e){return Object(i.a)(t[0]-e[0])<i.i&&Object(i.a)(t[1]-e[1])<i.i}},function(t,e,n){"use strict";var i=n(310),r=n(352),o=n(49),s=Object(i.a)();e.a=function(t,e){var n=e[0],i=e[1],a=[Object(o.t)(n),-Object(o.g)(n),0],u=0,c=0;s.reset();for(var l=0,h=t.length;l<h;++l)if(p=(f=t[l]).length)for(var f,p,d=f[p-1],y=d[0],_=d[1]/2+o.q,v=Object(o.t)(_),m=Object(o.g)(_),g=0;g<p;++g,y=w,v=x,m=T,d=b){var b=f[g],w=b[0],O=b[1]/2+o.q,x=Object(o.t)(O),T=Object(o.g)(O),S=w-y,j=S>=0?1:-1,k=j*S,M=k>o.o,A=v*x;if(s.add(Object(o.e)(A*j*Object(o.t)(k),m*T+A*Object(o.g)(k))),u+=M?S+j*o.w:S,M^y>=n^w>=n){var P=Object(r.c)(Object(r.a)(d),Object(r.a)(b));Object(r.e)(P);var E=Object(r.c)(a,P);Object(r.e)(E);var N=(M^S>=0?-1:1)*Object(o.c)(E[2]);(i>N||i===N&&(P[0]||P[1]))&&(c+=M^S>=0?1:-1)}}return(u<-o.i||u<o.i&&s<-o.i)^1&c}},function(t,e,n){"use strict";var i=n(352),r=n(849),o=n(49),s=n(855),a=n(852);e.a=function(t){function e(e,n,i,o){Object(r.a)(o,t,f,i,e,n)}function n(t,e){return Object(o.g)(t)*Object(o.g)(e)>h}function u(t){var e,i,r,a,u;return{lineStart:function(){a=r=!1,u=1},point:function(h,f){var y,_=[h,f],v=n(h,f),m=p?v?0:l(h,f):v?l(h+(h<0?o.o:-o.o),f):0;if(!e&&(a=r=v)&&t.lineStart(),v!==r&&(!(y=c(e,_))||Object(s.a)(e,y)||Object(s.a)(_,y))&&(_[0]+=o.i,_[1]+=o.i,v=n(_[0],_[1])),v!==r)u=0,v?(t.lineStart(),y=c(_,e),t.point(y[0],y[1])):(y=c(e,_),t.point(y[0],y[1]),t.lineEnd()),e=y;else if(d&&e&&p^v){var g;m&i||!(g=c(_,e,!0))||(u=0,p?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1])))}!v||e&&Object(s.a)(e,_)||t.point(_[0],_[1]),e=_,r=v,i=m},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return u|(a&&r)<<1}}}function c(t,e,n){var r=Object(i.a)(t),s=Object(i.a)(e),a=[1,0,0],u=Object(i.c)(r,s),c=Object(i.d)(u,u),l=u[0],f=c-l*l;if(!f)return!n&&t;var p=h*c/f,d=-h*l/f,y=Object(i.c)(a,u),_=Object(i.f)(a,p),v=Object(i.f)(u,d);Object(i.b)(_,v);var m=y,g=Object(i.d)(_,m),b=Object(i.d)(m,m),w=g*g-b*(Object(i.d)(_,_)-1);if(!(w<0)){var O=Object(o.u)(w),x=Object(i.f)(m,(-g-O)/b);if(Object(i.b)(x,_),x=Object(i.g)(x),!n)return x;var T,S=t[0],j=e[0],k=t[1],M=e[1];j<S&&(T=S,S=j,j=T);var A=j-S,P=Object(o.a)(A-o.o)<o.i,E=P||A<o.i;if(!P&&M<k&&(T=k,k=M,M=T),E?P?k+M>0^x[1]<(Object(o.a)(x[0]-S)<o.i?k:M):k<=x[1]&&x[1]<=M:A>o.o^(S<=x[0]&&x[0]<=j)){var N=Object(i.f)(m,(-g+O)/b);return Object(i.b)(N,_),[x,Object(i.g)(N)]}}}function l(e,n){var i=p?t:o.o-t,r=0;return e<-i?r|=1:e>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var h=Object(o.g)(t),f=6*o.r,p=h>0,d=Object(o.a)(h)>o.i;return Object(a.a)(n,u,e,p?[0,-t]:[-o.o,t-o.o])}},function(t,e,n){"use strict";var i=n(859),r=[null,null],o={type:"LineString",coordinates:r};e.a=function(t,e){return r[0]=t,r[1]=e,Object(i.a)(o)}},function(t,e,n){"use strict";function i(){y.point=o,y.lineEnd=r}function r(){y.point=y.lineEnd=f.a}function o(t,e){t*=h.r,e*=h.r,a=t,u=Object(h.t)(e),c=Object(h.g)(e),y.point=s}function s(t,e){t*=h.r,e*=h.r;var n=Object(h.t)(e),i=Object(h.g)(e),r=Object(h.a)(t-a),o=Object(h.g)(r),s=Object(h.t)(r),l=i*s,f=c*n-u*i*o,p=u*n+c*i*o;d.add(Object(h.e)(Object(h.u)(l*l+f*f),p)),a=t,u=n,c=i}var a,u,c,l=n(310),h=n(49),f=n(268),p=n(293),d=Object(l.a)(),y={sphere:f.a,point:f.a,lineStart:i,lineEnd:f.a,polygonStart:f.a,polygonEnd:f.a};e.a=function(t){return d.reset(),Object(p.a)(t,y),+d}},function(t,e,n){"use strict";function i(t,e){t<o&&(o=t),t>a&&(a=t),e<s&&(s=e),e>u&&(u=e)}var r=n(268),o=1/0,s=o,a=-o,u=a,c={point:i,lineStart:r.a,lineEnd:r.a,polygonStart:r.a,polygonEnd:r.a,result:function(){var t=[[o,s],[a,u]];return a=u=-(s=o=1/0),t}};e.a=c},function(t,e,n){"use strict";var i=n(547);e.a=function(){return Object(i.b)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";function i(t,e){return[t,e]}e.b=i;var r=n(245);i.invert=i,e.a=function(){return Object(r.a)(i).scale(152.63)}},function(t,e,n){"use strict";function i(t,e,n){var i=t.x,r=t.y,o=e.r+n.r,s=t.r+n.r,a=e.x-i,u=e.y-r,c=a*a+u*u;if(c){var l=.5+((s*=s)-(o*=o))/(2*c),h=Math.sqrt(Math.max(0,2*o*(s+c)-(s-=c)*s-o*o))/(2*c);n.x=i+l*a+h*u,n.y=r+l*u-h*a}else n.x=i+s,n.y=r}function r(t,e){var n=e.x-t.x,i=e.y-t.y,r=t.r+e.r;return r*r-1e-6>n*n+i*i}function o(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,o=(e.y*n.r+n.y*e.r)/i;return r*r+o*o}function s(t){this._=t,this.next=null,this.previous=null}function a(t){if(!(c=t.length))return 0;var e,n,a,c,l,h,f,p,d,y,_;if(e=t[0],e.x=0,e.y=0,!(c>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(c>2))return e.r+n.r;i(n,e,a=t[2]),e=new s(e),n=new s(n),a=new s(a),e.next=a.previous=n,n.next=e.previous=a,a.next=n.previous=e;t:for(f=3;f<c;++f){i(e._,n._,a=t[f]),a=new s(a),p=n.next,d=e.previous,y=n._.r,_=e._.r;do{if(y<=_){if(r(p._,a._)){n=p,e.next=n,n.previous=e,--f;continue t}y+=p._.r,p=p.next}else{if(r(d._,a._)){e=d,e.next=n,n.previous=e,--f;continue t}_+=d._.r,d=d.previous}}while(p!==d.next);for(a.previous=e,a.next=n,e.next=n.previous=n=a,l=o(e);(a=a.next)!==n;)(h=o(a))<l&&(e=a,l=h);n=e.next}for(e=[n._],a=n;(a=a.next)!==n;)e.push(a._);for(a=Object(u.a)(e),f=0;f<c;++f)e=t[f],e.x-=a.x,e.y-=a.y;return a.r}e.b=a;var u=n(864);e.a=function(t){return a(t),t}},function(t,e,n){"use strict";function i(t,e){var n,i;if(s(e,t))return[e];for(n=0;n<t.length;++n)if(r(e,t[n])&&s(c(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(r(c(t[n],t[i]),e)&&r(c(t[n],e),t[i])&&r(c(t[i],e),t[n])&&s(l(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function r(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function o(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function s(t,e){for(var n=0;n<e.length;++n)if(!o(t,e[n]))return!1;return!0}function a(t){switch(t.length){case 1:return u(t[0]);case 2:return c(t[0],t[1]);case 3:return l(t[0],t[1],t[2])}}function u(t){return{x:t.x,y:t.y,r:t.r}}function c(t,e){var n=t.x,i=t.y,r=t.r,o=e.x,s=e.y,a=e.r,u=o-n,c=s-i,l=a-r,h=Math.sqrt(u*u+c*c);return{x:(n+o+u/h*l)/2,y:(i+s+c/h*l)/2,r:(h+r+a)/2}}function l(t,e,n){var i=t.x,r=t.y,o=t.r,s=e.x,a=e.y,u=e.r,c=n.x,l=n.y,h=n.r,f=i-s,p=i-c,d=r-a,y=r-l,_=u-o,v=h-o,m=i*i+r*r-o*o,g=m-s*s-a*a+u*u,b=m-c*c-l*l+h*h,w=p*d-f*y,O=(d*b-y*g)/(2*w)-i,x=(y*_-d*v)/w,T=(p*g-f*b)/(2*w)-r,S=(f*v-p*_)/w,j=x*x+S*S-1,k=2*(o+O*x+T*S),M=O*O+T*T-o*o,A=-(j?(k+Math.sqrt(k*k-4*j*M))/(2*j):M/k);return{x:i+O+x*A,y:r+T+S*A,r:A}}var h=n(2125);e.a=function(t){for(var e,n,r=0,s=(t=Object(h.a)(h.b.call(t))).length,u=[];r<s;)e=t[r],n&&o(n,e)?++r:(n=a(u=i(u,e)),r=0);return n}},function(t,e,n){"use strict";function i(){return 0}e.a=i,e.b=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}},function(t,e,n){"use strict";var i=n(311);e.a=function t(e){function n(t,n){var i,r;return t=null==t?0:+t,n=null==n?1:+n,function(){var o;if(null!=i)o=i,i=null;else do{i=2*e()-1,o=2*e()-1,r=i*i+o*o}while(!r||r>1);return t+n*o*Math.sqrt(-2*Math.log(r)/r)}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";var i=n(311);e.a=function t(e){function n(t){return function(){for(var n=0,i=0;i<t;++i)n+=e();return n}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";function i(t,e){return function(n){return t(n.responseText,e)}}var r=n(554);e.a=function(t,e){return function(n,o,s){arguments.length<3&&(s=o,o=null);var a=Object(r.a)(n).mimeType(t);return a.row=function(t){return arguments.length?a.response(i(e,o=t)):o},a.row(o),s?a.get(s):a}}},function(t,e,n){"use strict";function i(t){function e(e){var i=e+"",r=n.get(i);if(!r){if(u!==s)return u;n.set(i,r=a.push(e))}return t[(r-1)%t.length]}var n=Object(r.c)(),a=[],u=s;return t=null==t?[]:o.b.call(t),e.domain=function(t){if(!arguments.length)return a.slice();a=[],n=Object(r.c)();for(var i,o,s=-1,u=t.length;++s<u;)n.has(o=(i=t[s])+"")||n.set(o,a.push(i));return e},e.range=function(n){return arguments.length?(t=o.b.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(u=t,e):u},e.copy=function(){return i().domain(a).range(t).unknown(u)},e}n.d(e,"b",function(){return s}),e.a=i;var r=n(351),o=n(294),s={name:"implicit"}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";e.a=function(t,e){t=t.slice();var n,i=0,r=t.length-1,o=t[i],s=t[r];return s<o&&(n=i,i=r,r=n,n=o,o=s,s=n),t[i]=e.floor(o),t[r]=e.ceil(s),t}},function(t,e,n){"use strict";function i(t){return new Date(t)}function r(t){return t instanceof Date?+t:+new Date(+t)}function o(t,e,n,u,c,b,w,O,x){function T(i){return(w(i)<i?A:b(i)<i?P:c(i)<i?E:u(i)<i?N:e(i)<i?n(i)<i?C:q:t(i)<i?F:R)(i)}function S(e,n,i,r){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(i-n)/e,a=Object(s.e)(function(t){return t[2]}).right(B,o);a===B.length?(r=Object(s.A)(n/g,i/g,e),e=t):a?(a=B[o/B[a-1][2]<B[a][2]/o?a-1:a],r=a[1],e=a[0]):(r=Object(s.A)(n,i,e),e=O)}return null==r?e:e.every(r)}var j=Object(h.b)(h.c,a.m),k=j.invert,M=j.domain,A=x(".%L"),P=x(":%S"),E=x("%I:%M"),N=x("%I %p"),C=x("%a %d"),q=x("%b %d"),F=x("%B"),R=x("%Y"),B=[[w,1,p],[w,5,5*p],[w,15,15*p],[w,30,30*p],[b,1,d],[b,5,5*d],[b,15,15*d],[b,30,30*d],[c,1,y],[c,3,3*y],[c,6,6*y],[c,12,12*y],[u,1,_],[u,2,2*_],[n,1,v],[e,1,m],[e,3,3*m],[t,1,g]];return j.invert=function(t){return new Date(k(t))},j.domain=function(t){return arguments.length?M(l.a.call(t,r)):M().map(i)},j.ticks=function(t,e){var n,i=M(),r=i[0],o=i[i.length-1],s=o<r;return s&&(n=r,r=o,o=n),n=S(t,r,o,e),n=n?n.range(r,o+1):[],s?n.reverse():n},j.tickFormat=function(t,e){return null==e?T:x(e)},j.nice=function(t,e){var n=M();return(t=S(t,n[0],n[n.length-1],e))?M(Object(f.a)(n,t)):j},j.copy=function(){return Object(h.a)(j,o(t,e,n,u,c,b,w,O,x))},j}e.a=o;var s=n(136),a=n(238),u=n(413),c=n(556),l=n(294),h=n(412),f=n(872),p=1e3,d=60*p,y=60*d,_=24*y,v=7*_,m=30*_,g=365*_;e.b=function(){return o(u.D,u.n,u.B,u.a,u.e,u.j,u.r,u.h,c.c).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}},function(t,e,n){"use strict";function i(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function o(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function s(t){function e(t,e){return function(n){var i,r,o,s=[],a=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++a<c;)37===t.charCodeAt(a)&&(s.push(t.slice(u,a)),null!=(r=et[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(o=e[i])&&(i=o(n,r)),s.push(i),u=a+1);return s.push(t.slice(u,a)),s.join("")}}function n(t,e){return function(n){var i=o(1900);if(s(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?r(o(i.y)).getUTCDay():e(o(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,r(i)):e(i)}}function s(t,e,n,i){for(var r,o,s=0,a=e.length,u=n.length;s<a;){if(i>=u)return-1;if(37===(r=e.charCodeAt(s++))){if(r=e.charAt(s++),!(o=Bt[r in et?e.charAt(s++):r])||(i=o(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function a(t,e,n){var i=St.exec(e.slice(n));return i?(t.p=jt[i[0].toLowerCase()],n+i[0].length):-1}function u(t,e,n){var i=At.exec(e.slice(n));return i?(t.w=Pt[i[0].toLowerCase()],n+i[0].length):-1}function tt(t,e,n){var i=kt.exec(e.slice(n));return i?(t.w=Mt[i[0].toLowerCase()],n+i[0].length):-1}function nt(t,e,n){var i=Ct.exec(e.slice(n));return i?(t.m=qt[i[0].toLowerCase()],n+i[0].length):-1}function it(t,e,n){var i=Et.exec(e.slice(n));return i?(t.m=Nt[i[0].toLowerCase()],n+i[0].length):-1}function rt(t,e,n){return s(t,vt,e,n)}function ot(t,e,n){return s(t,mt,e,n)}function st(t,e,n){return s(t,gt,e,n)}function at(t){return Ot[t.getDay()]}function ut(t){return wt[t.getDay()]}function ct(t){return Tt[t.getMonth()]}function lt(t){return xt[t.getMonth()]}function ht(t){return bt[+(t.getHours()>=12)]}function ft(t){return Ot[t.getUTCDay()]}function pt(t){return wt[t.getUTCDay()]}function dt(t){return Tt[t.getUTCMonth()]}function yt(t){return xt[t.getUTCMonth()]}function _t(t){return bt[+(t.getUTCHours()>=12)]}var vt=t.dateTime,mt=t.date,gt=t.time,bt=t.periods,wt=t.days,Ot=t.shortDays,xt=t.months,Tt=t.shortMonths,St=c(bt),jt=l(bt),kt=c(wt),Mt=l(wt),At=c(Ot),Pt=l(Ot),Et=c(xt),Nt=l(xt),Ct=c(Tt),qt=l(Tt),Ft={a:at,A:ut,b:ct,B:lt,c:null,d:S,e:S,H:j,I:k,j:M,L:A,m:P,M:E,p:ht,S:N,U:C,w:q,W:F,x:null,X:null,y:R,Y:B,Z:L,"%":K},Rt={a:ft,A:pt,b:dt,B:yt,c:null,d:I,e:I,H:D,I:U,j:z,L:V,m:G,M:W,p:_t,S:H,U:Y,w:Q,W:X,x:null,X:null,y:Z,Y:$,Z:J,"%":K},Bt={a:u,A:tt,b:nt,B:it,c:rt,d:m,e:m,H:b,I:b,j:g,L:x,m:v,M:w,p:a,S:O,U:f,w:h,W:p,x:ot,X:st,y:y,Y:d,Z:_,"%":T};return Ft.x=e(mt,Ft),Ft.X=e(gt,Ft),Ft.c=e(vt,Ft),Rt.x=e(mt,Rt),Rt.X=e(gt,Rt),Rt.c=e(vt,Rt),{format:function(t){var n=e(t+="",Ft);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",i);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",Rt);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,r);return e.toString=function(){return t},e}}}function a(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",o=r.length;return i+(o<n?new Array(n-o+1).join(e)+r:r)}function u(t){return t.replace(rt,"\\$&")}function c(t){return new RegExp("^(?:"+t.map(u).join("|")+")","i")}function l(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function h(t,e,n){var i=nt.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function f(t,e,n){var i=nt.exec(e.slice(n));return i?(t.U=+i[0],n+i[0].length):-1}function p(t,e,n){var i=nt.exec(e.slice(n));return i?(t.W=+i[0],n+i[0].length):-1}function d(t,e,n){var i=nt.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function y(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function _(t,e,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function v(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function m(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function g(t,e,n){var i=nt.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function b(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function w(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function O(t,e,n){var i=nt.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function x(t,e,n){var i=nt.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function T(t,e,n){var i=it.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function S(t,e){return a(t.getDate(),e,2)}function j(t,e){return a(t.getHours(),e,2)}function k(t,e){return a(t.getHours()%12||12,e,2)}function M(t,e){return a(1+tt.a.count(Object(tt.D)(t),t),e,3)}function A(t,e){return a(t.getMilliseconds(),e,3)}function P(t,e){return a(t.getMonth()+1,e,2)}function E(t,e){return a(t.getMinutes(),e,2)}function N(t,e){return a(t.getSeconds(),e,2)}function C(t,e){return a(tt.t.count(Object(tt.D)(t),t),e,2)}function q(t){return t.getDay()}function F(t,e){return a(tt.l.count(Object(tt.D)(t),t),e,2)}function R(t,e){return a(t.getFullYear()%100,e,2)}function B(t,e){return a(t.getFullYear()%1e4,e,4)}function L(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function I(t,e){return a(t.getUTCDate(),e,2)}function D(t,e){return a(t.getUTCHours(),e,2)}function U(t,e){return a(t.getUTCHours()%12||12,e,2)}function z(t,e){return a(1+tt.F.count(Object(tt._7)(t),t),e,3)}function V(t,e){return a(t.getUTCMilliseconds(),e,3)}function G(t,e){return a(t.getUTCMonth()+1,e,2)}function W(t,e){return a(t.getUTCMinutes(),e,2)}function H(t,e){return a(t.getUTCSeconds(),e,2)}function Y(t,e){return a(tt.X.count(Object(tt._7)(t),t),e,2)}function Q(t){return t.getUTCDay()}function X(t,e){return a(tt.P.count(Object(tt._7)(t),t),e,2)}function Z(t,e){return a(t.getUTCFullYear()%100,e,2)}function $(t,e){return a(t.getUTCFullYear()%1e4,e,4)}function J(){return"+0000"}function K(){return"%"}e.a=s;var tt=n(413),et={"-":"",_:" ",0:"0"},nt=/^\s*\d+/,it=/^%/,rt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g},function(t,e,n){"use strict";function i(t){return t.toISOString()}n.d(e,"b",function(){return o});var r=n(557),o="%Y-%m-%dT%H:%M:%S.%LZ",s=Date.prototype.toISOString?i:Object(r.d)(o);e.a=s},function(t,e,n){"use strict";var i=n(292),r=n(295),o=n(414),s=n(558),a=n(559);e.a=function(){function t(t){var e,r,o,s,a,y=t.length,_=!1,v=new Array(y),m=new Array(y);for(null==f&&(d=p(a=Object(i.a)())),e=0;e<=y;++e){if(!(e<y&&h(s=t[e],e,t))===_)if(_=!_)r=e,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),o=e-1;o>=r;--o)d.point(v[o],m[o]);d.lineEnd(),d.areaEnd()}_&&(v[e]=+n(s,e,t),m[e]=+c(s,e,t),d.point(u?+u(s,e,t):v[e],l?+l(s,e,t):m[e]))}if(a)return d=null,a+""||null}function e(){return Object(s.a)().defined(h).curve(p).context(f)}var n=a.a,u=null,c=Object(r.a)(0),l=a.b,h=Object(r.a)(!0),f=null,p=o.a,d=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Object(r.a)(+e),u=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Object(r.a)(+e),t):n},t.x1=function(e){return arguments.length?(u=null==e?null:"function"==typeof e?e:Object(r.a)(+e),t):u},t.y=function(e){return arguments.length?(c="function"==typeof e?e:Object(r.a)(+e),l=null,t):c},t.y0=function(e){return arguments.length?(c="function"==typeof e?e:Object(r.a)(+e),t):c},t.y1=function(e){return arguments.length?(l=null==e?null:"function"==typeof e?e:Object(r.a)(+e),t):l},t.lineX0=t.lineY0=function(){return e().x(n).y(c)},t.lineY1=function(){return e().x(n).y(l)},t.lineX1=function(){return e().x(u).y(c)},t.defined=function(e){return arguments.length?(h="function"==typeof e?e:Object(r.a)(!!e),t):h},t.curve=function(e){return arguments.length?(p=e,null!=f&&(d=p(f)),t):p},t.context=function(e){return arguments.length?(null==e?f=d=null:d=p(f=e),t):f},t}},function(t,e,n){"use strict";function i(t){this._curve=t}function r(t){function e(e){return new i(t(e))}return e._curve=t,e}n.d(e,"a",function(){return s}),e.b=r;var o=n(414),s=r(o.a);i.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}}},function(t,e,n){"use strict";function i(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Object(r.b)(t)):e()._curve},t}e.b=i;var r=n(877),o=n(558);e.a=function(){return i(Object(o.a)().curve(r.a))}},function(t,e,n){"use strict";e.a=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=Array.prototype.slice},function(t,e,n){"use strict";var i=n(357);e.a={draw:function(t,e){var n=Math.sqrt(e/i.j);t.moveTo(n,0),t.arc(0,0,n,0,i.m)}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}}},function(t,e,n){"use strict";var i=Math.sqrt(1/3),r=2*i;e.a={draw:function(t,e){var n=Math.sqrt(e/r),o=n*i;t.moveTo(0,-n),t.lineTo(o,0),t.lineTo(0,n),t.lineTo(-o,0),t.closePath()}}},function(t,e,n){"use strict";var i=n(357),r=Math.sin(i.j/10)/Math.sin(7*i.j/10),o=Math.sin(i.m/10)*r,s=-Math.cos(i.m/10)*r;e.a={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=o*n,a=s*n;t.moveTo(0,-n),t.lineTo(r,a);for(var u=1;u<5;++u){var c=i.m*u/5,l=Math.cos(c),h=Math.sin(c);t.lineTo(h*n,-l*n),t.lineTo(l*r-h*a,h*r+l*a)}t.closePath()}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}}},function(t,e,n){"use strict";var i=Math.sqrt(3);e.a={draw:function(t,e){var n=-Math.sqrt(e/(3*i));t.moveTo(0,2*n),t.lineTo(-i*n,-n),t.lineTo(i*n,-n),t.closePath()}}},function(t,e,n){"use strict";var i=-.5,r=Math.sqrt(3)/2,o=1/Math.sqrt(12),s=3*(o/2+1);e.a={draw:function(t,e){var n=Math.sqrt(e/s),a=n/2,u=n*o,c=a,l=n*o+n,h=-c,f=l;t.moveTo(a,u),t.lineTo(c,l),t.lineTo(h,f),t.lineTo(i*a-r*u,r*a+i*u),t.lineTo(i*c-r*l,r*c+i*l),t.lineTo(i*h-r*f,r*h+i*f),t.lineTo(i*a+r*u,i*u-r*a),t.lineTo(i*c+r*l,i*l-r*c),t.lineTo(i*h+r*f,i*f-r*h),t.closePath()}}},function(t,e,n){"use strict";function i(t,e){this._context=t,this._k=(1-e)/6}e.a=i;var r=n(415),o=n(417);i.prototype={areaStart:r.a,areaEnd:r.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(o.c)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function i(t,e){this._context=t,this._k=(1-e)/6}e.a=i;var r=n(417);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(r.c)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.b=function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function i(t){return l.b[t.index]={site:t,halfedges:[]}}function r(t,e){var n=t.site,i=e.left,r=e.right;return n===r&&(r=i,i=n),r?Math.atan2(r[1]-i[1],r[0]-i[0]):(n===i?(i=e[1],r=e[0]):(i=e[0],r=e[1]),Math.atan2(i[0]-r[0],r[1]-i[1]))}function o(t,e){return e[+(e.left!==t.site)]}function s(t,e){return e[+(e.left===t.site)]}function a(){for(var t,e,n,i,o=0,s=l.b.length;o<s;++o)if((t=l.b[o])&&(i=(e=t.halfedges).length)){var a=new Array(i),u=new Array(i);for(n=0;n<i;++n)a[n]=n,u[n]=r(t,l.e[e[n]]);for(a.sort(function(t,e){return u[e]-u[t]}),n=0;n<i;++n)u[n]=e[a[n]];for(n=0;n<i;++n)e[n]=u[n]}}function u(t,e,n,i){var r,a,u,h,f,p,d,y,_,v,m,g,b=l.b.length,w=!0;for(r=0;r<b;++r)if(a=l.b[r]){for(u=a.site,f=a.halfedges,h=f.length;h--;)l.e[f[h]]||f.splice(h,1);for(h=0,p=f.length;h<p;)v=s(a,l.e[f[h]]),m=v[0],g=v[1],d=o(a,l.e[f[++h%p]]),y=d[0],_=d[1],(Math.abs(m-y)>l.f||Math.abs(g-_)>l.f)&&(f.splice(h,0,l.e.push(Object(c.b)(u,v,Math.abs(m-t)<l.f&&i-g>l.f?[t,Math.abs(y-t)<l.f?_:i]:Math.abs(g-i)<l.f&&n-m>l.f?[Math.abs(_-i)<l.f?y:n,i]:Math.abs(m-n)<l.f&&g-e>l.f?[n,Math.abs(y-n)<l.f?_:e]:Math.abs(g-e)<l.f&&m-t>l.f?[Math.abs(_-e)<l.f?y:t,e]:null))-1),++p);p&&(w=!1)}if(w){var O,x,T,S=1/0;for(r=0,w=null;r<b;++r)(a=l.b[r])&&(u=a.site,O=u[0]-t,x=u[1]-e,(T=O*O+x*x)<S&&(S=T,w=a));if(w){var j=[t,e],k=[t,i],M=[n,i],A=[n,e];w.halfedges.push(l.e.push(Object(c.b)(u=w.site,j,k))-1,l.e.push(Object(c.b)(u,k,M))-1,l.e.push(Object(c.b)(u,M,A))-1,l.e.push(Object(c.b)(u,A,j))-1)}}for(r=0;r<b;++r)(a=l.b[r])&&(a.halfedges.length||delete l.b[r])}e.c=i,e.a=o,e.d=a,e.b=u;var c=n(563),l=n(360)},function(t,e,n){"use strict";function i(){Object(a.a)(this),this.x=this.y=this.arc=this.site=this.cy=null}function r(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,o=t.site,a=n.site;if(r!==a){var l=o[0],h=o[1],f=r[0]-l,p=r[1]-h,d=a[0]-l,y=a[1]-h,_=2*(f*y-p*d);if(!(_>=-u.g)){var v=f*f+p*p,m=d*d+y*y,g=(y*v-p*m)/_,b=(f*m-d*v)/_,w=c.pop()||new i;w.arc=t,w.site=o,w.x=g+l,w.y=(w.cy=b+h)+Math.sqrt(g*g+b*b),t.circle=w;for(var O=null,x=u.c._;x;)if(w.y<x.y||w.y===x.y&&w.x<=x.x){if(!x.L){O=x.P;break}x=x.L}else{if(!x.R){O=x;break}x=x.R}u.c.insert(O,w),O||(s=w)}}}}function o(t){var e=t.circle;e&&(e.P||(s=e.N),u.c.remove(e),c.push(e),Object(a.a)(e),t.circle=null)}n.d(e,"c",function(){return s}),e.a=r,e.b=o;var s,a=n(562),u=n(360),c=[]},function(t,e,n){"use strict";function i(t,e,n){this.k=t,this.x=e,this.y=n}function r(t){return t.__zoom||o}e.a=i,n.d(e,"c",function(){return o}),e.b=r,i.prototype={constructor:i,scale:function(t){return 1===t?this:new i(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new i(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var o=new i(1,0,0);r.prototype=i.prototype},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";(function(t){function i(t,e,n){var i={notes:e.notes,duration:e.duration},r={notes:n.notes,duration:n.duration},o=t.get(i)||new p.Dictionary(JSON.stringify),s=o.get(r)||0;o.set(r,s+1),t.set(i,o)}function r(t,e){var n=e.get(t);if(n){for(var i=n.keys(),r=Math.random(),o=i.reduce(function(t,e){return t+n.get(e)},0),s=0,a=0,u=i;a<u.length;a++){var c=u[a];if((s+=n.get(c))>r*o)return c}throw"Oh no"}var l=e.keys();return l[Math.floor(Math.random()*l.length)]}function o(t){for(var e=t.tracks[0].notes,n=[],i=0,r=e;i<r.length;i++){var o=r[i];if(n.length&&n[n.length-1].time===o.time)n[n.length-1].notes.push(o.midi);else if(n.push({time:o.time,notes:[o.midi],velocity:o.velocity}),n.length>1){var s=n[n.length-2],a=n[n.length-1];s.duration=a.time-s.time}}return n}function s(t,e,n){e.keys().forEach(function(i){var r=e.get(i),o=JSON.stringify(i),s=t.nodes[o];r.keys().forEach(function(e){var i=r.get(e),a=JSON.stringify(e),u=t.nodes[a];(t.links[o+a]=t.links[o+a]||{id:n+T++,source:s,target:u,recency:0}).value=i})})}function a(t,e,n,i,r,o){return{simulation:d.forceSimulation().velocityDecay(.9).force("link",d.forceLink()).force("collide",d.forceCollide(50).strength(.8)).force("charge",d.forceManyBody()).force("y",d.forceY(o)).force("x",d.forceX(i)).force("pairX",d.forceX(r).strength(.001)).alphaTarget(1),links:e.append("g").attr("class","links"),arrows:n.append("g"),nodes:e.append("g").attr("class","nodes")}}function u(t,e,n){function i(t){d.event.active||s.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function r(t){t.fx=d.event.x,t.fy=d.event.y}function o(t){d.event.active||s.alphaTarget(0),t.fx=null,t.fy=null}var s=t.simulation,a=t.links,u=t.arrows,c=t.nodes,h=a.selectAll("path").data(d.values(e.links)),f=h.style("stroke",function(t){return l(b,n,t.recency)}).enter().append("path").attr("fill","none").attr("marker-end",function(t){return"url(#marker-"+t.id}).style("stroke",function(t){return l(b,n,t.recency)}),p=f.merge(h).style("stroke",function(t){return l(b,n,t.recency)}).style("stroke-width",function(t){return t.value/4}),y=u.selectAll("marker").data(d.values(e.links)),_=y.enter().append("svg:marker").attr("id",function(t){return"marker-"+t.id}).attr("viewBox","0 -5 10 10").attr("refX",function(t){return t.source===t.target?0:1.8*m}).attr("refY",-2).attr("markerWidth",10).attr("markerHeight",10).attr("markerUnits","userSpaceOnUse").attr("orient","auto");_.append("svg:path").attr("d","M0,-3L10,0L0,3"),_.merge(y).select("path").style("fill",function(t){return l(b,n,t.recency)});var v=c.selectAll("circle").data(d.values(e.nodes)),w=v.enter().append("circle").attr("r",m).style("stroke","#aaa").call(d.drag().on("start",i).on("drag",r).on("end",o)),O=w.merge(v).style("fill",function(t){return l(g,n,t.recency)}).style("stroke-width",function(t){return t.current?2:0});s.nodes(d.values(e.nodes)).on("tick",function(){p.attr("d",function(t){var e=t.target.x-t.source.x,n=t.target.y-t.source.y,i=Math.sqrt(e*e+n*n);if(0===i){var r=t.target.x,o=t.target.y;return"M"+r+","+o+"A20,20, 0,1,0 "+(r+m)+","+(o+m)}return"M"+t.source.x+","+t.source.y+"A"+i+","+i+" 0 0,1 "+t.target.x+","+t.target.y}),O.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y})}),s.force("link").distance(function(t){return 175-5*t.value}).links(d.values(e.links)),s.force("x").strength(function(t){return t.recency/2}),s.force("y").strength(function(t){return t.recency/2}),s.alpha(1).restart()}function c(t,e,n){var i=[];return i[0]=Math.floor((1-n)*t[0]+n*e[0]),i[1]=Math.floor((1-n)*t[1]+n*e[1]),i[2]=Math.floor((1-n)*t[2]+n*e[2]),i}function l(t,e,n){return"rgb("+c(t,e,n).join(",")}function h(t,e,n,i){var r=JSON.stringify(n);d.values(t.links).forEach(function(t){var e=t.target.key===r&&t.source.current;t.recency=e?1:.7*t.recency}),d.values(t.nodes).forEach(function(t){t.current=t.key===r,t.recency=t.key===r?1:.7*t.recency}),u(e,t,i)}function f(t,e,n){function c(t,e,o,a,u,l,f,p,d){if(!g){var _;if(u.length){var v=u.shift();_={notes:v.notes,duration:v.duration},v.velocity,o.nodes[JSON.stringify(_)]=o.nodes[JSON.stringify(_)]||{key:JSON.stringify(_),recency:0,x:f,y:p},d&&i(e,d,_)}else _=r(d,e),.1;for(var m=(_.duration||4)*(u.length?1:2),b=0,w=_.notes;b<w.length;b++){var O=w[b];console.log(O,t)}y.Draw.schedule(function(){s(o,e,l),h(o,a,_,n)},t),y.Transport.schedule(function(t){return c(t,e,o,a,u,l,f,p,_)},"+"+m)}}function l(t,e){if(!g){var n=(new y.Part(function(t,e){S.keyUp(e.midi,t,e.velocity)},t.tracks[0].noteOffs).start(0),new y.Part(function(t,n){console.log(n),e(t),S.keyDown(n.midi,t,n.velocity)},t.tracks[0].notes).start(0));console.log(n)}}var f=o(t),_=o(e),v=new p.Dictionary(JSON.stringify),m=new p.Dictionary(JSON.stringify),g=!1,b={nodes:{},links:{}},w={nodes:{},links:{}},O=d.select(".visualization"),x=O.node().getBoundingClientRect().width,T=O.node().getBoundingClientRect().height,j=O.append("svg").attr("width",x).attr("height",T),k=j.append("svg:defs"),M=x/3.5,A=x-x/3.5,P=T/2,E=a(".left",j,k,M,A,P),N=a(".right",j,k,A,M,P);return l(t,function(t){return c(t,v,b,E,f,"left",M,P)}),l(e,function(t){return c(t,m,w,N,_,"right",A,P)}),u(E,b,n),u(N,w,n),function(){g=!0,j.remove()}}Object.defineProperty(e,"__esModule",{value:!0}),n(1929),n(1930),console.log(t);var p=n(1931),d=n(1932),y=n(312),_=n(2223),v=n(2224),m=10,g=[90,90,90],b=[230,230,230],w=[255,64,129],O=[33,150,243],x=[105,240,174],T=0,S=(window,new v.Piano([21,108],1,!0).toMaster());Promise.all([S.load("./"),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/left.mid",t)}),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/right.mid",t)}),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/left2.mid",t)}),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/right2.mid",t)}),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/left3.mid",t)}),new Promise(function(t){return _.load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699/right3.mid",t)})]).then(function(t){var e=(t[0],t[1]),n=t[2],i=t[3],r=t[4],o=t[5],s=t[6];document.querySelector(".loading").remove(),S.pedalDown();var a=f(i,r,w),u=document.querySelector("#g1"),c=document.querySelector("#g2"),l=document.querySelector("#g3");u.addEventListener("click",function(){a&&a(),a=f(e,n,w),u.classList.add("active"),c.classList.remove("active"),l.classList.remove("active")}),c.addEventListener("click",function(){a&&a(),a=f(i,r,O),u.classList.remove("active"),c.classList.add("active"),l.classList.remove("active")}),l.addEventListener("click",function(){a&&a(),a=f(o,s,x),u.classList.remove("active"),c.classList.remove("active"),l.classList.add("active")})}).catch(function(t){return console.error(t)}),y.Transport.start(),StartAudioContext(y.context,document.documentElement)}).call(e,"sound/gymnopedies/app.ts")},function(t,e,n){"use strict";var i={level:"prd"};t.exports=i},function(t,e){t.exports='<html>\n\n<head>\n    <title>Dancing Markov Gymnopedies</title>\n    <style>\n        html,\n        body {\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            background: linear-gradient(135deg, #000, #222);\n            color: #eee;\n        }\n\n        .loading {\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 2em;\n            font-family: sans-serif;\n        }\n\n        nav {\n            position: fixed;\n            width: 100%;\n            left: 0;\n            top: 40px;\n            width: 100%;\n            height: 30px;\n            text-align: center;\n        }\n\n        nav button {\n            margin: 0 20px;\n            padding: 10px;\n            cursor: pointer;\n            border: 0;\n            background: none;\n            font-size: 2em;\n            color: #eee;\n            font-weight: normal;\n            font-family: \'Dancing Script\', cursive;\n            outline: none;\n        }\n\n        button.active {\n            border-bottom: 1px solid #eee;\n        }\n\n        .visualization {\n            position: fixed;\n            left: 0;\n            top: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        circle {\n            transition: fill 0.5s ease-out;\n        }\n\n        path {\n            transition: stroke 0.5s ease-out, fill 0.5s ease-out;\n        }\n    </style>\n    \x3c!-- <script src="https://cdn.rawgit.com/teropa/Piano/fix-tone-extern/build/Piano.js"><\/script> --\x3e\n    <script src="https://cdn.rawgit.com/tambien/StartAudioContext/8da8637e/StartAudioContext.js"><\/script>\n</head>\n\n<body>\n    <div class="loading">Loading...</div>\n    <div class="visualization">\n    </div>\n    <nav>\n        <button id="g1" class="active">Gymnopédie No. 1</button>\n        <button id="g2">Gymnopédie No. 2</button>\n        <button id="g3">Gymnopédie No. 3</button>\n    </nav>\n</body>\n\n</html>'},function(t,e,n){var i,r,o;/*! buckets - version: 1.98.2 - (c) 2013 - 2016 Mauricio Santos - https://github.com/mauriciosantos/Buckets-JS*/
!function(n,s){r=[],i=s,void 0!==(o="function"==typeof i?i.apply(e,r):i)&&(t.exports=o)}(0,function(){"use strict";var t={};return t.defaultCompare=function(t,e){return t<e?-1:t===e?0:1},t.defaultEquals=function(t,e){return t===e},t.defaultToString=function(e){return null===e?"BUCKETS_NULL":t.isUndefined(e)?"BUCKETS_UNDEFINED":t.isString(e)?e:e.toString()},t.isFunction=function(t){return"function"==typeof t},t.isUndefined=function(t){return void 0===t},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.reverseCompareFunction=function(e){return t.isFunction(e)?function(t,n){return-1*e(t,n)}:function(t,e){return t<e?1:t===e?0:-1}},t.compareToEquals=function(t){return function(e,n){return 0===t(e,n)}},t.arrays={},t.arrays.indexOf=function(e,n,i){var r,o=i||t.defaultEquals,s=e.length;for(r=0;r<s;r+=1)if(o(e[r],n))return r;return-1},t.arrays.lastIndexOf=function(e,n,i){var r,o=i||t.defaultEquals,s=e.length;for(r=s-1;r>=0;r-=1)if(o(e[r],n))return r;return-1},t.arrays.contains=function(e,n,i){return t.arrays.indexOf(e,n,i)>=0},t.arrays.remove=function(e,n,i){var r=t.arrays.indexOf(e,n,i);return!(r<0||(e.splice(r,1),0))},t.arrays.frequency=function(e,n,i){var r,o=i||t.defaultEquals,s=e.length,a=0;for(r=0;r<s;r+=1)o(e[r],n)&&(a+=1);return a},t.arrays.equals=function(e,n,i){var r,o=i||t.defaultEquals,s=e.length;if(e.length!==n.length)return!1;for(r=0;r<s;r+=1)if(!o(e[r],n[r]))return!1;return!0},t.arrays.copy=function(t){return t.concat()},t.arrays.swap=function(t,e,n){var i;return!(e<0||e>=t.length||n<0||n>=t.length||(i=t[e],t[e]=t[n],t[n]=i,0))},t.arrays.forEach=function(t,e){var n,i=t.length;for(n=0;n<i;n+=1)if(!1===e(t[n]))return},t.Bag=function(e){var n={},i=e||t.defaultToString,r=new t.Dictionary(i),o=0;return n.add=function(e,i){var s;return(isNaN(i)||t.isUndefined(i))&&(i=1),!(t.isUndefined(e)||i<=0||(n.contains(e)?r.get(e).copies+=i:(s={value:e,copies:i},r.set(e,s)),o+=i,0))},n.count=function(t){return n.contains(t)?r.get(t).copies:0},n.contains=function(t){return r.containsKey(t)},n.remove=function(e,i){var s;return(isNaN(i)||t.isUndefined(i))&&(i=1),!(t.isUndefined(e)||i<=0||!n.contains(e)||(s=r.get(e),o-=i>s.copies?s.copies:i,s.copies-=i,s.copies<=0&&r.remove(e),0))},n.toArray=function(){var t,e,n,i,o,s=[],a=r.values(),u=a.length;for(i=0;i<u;i+=1)for(t=a[i],e=t.value,n=t.copies,o=0;o<n;o+=1)s.push(e);return s},n.toSet=function(){var e,n=new t.Set(i),o=r.values(),s=o.length;for(e=0;e<s;e+=1)n.add(o[e].value);return n},n.forEach=function(t){r.forEach(function(e,n){var i,r=n.value,o=n.copies;for(i=0;i<o;i+=1)if(!1===t(r))return!1;return!0})},n.size=function(){return o},n.isEmpty=function(){return 0===o},n.clear=function(){o=0,r.clear()},n.equals=function(e){var i;return!t.isUndefined(e)&&"function"==typeof e.toSet&&n.size()===e.size()&&(i=!0,e.forEach(function(t){return i=n.count(t)===e.count(t)}),i)},n},t.BSTree=function(e){function n(t,e){for(var n,i=t;void 0!==i&&0!==n;)n=s(e,i.element),n<0?i=i.leftCh:n>0&&(i=i.rightCh);return i}function i(t){for(var e=t;void 0!==e.leftCh;)e=e.leftCh;return e}var r,o={},s=e||t.defaultCompare,a=0;return o.add=function(e){if(t.isUndefined(e))return!1;var n={element:e,leftCh:void 0,rightCh:void 0,parent:void 0};return void 0!==function(t){for(var e,n,i=r;void 0!==i;){if(0===(n=s(t.element,i.element)))return;n<0?(e=i,i=i.leftCh):(e=i,i=i.rightCh)}return t.parent=e,void 0===e?r=t:s(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t}(n)&&(a+=1,!0)},o.clear=function(){r=void 0,a=0},o.isEmpty=function(){return 0===a},o.size=function(){return a},o.contains=function(e){return!t.isUndefined(e)&&void 0!==n(r,e)},o.remove=function(t){function e(t,e){void 0===t.parent?r=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,void 0!==e&&(e.parent=t.parent)}var o;return void 0!==(o=n(r,t))&&(function(t){if(void 0===t.leftCh)e(t,t.rightCh);else if(void 0===t.rightCh)e(t,t.leftCh);else{var n=i(t.rightCh);n.parent!==t&&(e(n,n.rightCh),n.rightCh=t.rightCh,n.rightCh.parent=n),e(t,n),n.leftCh=t.leftCh,n.leftCh.parent=n}}(o),a-=1,!0)},o.inorderTraversal=function(t){function e(t,n,i){void 0===t||i.stop||(e(t.leftCh,n,i),i.stop||(i.stop=!1===n(t.element),i.stop||e(t.rightCh,n,i)))}e(r,t,{stop:!1})},o.preorderTraversal=function(t){function e(t,n,i){void 0===t||i.stop||(i.stop=!1===n(t.element),i.stop||(e(t.leftCh,n,i),i.stop||e(t.rightCh,n,i)))}e(r,t,{stop:!1})},o.postorderTraversal=function(t){function e(t,n,i){void 0===t||i.stop||(e(t.leftCh,n,i),i.stop||(e(t.rightCh,n,i),i.stop||(i.stop=!1===n(t.element))))}e(r,t,{stop:!1})},o.levelTraversal=function(e){!function(e,n){var i=t.Queue();for(void 0!==e&&i.enqueue(e);!i.isEmpty();){if(e=i.dequeue(),!1===n(e.element))return;void 0!==e.leftCh&&i.enqueue(e.leftCh),void 0!==e.rightCh&&i.enqueue(e.rightCh)}}(r,e)},o.minimum=function(){if(!o.isEmpty())return i(r).element},o.maximum=function(){if(!o.isEmpty())return function(t){for(;void 0!==t.rightCh;)t=t.rightCh;return t}(r).element},o.forEach=function(t){o.inorderTraversal(t)},o.toArray=function(){var t=[];return o.inorderTraversal(function(e){t.push(e)}),t},o.height=function(){function t(e){return void 0===e?-1:Math.max(t(e.leftCh),t(e.rightCh))+1}return function(e){return void 0===e?-1:Math.max(t(e.leftCh),t(e.rightCh))+1}(r)},o.equals=function(e){var n;return!t.isUndefined(e)&&"function"==typeof e.levelTraversal&&o.size()===e.size()&&(n=!0,e.forEach(function(t){return n=o.contains(t)}),n)},o},t.Dictionary=function(e){var n={},i={},r=0,o=e||t.defaultToString,s="/$ ";return n.get=function(e){var n=i[s+o(e)];if(!t.isUndefined(n))return n.value},n.set=function(e,n){var a,u,c;if(!t.isUndefined(e)&&!t.isUndefined(n))return u=s+o(e),c=i[u],t.isUndefined(c)?(r+=1,a=void 0):a=c.value,i[u]={key:e,value:n},a},n.remove=function(e){var n=s+o(e),a=i[n];if(!t.isUndefined(a))return delete i[n],r-=1,a.value},n.keys=function(){var t,e=[];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.push(i[t].key);return e},n.values=function(){var t,e=[];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.push(i[t].value);return e},n.forEach=function(t){var e,n;for(e in i)if(Object.prototype.hasOwnProperty.call(i,e)&&(n=i[e],!1===t(n.key,n.value)))return},n.containsKey=function(e){return!t.isUndefined(n.get(e))},n.clear=function(){i={},r=0},n.size=function(){return r},n.isEmpty=function(){return r<=0},n.equals=function(e,i){var r,o;return!t.isUndefined(e)&&"function"==typeof e.keys&&n.size()===e.size()&&(r=i||t.defaultEquals,o=!0,e.forEach(function(t,e){return o=r(n.get(t),e)}),o)},n},t.Heap=function(e){function n(e){function n(t){return Math.floor((t-1)/2)}var i;for(i=n(e);e>0&&s(o[i],o[e])>0;)t.arrays.swap(o,i,e),e=i,i=n(e)}function i(e){function n(t){return 2*t+1}function i(t){return 2*t+2}function r(t,e){return e>=o.length?t>=o.length?-1:t:s(o[t],o[e])<=0?t:e}var a;for(a=r(n(e),i(e));a>=0&&s(o[e],o[a])>0;)t.arrays.swap(o,a,e),e=a,a=r(n(e),i(e))}var r={},o=[],s=e||t.defaultCompare;return r.peek=function(){if(o.length>0)return o[0]},r.add=function(e){if(!t.isUndefined(e))return o.push(e),n(o.length-1),!0},r.removeRoot=function(){var t;if(o.length>0)return t=o[0],o[0]=o[o.length-1],o.splice(o.length-1,1),o.length>0&&i(0),t},r.contains=function(e){var n=t.compareToEquals(s);return t.arrays.contains(o,e,n)},r.size=function(){return o.length},r.isEmpty=function(){return o.length<=0},r.clear=function(){o.length=0},r.forEach=function(e){t.arrays.forEach(o,e)},r.toArray=function(){return t.arrays.copy(o)},r.equals=function(e){var n,i,o;return!t.isUndefined(e)&&"function"==typeof e.removeRoot&&r.size()===e.size()&&(n=r.toArray(),i=e.toArray(),o=t.compareToEquals(s),n.sort(s),i.sort(s),t.arrays.equals(n,i,o))},r},t.LinkedList=function(){function e(t){var e,r;if(!(t<0||t>=o)){if(t===o-1)return i;for(e=n,r=0;r<t;r+=1)e=e.next;return e}}var n,i,r={},o=0;return r.add=function(r,s){var a,u;return t.isUndefined(s)&&(s=o),!(s<0||s>o||t.isUndefined(r)||(a={element:r,next:void 0},0===o?(n=a,i=a):s===o?(i.next=a,i=a):0===s?(a.next=n,n=a):(u=e(s-1),a.next=u.next,u.next=a),o+=1,0))},r.first=function(){if(void 0!==n)return n.element},r.last=function(){if(void 0!==i)return i.element},r.elementAtIndex=function(t){var n=e(t);if(void 0!==n)return n.element},r.indexOf=function(e,i){var r=i||t.defaultEquals,o=n,s=0;if(t.isUndefined(e))return-1;for(;void 0!==o;){if(r(o.element,e))return s;s+=1,o=o.next}return-1},r.contains=function(t,e){return r.indexOf(t,e)>=0},r.remove=function(e,r){var s,a=r||t.defaultEquals,u=n;if(o<1||t.isUndefined(e))return!1;for(;void 0!==u;){if(a(u.element,e))return u===n?(n=n.next,u===i&&(i=void 0)):u===i?(i=s,s.next=u.next,u.next=void 0):(s.next=u.next,u.next=void 0),o-=1,!0;s=u,u=u.next}return!1},r.clear=function(){n=void 0,i=void 0,o=0},r.equals=function(e,i){var o=i||t.defaultEquals,s=!0,a=n;return!t.isUndefined(e)&&"function"==typeof e.elementAtIndex&&r.size()===e.size()&&(e.forEach(function(t){return s=o(t,a.element),a=a.next,s}),s)},r.removeElementAtIndex=function(t){var r,s;if(!(t<0||t>=o))return 1===o?(r=n.element,n=void 0,i=void 0):(s=e(t-1),void 0===s?(r=n.element,n=n.next):s.next===i&&(r=i.element,i=s),void 0!==s&&(r=s.next.element,s.next=s.next.next)),o-=1,r},r.forEach=function(t){for(var e=n;void 0!==e&&!1!==t(e.element);)e=e.next},r.reverse=function(){for(var t,e,r=n;void 0!==r;)e=r.next,r.next=t,t=r,r=e;e=n,n=i,i=e},r.toArray=function(){var t=[];return r.forEach(function(e){t.push(e)}),t},r.size=function(){return o},r.isEmpty=function(){return o<=0},r},t.MultiDictionary=function(e,n){var i={},r=new t.Dictionary(e),o=n||t.defaultEquals;return i.get=function(e){var n=r.get(e);return t.isUndefined(n)?[]:t.arrays.copy(n)},i.set=function(e,n){var s;return!(t.isUndefined(e)||t.isUndefined(n)||(i.containsKey(e)?(s=r.get(e),t.arrays.contains(s,n,o)||(s.push(n),0)):(r.set(e,[n]),0)))},i.remove=function(e,n){var i,s;return t.isUndefined(n)?(i=r.remove(e),!t.isUndefined(i)):(s=r.get(e),!!t.arrays.remove(s,n,o)&&(0===s.length&&r.remove(e),!0))},i.keys=function(){return r.keys()},i.values=function(){var t,e,n,i=r.values(),o=[];for(t=0;t<i.length;t+=1)for(n=i[t],e=0;e<n.length;e+=1)o.push(n[e]);return o},i.containsKey=function(t){return r.containsKey(t)},i.clear=function(){return r.clear()},i.size=function(){return r.size()},i.isEmpty=function(){return r.isEmpty()},i.forEach=function(t){return r.forEach(t)},i.equals=function(e){var n,r=!0;return!t.isUndefined(e)&&"function"==typeof e.values&&i.size()===e.size()&&(e.forEach(function(e,s){return n=i.get(e)||[],n.length!==s.length?r=!1:t.arrays.forEach(n,function(e){return r=t.arrays.contains(s,e,o)}),r}),r)},i},t.PriorityQueue=function(e){var n={},i=t.reverseCompareFunction(e),r=new t.Heap(i);return n.enqueue=function(t){return r.add(t)},n.add=function(t){return r.add(t)},n.dequeue=function(){var t;if(0!==r.size())return t=r.peek(),r.removeRoot(),t},n.peek=function(){return r.peek()},n.contains=function(t){return r.contains(t)},n.isEmpty=function(){return r.isEmpty()},n.size=function(){return r.size()},n.clear=function(){r.clear()},n.forEach=function(t){r.forEach(t)},n.toArray=function(){return r.toArray()},n.equals=function(e){var r,o,s;return!t.isUndefined(e)&&"function"==typeof e.dequeue&&n.size()===e.size()&&(r=n.toArray(),o=e.toArray(),s=t.compareToEquals(i),r.sort(i),o.sort(i),t.arrays.equals(r,o,s))},n},t.Queue=function(){var e={},n=new t.LinkedList;return e.enqueue=function(t){return n.add(t)},e.add=function(t){return n.add(t)},e.dequeue=function(){var t;if(0!==n.size())return t=n.first(),n.removeElementAtIndex(0),t},e.peek=function(){if(0!==n.size())return n.first()},e.size=function(){return n.size()},e.contains=function(t,e){return n.contains(t,e)},e.isEmpty=function(){return n.size()<=0},e.clear=function(){n.clear()},e.forEach=function(t){n.forEach(t)},e.toArray=function(){return n.toArray()},e.equals=function(n,i){var r,o,s;return!t.isUndefined(n)&&"function"==typeof n.dequeue&&e.size()===n.size()&&(r=i||t.defaultEquals,o=!0,n.forEach(function(t){return s=e.dequeue(),e.enqueue(s),o=r(s,t)}),o)},e},t.Set=function(e){var n={},i=new t.Dictionary(e);return n.contains=function(t){return i.containsKey(t)},n.add=function(e){return!n.contains(e)&&!t.isUndefined(e)&&(i.set(e,e),!0)},n.intersection=function(t){n.forEach(function(e){t.contains(e)||n.remove(e)})},n.union=function(t){t.forEach(function(t){n.add(t)})},n.difference=function(t){t.forEach(function(t){n.remove(t)})},n.isSubsetOf=function(t){var e=!0;return!(n.size()>t.size())&&(n.forEach(function(n){if(!t.contains(n))return e=!1,!1}),e)},n.remove=function(t){return!!n.contains(t)&&(i.remove(t),!0)},n.forEach=function(t){i.forEach(function(e,n){return t(n)})},n.toArray=function(){return i.values()},n.isEmpty=function(){return i.isEmpty()},n.size=function(){return i.size()},n.clear=function(){i.clear()},n.equals=function(e){var i;return!t.isUndefined(e)&&"function"==typeof e.isSubsetOf&&n.size()===e.size()&&(i=!0,e.forEach(function(t){return i=n.contains(t)}),i)},n},t.Stack=function(){var e={},n=new t.LinkedList;return e.push=function(t){return n.add(t,0)},e.add=function(t){return n.add(t,0)},e.pop=function(){return n.removeElementAtIndex(0)},e.peek=function(){return n.first()},e.size=function(){return n.size()},e.contains=function(t,e){return n.contains(t,e)},e.isEmpty=function(){return n.isEmpty()},e.clear=function(){n.clear()},e.forEach=function(t){n.forEach(t)},e.toArray=function(){return n.toArray()},e.equals=function(i,r){var o,s,a;return!t.isUndefined(i)&&"function"==typeof i.peek&&e.size()===i.size()&&(o=r||t.defaultEquals,s=!0,i.forEach(function(t){return a=e.pop(),n.add(a),s=o(a,t)}),s)},e},t})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1933);n.d(e,"version",function(){return i.a});var r=n(136);n.d(e,"bisect",function(){return r.b}),n.d(e,"bisectRight",function(){return r.d}),n.d(e,"bisectLeft",function(){return r.c}),n.d(e,"ascending",function(){return r.a}),n.d(e,"bisector",function(){return r.e}),n.d(e,"cross",function(){return r.f}),n.d(e,"descending",function(){return r.g}),n.d(e,"deviation",function(){return r.h}),n.d(e,"extent",function(){return r.i}),n.d(e,"histogram",function(){return r.j}),n.d(e,"thresholdFreedmanDiaconis",function(){return r.w}),n.d(e,"thresholdScott",function(){return r.x}),n.d(e,"thresholdSturges",function(){return r.y}),n.d(e,"max",function(){return r.k}),n.d(e,"mean",function(){return r.l}),n.d(e,"median",function(){return r.m}),n.d(e,"merge",function(){return r.n}),n.d(e,"min",function(){return r.o}),n.d(e,"pairs",function(){return r.p}),n.d(e,"permute",function(){return r.q}),n.d(e,"quantile",function(){return r.r}),n.d(e,"range",function(){return r.s}),n.d(e,"scan",function(){return r.t}),n.d(e,"shuffle",function(){return r.u}),n.d(e,"sum",function(){return r.v}),n.d(e,"ticks",function(){return r.B}),n.d(e,"tickIncrement",function(){return r.z}),n.d(e,"tickStep",function(){return r.A}),n.d(e,"transpose",function(){return r.C}),n.d(e,"variance",function(){return r.D}),n.d(e,"zip",function(){return r.E});var o=n(1950);n.d(e,"axisTop",function(){return o.d}),n.d(e,"axisRight",function(){return o.c}),n.d(e,"axisBottom",function(){return o.a}),n.d(e,"axisLeft",function(){return o.b});var s=n(1954);n.d(e,"brush",function(){return s.a}),n.d(e,"brushX",function(){return s.c}),n.d(e,"brushY",function(){return s.d}),n.d(e,"brushSelection",function(){return s.b});var a=n(2040);n.d(e,"chord",function(){return a.a}),n.d(e,"ribbon",function(){return a.b});var u=n(351);n.d(e,"nest",function(){return u.d}),n.d(e,"set",function(){return u.e}),n.d(e,"map",function(){return u.c}),n.d(e,"keys",function(){return u.b}),n.d(e,"values",function(){return u.f}),n.d(e,"entries",function(){return u.a});var c=n(244);n.d(e,"color",function(){return c.a}),n.d(e,"rgb",function(){return c.f}),n.d(e,"hsl",function(){return c.d}),n.d(e,"lab",function(){return c.e}),n.d(e,"hcl",function(){return c.c}),n.d(e,"cubehelix",function(){return c.b});var l=n(291);n.d(e,"dispatch",function(){return l.a});var h=n(523);n.d(e,"drag",function(){return h.a}),n.d(e,"dragDisable",function(){return h.b}),n.d(e,"dragEnable",function(){return h.c});var f=n(539);n.d(e,"dsvFormat",function(){return f.e}),n.d(e,"csvParse",function(){return f.c}),n.d(e,"csvParseRows",function(){return f.d}),n.d(e,"csvFormat",function(){return f.a}),n.d(e,"csvFormatRows",function(){return f.b}),n.d(e,"tsvParse",function(){return f.h}),n.d(e,"tsvParseRows",function(){return f.i}),n.d(e,"tsvFormat",function(){return f.f}),n.d(e,"tsvFormatRows",function(){return f.g});var p=n(841);n.d(e,"easeLinear",function(){return p.y}),n.d(e,"easeQuad",function(){return p.D}),n.d(e,"easeQuadIn",function(){return p.E}),n.d(e,"easeQuadOut",function(){return p.G}),n.d(e,"easeQuadInOut",function(){return p.F}),n.d(e,"easeCubic",function(){return p.m}),n.d(e,"easeCubicIn",function(){return p.n}),n.d(e,"easeCubicOut",function(){return p.p}),n.d(e,"easeCubicInOut",function(){return p.o}),n.d(e,"easePoly",function(){return p.z}),n.d(e,"easePolyIn",function(){return p.A}),n.d(e,"easePolyOut",function(){return p.C}),n.d(e,"easePolyInOut",function(){return p.B}),n.d(e,"easeSin",function(){return p.H}),n.d(e,"easeSinIn",function(){return p.I}),n.d(e,"easeSinOut",function(){return p.K}),n.d(e,"easeSinInOut",function(){return p.J}),n.d(e,"easeExp",function(){return p.u}),n.d(e,"easeExpIn",function(){return p.v}),n.d(e,"easeExpOut",function(){return p.x}),n.d(e,"easeExpInOut",function(){return p.w}),n.d(e,"easeCircle",function(){return p.i}),n.d(e,"easeCircleIn",function(){return p.j}),n.d(e,"easeCircleOut",function(){return p.l}),n.d(e,"easeCircleInOut",function(){return p.k}),n.d(e,"easeBounce",function(){return p.e}),n.d(e,"easeBounceIn",function(){return p.f}),n.d(e,"easeBounceOut",function(){return p.h}),n.d(e,"easeBounceInOut",function(){return p.g}),n.d(e,"easeBack",function(){return p.a}),n.d(e,"easeBackIn",function(){return p.b}),n.d(e,"easeBackOut",function(){return p.d}),n.d(e,"easeBackInOut",function(){return p.c}),n.d(e,"easeElastic",function(){return p.q}),n.d(e,"easeElasticIn",function(){return p.r}),n.d(e,"easeElasticOut",function(){return p.t}),n.d(e,"easeElasticInOut",function(){return p.s});var d=n(2053);n.d(e,"forceCenter",function(){return d.a}),n.d(e,"forceCollide",function(){return d.b}),n.d(e,"forceLink",function(){return d.c}),n.d(e,"forceManyBody",function(){return d.d}),n.d(e,"forceRadial",function(){return d.e}),n.d(e,"forceSimulation",function(){return d.f}),n.d(e,"forceX",function(){return d.g}),n.d(e,"forceY",function(){return d.h});var y=n(544);n.d(e,"formatDefaultLocale",function(){return y.b}),n.d(e,"format",function(){return y.a}),n.d(e,"formatPrefix",function(){return y.d}),n.d(e,"formatLocale",function(){return y.c}),n.d(e,"formatSpecifier",function(){return y.e}),n.d(e,"precisionFixed",function(){return y.f}),n.d(e,"precisionPrefix",function(){return y.g}),n.d(e,"precisionRound",function(){return y.h});var _=n(2083);n.d(e,"geoArea",function(){return _.c}),n.d(e,"geoBounds",function(){return _.h}),n.d(e,"geoCentroid",function(){return _.i}),n.d(e,"geoCircle",function(){return _.j}),n.d(e,"geoClipAntimeridian",function(){return _.k}),n.d(e,"geoClipCircle",function(){return _.l}),n.d(e,"geoClipExtent",function(){return _.m}),n.d(e,"geoClipRectangle",function(){return _.n}),n.d(e,"geoContains",function(){return _.u}),n.d(e,"geoDistance",function(){return _.v}),n.d(e,"geoGraticule",function(){return _.A}),n.d(e,"geoGraticule10",function(){return _.B}),n.d(e,"geoInterpolate",function(){return _.D}),n.d(e,"geoLength",function(){return _.E}),n.d(e,"geoPath",function(){return _.L}),n.d(e,"geoAlbers",function(){return _.a}),n.d(e,"geoAlbersUsa",function(){return _.b}),n.d(e,"geoAzimuthalEqualArea",function(){return _.d}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return _.e}),n.d(e,"geoAzimuthalEquidistant",function(){return _.f}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return _.g}),n.d(e,"geoConicConformal",function(){return _.o}),n.d(e,"geoConicConformalRaw",function(){return _.p}),n.d(e,"geoConicEqualArea",function(){return _.q}),n.d(e,"geoConicEqualAreaRaw",function(){return _.r}),n.d(e,"geoConicEquidistant",function(){return _.s}),n.d(e,"geoConicEquidistantRaw",function(){return _.t}),n.d(e,"geoEquirectangular",function(){return _.w}),n.d(e,"geoEquirectangularRaw",function(){return _.x}),n.d(e,"geoGnomonic",function(){return _.y}),n.d(e,"geoGnomonicRaw",function(){return _.z}),n.d(e,"geoIdentity",function(){return _.C}),n.d(e,"geoProjection",function(){return _.M}),n.d(e,"geoProjectionMutator",function(){return _.N}),n.d(e,"geoMercator",function(){return _.F}),n.d(e,"geoMercatorRaw",function(){return _.G}),n.d(e,"geoNaturalEarth1",function(){return _.H}),n.d(e,"geoNaturalEarth1Raw",function(){return _.I}),n.d(e,"geoOrthographic",function(){return _.J}),n.d(e,"geoOrthographicRaw",function(){return _.K}),n.d(e,"geoStereographic",function(){return _.P}),n.d(e,"geoStereographicRaw",function(){return _.Q}),n.d(e,"geoTransverseMercator",function(){return _.T}),n.d(e,"geoTransverseMercatorRaw",function(){return _.U}),n.d(e,"geoRotation",function(){return _.O}),n.d(e,"geoStream",function(){return _.R}),n.d(e,"geoTransform",function(){return _.S});var v=n(2111);n.d(e,"cluster",function(){return v.a}),n.d(e,"hierarchy",function(){return v.b}),n.d(e,"pack",function(){return v.c}),n.d(e,"packSiblings",function(){return v.e}),n.d(e,"packEnclose",function(){return v.d}),n.d(e,"partition",function(){return v.f}),n.d(e,"stratify",function(){return v.g}),n.d(e,"tree",function(){return v.h}),n.d(e,"treemap",function(){return v.i}),n.d(e,"treemapBinary",function(){return v.j}),n.d(e,"treemapDice",function(){return v.k}),n.d(e,"treemapSlice",function(){return v.m}),n.d(e,"treemapSliceDice",function(){return v.n}),n.d(e,"treemapSquarify",function(){return v.o}),n.d(e,"treemapResquarify",function(){return v.l});var m=n(238);n.d(e,"interpolate",function(){return m.a}),n.d(e,"interpolateArray",function(){return m.b}),n.d(e,"interpolateBasis",function(){return m.c}),n.d(e,"interpolateBasisClosed",function(){return m.d}),n.d(e,"interpolateDate",function(){return m.g}),n.d(e,"interpolateNumber",function(){return m.m}),n.d(e,"interpolateObject",function(){return m.n}),n.d(e,"interpolateRound",function(){return m.r}),n.d(e,"interpolateString",function(){return m.s}),n.d(e,"interpolateTransformCss",function(){return m.t}),n.d(e,"interpolateTransformSvg",function(){return m.u}),n.d(e,"interpolateZoom",function(){return m.v}),n.d(e,"interpolateRgb",function(){return m.o}),n.d(e,"interpolateRgbBasis",function(){return m.p}),n.d(e,"interpolateRgbBasisClosed",function(){return m.q}),n.d(e,"interpolateHsl",function(){return m.j}),n.d(e,"interpolateHslLong",function(){return m.k}),n.d(e,"interpolateLab",function(){return m.l}),n.d(e,"interpolateHcl",function(){return m.h}),n.d(e,"interpolateHclLong",function(){return m.i}),n.d(e,"interpolateCubehelix",function(){return m.e}),n.d(e,"interpolateCubehelixLong",function(){return m.f}),n.d(e,"quantize",function(){return m.w});var g=n(292);n.d(e,"path",function(){return g.a});var b=n(2133);n.d(e,"polygonArea",function(){return b.a}),n.d(e,"polygonCentroid",function(){return b.b}),n.d(e,"polygonHull",function(){return b.d}),n.d(e,"polygonContains",function(){return b.c}),n.d(e,"polygonLength",function(){return b.e});var w=n(542);n.d(e,"quadtree",function(){return w.a});var O=n(2140);n.d(e,"queue",function(){return O.a});var x=n(2143);n.d(e,"randomUniform",function(){return x.f}),n.d(e,"randomNormal",function(){return x.e}),n.d(e,"randomLogNormal",function(){return x.d}),n.d(e,"randomBates",function(){return x.a}),n.d(e,"randomIrwinHall",function(){return x.c}),n.d(e,"randomExponential",function(){return x.b});var T=n(2148);n.d(e,"request",function(){return T.d}),n.d(e,"html",function(){return T.b}),n.d(e,"json",function(){return T.c}),n.d(e,"text",function(){return T.e}),n.d(e,"xml",function(){return T.g}),n.d(e,"csv",function(){return T.a}),n.d(e,"tsv",function(){return T.f});var S=n(2155);n.d(e,"scaleBand",function(){return S.i}),n.d(e,"scalePoint",function(){return S.o}),n.d(e,"scaleIdentity",function(){return S.j}),n.d(e,"scaleLinear",function(){return S.l}),n.d(e,"scaleLog",function(){return S.m}),n.d(e,"scaleOrdinal",function(){return S.n}),n.d(e,"scaleImplicit",function(){return S.k}),n.d(e,"scalePow",function(){return S.p}),n.d(e,"scaleSqrt",function(){return S.t}),n.d(e,"scaleQuantile",function(){return S.q}),n.d(e,"scaleQuantize",function(){return S.r}),n.d(e,"scaleThreshold",function(){return S.u}),n.d(e,"scaleTime",function(){return S.v}),n.d(e,"scaleUtc",function(){return S.w}),n.d(e,"schemeCategory10",function(){return S.x}),n.d(e,"schemeCategory20b",function(){return S.z}),n.d(e,"schemeCategory20c",function(){return S.A}),n.d(e,"schemeCategory20",function(){return S.y}),n.d(e,"interpolateCubehelixDefault",function(){return S.b}),n.d(e,"interpolateRainbow",function(){return S.f}),n.d(e,"interpolateWarm",function(){return S.h}),n.d(e,"interpolateCool",function(){return S.a}),n.d(e,"interpolateViridis",function(){return S.g}),n.d(e,"interpolateMagma",function(){return S.d}),n.d(e,"interpolateInferno",function(){return S.c}),n.d(e,"interpolatePlasma",function(){return S.e}),n.d(e,"scaleSequential",function(){return S.s});var j=n(125);n.d(e,"creator",function(){return j.a}),n.d(e,"local",function(){return j.d}),n.d(e,"matcher",function(){return j.e}),n.d(e,"mouse",function(){return j.f}),n.d(e,"namespace",function(){return j.g}),n.d(e,"namespaces",function(){return j.h}),n.d(e,"select",function(){return j.i}),n.d(e,"selectAll",function(){return j.j}),n.d(e,"selection",function(){return j.k}),n.d(e,"selector",function(){return j.l}),n.d(e,"selectorAll",function(){return j.m}),n.d(e,"style",function(){return j.n}),n.d(e,"touch",function(){return j.o}),n.d(e,"touches",function(){return j.p}),n.d(e,"window",function(){return j.q}),n.d(e,"event",function(){return j.c}),n.d(e,"customEvent",function(){return j.b});var k=n(2188);n.d(e,"arc",function(){return k.a}),n.d(e,"area",function(){return k.b}),n.d(e,"line",function(){return k.v}),n.d(e,"pie",function(){return k.A}),n.d(e,"areaRadial",function(){return k.c}),n.d(e,"radialArea",function(){return k.C}),n.d(e,"lineRadial",function(){return k.w}),n.d(e,"radialLine",function(){return k.D}),n.d(e,"pointRadial",function(){return k.B}),n.d(e,"linkHorizontal",function(){return k.x}),n.d(e,"linkVertical",function(){return k.z}),n.d(e,"linkRadial",function(){return k.y}),n.d(e,"symbol",function(){return k.P}),n.d(e,"symbols",function(){return k.X}),n.d(e,"symbolCircle",function(){return k.Q}),n.d(e,"symbolCross",function(){return k.R}),n.d(e,"symbolDiamond",function(){return k.S}),n.d(e,"symbolSquare",function(){return k.T}),n.d(e,"symbolStar",function(){return k.U}),n.d(e,"symbolTriangle",function(){return k.V}),n.d(e,"symbolWye",function(){return k.W}),n.d(e,"curveBasisClosed",function(){return k.e}),n.d(e,"curveBasisOpen",function(){return k.f}),n.d(e,"curveBasis",function(){return k.d}),n.d(e,"curveBundle",function(){return k.g}),n.d(e,"curveCardinalClosed",function(){return k.i}),n.d(e,"curveCardinalOpen",function(){return k.j}),n.d(e,"curveCardinal",function(){return k.h}),n.d(e,"curveCatmullRomClosed",function(){return k.l}),n.d(e,"curveCatmullRomOpen",function(){return k.m}),n.d(e,"curveCatmullRom",function(){return k.k}),n.d(e,"curveLinearClosed",function(){return k.o}),n.d(e,"curveLinear",function(){return k.n}),n.d(e,"curveMonotoneX",function(){return k.p}),n.d(e,"curveMonotoneY",function(){return k.q}),n.d(e,"curveNatural",function(){return k.r}),n.d(e,"curveStep",function(){return k.s}),n.d(e,"curveStepAfter",function(){return k.t}),n.d(e,"curveStepBefore",function(){return k.u}),n.d(e,"stack",function(){return k.E}),n.d(e,"stackOffsetExpand",function(){return k.G}),n.d(e,"stackOffsetDiverging",function(){return k.F}),n.d(e,"stackOffsetNone",function(){return k.H}),n.d(e,"stackOffsetSilhouette",function(){return k.I}),n.d(e,"stackOffsetWiggle",function(){return k.J}),n.d(e,"stackOrderAscending",function(){return k.K}),n.d(e,"stackOrderDescending",function(){return k.L}),n.d(e,"stackOrderInsideOut",function(){return k.M}),n.d(e,"stackOrderNone",function(){return k.N}),n.d(e,"stackOrderReverse",function(){return k.O});var M=n(413);n.d(e,"timeInterval",function(){return M.g}),n.d(e,"timeMillisecond",function(){return M.h}),n.d(e,"timeMilliseconds",function(){return M.i}),n.d(e,"utcMillisecond",function(){return M.L}),n.d(e,"utcMilliseconds",function(){return M.M}),n.d(e,"timeSecond",function(){return M.r}),n.d(e,"timeSeconds",function(){return M.s}),n.d(e,"utcSecond",function(){return M.V}),n.d(e,"utcSeconds",function(){return M.W}),n.d(e,"timeMinute",function(){return M.j}),n.d(e,"timeMinutes",function(){return M.k}),n.d(e,"timeHour",function(){return M.e}),n.d(e,"timeHours",function(){return M.f}),n.d(e,"timeDay",function(){return M.a}),n.d(e,"timeDays",function(){return M.b}),n.d(e,"timeWeek",function(){return M.B}),n.d(e,"timeWeeks",function(){return M.C}),n.d(e,"timeSunday",function(){return M.t}),n.d(e,"timeSundays",function(){return M.u}),n.d(e,"timeMonday",function(){return M.l}),n.d(e,"timeMondays",function(){return M.m}),n.d(e,"timeTuesday",function(){return M.x}),n.d(e,"timeTuesdays",function(){return M.y}),n.d(e,"timeWednesday",function(){return M.z}),n.d(e,"timeWednesdays",function(){return M.A}),n.d(e,"timeThursday",function(){return M.v}),n.d(e,"timeThursdays",function(){return M.w}),n.d(e,"timeFriday",function(){return M.c}),n.d(e,"timeFridays",function(){return M.d}),n.d(e,"timeSaturday",function(){return M.p}),n.d(e,"timeSaturdays",function(){return M.q}),n.d(e,"timeMonth",function(){return M.n}),n.d(e,"timeMonths",function(){return M.o}),n.d(e,"timeYear",function(){return M.D}),n.d(e,"timeYears",function(){return M.E}),n.d(e,"utcMinute",function(){return M.N}),n.d(e,"utcMinutes",function(){return M.O}),n.d(e,"utcHour",function(){return M.J}),n.d(e,"utcHours",function(){return M.K}),n.d(e,"utcDay",function(){return M.F}),n.d(e,"utcDays",function(){return M.G}),n.d(e,"utcWeek",function(){return M._5}),n.d(e,"utcWeeks",function(){return M._6}),n.d(e,"utcSunday",function(){return M.X}),n.d(e,"utcSundays",function(){return M.Y}),n.d(e,"utcMonday",function(){return M.P}),n.d(e,"utcMondays",function(){return M.Q}),n.d(e,"utcTuesday",function(){return M._1}),n.d(e,"utcTuesdays",function(){return M._2}),n.d(e,"utcWednesday",function(){return M._3}),n.d(e,"utcWednesdays",function(){return M._4}),n.d(e,"utcThursday",function(){return M.Z}),n.d(e,"utcThursdays",function(){return M._0}),n.d(e,"utcFriday",function(){return M.H}),n.d(e,"utcFridays",function(){return M.I}),n.d(e,"utcSaturday",function(){return M.T}),n.d(e,"utcSaturdays",function(){return M.U}),n.d(e,"utcMonth",function(){return M.R}),n.d(e,"utcMonths",function(){return M.S}),n.d(e,"utcYear",function(){return M._7}),n.d(e,"utcYears",function(){return M._8});var A=n(556);n.d(e,"timeFormatDefaultLocale",function(){return A.d}),n.d(e,"timeFormat",function(){return A.c}),n.d(e,"timeParse",function(){return A.f}),n.d(e,"utcFormat",function(){return A.g}),n.d(e,"utcParse",function(){return A.h}),n.d(e,"timeFormatLocale",function(){return A.e}),n.d(e,"isoFormat",function(){return A.a}),n.d(e,"isoParse",function(){return A.b});var P=n(404);n.d(e,"now",function(){return P.b}),n.d(e,"timer",function(){return P.d}),n.d(e,"timerFlush",function(){return P.e}),n.d(e,"timeout",function(){return P.c}),n.d(e,"interval",function(){return P.a});var E=n(536);n.d(e,"transition",function(){return E.c}),n.d(e,"active",function(){return E.a}),n.d(e,"interrupt",function(){return E.b});var N=n(2213);n.d(e,"voronoi",function(){return N.a});var C=n(2218);n.d(e,"zoom",function(){return C.a}),n.d(e,"zoomTransform",function(){return C.c}),n.d(e,"zoomIdentity",function(){return C.b})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i="4.11.0"},function(t,e,n){"use strict";var i=n(814);e.a=function(t,e,n){var r,o,s,a,u=t.length,c=e.length,l=new Array(u*c);for(null==n&&(n=i.b),r=s=0;r<u;++r)for(a=t[r],o=0;o<c;++o,++s)l[s]=n(a,e[o]);return l}},function(t,e,n){"use strict";e.a=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";var i=n(818),r=n(812),o=n(1937),s=n(817),a=n(1938),u=n(819),c=n(820),l=n(821);e.a=function(){function t(t){var i,o,s=t.length,a=new Array(s);for(i=0;i<s;++i)a[i]=e(t[i],i,t);var l=n(a),f=l[0],p=l[1],d=h(a,f,p);Array.isArray(d)||(d=Object(c.c)(f,p,d),d=Object(u.a)(Math.ceil(f/d)*d,Math.floor(p/d)*d,d));for(var y=d.length;d[0]<=f;)d.shift(),--y;for(;d[y-1]>p;)d.pop(),--y;var _,v=new Array(y+1);for(i=0;i<=y;++i)_=v[i]=[],_.x0=i>0?d[i-1]:f,_.x1=i<y?d[i]:p;for(i=0;i<s;++i)o=a[i],f<=o&&o<=p&&v[Object(r.c)(d,o,0,y)].push(t[i]);return v}var e=a.a,n=s.a,h=l.a;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Object(o.a)(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:Object(o.a)([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(h="function"==typeof e?e:Array.isArray(e)?Object(o.a)(i.b.call(e)):Object(o.a)(e),t):h},t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var i=n(818),r=n(308),o=n(349),s=n(522);e.a=function(t,e,n){return t=i.a.call(t,o.a).sort(r.a),Math.ceil((n-e)/(2*(Object(s.a)(t,.75)-Object(s.a)(t,.25))*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";var i=n(815);e.a=function(t,e,n){return Math.ceil((n-e)/(3.5*Object(i.a)(t)*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";e.a=function(t,e){var n,i,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(n=t[o])&&n>=n)for(i=n;++o<r;)null!=(n=t[o])&&n>i&&(i=n)}else for(;++o<r;)if(null!=(n=e(t[o],o,t))&&n>=n)for(i=n;++o<r;)null!=(n=e(t[o],o,t))&&n>i&&(i=n);return i}},function(t,e,n){"use strict";var i=n(349);e.a=function(t,e){var n,r=t.length,o=r,s=-1,a=0;if(null==e)for(;++s<r;)isNaN(n=Object(i.a)(t[s]))?--o:a+=n;else for(;++s<r;)isNaN(n=Object(i.a)(e(t[s],s,t)))?--o:a+=n;if(o)return a/o}},function(t,e,n){"use strict";var i=n(308),r=n(349),o=n(522);e.a=function(t,e){var n,s=t.length,a=-1,u=[];if(null==e)for(;++a<s;)isNaN(n=Object(r.a)(t[a]))||u.push(n);else for(;++a<s;)isNaN(n=Object(r.a)(e(t[a],a,t)))||u.push(n);return Object(o.a)(u.sort(i.a),.5)}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,i,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(n=new Array(s);--r>=0;)for(i=t[r],e=i.length;--e>=0;)n[--s]=i[e];return n}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i}},function(t,e,n){"use strict";var i=n(308);e.a=function(t,e){if(n=t.length){var n,r,o=0,s=0,a=t[s];for(null==e&&(e=i.a);++o<n;)(e(r=t[o],a)<0||0!==e(a,a))&&(a=r,s=o);return 0===e(a,a)?s:void 0}}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var i,r,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)r=Math.random()*o--|0,i=t[o+e],t[o+e]=t[r+e],t[r+e]=i;return t}},function(t,e,n){"use strict";e.a=function(t,e){var n,i=t.length,r=-1,o=0;if(null==e)for(;++r<i;)(n=+t[r])&&(o+=n);else for(;++r<i;)(n=+e(t[r],r,t))&&(o+=n);return o}},function(t,e,n){"use strict";var i=n(823);e.a=function(){return Object(i.a)(arguments)}},function(t,e,n){"use strict";var i=n(1951);n.d(e,"d",function(){return i.d}),n.d(e,"c",function(){return i.c}),n.d(e,"a",function(){return i.a}),n.d(e,"b",function(){return i.b})},function(t,e,n){"use strict";function i(t){return"translate("+(t+.5)+",0)"}function r(t){return"translate(0,"+(t+.5)+")"}function o(t){return function(e){return+t(e)}}function s(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function a(){return!this.__axis}function u(t,e){function n(n){var i=null==c?e.ticks?e.ticks.apply(e,u):e.domain():c,r=null==l?e.tickFormat?e.tickFormat.apply(e,u):d.a:l,p=Math.max(h,0)+b,T=e.range(),S=+T[0]+.5,j=+T[T.length-1]+.5,k=(e.bandwidth?s:o)(e.copy()),M=n.selection?n.selection():n,A=M.selectAll(".domain").data([null]),P=M.selectAll(".tick").data(i,e).order(),E=P.exit(),N=P.enter().append("g").attr("class","tick"),C=P.select("line"),q=P.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),P=P.merge(N),C=C.merge(N.append("line").attr("stroke","#000").attr(O+"2",w*h)),q=q.merge(N.append("text").attr("fill","#000").attr(O,w*p).attr("dy",t===y?"0em":t===v?"0.71em":"0.32em")),n!==M&&(A=A.transition(n),P=P.transition(n),C=C.transition(n),q=q.transition(n),E=E.transition(n).attr("opacity",g).attr("transform",function(t){return isFinite(t=k(t))?x(t):this.getAttribute("transform")}),N.attr("opacity",g).attr("transform",function(t){var e=this.parentNode.__axis;return x(e&&isFinite(e=e(t))?e:k(t))})),E.remove(),A.attr("d",t===m||t==_?"M"+w*f+","+S+"H0.5V"+j+"H"+w*f:"M"+S+","+w*f+"V0.5H"+j+"V"+w*f),P.attr("opacity",1).attr("transform",function(t){return x(k(t))}),C.attr(O+"2",w*h),q.attr(O,w*p).text(r),M.filter(a).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===_?"start":t===m?"end":"middle"),M.each(function(){this.__axis=k})}var u=[],c=null,l=null,h=6,f=6,b=3,w=t===y||t===m?-1:1,O=t===m||t===_?"x":"y",x=t===y||t===v?i:r;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return u=p.a.call(arguments),n},n.tickArguments=function(t){return arguments.length?(u=null==t?[]:p.a.call(t),n):u.slice()},n.tickValues=function(t){return arguments.length?(c=null==t?null:p.a.call(t),n):c&&c.slice()},n.tickFormat=function(t){return arguments.length?(l=t,n):l},n.tickSize=function(t){return arguments.length?(h=f=+t,n):h},n.tickSizeInner=function(t){return arguments.length?(h=+t,n):h},n.tickSizeOuter=function(t){return arguments.length?(f=+t,n):f},n.tickPadding=function(t){return arguments.length?(b=+t,n):b},n}function c(t){return u(y,t)}function l(t){return u(_,t)}function h(t){return u(v,t)}function f(t){return u(m,t)}e.d=c,e.c=l,e.a=h,e.b=f;var p=n(1952),d=n(1953),y=1,_=2,v=3,m=4,g=1e-6},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=Array.prototype.slice},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var i=n(1955);n.d(e,"a",function(){return i.d}),n.d(e,"c",function(){return i.b}),n.d(e,"d",function(){return i.c}),n.d(e,"b",function(){return i.a})},function(t,e,n){"use strict";function i(t){return{type:t}}function r(){return!y.c.button}function o(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function s(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function a(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function u(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function c(){return h(T)}function l(){return h(S)}function h(t){function e(e){var r=e.property("__brush",h).selectAll(".overlay").data([i("overlay")]);r.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",k.overlay).merge(r).each(function(){var t=s(this).extent;Object(y.i)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([i("selection")]).enter().append("rect").attr("class","selection").attr("cursor",k.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var o=e.selectAll(".handle").data(t.handles,function(t){return t.type});o.exit().remove(),o.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return k[t.type]}),e.each(n).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}function n(){var t=Object(y.i)(this),e=s(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-F/2:e[0][0]-F/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-F/2:e[0][1]-F/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+F:F}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+F:F})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(t,e){return t.__brush.emitter||new c(t,e)}function c(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function l(){function e(){var t=Object(y.f)(D);!J||L||I||(Math.abs(t[0]-tt[0])>Math.abs(t[1]-tt[1])?I=!0:L=!0),tt=t,B=!0,Object(g.a)(),i()}function i(){var t;switch(F=tt[0]-K[0],R=tt[1]-K[1],z){case w:case b:V&&(F=Math.max(Q-l,Math.min(Z-v,F)),h=l+F,m=v+F),G&&(R=Math.max(X-f,Math.min($-N,R)),d=f+R,q=N+R);break;case O:V<0?(F=Math.max(Q-l,Math.min(Z-l,F)),h=l+F,m=v):V>0&&(F=Math.max(Q-v,Math.min(Z-v,F)),h=l,m=v+F),G<0?(R=Math.max(X-f,Math.min($-f,R)),d=f+R,q=N):G>0&&(R=Math.max(X-N,Math.min($-N,R)),d=f,q=N+R);break;case x:V&&(h=Math.max(Q,Math.min(Z,l-F*V)),m=Math.max(Q,Math.min(Z,v+F*V))),G&&(d=Math.max(X,Math.min($,f-R*G)),q=Math.max(X,Math.min($,N+R*G)))}m<h&&(V*=-1,t=l,l=v,v=t,t=h,h=m,m=t,U in M&&it.attr("cursor",k[U=M[U]])),q<d&&(G*=-1,t=f,f=N,N=t,t=d,d=q,q=t,U in A&&it.attr("cursor",k[U=A[U]])),W.selection&&(Y=W.selection),L&&(h=Y[0][0],m=Y[1][0]),I&&(d=Y[0][1],q=Y[1][1]),Y[0][0]===h&&Y[0][1]===d&&Y[1][0]===m&&Y[1][1]===q||(W.selection=[[h,d],[m,q]],n.call(D),et.brush())}function r(){if(Object(g.b)(),y.c.touches){if(y.c.touches.length)return;j&&clearTimeout(j),j=setTimeout(function(){j=null},500),nt.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Object(p.c)(y.c.view,B),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);nt.attr("pointer-events","all"),it.attr("cursor",k.overlay),W.selection&&(Y=W.selection),a(Y)&&(W.selection=null,n.call(D)),et.end()}function o(){switch(y.c.keyCode){case 16:J=V&&G;break;case 18:z===O&&(V&&(v=m-F*V,l=h+F*V),G&&(N=q-R*G,f=d+R*G),z=x,i());break;case 32:z!==O&&z!==x||(V<0?v=m-F:V>0&&(l=h-F),G<0?N=q-R:G>0&&(f=d-R),z=w,it.attr("cursor",k.selection),i());break;default:return}Object(g.a)()}function c(){switch(y.c.keyCode){case 16:J&&(L=I=J=!1,i());break;case 18:z===x&&(V<0?v=m:V>0&&(l=h),G<0?N=q:G>0&&(f=d),z=O,i());break;case 32:z===w&&(y.c.altKey?(V&&(v=m-F*V,l=h+F*V),G&&(N=q-R*G,f=d+R*G),z=x):(V<0?v=m:V>0&&(l=h),G<0?N=q:G>0&&(f=d),z=O),it.attr("cursor",k[U]),i());break;default:return}Object(g.a)()}if(y.c.touches){if(y.c.changedTouches.length<y.c.touches.length)return Object(g.a)()}else if(j)return;if(C.apply(this,arguments)){var l,h,f,d,v,m,N,q,F,R,B,L,I,D=this,U=y.c.target.__data__.type,z="selection"===(y.c.metaKey?U="overlay":U)?b:y.c.altKey?x:O,V=t===S?null:P[U],G=t===T?null:E[U],W=s(D),H=W.extent,Y=W.selection,Q=H[0][0],X=H[0][1],Z=H[1][0],$=H[1][1],J=V&&G&&y.c.shiftKey,K=Object(y.f)(D),tt=K,et=u(D,arguments).beforestart();"overlay"===U?W.selection=Y=[[l=t===S?Q:K[0],f=t===T?X:K[1]],[v=t===S?Z:l,N=t===T?$:f]]:(l=Y[0][0],f=Y[0][1],v=Y[1][0],N=Y[1][1]),h=l,d=f,m=v,q=N;var nt=Object(y.i)(D).attr("pointer-events","none"),it=nt.selectAll(".overlay").attr("cursor",k[U]);if(y.c.touches)nt.on("touchmove.brush",e,!0).on("touchend.brush touchcancel.brush",r,!0);else{var rt=Object(y.i)(y.c.view).on("keydown.brush",o,!0).on("keyup.brush",c,!0).on("mousemove.brush",e,!0).on("mouseup.brush",r,!0);Object(p.b)(y.c.view)}Object(g.b)(),Object(_.b)(D),n.call(D),et.start()}}function h(){var e=this.__brush||{selection:null};return e.extent=N.apply(this,arguments),e.dim=t,e}var j,N=o,C=r,q=Object(f.a)(e,"start","brush","end"),F=6;return e.move=function(e,i){e.selection?e.on("start.brush",function(){u(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){u(this,arguments).end()}).tween("brush",function(){function e(t){o.selection=1===t&&a(l)?null:h(t),n.call(r),s.brush()}var r=this,o=r.__brush,s=u(r,arguments),c=o.selection,l=t.input("function"==typeof i?i.apply(this,arguments):i,o.extent),h=Object(d.a)(c,l);return c&&l?e:e(1)}):e.each(function(){var e=this,r=arguments,o=e.__brush,s=t.input("function"==typeof i?i.apply(e,r):i,o.extent),c=u(e,r).beforestart();Object(_.b)(e),o.selection=null==s||a(s)?null:s,n.call(e),c.start().brush().end()})},c.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(n){Object(y.b)(new m.a(e,n,t.output(this.state.selection)),q.apply,q,[n,this.that,this.args])}},e.extent=function(t){return arguments.length?(N="function"==typeof t?t:Object(v.a)([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):N},e.filter=function(t){return arguments.length?(C="function"==typeof t?t:Object(v.a)(!!t),e):C},e.handleSize=function(t){return arguments.length?(F=+t,e):F},e.on=function(){var t=q.on.apply(q,arguments);return t===q?e:t},e}e.a=u,e.b=c,e.c=l;var f=n(291),p=n(523),d=n(238),y=n(125),_=n(536),v=n(2037),m=n(2038),g=n(2039),b={name:"drag"},w={name:"space"},O={name:"handle"},x={name:"center"},T={name:"x",handles:["e","w"].map(i),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},S={name:"y",handles:["n","s"].map(i),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},j={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(i),input:function(t){return t},output:function(t){return t}},k={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},M={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},A={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},P={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},E={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};e.d=function(){return h(j)}},function(t,e,n){"use strict";function i(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i)throw new Error("illegal type: "+t);i[t]=[]}return new r(i)}function r(t){this._=t}function o(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function s(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function a(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=u,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}var u={value:function(){}};r.prototype=i.prototype={constructor:r,on:function(t,e){var n,i=this._,r=o(t+"",i),u=-1,c=r.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<c;)if(n=(t=r[u]).type)i[n]=a(i[n],t.name,e);else if(null==e)for(n in i)i[n]=a(i[n],t.name,null);return this}for(;++u<c;)if((n=(t=r[u]).type)&&(n=s(i[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new r(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,n=i.length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}},e.a=i},function(t,e,n){"use strict";function i(){return!u.c.button}function r(){return this.parentNode}function o(t){return null==t?{x:u.c.x,y:u.c.y}:t}function s(){return"ontouchstart"in this}var a=n(291),u=n(125),c=n(829),l=n(830),h=n(1991),f=n(1992);e.a=function(){function t(t){t.on("mousedown.drag",e).filter(S).on("touchstart.drag",d).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(){if(!w&&O.apply(this,arguments)){var t=v("mouse",x.apply(this,arguments),u.f,this,arguments);t&&(Object(u.i)(u.c.view).on("mousemove.drag",n,!0).on("mouseup.drag",p,!0),Object(c.a)(u.c.view),Object(l.b)(),b=!1,m=u.c.clientX,g=u.c.clientY,t("start"))}}function n(){if(Object(l.a)(),!b){var t=u.c.clientX-m,e=u.c.clientY-g;b=t*t+e*e>A}j.mouse("drag")}function p(){Object(u.i)(u.c.view).on("mousemove.drag mouseup.drag",null),Object(c.b)(u.c.view,b),Object(l.a)(),j.mouse("end")}function d(){if(O.apply(this,arguments)){var t,e,n=u.c.changedTouches,i=x.apply(this,arguments),r=n.length;for(t=0;t<r;++t)(e=v(n[t].identifier,i,u.o,this,arguments))&&(Object(l.b)(),e("start"))}}function y(){var t,e,n=u.c.changedTouches,i=n.length;for(t=0;t<i;++t)(e=j[n[t].identifier])&&(Object(l.a)(),e("drag"))}function _(){var t,e,n=u.c.changedTouches,i=n.length;for(w&&clearTimeout(w),w=setTimeout(function(){w=null},500),t=0;t<i;++t)(e=j[n[t].identifier])&&(Object(l.b)(),e("end"))}function v(e,n,i,r,o){var s,a,c,l=i(n,e),h=k.copy();if(Object(u.b)(new f.a(t,"beforestart",s,e,M,l[0],l[1],0,0,h),function(){return null!=(u.c.subject=s=T.apply(r,o))&&(a=s.x-l[0]||0,c=s.y-l[1]||0,!0)}))return function p(d){var y,_=l;switch(d){case"start":j[e]=p,y=M++;break;case"end":delete j[e],--M;case"drag":l=i(n,e),y=M}Object(u.b)(new f.a(t,d,s,e,y,l[0]+a,l[1]+c,l[0]-_[0],l[1]-_[1],h),h.apply,h,[d,r,o])}}var m,g,b,w,O=i,x=r,T=o,S=s,j={},k=Object(a.a)("start","drag","end"),M=0,A=0;return t.filter=function(e){return arguments.length?(O="function"==typeof e?e:Object(h.a)(!!e),t):O},t.container=function(e){return arguments.length?(x="function"==typeof e?e:Object(h.a)(e),t):x},t.subject=function(e){return arguments.length?(T="function"==typeof e?e:Object(h.a)(e),t):T},t.touchable=function(e){return arguments.length?(S="function"==typeof e?e:Object(h.a)(!!e),t):S},t.on=function(){var e=k.on.apply(k,arguments);return e===k?t:e},t.clickDistance=function(e){return arguments.length?(A=(e=+e)*e,t):Math.sqrt(A)},t}},function(t,e,n){"use strict";function i(){return new r}function r(){this._="@"+(++o).toString(36)}e.a=i;var o=0;r.prototype=i.prototype={constructor:r,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},function(t,e,n){"use strict";var i=n(527),r=n(529);e.a=function(t){var e=Object(i.a)();return e.changedTouches&&(e=e.changedTouches[0]),Object(r.a)(t,e)}},function(t,e,n){"use strict";var i=n(237);e.a=function(t){return"string"==typeof t?new i.a([[document.querySelector(t)]],[document.documentElement]):new i.a([[t]],i.c)}},function(t,e,n){"use strict";var i=n(237),r=n(530);e.a=function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var e=this._groups,n=e.length,o=new Array(n),s=0;s<n;++s)for(var a,u,c=e[s],l=c.length,h=o[s]=new Array(l),f=0;f<l;++f)(a=c[f])&&(u=t.call(a,a.__data__,f,c))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u);return new i.a(o,this._parents)}},function(t,e,n){"use strict";var i=n(237),r=n(825);e.a=function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var e=this._groups,n=e.length,o=[],s=[],a=0;a<n;++a)for(var u,c=e[a],l=c.length,h=0;h<l;++h)(u=c[h])&&(o.push(t.call(u,u.__data__,h,c)),s.push(u));return new i.a(o,s)}},function(t,e,n){"use strict";var i=n(237),r=n(824);e.a=function(t){"function"!=typeof t&&(t=Object(r.a)(t));for(var e=this._groups,n=e.length,o=new Array(n),s=0;s<n;++s)for(var a,u=e[s],c=u.length,l=o[s]=[],h=0;h<c;++h)(a=u[h])&&t.call(a,a.__data__,h,u)&&l.push(a);return new i.a(o,this._parents)}},function(t,e,n){"use strict";function i(t,e,n,i,r,o){for(var a,u=0,c=e.length,l=o.length;u<l;++u)(a=e[u])?(a.__data__=o[u],i[u]=a):n[u]=new s.a(t,o[u]);for(;u<c;++u)(a=e[u])&&(r[u]=a)}function r(t,e,n,i,r,o,a){var c,l,h,f={},p=e.length,d=o.length,y=new Array(p);for(c=0;c<p;++c)(l=e[c])&&(y[c]=h=u+a.call(l,l.__data__,c,e),h in f?r[c]=l:f[h]=l);for(c=0;c<d;++c)h=u+a.call(t,o[c],c,o),(l=f[h])?(i[c]=l,l.__data__=o[c],f[h]=null):n[c]=new s.a(t,o[c]);for(c=0;c<p;++c)(l=e[c])&&f[y[c]]===l&&(r[c]=l)}var o=n(237),s=n(826),a=n(1965),u="$";e.a=function(t,e){if(!t)return v=new Array(this.size()),p=-1,this.each(function(t){v[++p]=t}),v;var n=e?r:i,s=this._parents,u=this._groups;"function"!=typeof t&&(t=Object(a.a)(t));for(var c=u.length,l=new Array(c),h=new Array(c),f=new Array(c),p=0;p<c;++p){var d=s[p],y=u[p],_=y.length,v=t.call(d,d&&d.__data__,p,s),m=v.length,g=h[p]=new Array(m),b=l[p]=new Array(m);n(d,y,g,b,f[p]=new Array(_),v,e);for(var w,O,x=0,T=0;x<m;++x)if(w=g[x]){for(x>=T&&(T=x+1);!(O=b[T])&&++T<m;);w._next=O||null}}return l=new o.a(l,s),l._enter=h,l._exit=f,l}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(827),r=n(237);e.a=function(){return new r.a(this._exit||this._groups.map(i.a),this._parents)}},function(t,e,n){"use strict";var i=n(237);e.a=function(t){for(var e=this._groups,n=t._groups,r=e.length,o=n.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var c,l=e[u],h=n[u],f=l.length,p=a[u]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;u<r;++u)a[u]=e[u];return new i.a(a,this._parents)}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,s=r[o];--o>=0;)(i=r[o])&&(s&&s!==i.nextSibling&&s.parentNode.insertBefore(i,s),s=i);return this}},function(t,e,n){"use strict";function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var r=n(237);e.a=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=i);for(var n=this._groups,o=n.length,s=new Array(o),a=0;a<o;++a){for(var u,c=n[a],l=c.length,h=s[a]=new Array(l),f=0;f<l;++f)(u=c[f])&&(h[f]=u);h.sort(e)}return new r.a(s,this._parents).order()}},function(t,e,n){"use strict";e.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(t,e,n){"use strict";e.a=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var s=i[r];if(s)return s}return null}},function(t,e,n){"use strict";e.a=function(){var t=0;return this.each(function(){++t}),t}},function(t,e,n){"use strict";e.a=function(){return!this.node()}},function(t,e,n){"use strict";e.a=function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],s=0,a=o.length;s<a;++s)(r=o[s])&&t.call(r,r.__data__,s,o);return this}},function(t,e,n){"use strict";function i(t){return function(){this.removeAttribute(t)}}function r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o(t,e){return function(){this.setAttribute(t,e)}}function s(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function a(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function u(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var c=n(525);e.a=function(t,e){var n=Object(c.a)(t);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((null==e?n.local?r:i:"function"==typeof e?n.local?u:a:n.local?s:o)(n,e))}},function(t,e,n){"use strict";function i(t){return function(){delete this[t]}}function r(t,e){return function(){this[t]=e}}function o(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}e.a=function(t,e){return arguments.length>1?this.each((null==e?i:"function"==typeof e?o:r)(t,e)):this.node()[t]}},function(t,e,n){"use strict";function i(t){return t.trim().split(/^|\s+/)}function r(t){return t.classList||new o(t)}function o(t){this._node=t,this._names=i(t.getAttribute("class")||"")}function s(t,e){for(var n=r(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function a(t,e){for(var n=r(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function u(t){return function(){s(this,t)}}function c(t){return function(){a(this,t)}}function l(t,e){return function(){(e.apply(this,arguments)?s:a)(this,t)}}o.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}},e.a=function(t,e){var n=i(t+"");if(arguments.length<2){for(var o=r(this.node()),s=-1,a=n.length;++s<a;)if(!o.contains(n[s]))return!1;return!0}return this.each(("function"==typeof e?l:e?u:c)(n,e))}},function(t,e,n){"use strict";function i(){this.textContent=""}function r(t){return function(){this.textContent=t}}function o(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}e.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?o:r)(t)):this.node().textContent}},function(t,e,n){"use strict";function i(){this.innerHTML=""}function r(t){return function(){this.innerHTML=t}}function o(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}e.a=function(t){return arguments.length?this.each(null==t?i:("function"==typeof t?o:r)(t)):this.node().innerHTML}},function(t,e,n){"use strict";function i(){this.nextSibling&&this.parentNode.appendChild(this)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";function i(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";var i=n(524);e.a=function(t){var e="function"==typeof t?t:Object(i.a)(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}},function(t,e,n){"use strict";function i(){return null}var r=n(524),o=n(530);e.a=function(t,e){var n="function"==typeof t?t:Object(r.a)(t),s=null==e?i:"function"==typeof e?e:Object(o.a)(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}},function(t,e,n){"use strict";function i(){var t=this.parentNode;t&&t.removeChild(this)}e.a=function(){return this.each(i)}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(t,e,n){"use strict";function i(t,e,n){var i=Object(s.a)(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function r(t,e){return function(){return i(this,t,e)}}function o(t,e){return function(){return i(this,t,e.apply(this,arguments))}}var s=n(531);e.a=function(t,e){return this.each(("function"==typeof e?o:r)(t,e))}},function(t,e,n){"use strict";var i=n(237);e.a=function(t){return"string"==typeof t?new i.a([document.querySelectorAll(t)],[document.documentElement]):new i.a([null==t?[]:t],i.c)}},function(t,e,n){"use strict";var i=n(527),r=n(529);e.a=function(t,e,n){arguments.length<3&&(n=e,e=Object(i.a)().changedTouches);for(var o,s=0,a=e?e.length:0;s<a;++s)if((o=e[s]).identifier===n)return Object(r.a)(t,o);return null}},function(t,e,n){"use strict";var i=n(527),r=n(529);e.a=function(t,e){null==e&&(e=Object(i.a)().touches);for(var n=0,o=e?e.length:0,s=new Array(o);n<o;++n)s[n]=Object(r.a)(t,e[n]);return s}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(t,e,n,i,r,o,s,a,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=o,this.y=s,this.dx=a,this.dy=u,this._=c}e.a=i,i.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t}},function(t,e,n){"use strict";function i(t){if(t instanceof o)return new o(t.l,t.a,t.b,t.opacity);if(t instanceof f){var e=t.h*y.a;return new o(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof d.b||(t=Object(d.h)(t));var n=c(t.r),i=c(t.g),r=c(t.b),a=s((.4124564*n+.3575761*i+.1804375*r)/_),u=s((.2126729*n+.7151522*i+.072175*r)/v);return new o(116*u-16,500*(a-u),200*(u-s((.0193339*n+.119192*i+.9503041*r)/m)),t.opacity)}function r(t,e,n,r){return 1===arguments.length?i(t):new o(t,e,n,null==r?1:r)}function o(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function s(t){return t>O?Math.pow(t,1/3):t/w+g}function a(t){return t>b?t*t*t:w*(t-g)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function c(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function l(t){if(t instanceof f)return new f(t.h,t.c,t.l,t.opacity);t instanceof o||(t=i(t));var e=Math.atan2(t.b,t.a)*y.b;return new f(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function h(t,e,n,i){return 1===arguments.length?l(t):new f(t,e,n,null==i?1:i)}function f(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}e.a=r,e.b=h;var p=n(534),d=n(533),y=n(831),_=.95047,v=1,m=1.08883,g=4/29,b=6/29,w=3*b*b,O=b*b*b;Object(p.a)(o,r,Object(p.b)(d.a,{brighter:function(t){return new o(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new o(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=v*a(t),e=_*a(e),n=m*a(n),new d.b(u(3.2404542*e-1.5371385*t-.4985314*n),u(-.969266*e+1.8760108*t+.041556*n),u(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Object(p.a)(f,h,Object(p.b)(d.a,{brighter:function(t){return new f(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new f(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return i(this).rgb()}}))},function(t,e,n){"use strict";function i(t){if(t instanceof o)return new o(t.h,t.s,t.l,t.opacity);t instanceof a.b||(t=Object(a.h)(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(_*i+d*e-y*n)/(_+d-y),s=i-r,c=(p*(n-r)-h*s)/f,l=Math.sqrt(c*c+s*s)/(p*r*(1-r)),v=l?Math.atan2(c,s)*u.b-120:NaN;return new o(v<0?v+360:v,l,r,t.opacity)}function r(t,e,n,r){return 1===arguments.length?i(t):new o(t,e,n,null==r?1:r)}function o(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}e.a=r;var s=n(534),a=n(533),u=n(831),c=-.14861,l=1.78277,h=-.29227,f=-.90649,p=1.97294,d=p*f,y=p*l,_=l*h-f*c;Object(s.a)(o,r,Object(s.b)(a.a,{brighter:function(t){return t=null==t?a.c:Math.pow(a.c,t),new o(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?a.d:Math.pow(a.d,t),new o(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*u.a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new a.b(255*(e+n*(c*i+l*r)),255*(e+n*(h*i+f*r)),255*(e+n*(p*i)),this.opacity)}}))},function(t,e,n){"use strict";e.a=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}},function(t,e,n){"use strict";function i(t,e,n,i){function o(t){return t.length?t.pop()+" ":""}function s(t,i,o,s,a,u){if(t!==o||i!==s){var c=a.push("translate(",null,e,null,n);u.push({i:c-4,x:Object(r.a)(t,o)},{i:c-2,x:Object(r.a)(i,s)})}else(o||s)&&a.push("translate("+o+e+s+n)}function a(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(o(n)+"rotate(",null,i)-2,x:Object(r.a)(t,e)})):e&&n.push(o(n)+"rotate("+e+i)}function u(t,e,n,s){t!==e?s.push({i:n.push(o(n)+"skewX(",null,i)-2,x:Object(r.a)(t,e)}):e&&n.push(o(n)+"skewX("+e+i)}function c(t,e,n,i,s,a){if(t!==n||e!==i){var u=s.push(o(s)+"scale(",null,",",null,")");a.push({i:u-4,x:Object(r.a)(t,n)},{i:u-2,x:Object(r.a)(e,i)})}else 1===n&&1===i||s.push(o(s)+"scale("+n+","+i+")")}return function(e,n){var i=[],r=[];return e=t(e),n=t(n),s(e.translateX,e.translateY,n.translateX,n.translateY,i,r),a(e.rotate,n.rotate,i,r),u(e.skewX,n.skewX,i,r),c(e.scaleX,e.scaleY,n.scaleX,n.scaleY,i,r),e=n=null,function(t){for(var e,n=-1,o=r.length;++n<o;)i[(e=r[n]).i]=e.x(t);return i.join("")}}}n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a});var r=n(403),o=n(1997),s=i(o.a,"px, ","px)","deg)"),a=i(o.b,", ",")",")")},function(t,e,n){"use strict";function i(t){return"none"===t?c.b:(o||(o=document.createElement("DIV"),s=document.documentElement,a=document.defaultView),o.style.transform=t,t=a.getComputedStyle(s.appendChild(o),null).getPropertyValue("transform"),s.removeChild(o),t=t.slice(7,-1).split(","),Object(c.a)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function r(t){return null==t?c.b:(u||(u=document.createElementNS("http://www.w3.org/2000/svg","g")),u.setAttribute("transform",t),(t=u.transform.baseVal.consolidate())?(t=t.matrix,Object(c.a)(t.a,t.b,t.c,t.d,t.e,t.f)):c.b)}e.a=i,e.b=r;var o,s,a,u,c=n(1998)},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var i=180/Math.PI,r={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.a=function(t,e,n,r,o,s){var a,u,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:o,translateY:s,rotate:Math.atan2(e,t)*i,skewX:Math.atan(c)*i,scaleX:a,scaleY:u}}},function(t,e,n){"use strict";function i(t){return((t=Math.exp(t))+1/t)/2}function r(t){return((t=Math.exp(t))-1/t)/2}function o(t){return((t=Math.exp(2*t))-1)/(t+1)}var s=Math.SQRT2;e.a=function(t,e){var n,a,u=t[0],c=t[1],l=t[2],h=e[0],f=e[1],p=e[2],d=h-u,y=f-c,_=d*d+y*y;if(_<1e-12)a=Math.log(p/l)/s,n=function(t){return[u+t*d,c+t*y,l*Math.exp(s*t*a)]};else{var v=Math.sqrt(_),m=(p*p-l*l+4*_)/(2*l*2*v),g=(p*p-l*l-4*_)/(2*p*2*v),b=Math.log(Math.sqrt(m*m+1)-m),w=Math.log(Math.sqrt(g*g+1)-g);a=(w-b)/s,n=function(t){var e=t*a,n=i(b),h=l/(2*v)*(n*o(s*e+b)-r(b));return[u+h*d,c+h*y,l*n/i(s*e+b)]}}return n.duration=1e3*a,n}},function(t,e,n){"use strict";function i(t){return function(e,n){var i=t((e=Object(r.d)(e)).h,(n=Object(r.d)(n)).h),s=Object(o.a)(e.s,n.s),a=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=s(t),e.l=a(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return s});var r=n(244),o=n(350);e.a=i(o.c);var s=i(o.a)},function(t,e,n){"use strict";function i(t,e){var n=Object(o.a)((t=Object(r.e)(t)).l,(e=Object(r.e)(e)).l),i=Object(o.a)(t.a,e.a),s=Object(o.a)(t.b,e.b),a=Object(o.a)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=s(e),t.opacity=a(e),t+""}}e.a=i;var r=n(244),o=n(350)},function(t,e,n){"use strict";function i(t){return function(e,n){var i=t((e=Object(r.c)(e)).h,(n=Object(r.c)(n)).h),s=Object(o.a)(e.c,n.c),a=Object(o.a)(e.l,n.l),u=Object(o.a)(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=s(t),e.l=a(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return s});var r=n(244),o=n(350);e.a=i(o.c);var s=i(o.a)},function(t,e,n){"use strict";function i(t){return function e(n){function i(e,i){var s=t((e=Object(r.b)(e)).h,(i=Object(r.b)(i)).h),a=Object(o.a)(e.s,i.s),u=Object(o.a)(e.l,i.l),c=Object(o.a)(e.opacity,i.opacity);return function(t){return e.h=s(t),e.s=a(t),e.l=u(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,i.gamma=e,i}(1)}n.d(e,"a",function(){return s});var r=n(244),o=n(350);e.b=i(o.c);var s=i(o.a)},function(t,e,n){"use strict";e.a=function(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}},function(t,e,n){"use strict";var i=n(125),r=n(2006),o=n(2009);i.k.prototype.interrupt=r.a,i.k.prototype.transition=o.a},function(t,e,n){"use strict";var i=n(839);e.a=function(t){return this.each(function(){Object(i.a)(this,t)})}},function(t,e,n){"use strict";var i=n(537);e.a=function(t,e,n){var r=new i.a;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r}},function(t,e,n){"use strict";var i=n(537);e.a=function(t,e,n){var r=new i.a,o=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?Object(i.b)():+n,r.restart(function i(s){s+=o,r.restart(i,o+=e,n),t(s)},e,n),r)}},function(t,e,n){"use strict";function i(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return u.time=Object(a.b)(),u;return n}var r=n(267),o=n(239),s=n(841),a=n(404),u={time:null,delay:0,duration:250,ease:s.o};e.a=function(t){var e,n;t instanceof r.a?(e=t._id,t=t._name):(e=Object(r.c)(),(n=u).time=Object(a.b)(),t=null==t?null:t+"");for(var s=this._groups,c=s.length,l=0;l<c;++l)for(var h,f=s[l],p=f.length,d=0;d<p;++d)(h=f[d])&&Object(o.e)(h,t,e,d,f,n||i(h,e));return new r.a(s,this._parents,t,e)}},function(t,e,n){"use strict";function i(t){return function(){this.removeAttribute(t)}}function r(t){return function(){this.removeAttributeNS(t.space,t.local)}}function o(t,e,n){var i,r;return function(){var o=this.getAttribute(t);return o===n?null:o===i?r:r=e(i=o,n)}}function s(t,e,n){var i,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===i?r:r=e(i=o,n)}}function a(t,e,n){var i,r,o;return function(){var s,a=n(this);return null==a?void this.removeAttribute(t):(s=this.getAttribute(t),s===a?null:s===i&&a===r?o:o=e(i=s,r=a))}}function u(t,e,n){var i,r,o;return function(){var s,a=n(this);return null==a?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),s===a?null:s===i&&a===r?o:o=e(i=s,r=a))}}var c=n(238),l=n(125),h=n(405),f=n(840);e.a=function(t,e){var n=Object(l.g)(t),p="transform"===n?c.u:f.a;return this.attrTween(t,"function"==typeof e?(n.local?u:a)(n,p,Object(h.b)(this,"attr."+t,e)):null==e?(n.local?r:i)(n):(n.local?s:o)(n,p,e+""))}},function(t,e,n){"use strict";function i(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttributeNS(t.space,t.local,i(e))}}return n._value=e,n}function r(t,e){function n(){var n=this,i=e.apply(n,arguments);return i&&function(e){n.setAttribute(t,i(e))}}return n._value=e,n}var o=n(125);e.a=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var s=Object(o.g)(t);return this.tween(n,(s.local?i:r)(s,e))}},function(t,e,n){"use strict";function i(t,e){return function(){Object(o.g)(this,t).delay=+e.apply(this,arguments)}}function r(t,e){return e=+e,function(){Object(o.g)(this,t).delay=e}}var o=n(239);e.a=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?i:r)(e,t)):Object(o.f)(this.node(),e).delay}},function(t,e,n){"use strict";function i(t,e){return function(){Object(o.h)(this,t).duration=+e.apply(this,arguments)}}function r(t,e){return e=+e,function(){Object(o.h)(this,t).duration=e}}var o=n(239);e.a=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?i:r)(e,t)):Object(o.f)(this.node(),e).duration}},function(t,e,n){"use strict";function i(t,e){if("function"!=typeof e)throw new Error;return function(){Object(r.h)(this,t).ease=e}}var r=n(239);e.a=function(t){var e=this._id;return arguments.length?this.each(i(e,t)):Object(r.f)(this.node(),e).ease}},function(t,e,n){"use strict";var i=n(125),r=n(267);e.a=function(t){"function"!=typeof t&&(t=Object(i.e)(t));for(var e=this._groups,n=e.length,o=new Array(n),s=0;s<n;++s)for(var a,u=e[s],c=u.length,l=o[s]=[],h=0;h<c;++h)(a=u[h])&&t.call(a,a.__data__,h,u)&&l.push(a);return new r.a(o,this._parents,this._name,this._id)}},function(t,e,n){"use strict";var i=n(267);e.a=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,o=n.length,s=Math.min(r,o),a=new Array(r),u=0;u<s;++u)for(var c,l=e[u],h=n[u],f=l.length,p=a[u]=new Array(f),d=0;d<f;++d)(c=l[d]||h[d])&&(p[d]=c);for(;u<r;++u)a[u]=e[u];return new i.a(a,this._parents,this._name,this._id)}},function(t,e,n){"use strict";function i(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function r(t,e,n){var r,s,a=i(e)?o.g:o.h;return function(){var i=a(this,t),o=i.on;o!==r&&(s=(r=o).copy()).on(e,n),i.on=s}}var o=n(239);e.a=function(t,e){var n=this._id;return arguments.length<2?Object(o.f)(this.node(),n).on.on(t):this.each(r(n,t,e))}},function(t,e,n){"use strict";function i(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}e.a=function(){return this.on("end.remove",i(this._id))}},function(t,e,n){"use strict";var i=n(125),r=n(267),o=n(239);e.a=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(i.l)(t));for(var s=this._groups,a=s.length,u=new Array(a),c=0;c<a;++c)for(var l,h,f=s[c],p=f.length,d=u[c]=new Array(p),y=0;y<p;++y)(l=f[y])&&(h=t.call(l,l.__data__,y,f))&&("__data__"in l&&(h.__data__=l.__data__),d[y]=h,Object(o.e)(d[y],e,n,y,d,Object(o.f)(l,n)));return new r.a(u,this._parents,e,n)}},function(t,e,n){"use strict";var i=n(125),r=n(267),o=n(239);e.a=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(i.m)(t));for(var s=this._groups,a=s.length,u=[],c=[],l=0;l<a;++l)for(var h,f=s[l],p=f.length,d=0;d<p;++d)if(h=f[d]){for(var y,_=t.call(h,h.__data__,d,f),v=Object(o.f)(h,n),m=0,g=_.length;m<g;++m)(y=_[m])&&Object(o.e)(y,e,n,m,_,v);u.push(_),c.push(h)}return new r.a(u,c,e,n)}},function(t,e,n){"use strict";var i=n(125),r=i.k.prototype.constructor;e.a=function(){return new r(this._groups,this._parents)}},function(t,e,n){"use strict";function i(t,e){var n,i,r;return function(){var o=Object(u.n)(this,t),s=(this.style.removeProperty(t),Object(u.n)(this,t));return o===s?null:o===n&&s===i?r:r=e(n=o,i=s)}}function r(t){return function(){this.style.removeProperty(t)}}function o(t,e,n){var i,r;return function(){var o=Object(u.n)(this,t);return o===n?null:o===i?r:r=e(i=o,n)}}function s(t,e,n){var i,r,o;return function(){var s=Object(u.n)(this,t),a=n(this);return null==a&&(this.style.removeProperty(t),a=Object(u.n)(this,t)),s===a?null:s===i&&a===r?o:o=e(i=s,r=a)}}var a=n(238),u=n(125),c=n(405),l=n(840);e.a=function(t,e,n){var u="transform"==(t+="")?a.t:l.a;return null==e?this.styleTween(t,i(t,u)).on("end.style."+t,r(t)):this.styleTween(t,"function"==typeof e?s(t,u,Object(c.b)(this,"style."+t,e)):o(t,u,e+""),n)}},function(t,e,n){"use strict";function i(t,e,n){function i(){var i=this,r=e.apply(i,arguments);return r&&function(e){i.style.setProperty(t,r(e),n)}}return i._value=e,i}e.a=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,i(t,e,null==n?"":n))}},function(t,e,n){"use strict";function i(t){return function(){this.textContent=t}}function r(t){return function(){var e=t(this);this.textContent=null==e?"":e}}var o=n(405);e.a=function(t){return this.tween("text","function"==typeof t?r(Object(o.b)(this,"text",t)):i(null==t?"":t+""))}},function(t,e,n){"use strict";var i=n(267),r=n(239);e.a=function(){for(var t=this._name,e=this._id,n=Object(i.c)(),o=this._groups,s=o.length,a=0;a<s;++a)for(var u,c=o[a],l=c.length,h=0;h<l;++h)if(u=c[h]){var f=Object(r.f)(u,e);Object(r.e)(u,t,n,h,c,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new i.a(o,this._parents,t,n)}},function(t,e,n){"use strict";function i(t){return+t}e.a=i},function(t,e,n){"use strict";function i(t){return t*t}function r(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}e.a=i,e.c=r,e.b=o},function(t,e,n){"use strict";function i(t){return t*t*t}function r(t){return--t*t*t+1}function o(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}e.a=i,e.c=r,e.b=o},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o});var i=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),r=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),o=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3)},function(t,e,n){"use strict";function i(t){return 1-Math.cos(t*a)}function r(t){return Math.sin(t*a)}function o(t){return(1-Math.cos(s*t))/2}e.a=i,e.c=r,e.b=o;var s=Math.PI,a=s/2},function(t,e,n){"use strict";function i(t){return Math.pow(2,10*t-10)}function r(t){return 1-Math.pow(2,-10*t)}function o(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}e.a=i,e.c=r,e.b=o},function(t,e,n){"use strict";function i(t){return 1-Math.sqrt(1-t*t)}function r(t){return Math.sqrt(1- --t*t)}function o(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}e.a=i,e.c=r,e.b=o},function(t,e,n){"use strict";function i(t){return 1-r(1-t)}function r(t){return(t=+t)<s?y*t*t:t<u?y*(t-=a)*t+c:t<h?y*(t-=l)*t+f:y*(t-=p)*t+d}function o(t){return((t*=2)<=1?1-r(1-t):r(t-1)+1)/2}e.a=i,e.c=r,e.b=o;var s=4/11,a=6/11,u=8/11,c=.75,l=9/11,h=10/11,f=.9375,p=21/22,d=63/64,y=1/s/s},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"b",function(){return o});var i=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),r=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),o=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s});var i=2*Math.PI,r=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((o-t)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=i);return r.amplitude=function(e){return t(e,n*i)},r.period=function(n){return t(e,n)},r}(1,.3),o=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+o)/n)}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=i);return r.amplitude=function(e){return t(e,n*i)},r.period=function(n){return t(e,n)},r}(1,.3),s=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((o-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((o+t)/n))/2}var o=Math.asin(1/(e=Math.max(1,e)))*(n/=i);return r.amplitude=function(e){return t(e,n*i)},r.period=function(n){return t(e,n)},r}(1,.3)},function(t,e,n){"use strict";var i=n(267),r=n(239),o=[null];e.a=function(t,e){var n,s,a=t.__transition;if(a){e=null==e?null:e+"";for(s in a)if((n=a[s]).state>r.c&&n.name===e)return new i.a([[t]],o,e,+s)}return null}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e,n){this.target=t,this.type=e,this.selection=n}},function(t,e,n){"use strict";function i(){r.c.stopImmediatePropagation()}e.b=i;var r=n(125);e.a=function(){r.c.preventDefault(),r.c.stopImmediatePropagation()}},function(t,e,n){"use strict";var i=n(2041);n.d(e,"a",function(){return i.a});var r=n(2042);n.d(e,"b",function(){return r.a})},function(t,e,n){"use strict";function i(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}var r=n(136),o=n(842);e.a=function(){function t(t){var i,u,c,l,h,f,p=t.length,d=[],y=Object(r.s)(p),_=[],v=[],m=v.groups=new Array(p),g=new Array(p*p);for(i=0,h=-1;++h<p;){for(u=0,f=-1;++f<p;)u+=t[h][f];d.push(u),_.push(Object(r.s)(p)),i+=u}for(n&&y.sort(function(t,e){return n(d[t],d[e])}),s&&_.forEach(function(e,n){e.sort(function(e,i){return s(t[n][e],t[n][i])})}),i=Object(o.c)(0,o.e-e*p)/i,l=i?e:o.e/p,u=0,h=-1;++h<p;){for(c=u,f=-1;++f<p;){var b=y[h],w=_[b][f],O=t[b][w],x=u,T=u+=O*i;g[w*p+b]={index:b,subindex:w,startAngle:x,endAngle:T,value:O}}m[b]={index:b,startAngle:c,endAngle:u,value:d[b]},u+=l}for(h=-1;++h<p;)for(f=h-1;++f<p;){var S=g[f*p+h],j=g[h*p+f];(S.value||j.value)&&v.push(S.value<j.value?{source:j,target:S}:{source:S,target:j})}return a?v.sort(a):v}var e=0,n=null,s=null,a=null;return t.padAngle=function(n){return arguments.length?(e=Object(o.c)(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(s=e,t):s},t.sortChords=function(e){return arguments.length?(null==e?a=null:(a=i(e))._=e,t):a&&a._},t}},function(t,e,n){"use strict";function i(t){return t.source}function r(t){return t.target}function o(t){return t.radius}function s(t){return t.startAngle}function a(t){return t.endAngle}var u=n(2043),c=n(2044),l=n(842),h=n(292);e.a=function(){function t(){var t,i=u.a.call(arguments),r=e.apply(this,i),o=n.apply(this,i),s=+f.apply(this,(i[0]=r,i)),a=p.apply(this,i)-l.b,c=d.apply(this,i)-l.b,_=s*Object(l.a)(a),v=s*Object(l.d)(a),m=+f.apply(this,(i[0]=o,i)),g=p.apply(this,i)-l.b,b=d.apply(this,i)-l.b;if(y||(y=t=Object(h.a)()),y.moveTo(_,v),y.arc(0,0,s,a,c),a===g&&c===b||(y.quadraticCurveTo(0,0,m*Object(l.a)(g),m*Object(l.d)(g)),y.arc(0,0,m,g,b)),y.quadraticCurveTo(0,0,_,v),y.closePath(),t)return y=null,t+""||null}var e=i,n=r,f=o,p=s,d=a,y=null;return t.radius=function(e){return arguments.length?(f="function"==typeof e?e:Object(c.a)(+e),t):f},t.startAngle=function(e){return arguments.length?(p="function"==typeof e?e:Object(c.a)(+e),t):p},t.endAngle=function(e){return arguments.length?(d="function"==typeof e?e:Object(c.a)(+e),t):d},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(y=null==e?null:e,t):y},t}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=Array.prototype.slice},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function r(){return new i}var o=Math.PI,s=2*o,a=s-1e-6;i.prototype=r.prototype={constructor:i,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var s=this._x1,a=this._y1,u=n-t,c=i-e,l=s-t,h=a-e,f=l*l+h*h;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(h*u-c*l)>1e-6&&r){var p=n-s,d=i-a,y=u*u+c*c,_=p*p+d*d,v=Math.sqrt(y),m=Math.sqrt(f),g=r*Math.tan((o-Math.acos((y+f-_)/(2*v*m)))/2),b=g/m,w=g/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*l)+","+(e+b*h)),this._+="A"+r+","+r+",0,0,"+ +(h*p>l*d)+","+(this._x1=t+w*u)+","+(this._y1=e+w*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,i,r,u){t=+t,e=+e,n=+n;var c=n*Math.cos(i),l=n*Math.sin(i),h=t+c,f=e+l,p=1^u,d=u?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+h+","+f),n&&(d<0&&(d=d%s+s),d>a?this._+="A"+n+","+n+",0,1,"+p+","+(t-c)+","+(e-l)+"A"+n+","+n+",0,1,"+p+","+(this._x1=h)+","+(this._y1=f):d>1e-6&&(this._+="A"+n+","+n+",0,"+ +(d>=o)+","+p+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}},e.a=r},function(t,e,n){"use strict";function i(){return{}}function r(t,e,n){t[e]=n}function o(){return Object(a.a)()}function s(t,e,n){t.set(e,n)}var a=n(538);e.a=function(){function t(e,i,r,o){if(i>=l.length)return null!=n&&e.sort(n),null!=u?u(e):e;for(var s,c,h,f=-1,p=e.length,d=l[i++],y=Object(a.a)(),_=r();++f<p;)(h=y.get(s=d(c=e[f])+""))?h.push(c):y.set(s,[c]);return y.each(function(e,n){o(_,n,t(e,i,r,o))}),_}function e(t,n){if(++n>l.length)return t;var i,r=h[n-1];return null!=u&&n>=l.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=r?i.sort(function(t,e){return r(t.key,e.key)}):i}var n,u,c,l=[],h=[];return c={object:function(e){return t(e,0,i,r)},map:function(e){return t(e,0,o,s)},entries:function(n){return e(t(n,0,o,s),0)},key:function(t){return l.push(t),c},sortKeys:function(t){return h[l.length-1]=t,c},sortValues:function(t){return n=t,c},rollup:function(t){return u=t,c}}}},function(t,e,n){"use strict";function i(){}function r(t,e){var n=new i;if(t instanceof i)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}var o=n(538),s=o.a.prototype;i.prototype=r.prototype={constructor:i,has:s.has,add:function(t){return t+="",this[o.b+t]=t,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each},e.a=r},function(t,e,n){"use strict";e.a=function(t){var e=[];for(var n in t)e.push(n);return e}},function(t,e,n){"use strict";e.a=function(t){var e=[];for(var n in t)e.push(t[n]);return e}},function(t,e,n){"use strict";e.a=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var i=n(540),r=Object(i.a)(","),o=r.parse,s=r.parseRows,a=r.format,u=r.formatRows},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var i=n(540),r=Object(i.a)("\t"),o=r.parse,s=r.parseRows,a=r.format,u=r.formatRows},function(t,e,n){"use strict";var i=n(2054);n.d(e,"a",function(){return i.a});var r=n(2055);n.d(e,"b",function(){return r.a});var o=n(2069);n.d(e,"c",function(){return o.a});var s=n(2070);n.d(e,"d",function(){return s.a});var a=n(2071);n.d(e,"e",function(){return a.a});var u=n(843);n.d(e,"f",function(){return u.a});var c=n(2072);n.d(e,"g",function(){return c.a});var l=n(2073);n.d(e,"h",function(){return l.a})},function(t,e,n){"use strict";e.a=function(t,e){function n(){var n,r,o=i.length,s=0,a=0;for(n=0;n<o;++n)r=i[n],s+=r.x,a+=r.y;for(s=s/o-t,a=a/o-e,n=0;n<o;++n)r=i[n],r.x-=s,r.y-=a}var i;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){i=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n}},function(t,e,n){"use strict";function i(t){return t.x+t.vx}function r(t){return t.y+t.vy}var o=n(309),s=n(541),a=n(542);e.a=function(t){function e(){function t(t,e,n,i,r){var o=t.data,a=t.r,c=y+a;{if(!o)return e>p+c||i<p-c||n>d+c||r<d-c;if(o.index>u.index){var l=p-o.x-o.vx,f=d-o.y-o.vy,v=l*l+f*f;v<c*c&&(0===l&&(l=Object(s.a)(),v+=l*l),0===f&&(f=Object(s.a)(),v+=f*f),v=(c-(v=Math.sqrt(v)))/v*h,u.vx+=(l*=v)*(c=(a*=a)/(_+a)),u.vy+=(f*=v)*c,o.vx-=l*(c=1-c),o.vy-=f*c)}}}for(var e,o,u,p,d,y,_,v=c.length,m=0;m<f;++m)for(o=Object(a.a)(c,i,r).visitAfter(n),e=0;e<v;++e)u=c[e],y=l[u.index],_=y*y,p=u.x+u.vx,d=u.y+u.vy,o.visit(t)}function n(t){if(t.data)return t.r=l[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(c){var e,n,i=c.length;for(l=new Array(i),e=0;e<i;++e)n=c[e],l[n.index]=+t(n,e,c)}}var c,l,h=1,f=1;return"function"!=typeof t&&(t=Object(o.a)(null==t?1:+t)),e.initialize=function(t){c=t,u()},e.iterations=function(t){return arguments.length?(f=+t,e):f},e.strength=function(t){return arguments.length?(h=+t,e):h},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:Object(o.a)(+n),u(),e):t},e}},function(t,e,n){"use strict";function i(t,e,n){var i=new r(null==e?_.b:e,null==n?v.b:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function r(t,e,n,i,r,o){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=o,this._root=void 0}function o(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}e.a=i;var s=n(2057),a=n(2058),u=n(2059),c=n(2060),l=n(2061),h=n(2062),f=n(2063),p=n(2064),d=n(2065),y=n(2066),_=n(2067),v=n(2068),m=i.prototype=r.prototype;m.copy=function(){var t,e,n=new r(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=o(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var s=0;s<4;++s)(e=i.source[s])&&(e.length?t.push({source:e,target:i.target[s]=new Array(4)}):i.target[s]=o(e));return n},m.add=s.b,m.addAll=s.a,m.cover=a.a,m.data=u.a,m.extent=c.a,m.find=l.a,m.remove=h.a,m.removeAll=h.b,m.root=f.a,m.size=p.a,m.visit=d.a,m.visitAfter=y.a,m.x=_.a,m.y=v.a},function(t,e,n){"use strict";function i(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,o,s,a,u,c,l,h,f,p=t._root,d={data:i},y=t._x0,_=t._y0,v=t._x1,m=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(y+v)/2))?y=o:v=o,(l=n>=(s=(_+m)/2))?_=s:m=s,r=p,!(p=p[h=l<<1|c]))return r[h]=d,t;if(a=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===a&&n===u)return d.next=p,r?r[h]=d:t._root=d,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(c=e>=(o=(y+v)/2))?y=o:v=o,(l=n>=(s=(_+m)/2))?_=s:m=s}while((h=l<<1|c)==(f=(u>=s)<<1|a>=o));return r[f]=p,r[h]=d,t}function r(t){var e,n,r,o,s=t.length,a=new Array(s),u=new Array(s),c=1/0,l=1/0,h=-1/0,f=-1/0;for(n=0;n<s;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(o=+this._y.call(null,e))||(a[n]=r,u[n]=o,r<c&&(c=r),r>h&&(h=r),o<l&&(l=o),o>f&&(f=o));for(h<c&&(c=this._x0,h=this._x1),f<l&&(l=this._y0,f=this._y1),this.cover(c,l).cover(h,f),n=0;n<s;++n)i(this,a[n],u[n],t[n]);return this}e.a=r,e.b=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return i(this.cover(e,n),e,n,t)}},function(t,e,n){"use strict";e.a=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,o=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,o=(i=Math.floor(e))+1;else{if(!(n>t||t>r||i>e||e>o))return this;var s,a,u=r-n,c=this._root;switch(a=(e<(i+o)/2)<<1|t<(n+r)/2){case 0:do{s=new Array(4),s[a]=c,c=s}while(u*=2,r=n+u,o=i+u,t>r||e>o);break;case 1:do{s=new Array(4),s[a]=c,c=s}while(u*=2,n=r-u,o=i+u,n>t||e>o);break;case 2:do{s=new Array(4),s[a]=c,c=s}while(u*=2,r=n+u,i=o-u,t>r||i>e);break;case 3:do{s=new Array(4),s[a]=c,c=s}while(u*=2,n=r-u,i=o-u,n>t||i>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=i,this._x1=r,this._y1=o,this}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}},function(t,e,n){"use strict";var i=n(543);e.a=function(t,e,n){var r,o,s,a,u,c,l,h=this._x0,f=this._y0,p=this._x1,d=this._y1,y=[],_=this._root;for(_&&y.push(new i.a(_,h,f,p,d)),null==n?n=1/0:(h=t-n,f=e-n,p=t+n,d=e+n,n*=n);c=y.pop();)if(!(!(_=c.node)||(o=c.x0)>p||(s=c.y0)>d||(a=c.x1)<h||(u=c.y1)<f))if(_.length){var v=(o+a)/2,m=(s+u)/2;y.push(new i.a(_[3],v,m,a,u),new i.a(_[2],o,m,v,u),new i.a(_[1],v,s,a,m),new i.a(_[0],o,s,v,m)),(l=(e>=m)<<1|t>=v)&&(c=y[y.length-1],y[y.length-1]=y[y.length-1-l],y[y.length-1-l]=c)}else{var g=t-+this._x.call(null,_.data),b=e-+this._y.call(null,_.data),w=g*g+b*b;if(w<n){var O=Math.sqrt(n=w);h=t-O,f=e-O,p=t+O,d=e+O,r=_.data}}return r}},function(t,e,n){"use strict";function i(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}e.b=i,e.a=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,i,r,o,s,a,u,c,l,h,f,p=this._root,d=this._x0,y=this._y0,_=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(a=(d+_)/2))?d=a:_=a,(l=s>=(u=(y+v)/2))?y=u:v=u,e=p,!(p=p[h=l<<1|c]))return this;if(!p.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,f=h)}for(;p.data!==t;)if(i=p,!(p=p.next))return this;return(r=p.next)&&delete p.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=r,this)}},function(t,e,n){"use strict";e.a=function(){return this._root}},function(t,e,n){"use strict";e.a=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t}},function(t,e,n){"use strict";var i=n(543);e.a=function(t){var e,n,r,o,s,a,u=[],c=this._root;for(c&&u.push(new i.a(c,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(c=e.node,r=e.x0,o=e.y0,s=e.x1,a=e.y1)&&c.length){var l=(r+s)/2,h=(o+a)/2;(n=c[3])&&u.push(new i.a(n,l,h,s,a)),(n=c[2])&&u.push(new i.a(n,r,h,l,a)),(n=c[1])&&u.push(new i.a(n,l,o,s,h)),(n=c[0])&&u.push(new i.a(n,r,o,l,h))}return this}},function(t,e,n){"use strict";var i=n(543);e.a=function(t){var e,n=[],r=[];for(this._root&&n.push(new i.a(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var o=e.node;if(o.length){var s,a=e.x0,u=e.y0,c=e.x1,l=e.y1,h=(a+c)/2,f=(u+l)/2;(s=o[0])&&n.push(new i.a(s,a,u,h,f)),(s=o[1])&&n.push(new i.a(s,h,u,c,f)),(s=o[2])&&n.push(new i.a(s,a,f,h,l)),(s=o[3])&&n.push(new i.a(s,h,f,c,l))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}},function(t,e,n){"use strict";function i(t){return t[0]}e.b=i,e.a=function(t){return arguments.length?(this._x=t,this):this._x}},function(t,e,n){"use strict";function i(t){return t[1]}e.b=i,e.a=function(t){return arguments.length?(this._y=t,this):this._y}},function(t,e,n){"use strict";function i(t){return t.index}function r(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var o=n(309),s=n(541),a=n(351);e.a=function(t){function e(t){return 1/Math.min(d[t.source.index],d[t.target.index])}function n(e){for(var n=0,i=t.length;n<g;++n)for(var r,o,a,u,c,l,p,d=0;d<i;++d)r=t[d],o=r.source,a=r.target,u=a.x+a.vx-o.x-o.vx||Object(s.a)(),c=a.y+a.vy-o.y-o.vy||Object(s.a)(),l=Math.sqrt(u*u+c*c),l=(l-f[d])/l*e*h[d],u*=l,c*=l,a.vx-=u*(p=y[d]),a.vy-=c*p,o.vx+=u*(p=1-p),o.vy+=c*p}function u(){if(p){var e,n,i=p.length,o=t.length,s=Object(a.c)(p,_);for(e=0,d=new Array(i);e<o;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=r(s,n.source)),"object"!=typeof n.target&&(n.target=r(s,n.target)),d[n.source.index]=(d[n.source.index]||0)+1,d[n.target.index]=(d[n.target.index]||0)+1;for(e=0,y=new Array(o);e<o;++e)n=t[e],y[e]=d[n.source.index]/(d[n.source.index]+d[n.target.index]);h=new Array(o),c(),f=new Array(o),l()}}function c(){if(p)for(var e=0,n=t.length;e<n;++e)h[e]=+v(t[e],e,t)}function l(){if(p)for(var e=0,n=t.length;e<n;++e)f[e]=+m(t[e],e,t)}var h,f,p,d,y,_=i,v=e,m=Object(o.a)(30),g=1;return null==t&&(t=[]),n.initialize=function(t){p=t,u()},n.links=function(e){return arguments.length?(t=e,u(),n):t},n.id=function(t){return arguments.length?(_=t,n):_},n.iterations=function(t){return arguments.length?(g=+t,n):g},n.strength=function(t){return arguments.length?(v="function"==typeof t?t:Object(o.a)(+t),c(),n):v},n.distance=function(t){return arguments.length?(m="function"==typeof t?t:Object(o.a)(+t),l(),n):m},n}},function(t,e,n){"use strict";var i=n(309),r=n(541),o=n(542),s=n(843);e.a=function(){function t(t){var e,i=u.length,r=Object(o.a)(u,s.b,s.c).visitAfter(n);for(l=t,e=0;e<i;++e)c=u[e],r.visit(a)}function e(){if(u){var t,e,n=u.length;for(h=new Array(n),t=0;t<n;++t)e=u[t],h[e.index]=+f(e,t,u)}}function n(t){var e,n,i,r,o,s=0,a=0;if(t.length){for(i=r=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(s+=e.value,a+=n,i+=n*e.x,r+=n*e.y);t.x=i/a,t.y=r/a}else{e=t,e.x=e.data.x,e.y=e.data.y;do{s+=h[e.data.index]}while(e=e.next)}t.value=s}function a(t,e,n,i){if(!t.value)return!0;var o=t.x-c.x,s=t.y-c.y,a=i-e,u=o*o+s*s;if(a*a/y<u)return u<d&&(0===o&&(o=Object(r.a)(),u+=o*o),0===s&&(s=Object(r.a)(),u+=s*s),u<p&&(u=Math.sqrt(p*u)),c.vx+=o*t.value*l/u,c.vy+=s*t.value*l/u),!0;if(!(t.length||u>=d)){(t.data!==c||t.next)&&(0===o&&(o=Object(r.a)(),u+=o*o),0===s&&(s=Object(r.a)(),u+=s*s),u<p&&(u=Math.sqrt(p*u)));do{t.data!==c&&(a=h[t.data.index]*l/u,c.vx+=o*a,c.vy+=s*a)}while(t=t.next)}}var u,c,l,h,f=Object(i.a)(-30),p=1,d=1/0,y=.81;return t.initialize=function(t){u=t,e()},t.strength=function(n){return arguments.length?(f="function"==typeof n?n:Object(i.a)(+n),e(),t):f},t.distanceMin=function(e){return arguments.length?(p=e*e,t):Math.sqrt(p)},t.distanceMax=function(e){return arguments.length?(d=e*e,t):Math.sqrt(d)},t.theta=function(e){return arguments.length?(y=e*e,t):Math.sqrt(y)},t}},function(t,e,n){"use strict";var i=n(309);e.a=function(t,e,n){function r(t){for(var i=0,r=s.length;i<r;++i){var o=s[i],c=o.x-e||1e-6,l=o.y-n||1e-6,h=Math.sqrt(c*c+l*l),f=(u[i]-h)*a[i]*t/h;o.vx+=c*f,o.vy+=l*f}}function o(){if(s){var e,n=s.length;for(a=new Array(n),u=new Array(n),e=0;e<n;++e)u[e]=+t(s[e],e,s),a[e]=isNaN(u[e])?0:+c(s[e],e,s)}}var s,a,u,c=Object(i.a)(.1);return"function"!=typeof t&&(t=Object(i.a)(+t)),null==e&&(e=0),null==n&&(n=0),r.initialize=function(t){s=t,o()},r.strength=function(t){return arguments.length?(c="function"==typeof t?t:Object(i.a)(+t),o(),r):c},r.radius=function(e){return arguments.length?(t="function"==typeof e?e:Object(i.a)(+e),o(),r):t},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(t){return arguments.length?(n=+t,r):n},r}},function(t,e,n){"use strict";var i=n(309);e.a=function(t){function e(t){for(var e,n=0,i=r.length;n<i;++n)e=r[n],e.vx+=(s[n]-e.x)*o[n]*t}function n(){if(r){var e,n=r.length;for(o=new Array(n),s=new Array(n),e=0;e<n;++e)o[e]=isNaN(s[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,o,s,a=Object(i.a)(.1);return"function"!=typeof t&&(t=Object(i.a)(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Object(i.a)(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:Object(i.a)(+r),n(),e):t},e}},function(t,e,n){"use strict";var i=n(309);e.a=function(t){function e(t){for(var e,n=0,i=r.length;n<i;++n)e=r[n],e.vy+=(s[n]-e.y)*o[n]*t}function n(){if(r){var e,n=r.length;for(o=new Array(n),s=new Array(n),e=0;e<n;++e)o[e]=isNaN(s[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,o,s,a=Object(i.a)(.1);return"function"!=typeof t&&(t=Object(i.a)(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:Object(i.a)(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:Object(i.a)(+r),n(),e):t},e}},function(t,e,n){"use strict";function i(t){return r=Object(a.a)(t),o=r.format,s=r.formatPrefix,r}n.d(e,"b",function(){return o}),n.d(e,"c",function(){return s}),e.a=i;var r,o,s,a=n(844);i({decimal:".",thousands:",",grouping:[3],currency:["$",""]})},function(t,e,n){"use strict";e.a=function(t,e){return function(n,i){for(var r=n.length,o=[],s=0,a=t[0],u=0;r>0&&a>0&&(u+a+1>i&&(a=Math.max(1,i-u)),o.push(n.substring(r-=a,r+a)),!((u+=a+1)>i));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}},function(t,e,n){"use strict";e.a=function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}},function(t,e,n){"use strict";e.a=function(t,e){t=t.toPrecision(e);t:for(var n,i=t.length,r=1,o=-1;r<i;++r)switch(t[r]){case".":o=n=r;break;case"0":0===o&&(o=r),n=r;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t}},function(t,e,n){"use strict";var i=n(545);e.a=function(t,e){var n=Object(i.a)(t,e);if(!n)return t+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var i=n(406);e.a=function(t){return Math.max(0,-Object(i.a)(Math.abs(t)))}},function(t,e,n){"use strict";var i=n(406);e.a=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Object(i.a)(e)/3)))-Object(i.a)(Math.abs(t)))}},function(t,e,n){"use strict";var i=n(406);e.a=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Object(i.a)(e)-Object(i.a)(t))+1}},function(t,e,n){"use strict";var i=n(848);n.d(e,"c",function(){return i.c});var r=n(2084);n.d(e,"h",function(){return r.a});var o=n(2085);n.d(e,"i",function(){return o.a});var s=n(849);n.d(e,"j",function(){return s.b});var a=n(851);n.d(e,"k",function(){return a.a});var u=n(857);n.d(e,"l",function(){return u.a});var c=n(2087);n.d(e,"m",function(){return c.a});var l=n(408);n.d(e,"n",function(){return l.a});var h=n(2089);n.d(e,"u",function(){return h.a});var f=n(858);n.d(e,"v",function(){return f.a});var p=n(2090);n.d(e,"A",function(){return p.a}),n.d(e,"B",function(){return p.b});var d=n(2091);n.d(e,"D",function(){return d.a});var y=n(859);n.d(e,"E",function(){return y.a});var _=n(2092);n.d(e,"L",function(){return _.a});var v=n(861);n.d(e,"a",function(){return v.a});var m=n(2100);n.d(e,"b",function(){return m.a});var g=n(2101);n.d(e,"d",function(){return g.b}),n.d(e,"e",function(){return g.a});var b=n(2102);n.d(e,"f",function(){return b.b}),n.d(e,"g",function(){return b.a});var w=n(2103);n.d(e,"o",function(){return w.b}),n.d(e,"p",function(){return w.a});var O=n(547);n.d(e,"q",function(){return O.b}),n.d(e,"r",function(){return O.a});var x=n(2104);n.d(e,"s",function(){return x.b}),n.d(e,"t",function(){return x.a});var T=n(862);n.d(e,"w",function(){return T.a}),n.d(e,"x",function(){return T.b});var S=n(2105);n.d(e,"y",function(){return S.a}),n.d(e,"z",function(){return S.b});var j=n(2106);n.d(e,"C",function(){return j.a});var k=n(245);n.d(e,"M",function(){return k.a}),n.d(e,"N",function(){return k.b});var M=n(550);n.d(e,"F",function(){return M.a}),n.d(e,"G",function(){return M.c});var A=n(2107);n.d(e,"H",function(){return A.a}),n.d(e,"I",function(){return A.b});var P=n(2108);n.d(e,"J",function(){return P.a}),n.d(e,"K",function(){return P.b});var E=n(2109);n.d(e,"P",function(){return E.a}),n.d(e,"Q",function(){return E.b});var N=n(2110);n.d(e,"T",function(){return N.a}),n.d(e,"U",function(){return N.b});var C=n(407);n.d(e,"O",function(){return C.a});var q=n(293);n.d(e,"R",function(){return q.a});var F=n(409);n.d(e,"S",function(){return F.a})},function(t,e,n){"use strict";function i(t,e){w.push(O=[p=t,y=t]),e<d&&(d=e),e>_&&(_=e)}function r(t,e){var n=Object(S.a)([t*j.r,e*j.r]);if(b){var i=Object(S.c)(b,n),r=[i[1],-i[0],0],o=Object(S.c)(r,i);Object(S.e)(o),o=Object(S.g)(o);var s,a=t-v,u=a>0?1:-1,c=o[0]*j.h*u,h=Object(j.a)(a)>180;h^(u*v<c&&c<u*t)?(s=o[1]*j.h)>_&&(_=s):(c=(c+360)%360-180,h^(u*v<c&&c<u*t)?(s=-o[1]*j.h)<d&&(d=s):(e<d&&(d=e),e>_&&(_=e))),h?t<v?l(p,t)>l(p,y)&&(y=t):l(t,y)>l(p,y)&&(p=t):y>=p?(t<p&&(p=t),t>y&&(y=t)):t>v?l(p,t)>l(p,y)&&(y=t):l(t,y)>l(p,y)&&(p=t)}else w.push(O=[p=t,y=t]);e<d&&(d=e),e>_&&(_=e),b=n,v=t}function o(){A.point=r}function s(){O[0]=p,O[1]=y,A.point=i,b=null}function a(t,e){if(b){var n=t-v;M.add(Object(j.a)(n)>180?n+(n>0?360:-360):n)}else m=t,g=e;T.b.point(t,e),r(t,e)}function u(){T.b.lineStart()}function c(){a(m,g),T.b.lineEnd(),Object(j.a)(M)>j.i&&(p=-(y=180)),O[0]=p,O[1]=y,b=null}function l(t,e){return(e-=t)<0?e+360:e}function h(t,e){return t[0]-e[0]}function f(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var p,d,y,_,v,m,g,b,w,O,x=n(310),T=n(848),S=n(352),j=n(49),k=n(293),M=Object(x.a)(),A={point:i,lineStart:o,lineEnd:s,polygonStart:function(){A.point=a,A.lineStart=u,A.lineEnd=c,M.reset(),T.b.polygonStart()},polygonEnd:function(){T.b.polygonEnd(),A.point=i,A.lineStart=o,A.lineEnd=s,T.a<0?(p=-(y=180),d=-(_=90)):M>j.i?_=90:M<-j.i&&(d=-90),O[0]=p,O[1]=y}};e.a=function(t){var e,n,i,r,o,s,a;if(_=y=-(p=d=1/0),w=[],Object(k.a)(t,A),n=w.length){for(w.sort(h),e=1,i=w[0],o=[i];e<n;++e)r=w[e],f(i,r[0])||f(i,r[1])?(l(i[0],r[1])>l(i[0],i[1])&&(i[1]=r[1]),l(r[0],i[1])>l(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,n=o.length-1,e=0,i=o[n];e<=n;i=r,++e)r=o[e],(a=l(i[1],r[0]))>s&&(s=a,p=r[0],y=i[1])}return w=O=null,p===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[p,d],[y,_]]}},function(t,e,n){"use strict";function i(t,e){t*=A.r,e*=A.r;var n=Object(A.g)(e);r(n*Object(A.g)(t),n*Object(A.t)(t),Object(A.t)(e))}function r(t,e,n){++p,y+=(t-y)/p,_+=(e-_)/p,v+=(n-v)/p}function o(){N.point=s}function s(t,e){t*=A.r,e*=A.r;var n=Object(A.g)(e);j=n*Object(A.g)(t),k=n*Object(A.t)(t),M=Object(A.t)(e),N.point=a,r(j,k,M)}function a(t,e){t*=A.r,e*=A.r;var n=Object(A.g)(e),i=n*Object(A.g)(t),o=n*Object(A.t)(t),s=Object(A.t)(e),a=Object(A.e)(Object(A.u)((a=k*s-M*o)*a+(a=M*i-j*s)*a+(a=j*o-k*i)*a),j*i+k*o+M*s);d+=a,m+=a*(j+(j=i)),g+=a*(k+(k=o)),b+=a*(M+(M=s)),r(j,k,M)}function u(){N.point=i}function c(){N.point=h}function l(){f(T,S),N.point=i}function h(t,e){T=t,S=e,t*=A.r,e*=A.r,N.point=f;var n=Object(A.g)(e);j=n*Object(A.g)(t),k=n*Object(A.t)(t),M=Object(A.t)(e),r(j,k,M)}function f(t,e){t*=A.r,e*=A.r;var n=Object(A.g)(e),i=n*Object(A.g)(t),o=n*Object(A.t)(t),s=Object(A.t)(e),a=k*s-M*o,u=M*i-j*s,c=j*o-k*i,l=Object(A.u)(a*a+u*u+c*c),h=Object(A.c)(l),f=l&&-h/l;w+=f*a,O+=f*u,x+=f*c,d+=h,m+=h*(j+(j=i)),g+=h*(k+(k=o)),b+=h*(M+(M=s)),r(j,k,M)}var p,d,y,_,v,m,g,b,w,O,x,T,S,j,k,M,A=n(49),P=n(268),E=n(293),N={sphere:P.a,point:i,lineStart:o,lineEnd:u,polygonStart:function(){N.lineStart=c,N.lineEnd=l},polygonEnd:function(){N.lineStart=o,N.lineEnd=u}};e.a=function(t){p=d=y=_=v=m=g=b=w=O=x=0,Object(E.a)(t,N);var e=w,n=O,i=x,r=e*e+n*n+i*i;return r<A.j&&(e=m,n=g,i=b,d<A.i&&(e=y,n=_,i=v),(r=e*e+n*n+i*i)<A.j)?[NaN,NaN]:[Object(A.e)(n,e)*A.h,Object(A.c)(i/Object(A.u)(r))*A.h]}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var i=n(408);e.a=function(){var t,e,n,r=0,o=0,s=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Object(i.a)(r,o,s,a)(e=n)},extent:function(i){return arguments.length?(r=+i[0][0],o=+i[0][1],s=+i[1][0],a=+i[1][1],t=e=null,n):[[r,o],[s,a]]}}}},function(t,e,n){"use strict";e.a=function(t,e,n,i,r,o){var s,a=t[0],u=t[1],c=e[0],l=e[1],h=0,f=1,p=c-a,d=l-u;if(s=n-a,p||!(s>0)){if(s/=p,p<0){if(s<h)return;s<f&&(f=s)}else if(p>0){if(s>f)return;s>h&&(h=s)}if(s=r-a,p||!(s<0)){if(s/=p,p<0){if(s>f)return;s>h&&(h=s)}else if(p>0){if(s<h)return;s<f&&(f=s)}if(s=i-u,d||!(s>0)){if(s/=d,d<0){if(s<h)return;s<f&&(f=s)}else if(d>0){if(s>f)return;s>h&&(h=s)}if(s=o-u,d||!(s<0)){if(s/=d,d<0){if(s>f)return;s>h&&(h=s)}else if(d>0){if(s<h)return;s<f&&(f=s)}return h>0&&(t[0]=a+h*p,t[1]=u+h*d),f<1&&(e[0]=a+f*p,e[1]=u+f*d),!0}}}}}},function(t,e,n){"use strict";function i(t,e){return!(!t||!p.hasOwnProperty(t.type))&&p[t.type](t,e)}function r(t,e){return 0===Object(l.a)(t,e)}function o(t,e){var n=Object(l.a)(t[0],t[1]);return Object(l.a)(t[0],e)+Object(l.a)(e,t[1])<=n+h.i}function s(t,e){return!!Object(c.a)(t.map(a),u(e))}function a(t){return t=t.map(u),t.pop(),t}function u(t){return[t[0]*h.r,t[1]*h.r]}var c=n(856),l=n(858),h=n(49),f={Feature:function(t,e){return i(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,o=n.length;++r<o;)if(i(n[r].geometry,e))return!0;return!1}},p={Sphere:function(){return!0},Point:function(t,e){return r(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(r(n[i],e))return!0;return!1},LineString:function(t,e){return o(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(o(n[i],e))return!0;return!1},Polygon:function(t,e){return s(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)if(s(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,o=n.length;++r<o;)if(i(n[r],e))return!0;return!1}};e.a=function(t,e){return(t&&f.hasOwnProperty(t.type)?f[t.type]:i)(t,e)}},function(t,e,n){"use strict";function i(t,e,n){var i=Object(a.s)(t,e-u.i,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function r(t,e,n){var i=Object(a.s)(t,e-u.i,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function o(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Object(a.s)(Object(u.f)(c/b)*b,s,b).map(_).concat(Object(a.s)(Object(u.f)(p/w)*w,f,w).map(v)).concat(Object(a.s)(Object(u.f)(o/m)*m,n,m).filter(function(t){return Object(u.a)(t%b)>u.i}).map(d)).concat(Object(a.s)(Object(u.f)(h/g)*g,l,g).filter(function(t){return Object(u.a)(t%w)>u.i}).map(y))}var n,o,s,c,l,h,f,p,d,y,_,v,m=10,g=m,b=90,w=360,O=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[_(c).concat(v(f).slice(1),_(s).reverse().slice(1),v(p).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(c=+e[0][0],s=+e[1][0],p=+e[0][1],f=+e[1][1],c>s&&(e=c,c=s,s=e),p>f&&(e=p,p=f,f=e),t.precision(O)):[[c,p],[s,f]]},t.extentMinor=function(e){return arguments.length?(o=+e[0][0],n=+e[1][0],h=+e[0][1],l=+e[1][1],o>n&&(e=o,o=n,n=e),h>l&&(e=h,h=l,l=e),t.precision(O)):[[o,h],[n,l]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(b=+e[0],w=+e[1],t):[b,w]},t.stepMinor=function(e){return arguments.length?(m=+e[0],g=+e[1],t):[m,g]},t.precision=function(e){return arguments.length?(O=+e,d=i(h,l,90),y=r(o,n,O),_=i(p,f,90),v=r(c,s,O),t):O},t.extentMajor([[-180,-90+u.i],[180,90-u.i]]).extentMinor([[-180,-80-u.i],[180,80+u.i]])}function s(){return o()()}e.a=o,e.b=s;var a=n(136),u=n(49)},function(t,e,n){"use strict";var i=n(49);e.a=function(t,e){var n=t[0]*i.r,r=t[1]*i.r,o=e[0]*i.r,s=e[1]*i.r,a=Object(i.g)(r),u=Object(i.t)(r),c=Object(i.g)(s),l=Object(i.t)(s),h=a*Object(i.g)(n),f=a*Object(i.t)(n),p=c*Object(i.g)(o),d=c*Object(i.t)(o),y=2*Object(i.c)(Object(i.u)(Object(i.m)(s-r)+a*c*Object(i.m)(o-n))),_=Object(i.t)(y),v=y?function(t){var e=Object(i.t)(t*=y)/_,n=Object(i.t)(y-t)/_,r=n*h+e*p,o=n*f+e*d,s=n*u+e*l;return[Object(i.e)(o,r)*i.h,Object(i.e)(s,Object(i.u)(r*r+o*o))*i.h]}:function(){return[n*i.h,r*i.h]};return v.distance=y,v}},function(t,e,n){"use strict";var i=n(546),r=n(293),o=n(2093),s=n(860),a=n(2094),u=n(2095),c=n(2096),l=n(2097);e.a=function(t,e){function n(t){return t&&("function"==typeof p&&f.pointRadius(+p.apply(this,arguments)),Object(r.a)(t,h(f))),f.result()}var h,f,p=4.5;return n.area=function(t){return Object(r.a)(t,h(o.a)),o.a.result()},n.measure=function(t){return Object(r.a)(t,h(c.a)),c.a.result()},n.bounds=function(t){return Object(r.a)(t,h(s.a)),s.a.result()},n.centroid=function(t){return Object(r.a)(t,h(a.a)),a.a.result()},n.projection=function(e){return arguments.length?(h=null==e?(t=null,i.a):(t=e).stream,n):t},n.context=function(t){return arguments.length?(f=null==t?(e=null,new l.a):new u.a(e=t),"function"!=typeof p&&f.pointRadius(p),n):e},n.pointRadius=function(t){return arguments.length?(p="function"==typeof t?t:(f.pointRadius(+t),+t),n):p},n.projection(t).context(e)}},function(t,e,n){"use strict";function i(){_.point=r}function r(t,e){_.point=o,a=c=t,u=l=e}function o(t,e){y.add(l*t-c*e),c=t,l=e}function s(){o(a,u)}var a,u,c,l,h=n(310),f=n(49),p=n(268),d=Object(h.a)(),y=Object(h.a)(),_={point:p.a,lineStart:p.a,lineEnd:p.a,polygonStart:function(){_.lineStart=i,_.lineEnd=s},polygonEnd:function(){_.lineStart=_.lineEnd=_.point=p.a,d.add(Object(f.a)(y)),y.reset()},result:function(){var t=d/2;return d.reset(),t}};e.a=_},function(t,e,n){"use strict";function i(t,e){v+=t,m+=e,++g}function r(){j.point=o}function o(t,e){j.point=s,i(d=t,y=e)}function s(t,e){var n=t-d,r=e-y,o=Object(_.u)(n*n+r*r);b+=o*(d+t)/2,w+=o*(y+e)/2,O+=o,i(d=t,y=e)}function a(){j.point=i}function u(){j.point=l}function c(){h(f,p)}function l(t,e){j.point=h,i(f=d=t,p=y=e)}function h(t,e){var n=t-d,r=e-y,o=Object(_.u)(n*n+r*r);b+=o*(d+t)/2,w+=o*(y+e)/2,O+=o,o=y*t-d*e,x+=o*(d+t),T+=o*(y+e),S+=3*o,i(d=t,y=e)}var f,p,d,y,_=n(49),v=0,m=0,g=0,b=0,w=0,O=0,x=0,T=0,S=0,j={point:i,lineStart:r,lineEnd:a,polygonStart:function(){j.lineStart=u,j.lineEnd=c},polygonEnd:function(){j.point=i,j.lineStart=r,j.lineEnd=a},result:function(){var t=S?[x/S,T/S]:O?[b/O,w/O]:g?[v/g,m/g]:[NaN,NaN];return v=m=g=b=w=O=x=T=S=0,t}};e.a=j},function(t,e,n){"use strict";function i(t){this._context=t}e.a=i;var r=n(49),o=n(268);i.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,r.w)}},result:o.a}},function(t,e,n){"use strict";function i(t,e){d.point=r,s=u=t,a=c=e}function r(t,e){u-=t,c-=e,p.add(Object(h.u)(u*u+c*c)),u=t,c=e}var o,s,a,u,c,l=n(310),h=n(49),f=n(268),p=Object(l.a)(),d={point:f.a,lineStart:function(){d.point=i},lineEnd:function(){o&&r(s,a),d.point=f.a},polygonStart:function(){o=!0},polygonEnd:function(){o=null},result:function(){var t=+p;return p.reset(),t}};e.a=d},function(t,e,n){"use strict";function i(){this._string=[]}function r(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e.a=i,i.prototype={_radius:4.5,_circle:r(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=r(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},function(t,e,n){"use strict";function i(t){return Object(a.b)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function r(t,e){function n(i,r,o,a,u,l,h,f,p,d,y,_,v,m){var g=h-i,b=f-r,w=g*g+b*b;if(w>4*e&&v--){var O=a+d,x=u+y,T=l+_,S=Object(s.u)(O*O+x*x+T*T),j=Object(s.c)(T/=S),k=Object(s.a)(Object(s.a)(T)-1)<s.i||Object(s.a)(o-p)<s.i?(o+p)/2:Object(s.e)(x,O),M=t(k,j),A=M[0],P=M[1],E=A-i,N=P-r,C=b*E-g*N;(C*C/w>e||Object(s.a)((g*E+b*N)/w-.5)>.3||a*d+u*y+l*_<c)&&(n(i,r,o,a,u,l,A,P,k,O/=S,x/=S,T,v,m),m.point(A,P),n(A,P,k,O,x,T,h,f,p,d,y,_,v,m))}}return function(e){function i(n,i){n=t(n,i),e.point(n[0],n[1])}function r(){g=NaN,T.point=s,e.lineStart()}function s(i,r){var s=Object(o.a)([i,r]),a=t(i,r);n(g,b,m,w,O,x,g=a[0],b=a[1],m=i,w=s[0],O=s[1],x=s[2],u,e),e.point(g,b)}function a(){T.point=i,e.lineEnd()}function c(){r(),T.point=l,T.lineEnd=h}function l(t,e){s(f=t,e),p=g,d=b,y=w,_=O,v=x,T.point=s}function h(){n(g,b,m,w,O,x,p,d,f,y,_,v,u,e),T.lineEnd=a,a()}var f,p,d,y,_,v,m,g,b,w,O,x,T={point:i,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),T.lineStart=c},polygonEnd:function(){e.polygonEnd(),T.lineStart=r}};return T}}var o=n(352),s=n(49),a=n(409),u=16,c=Object(s.g)(30*s.r);e.a=function(t,e){return+e?r(t,e):i(t)}},function(t,e,n){"use strict";function i(t){function e(t,e){return[t*n,Object(r.t)(e)/n]}var n=Object(r.g)(t);return e.invert=function(t,e){return[t/n,Object(r.c)(e*n)]},e}e.a=i;var r=n(49)},function(t,e,n){"use strict";function i(t){var e=t.length;return{point:function(n,i){for(var r=-1;++r<e;)t[r].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}var r=n(49),o=n(861),s=n(547),a=n(549);e.a=function(){function t(t){var e=t[0],n=t[1];return f=null,c.point(e,n),f||(l.point(e,n),f)||(h.point(e,n),f)}function e(){return n=u=null,t}var n,u,c,l,h,f,p=Object(o.a)(),d=Object(s.b)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),y=Object(s.b)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=p.scale(),n=p.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?d:r>=.166&&r<.234&&i>=-.214&&i<-.115?y:p).invert(t)},t.stream=function(t){return n&&u===t?n:n=i([p.stream(u=t),d.stream(t),y.stream(t)])},t.precision=function(t){return arguments.length?(p.precision(t),d.precision(t),y.precision(t),e()):p.precision()},t.scale=function(e){return arguments.length?(p.scale(e),d.scale(.35*e),y.scale(e),t.translate(p.translate())):p.scale()},t.translate=function(t){if(!arguments.length)return p.translate();var n=p.scale(),i=+t[0],o=+t[1];return c=p.translate(t).clipExtent([[i-.455*n,o-.238*n],[i+.455*n,o+.238*n]]).stream(_),l=d.translate([i-.307*n,o+.201*n]).clipExtent([[i-.425*n+r.i,o+.12*n+r.i],[i-.214*n-r.i,o+.234*n-r.i]]).stream(_),h=y.translate([i-.205*n,o+.212*n]).clipExtent([[i-.214*n+r.i,o+.166*n+r.i],[i-.115*n-r.i,o+.234*n-r.i]]).stream(_),e()},t.fitExtent=function(e,n){return Object(a.a)(t,e,n)},t.fitSize=function(e,n){return Object(a.b)(t,e,n)},t.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(49),r=n(353),o=n(245),s=Object(r.b)(function(t){return Object(i.u)(2/(1+t))});s.invert=Object(r.a)(function(t){return 2*Object(i.c)(t/2)}),e.b=function(){return Object(o.a)(s).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(49),r=n(353),o=n(245),s=Object(r.b)(function(t){return(t=Object(i.b)(t))&&t/Object(i.t)(t)});s.invert=Object(r.a)(function(t){return t}),e.b=function(){return Object(o.a)(s).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";function i(t){return Object(o.v)((o.l+t)/2)}function r(t,e){function n(t,e){u>0?e<-o.l+o.i&&(e=-o.l+o.i):e>o.l-o.i&&(e=o.l-o.i);var n=u/Object(o.p)(i(e),s);return[n*Object(o.t)(s*t),u-n*Object(o.g)(s*t)]}var r=Object(o.g)(t),s=t===e?Object(o.t)(t):Object(o.n)(r/Object(o.g)(e))/Object(o.n)(i(e)/i(t)),u=r*Object(o.p)(i(t),s)/s;return s?(n.invert=function(t,e){var n=u-e,i=Object(o.s)(s)*Object(o.u)(t*t+n*n);return[Object(o.e)(t,Object(o.a)(n))/s*Object(o.s)(n),2*Object(o.d)(Object(o.p)(u/i,1/s))-o.l]},n):a.c}e.a=r;var o=n(49),s=n(548),a=n(550);e.b=function(){return Object(s.a)(r).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";function i(t,e){function n(t,e){var n=a-e,i=o*t;return[n*Object(r.t)(i),a-n*Object(r.g)(i)]}var i=Object(r.g)(t),o=t===e?Object(r.t)(t):(i-Object(r.g)(e))/(e-t),a=i/o+t;return Object(r.a)(o)<r.i?s.b:(n.invert=function(t,e){var n=a-e;return[Object(r.e)(t,Object(r.a)(n))/o*Object(r.s)(n),a-Object(r.s)(o)*Object(r.u)(t*t+n*n)]},n)}e.a=i;var r=n(49),o=n(548),s=n(862);e.b=function(){return Object(o.a)(i).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";function i(t,e){var n=Object(r.g)(e),i=Object(r.g)(t)*n;return[n*Object(r.t)(t)/i,Object(r.t)(e)/i]}e.b=i;var r=n(49),o=n(353),s=n(245);i.invert=Object(o.a)(r.d),e.a=function(){return Object(s.a)(i).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";function i(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?o.a:Object(s.b)({point:function(r,o){this.stream.point(r*t+n,o*e+i)}})}var r=n(408),o=n(546),s=n(409),a=n(549);e.a=function(){function t(){return u=c=null,l}var e,n,s,u,c,l,h=1,f=0,p=0,d=1,y=1,_=o.a,v=null,m=o.a;return l={stream:function(t){return u&&c===t?u:u=_(m(c=t))},postclip:function(i){return arguments.length?(m=i,v=e=n=s=null,t()):m},clipExtent:function(i){return arguments.length?(m=null==i?(v=e=n=s=null,o.a):Object(r.a)(v=+i[0][0],e=+i[0][1],n=+i[1][0],s=+i[1][1]),t()):null==v?null:[[v,e],[n,s]]},scale:function(e){return arguments.length?(_=i((h=+e)*d,h*y,f,p),t()):h},translate:function(e){return arguments.length?(_=i(h*d,h*y,f=+e[0],p=+e[1]),t()):[f,p]},reflectX:function(e){return arguments.length?(_=i(h*(d=e?-1:1),h*y,f,p),t()):d<0},reflectY:function(e){return arguments.length?(_=i(h*d,h*(y=e?-1:1),f,p),t()):y<0},fitExtent:function(t,e){return Object(a.a)(l,t,e)},fitSize:function(t,e){return Object(a.b)(l,t,e)}}}},function(t,e,n){"use strict";function i(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}e.b=i;var r=n(245),o=n(49);i.invert=function(t,e){var n,i=e,r=25;do{var s=i*i,a=s*s;i-=n=(i*(1.007226+s*(.015085+a*(.028874*s-.044475-.005916*a)))-e)/(1.007226+s*(.045255+a*(.259866*s-.311325-.005916*11*a)))}while(Object(o.a)(n)>o.i&&--r>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},e.a=function(){return Object(r.a)(i).scale(175.295)}},function(t,e,n){"use strict";function i(t,e){return[Object(r.g)(e)*Object(r.t)(t),Object(r.t)(e)]}e.b=i;var r=n(49),o=n(353),s=n(245);i.invert=Object(o.a)(r.c),e.a=function(){return Object(s.a)(i).scale(249.5).clipAngle(90+r.i)}},function(t,e,n){"use strict";function i(t,e){var n=Object(r.g)(e),i=1+Object(r.g)(t)*n;return[n*Object(r.t)(t)/i,Object(r.t)(e)/i]}e.b=i;var r=n(49),o=n(353),s=n(245);i.invert=Object(o.a)(function(t){return 2*Object(r.d)(t)}),e.a=function(){return Object(s.a)(i).scale(250).clipAngle(142)}},function(t,e,n){"use strict";function i(t,e){return[Object(r.n)(Object(r.v)((r.l+e)/2)),-t]}e.b=i;var r=n(49),o=n(550);i.invert=function(t,e){return[-e,2*Object(r.d)(Object(r.k)(t))-r.l]},e.a=function(){var t=Object(o.b)(i),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";var i=n(2112);n.d(e,"a",function(){return i.a});var r=n(551);n.d(e,"b",function(){return r.c});var o=n(2124);n.d(e,"c",function(){return o.a});var s=n(863);n.d(e,"e",function(){return s.a});var a=n(864);n.d(e,"d",function(){return a.a});var u=n(2126);n.d(e,"f",function(){return u.a});var c=n(2127);n.d(e,"g",function(){return c.a});var l=n(2128);n.d(e,"h",function(){return l.a});var h=n(2129);n.d(e,"i",function(){return h.a});var f=n(2130);n.d(e,"j",function(){return f.a});var p=n(354);n.d(e,"k",function(){return p.a});var d=n(410);n.d(e,"m",function(){return d.a});var y=n(2131);n.d(e,"n",function(){return y.a});var _=n(553);n.d(e,"o",function(){return _.a});var v=n(2132);n.d(e,"l",function(){return v.a})},function(t,e,n){"use strict";function i(t,e){return t.parent===e.parent?1:2}function r(t){return t.reduce(o,0)/t.length}function o(t,e){return t+e.x}function s(t){return 1+t.reduce(a,0)}function a(t,e){return Math.max(t,e.y)}function u(t){for(var e;e=t.children;)t=e[0];return t}function c(t){for(var e;e=t.children;)t=e[e.length-1];return t}e.a=function(){function t(t){var i,l=0;t.eachAfter(function(t){var n=t.children;n?(t.x=r(n),t.y=s(n)):(t.x=i?l+=e(t,i):0,t.y=0,i=t)});var h=u(t),f=c(t),p=h.x-e(h,f)/2,d=f.x+e(f,h)/2;return t.eachAfter(a?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*o}:function(e){e.x=(e.x-p)/(d-p)*n,e.y=(1-(t.y?e.y/t.y:1))*o})}var e=i,n=1,o=1,a=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(a=!1,n=+e[0],o=+e[1],t):a?null:[n,o]},t.nodeSize=function(e){return arguments.length?(a=!0,n=+e[0],o=+e[1],t):a?[n,o]:null},t}},function(t,e,n){"use strict";function i(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}e.a=function(){return this.eachAfter(i)}},function(t,e,n){"use strict";e.a=function(t){var e,n,i,r,o=this,s=[o];do{for(e=s.reverse(),s=[];o=e.pop();)if(t(o),n=o.children)for(i=0,r=n.length;i<r;++i)s.push(n[i])}while(s.length);return this}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,i=this,r=[i];i=r.pop();)if(t(i),e=i.children)for(n=e.length-1;n>=0;--n)r.push(e[n]);return this}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,i,r=this,o=[r],s=[];r=o.pop();)if(s.push(r),e=r.children)for(n=0,i=e.length;n<i;++n)o.push(e[n]);for(;r=s.pop();)t(r);return this}},function(t,e,n){"use strict";e.a=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})}},function(t,e,n){"use strict";e.a=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}},function(t,e,n){"use strict";function i(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}e.a=function(t){for(var e=this,n=i(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var o=r.length;t!==n;)r.splice(o,0,t),t=t.parent;return r}},function(t,e,n){"use strict";e.a=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.each(function(e){t.push(e)}),t}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}},function(t,e,n){"use strict";e.a=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}},function(t,e,n){"use strict";function i(t){return Math.sqrt(t.value)}function r(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function o(t,e){return function(n){if(i=n.children){var i,r,o,s=i.length,u=t(n)*e||0;if(u)for(r=0;r<s;++r)i[r].r+=u;if(o=Object(a.b)(i),u)for(r=0;r<s;++r)i[r].r-=u;n.r=o+u}}}function s(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var a=n(863),u=n(552),c=n(865);e.a=function(){function t(t){return t.x=n/2,t.y=a/2,e?t.eachBefore(r(e)).eachAfter(o(l,.5)).eachBefore(s(1)):t.eachBefore(r(i)).eachAfter(o(c.a,1)).eachAfter(o(l,t.r/Math.min(n,a))).eachBefore(s(Math.min(n,a)/(2*t.r))),t}var e=null,n=1,a=1,l=c.a;return t.radius=function(n){return arguments.length?(e=Object(u.a)(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],a=+e[1],t):[n,a]},t.padding=function(e){return arguments.length?(l="function"==typeof e?e:Object(c.b)(+e),t):l},t}},function(t,e,n){"use strict";function i(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}n.d(e,"b",function(){return r}),e.a=i;var r=Array.prototype.slice},function(t,e,n){"use strict";var i=n(866),r=n(354);e.a=function(){function t(t){var r=t.height+1;return t.x0=t.y0=s,t.x1=n,t.y1=o/r,t.eachBefore(e(o,r)),a&&t.eachBefore(i.a),t}function e(t,e){return function(n){n.children&&Object(r.a)(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var i=n.x0,o=n.y0,a=n.x1-s,u=n.y1-s;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),n.x0=i,n.y0=o,n.x1=a,n.y1=u}}var n=1,o=1,s=0,a=!1;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(n=+e[0],o=+e[1],t):[n,o]},t.padding=function(e){return arguments.length?(s=+e,t):s},t}},function(t,e,n){"use strict";function i(t){return t.id}function r(t){return t.parentId}var o=n(552),s=n(551),a="$",u={depth:-1},c={};e.a=function(){function t(t){var i,r,o,l,h,f,p,d=t.length,y=new Array(d),_={};for(r=0;r<d;++r)i=t[r],h=y[r]=new s.a(i),null!=(f=e(i,r,t))&&(f+="")&&(p=a+(h.id=f),_[p]=p in _?c:h);for(r=0;r<d;++r)if(h=y[r],null!=(f=n(t[r],r,t))&&(f+="")){if(!(l=_[a+f]))throw new Error("missing: "+f);if(l===c)throw new Error("ambiguous: "+f);l.children?l.children.push(h):l.children=[h],h.parent=l}else{if(o)throw new Error("multiple roots");o=h}if(!o)throw new Error("no root");if(o.parent=u,o.eachBefore(function(t){t.depth=t.parent.depth+1,--d}).eachBefore(s.b),o.parent=null,d>0)throw new Error("cycle");return o}var e=i,n=r;return t.id=function(n){return arguments.length?(e=Object(o.b)(n),t):e},t.parentId=function(e){return arguments.length?(n=Object(o.b)(e),t):n},t}},function(t,e,n){"use strict";function i(t,e){return t.parent===e.parent?1:2}function r(t){var e=t.children;return e?e[0]:t.t}function o(t){var e=t.children;return e?e[e.length-1]:t.t}function s(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function a(t){for(var e,n=0,i=0,r=t.children,o=r.length;--o>=0;)e=r[o],e.z+=n,e.m+=n,n+=e.s+(i+=e.c)}function u(t,e,n){return t.a.parent===e.parent?t.a:n}function c(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function l(t){for(var e,n,i,r,o,s=new c(t,0),a=[s];e=a.pop();)if(i=e._.children)for(e.children=new Array(o=i.length),r=o-1;r>=0;--r)a.push(n=e.children[r]=new c(i[r],r)),n.parent=e;return(s.parent=new c(null,0)).children=[s],s}var h=n(551);c.prototype=Object.create(h.a.prototype),e.a=function(){function t(t){var i=l(t);if(i.eachAfter(e),i.parent.m=-i.z,i.eachBefore(n),y)t.eachBefore(h);else{var r=t,o=t,s=t;t.eachBefore(function(t){t.x<r.x&&(r=t),t.x>o.x&&(o=t),t.depth>s.depth&&(s=t)});var a=r===o?1:f(r,o)/2,u=a-r.x,c=p/(o.x+a+u),_=d/(s.depth||1);t.eachBefore(function(t){t.x=(t.x+u)*c,t.y=t.depth*_})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){a(t);var r=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+f(t._,i._),t.m=t.z-r):t.z=r}else i&&(t.z=i.z+f(t._,i._));t.parent.A=c(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function c(t,e,n){if(e){for(var i,a=t,c=t,l=e,h=a.parent.children[0],p=a.m,d=c.m,y=l.m,_=h.m;l=o(l),a=r(a),l&&a;)h=r(h),c=o(c),c.a=t,i=l.z+y-a.z-p+f(l._,a._),i>0&&(s(u(l,t,n),t,i),p+=i,d+=i),y+=l.m,p+=a.m,_+=h.m,d+=c.m;l&&!o(c)&&(c.t=l,c.m+=y-d),a&&!r(h)&&(h.t=a,h.m+=p-_,n=t)}return n}function h(t){t.x*=p,t.y=t.depth*d}var f=i,p=1,d=1,y=null;return t.separation=function(e){return arguments.length?(f=e,t):f},t.size=function(e){return arguments.length?(y=!1,p=+e[0],d=+e[1],t):y?null:[p,d]},t.nodeSize=function(e){return arguments.length?(y=!0,p=+e[0],d=+e[1],t):y?[p,d]:null},t}},function(t,e,n){"use strict";var i=n(866),r=n(553),o=n(552),s=n(865);e.a=function(){function t(t){return t.x0=t.y0=0,t.x1=u,t.y1=c,t.eachBefore(e),l=[0],a&&t.eachBefore(i.a),t}function e(t){var e=l[t.depth],i=t.x0+e,r=t.y0+e,o=t.x1-e,s=t.y1-e;o<i&&(i=o=(i+o)/2),s<r&&(r=s=(r+s)/2),t.x0=i,t.y0=r,t.x1=o,t.y1=s,t.children&&(e=l[t.depth+1]=h(t)/2,i+=y(t)-e,r+=f(t)-e,o-=p(t)-e,s-=d(t)-e,o<i&&(i=o=(i+o)/2),s<r&&(r=s=(r+s)/2),n(t,i,r,o,s))}var n=r.a,a=!1,u=1,c=1,l=[0],h=s.a,f=s.a,p=s.a,d=s.a,y=s.a;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(u=+e[0],c=+e[1],t):[u,c]},t.tile=function(e){return arguments.length?(n=Object(o.b)(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(h="function"==typeof e?e:Object(s.b)(+e),t):h},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(f="function"==typeof e?e:Object(s.b)(+e),t):f},t.paddingRight=function(e){return arguments.length?(p="function"==typeof e?e:Object(s.b)(+e),t):p},t.paddingBottom=function(e){return arguments.length?(d="function"==typeof e?e:Object(s.b)(+e),t):d},t.paddingLeft=function(e){return arguments.length?(y="function"==typeof e?e:Object(s.b)(+e),t):y},t}},function(t,e,n){"use strict";e.a=function(t,e,n,i,r){function o(t,e,n,i,r,s,a){if(t>=e-1){var c=u[t];return c.x0=i,c.y0=r,c.x1=s,c.y1=a,void 0}for(var h=l[t],f=n/2+h,p=t+1,d=e-1;p<d;){var y=p+d>>>1;l[y]<f?p=y+1:d=y}f-l[p-1]<l[p]-f&&t+1<p&&--p;var _=l[p]-h,v=n-_;if(s-i>a-r){var m=(i*v+s*_)/n;o(t,p,_,i,r,m,a),o(p,e,v,m,r,s,a)}else{var g=(r*v+a*_)/n;o(t,p,_,i,r,s,g),o(p,e,v,i,g,s,a)}}var s,a,u=t.children,c=u.length,l=new Array(c+1);for(l[0]=a=s=0;s<c;++s)l[s+1]=a+=u[s].value;o(0,c,t.value,e,n,i,r)}},function(t,e,n){"use strict";var i=n(354),r=n(410);e.a=function(t,e,n,o,s){(1&t.depth?r.a:i.a)(t,e,n,o,s)}},function(t,e,n){"use strict";var i=n(354),r=n(410),o=n(553);e.a=function t(e){function n(t,n,s,a,u){if((c=t._squarify)&&c.ratio===e)for(var c,l,h,f,p,d=-1,y=c.length,_=t.value;++d<y;){for(l=c[d],h=l.children,f=l.value=0,p=h.length;f<p;++f)l.value+=h[f].value;l.dice?Object(i.a)(l,n,s,a,s+=(u-s)*l.value/_):Object(r.a)(l,n,s,n+=(a-n)*l.value/_,u),_-=l.value}else t._squarify=c=Object(o.c)(e,t,n,s,a,u),c.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(o.b)},function(t,e,n){"use strict";var i=n(2134);n.d(e,"a",function(){return i.a});var r=n(2135);n.d(e,"b",function(){return r.a});var o=n(2136);n.d(e,"d",function(){return o.a});var s=n(2138);n.d(e,"c",function(){return s.a});var a=n(2139);n.d(e,"e",function(){return a.a})},function(t,e,n){"use strict";e.a=function(t){for(var e,n=-1,i=t.length,r=t[i-1],o=0;++n<i;)e=r,r=t[n],o+=e[1]*r[0]-e[0]*r[1];return o/2}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,i=-1,r=t.length,o=0,s=0,a=t[r-1],u=0;++i<r;)e=a,a=t[i],u+=n=e[0]*a[1]-a[0]*e[1],o+=(e[0]+a[0])*n,s+=(e[1]+a[1])*n;return u*=3,[o/u,s/u]}},function(t,e,n){"use strict";function i(t,e){return t[0]-e[0]||t[1]-e[1]}function r(t){for(var e=t.length,n=[0,1],i=2,r=2;r<e;++r){for(;i>1&&Object(o.a)(t[n[i-2]],t[n[i-1]],t[r])<=0;)--i;n[i++]=r}return n.slice(0,i)}var o=n(2137);e.a=function(t){if((n=t.length)<3)return null;var e,n,o=new Array(n),s=new Array(n);for(e=0;e<n;++e)o[e]=[+t[e][0],+t[e][1],e];for(o.sort(i),e=0;e<n;++e)s[e]=[o[e][0],-o[e][1]];var a=r(o),u=r(s),c=u[0]===a[0],l=u[u.length-1]===a[a.length-1],h=[];for(e=a.length-1;e>=0;--e)h.push(t[o[a[e]][2]]);for(e=+c;e<u.length-l;++e)h.push(t[o[u[e]][2]]);return h}},function(t,e,n){"use strict";e.a=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}},function(t,e,n){"use strict";e.a=function(t,e){for(var n,i,r=t.length,o=t[r-1],s=e[0],a=e[1],u=o[0],c=o[1],l=!1,h=0;h<r;++h)o=t[h],n=o[0],i=o[1],i>a!=c>a&&s<(u-n)*(a-i)/(c-i)+n&&(l=!l),u=n,c=i;return l}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,i=-1,r=t.length,o=t[r-1],s=o[0],a=o[1],u=0;++i<r;)e=s,n=a,o=t[i],s=o[0],a=o[1],e-=s,n-=a,u+=Math.sqrt(e*e+n*n);return u}},function(t,e,n){"use strict";var i=n(2141);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";function i(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function r(t){if(!t._start)try{o(t)}catch(e){if(t._tasks[t._ended+t._active-1])a(t,e);else if(!t._data)throw e}}function o(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],i=n.length-1,r=n[i];n[i]=s(t,e),--t._waiting,++t._active,n=r.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||h)}}function s(t,e){return function(n,i){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?a(t,n):(t._data[e]=i,t._waiting?r(t):u(t))))}}function a(t,e){var n,i=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--i>=0;)if((n=t._tasks[i])&&(t._tasks[i]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,u(t)}function u(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function c(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new i(t)}e.a=c;var l=n(2142),h={};i.prototype=c.prototype={constructor:i,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=l.a.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),r(this),this},abort:function(){return null==this._error&&a(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},u(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,u(this),this}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=[].slice},function(t,e,n){"use strict";var i=n(2144);n.d(e,"f",function(){return i.a});var r=n(867);n.d(e,"e",function(){return r.a});var o=n(2145);n.d(e,"d",function(){return o.a});var s=n(2146);n.d(e,"a",function(){return s.a});var a=n(868);n.d(e,"c",function(){return a.a});var u=n(2147);n.d(e,"b",function(){return u.a})},function(t,e,n){"use strict";var i=n(311);e.a=function t(e){function n(t,n){return t=null==t?0:+t,n=null==n?1:+n,1===arguments.length?(n=t,t=0):n-=t,function(){return e()*n+t}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";var i=n(311),r=n(867);e.a=function t(e){function n(){var t=r.a.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";var i=n(311),r=n(868);e.a=function t(e){function n(t){var n=r.a.source(e)(t);return function(){return n()/t}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";var i=n(311);e.a=function t(e){function n(t){return function(){return-Math.log(1-e())/t}}return n.source=t,n}(i.a)},function(t,e,n){"use strict";var i=n(554);n.d(e,"d",function(){return i.a});var r=n(2149);n.d(e,"b",function(){return r.a});var o=n(2150);n.d(e,"c",function(){return o.a});var s=n(2151);n.d(e,"e",function(){return s.a});var a=n(2152);n.d(e,"g",function(){return a.a});var u=n(2153);n.d(e,"a",function(){return u.a});var c=n(2154);n.d(e,"f",function(){return c.a})},function(t,e,n){"use strict";var i=n(411);e.a=Object(i.a)("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)})},function(t,e,n){"use strict";var i=n(411);e.a=Object(i.a)("application/json",function(t){return JSON.parse(t.responseText)})},function(t,e,n){"use strict";var i=n(411);e.a=Object(i.a)("text/plain",function(t){return t.responseText})},function(t,e,n){"use strict";var i=n(411);e.a=Object(i.a)("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e})},function(t,e,n){"use strict";var i=n(539),r=n(869);e.a=Object(r.a)("text/csv",i.c)},function(t,e,n){"use strict";var i=n(539),r=n(869);e.a=Object(r.a)("text/tab-separated-values",i.h)},function(t,e,n){"use strict";var i=n(2156);n.d(e,"i",function(){return i.a}),n.d(e,"o",function(){return i.b});var r=n(2157);n.d(e,"j",function(){return r.a});var o=n(355);n.d(e,"l",function(){return o.a});var s=n(2159);n.d(e,"m",function(){return s.a});var a=n(870);n.d(e,"n",function(){return a.a}),n.d(e,"k",function(){return a.b});var u=n(2160);n.d(e,"p",function(){return u.a}),n.d(e,"t",function(){return u.b});var c=n(2161);n.d(e,"q",function(){return c.a});var l=n(2162);n.d(e,"r",function(){return l.a});var h=n(2163);n.d(e,"u",function(){return h.a});var f=n(873);n.d(e,"v",function(){return f.b});var p=n(2179);n.d(e,"w",function(){return p.a});var d=n(2180);n.d(e,"x",function(){return d.a});var y=n(2181);n.d(e,"z",function(){return y.a});var _=n(2182);n.d(e,"A",function(){return _.a});var v=n(2183);n.d(e,"y",function(){return v.a});var m=n(2184);n.d(e,"b",function(){return m.a});var g=n(2185);n.d(e,"f",function(){return g.b}),n.d(e,"h",function(){return g.c}),n.d(e,"a",function(){return g.a});var b=n(2186);n.d(e,"g",function(){return b.a}),n.d(e,"d",function(){return b.c}),n.d(e,"c",function(){return b.b}),n.d(e,"e",function(){return b.d});var w=n(2187);n.d(e,"s",function(){return w.a})},function(t,e,n){"use strict";function i(){function t(){var t=o().length,i=c[1]<c[0],r=c[i-0],a=c[1-i];e=(a-r)/Math.max(1,t-h+2*f),l&&(e=Math.floor(e)),r+=(a-r-e*(t-h))*p,n=e*(1-h),l&&(r=Math.round(r),n=Math.round(n));var d=Object(s.s)(t).map(function(t){return r+e*t});return u(i?d.reverse():d)}var e,n,r=Object(a.a)().unknown(void 0),o=r.domain,u=r.range,c=[0,1],l=!1,h=0,f=0,p=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(o(e),t()):o()},r.range=function(e){return arguments.length?(c=[+e[0],+e[1]],t()):c.slice()},r.rangeRound=function(e){return c=[+e[0],+e[1]],l=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,t()):l},r.padding=function(e){return arguments.length?(h=f=Math.max(0,Math.min(1,e)),t()):h},r.paddingInner=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},r.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},r.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),t()):p},r.copy=function(){return i().domain(o()).range(c).round(l).paddingInner(h).paddingOuter(f).align(p)},t()}function r(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return r(e())},t}function o(){return r(i().paddingInner(1))}e.a=i,e.b=o;var s=n(136),a=n(870)},function(t,e,n){"use strict";function i(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=r.a.call(n,s.a),t):e.slice()},t.copy=function(){return i().domain(e)},Object(o.b)(t)}e.a=i;var r=n(294),o=n(355),s=n(871)},function(t,e,n){"use strict";var i=n(136),r=n(544);e.a=function(t,e,n){var o,s=t[0],a=t[t.length-1],u=Object(i.A)(s,a,null==e?10:e);switch(n=Object(r.e)(null==n?",f":n),n.type){case"s":var c=Math.max(Math.abs(s),Math.abs(a));return null!=n.precision||isNaN(o=Object(r.g)(u,c))||(n.precision=o),Object(r.d)(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=Object(r.h)(u,Math.max(Math.abs(s),Math.abs(a))))||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=Object(r.f)(u))||(n.precision=o-2*("%"===n.type))}return Object(r.a)(n)}},function(t,e,n){"use strict";function i(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Object(f.a)(e)}function r(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function o(t){return isFinite(t)?+("1e"+t):t<0?0:t}function s(t){return 10===t?o:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function a(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function u(t){return function(e){return-t(-e)}}function c(){function t(){return f=a(o),y=s(o),n()[0]<0&&(f=u(f),y=u(y)),e}var e=Object(d.b)(i,r).domain([1,10]),n=e.domain,o=10,f=a(10),y=s(10);return e.base=function(e){return arguments.length?(o=+e,t()):o},e.domain=function(e){return arguments.length?(n(e),t()):n()},e.ticks=function(t){var e,i=n(),r=i[0],s=i[i.length-1];(e=s<r)&&(h=r,r=s,s=h);var a,u,c,h=f(r),p=f(s),d=null==t?10:+t,_=[];if(!(o%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,r>0){for(;h<p;++h)for(u=1,a=y(h);u<o;++u)if(!((c=a*u)<r)){if(c>s)break;_.push(c)}}else for(;h<p;++h)for(u=o-1,a=y(h);u>=1;--u)if(!((c=a*u)<r)){if(c>s)break;_.push(c)}}else _=Object(l.B)(h,p,Math.min(p-h,d)).map(y);return e?_.reverse():_},e.tickFormat=function(t,n){if(null==n&&(n=10===o?".0e":","),"function"!=typeof n&&(n=Object(h.a)(n)),t===1/0)return n;null==t&&(t=10);var i=Math.max(1,o*t/e.ticks().length);return function(t){var e=t/y(Math.round(f(t)));return e*o<o-.5&&(e*=o),e<=i?n(t):""}},e.nice=function(){return n(Object(p.a)(n(),{floor:function(t){return y(Math.floor(f(t)))},ceil:function(t){return y(Math.ceil(f(t)))}}))},e.copy=function(){return Object(d.a)(e,c().base(o))},e}e.a=c;var l=n(136),h=n(544),f=n(555),p=n(872),d=n(412)},function(t,e,n){"use strict";function i(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function r(){function t(t,e){return(e=i(e,n)-(t=i(t,n)))?function(r){return(i(r,n)-t)/e}:Object(s.a)(e)}function e(t,e){return e=i(e,n)-(t=i(t,n)),function(r){return i(t+e*r,1/n)}}var n=1,o=Object(u.b)(t,e),c=o.domain;return o.exponent=function(t){return arguments.length?(n=+t,c(c())):n},o.copy=function(){return Object(u.a)(o,r().exponent(n))},Object(a.b)(o)}function o(){return r().exponent(.5)}e.a=r,e.b=o;var s=n(555),a=n(355),u=n(412)},function(t,e,n){"use strict";function i(){function t(){var t=0,i=Math.max(1,s.length);for(a=new Array(i-1);++t<i;)a[t-1]=Object(r.r)(n,t/i);return e}function e(t){if(!isNaN(t=+t))return s[Object(r.b)(a,t)]}var n=[],s=[],a=[];return e.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var i,o=0,s=e.length;o<s;++o)null==(i=e[o])||isNaN(i=+i)||n.push(i);return n.sort(r.a),t()},e.range=function(e){return arguments.length?(s=o.b.call(e),t()):s.slice()},e.quantiles=function(){return a.slice()},e.copy=function(){return i().domain(n).range(s)},e}e.a=i;var r=n(136),o=n(294)},function(t,e,n){"use strict";function i(){function t(t){if(t<=t)return l[Object(r.b)(c,t,0,u)]}function e(){var e=-1;for(c=new Array(u);++e<u;)c[e]=((e+1)*a-(e-u)*n)/(u+1);return t}var n=0,a=1,u=1,c=[.5],l=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],a=+t[1],e()):[n,a]},t.range=function(t){return arguments.length?(u=(l=o.b.call(t)).length-1,e()):l.slice()},t.invertExtent=function(t){var e=l.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,c[0]]:e>=u?[c[u-1],a]:[c[e-1],c[e]]},t.copy=function(){return i().domain([n,a]).range(l)},Object(s.b)(t)}e.a=i;var r=n(136),o=n(294),s=n(355)},function(t,e,n){"use strict";function i(){function t(t){if(t<=t)return n[Object(r.b)(e,t,0,s)]}var e=[.5],n=[0,1],s=1;return t.domain=function(i){return arguments.length?(e=o.b.call(i),s=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=o.b.call(i),s=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var i=n.indexOf(t);return[e[i-1],e[i]]},t.copy=function(){return i().domain(e).range(n)},t}e.a=i;var r=n(136),o=n(294)},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var i=n(133),r=Object(i.a)(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Object(i.a)(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):r:null},e.a=r;var o=r.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setTime(Math.floor(t/r.d)*r.d)},function(t,e){t.setTime(+t+e*r.d)},function(t,e){return(e-t)/r.d},function(t){return t.getUTCSeconds()});e.a=o;var s=o.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setTime(Math.floor(t/r.c)*r.c)},function(t,e){t.setTime(+t+e*r.c)},function(t,e){return(e-t)/r.c},function(t){return t.getMinutes()});e.a=o;var s=o.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){var e=t.getTimezoneOffset()*r.c%r.b;e<0&&(e+=r.b),t.setTime(Math.floor((+t-e)/r.b)*r.b+e)},function(t,e){t.setTime(+t+e*r.b)},function(t,e){return(e-t)/r.b},function(t){return t.getHours()});e.a=o;var s=o.range},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*r.c)/r.a},function(t){return t.getDate()-1});e.b=o;var s=o.range},function(t,e,n){"use strict";function i(t){return Object(r.a)(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*o.c)/o.e})}n.d(e,"g",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"k",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"i",function(){return l}),n.d(e,"a",function(){return h}),n.d(e,"e",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"d",function(){return d}),n.d(e,"l",function(){return y}),n.d(e,"n",function(){return _}),n.d(e,"j",function(){return v}),n.d(e,"b",function(){return m}),n.d(e,"f",function(){return g});var r=n(133),o=n(260),s=i(0),a=i(1),u=i(2),c=i(3),l=i(4),h=i(5),f=i(6),p=s.range,d=a.range,y=u.range,_=c.range,v=l.range,m=h.range,g=f.range},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var i=n(133),r=Object(i.a)(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()});e.a=r;var o=r.range},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var i=n(133),r=Object(i.a)(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(i.a)(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null},e.a=r;var o=r.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*r.c)},function(t,e){return(e-t)/r.c},function(t){return t.getUTCMinutes()});e.a=o;var s=o.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*r.b)},function(t,e){return(e-t)/r.b},function(t){return t.getUTCHours()});e.a=o;var s=o.range},function(t,e,n){"use strict";n.d(e,"b",function(){return s});var i=n(133),r=n(260),o=Object(i.a)(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/r.a},function(t){return t.getUTCDate()-1});e.a=o;var s=o.range},function(t,e,n){"use strict";function i(t){return Object(r.a)(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/o.e})}n.d(e,"g",function(){return s}),n.d(e,"c",function(){return a}),n.d(e,"k",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"i",function(){return l}),n.d(e,"a",function(){return h}),n.d(e,"e",function(){return f}),n.d(e,"h",function(){return p}),n.d(e,"d",function(){return d}),n.d(e,"l",function(){return y}),n.d(e,"n",function(){return _}),n.d(e,"j",function(){return v}),n.d(e,"b",function(){return m}),n.d(e,"f",function(){return g});var r=n(133),o=n(260),s=i(0),a=i(1),u=i(2),c=i(3),l=i(4),h=i(5),f=i(6),p=s.range,d=a.range,y=u.range,_=c.range,v=l.range,m=h.range,g=f.range},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var i=n(133),r=Object(i.a)(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()});e.a=r;var o=r.range},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var i=n(133),r=Object(i.a)(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});r.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Object(i.a)(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null},e.a=r;var o=r.range},function(t,e,n){"use strict";function i(t){var e=new Date(t);return isNaN(e)?null:e}var r=n(875),o=n(557),s=+new Date("2000-01-01T00:00:00.000Z")?i:Object(o.e)(r.b);e.a=s},function(t,e,n){"use strict";var i=n(873),r=n(556),o=n(413);e.a=function(){return Object(i.a)(o._7,o.R,o._5,o.F,o.J,o.N,o.V,o.L,r.g).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}},function(t,e,n){"use strict";var i=n(356);e.a=Object(i.a)("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf")},function(t,e,n){"use strict";var i=n(356);e.a=Object(i.a)("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6")},function(t,e,n){"use strict";var i=n(356);e.a=Object(i.a)("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9")},function(t,e,n){"use strict";var i=n(356);e.a=Object(i.a)("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")},function(t,e,n){"use strict";var i=n(244),r=n(238);e.a=Object(r.f)(Object(i.b)(300,.5,0),Object(i.b)(-240,.5,1))},function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"a",function(){return s});var i=n(244),r=n(238),o=Object(r.f)(Object(i.b)(-100,.75,.35),Object(i.b)(80,1.5,.8)),s=Object(r.f)(Object(i.b)(260,.75,.35),Object(i.b)(80,1.5,.8)),a=Object(i.b)();e.b=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return a.h=360*t-100,a.s=1.5-1.5*e,a.l=.8-.9*e,a+""}},function(t,e,n){"use strict";function i(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}n.d(e,"c",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a});var r=n(356);e.a=i(Object(r.a)("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var o=i(Object(r.a)("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),s=i(Object(r.a)("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),a=i(Object(r.a)("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},function(t,e,n){"use strict";function i(t){function e(e){var i=(e-n)/(o-n);return t(s?Math.max(0,Math.min(1,i)):i)}var n=0,o=1,s=!1;return e.domain=function(t){return arguments.length?(n=+t[0],o=+t[1],e):[n,o]},e.clamp=function(t){return arguments.length?(s=!!t,e):s},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return i(t).domain([n,o]).clamp(s)},Object(r.b)(e)}e.a=i;var r=n(355)},function(t,e,n){"use strict";var i=n(2189);n.d(e,"a",function(){return i.a});var r=n(876);n.d(e,"b",function(){return r.a});var o=n(558);n.d(e,"v",function(){return o.a});var s=n(2190);n.d(e,"A",function(){return s.a});var a=n(2193);n.d(e,"c",function(){return a.a}),n.d(e,"C",function(){return a.a});var u=n(878);n.d(e,"w",function(){return u.a}),n.d(e,"D",function(){return u.a});var c=n(879);n.d(e,"B",function(){return c.a});var l=n(2194);n.d(e,"x",function(){return l.a}),n.d(e,"z",function(){return l.c}),n.d(e,"y",function(){return l.b});var h=n(2195);n.d(e,"P",function(){return h.a}),n.d(e,"X",function(){return h.b});var f=n(881);n.d(e,"Q",function(){return f.a});var p=n(882);n.d(e,"R",function(){return p.a});var d=n(883);n.d(e,"S",function(){return d.a});var y=n(885);n.d(e,"T",function(){return y.a});var _=n(884);n.d(e,"U",function(){return _.a});var v=n(886);n.d(e,"V",function(){return v.a});var m=n(887);n.d(e,"W",function(){return m.a});var g=n(2196);n.d(e,"e",function(){return g.a});var b=n(2197);n.d(e,"f",function(){return b.a});var w=n(416);n.d(e,"d",function(){return w.b});var O=n(2198);n.d(e,"g",function(){return O.a});var x=n(888);n.d(e,"i",function(){return x.b});var T=n(889);n.d(e,"j",function(){return T.b});var S=n(417);n.d(e,"h",function(){return S.b});var j=n(2199);n.d(e,"l",function(){return j.a});var k=n(2200);n.d(e,"m",function(){return k.a});var M=n(560);n.d(e,"k",function(){return M.a});var A=n(2201);n.d(e,"o",function(){return A.a});var P=n(414);n.d(e,"n",function(){return P.a});var E=n(2202);n.d(e,"p",function(){return E.a}),n.d(e,"q",function(){return E.b});var N=n(2203);n.d(e,"r",function(){return N.a});var C=n(2204);n.d(e,"s",function(){return C.a}),n.d(e,"t",function(){return C.b}),n.d(e,"u",function(){return C.c});var q=n(2205);n.d(e,"E",function(){return q.a});var F=n(2206);n.d(e,"G",function(){return F.a});var R=n(2207);n.d(e,"F",function(){return R.a});var B=n(358);n.d(e,"H",function(){return B.a});var L=n(2208);n.d(e,"I",function(){return L.a});var I=n(2209);n.d(e,"J",function(){return I.a});var D=n(561);n.d(e,"K",function(){return D.a});var U=n(2210);n.d(e,"L",function(){return U.a});var z=n(2211);n.d(e,"M",function(){return z.a});var V=n(359);n.d(e,"N",function(){return V.a});var G=n(2212);n.d(e,"O",function(){return G.a})},function(t,e,n){"use strict";function i(t){return t.innerRadius}function r(t){return t.outerRadius}function o(t){return t.startAngle}function s(t){return t.endAngle}function a(t){return t&&t.padAngle}function u(t,e,n,i,r,o,s,a){var u=n-t,c=i-e,l=s-r,h=a-o,f=(l*(e-o)-h*(t-r))/(h*u-l*c);return[t+f*u,e+f*c]}function c(t,e,n,i,r,o,s){var a=t-n,u=e-i,c=(s?o:-o)/Object(f.l)(a*a+u*u),l=c*u,h=-c*a,p=t+l,d=e+h,y=n+l,_=i+h,v=(p+y)/2,m=(d+_)/2,g=y-p,b=_-d,w=g*g+b*b,O=r-o,x=p*_-y*d,T=(b<0?-1:1)*Object(f.l)(Object(f.h)(0,O*O*w-x*x)),S=(x*b-g*T)/w,j=(-x*g-b*T)/w,k=(x*b+g*T)/w,M=(-x*g+b*T)/w,A=S-v,P=j-m,E=k-v,N=M-m;return A*A+P*P>E*E+N*N&&(S=k,j=M),{cx:S,cy:j,x01:-l,y01:-h,x11:S*(r/O-1),y11:j*(r/O-1)}}var l=n(292),h=n(295),f=n(357);e.a=function(){function t(){var t,i,r=+e.apply(this,arguments),o=+n.apply(this,arguments),s=y.apply(this,arguments)-f.g,a=_.apply(this,arguments)-f.g,h=Object(f.a)(a-s),g=a>s;if(m||(m=t=Object(l.a)()),o<r&&(i=o,o=r,r=i),o>f.f)if(h>f.m-f.f)m.moveTo(o*Object(f.e)(s),o*Object(f.k)(s)),m.arc(0,0,o,s,a,!g),r>f.f&&(m.moveTo(r*Object(f.e)(a),r*Object(f.k)(a)),m.arc(0,0,r,a,s,g));else{var b,w,O=s,x=a,T=s,S=a,j=h,k=h,M=v.apply(this,arguments)/2,A=M>f.f&&(d?+d.apply(this,arguments):Object(f.l)(r*r+o*o)),P=Object(f.i)(Object(f.a)(o-r)/2,+p.apply(this,arguments)),E=P,N=P;if(A>f.f){var C=Object(f.c)(A/r*Object(f.k)(M)),q=Object(f.c)(A/o*Object(f.k)(M));(j-=2*C)>f.f?(C*=g?1:-1,T+=C,S-=C):(j=0,T=S=(s+a)/2),(k-=2*q)>f.f?(q*=g?1:-1,O+=q,x-=q):(k=0,O=x=(s+a)/2)}var F=o*Object(f.e)(O),R=o*Object(f.k)(O),B=r*Object(f.e)(S),L=r*Object(f.k)(S);if(P>f.f){var I=o*Object(f.e)(x),D=o*Object(f.k)(x),U=r*Object(f.e)(T),z=r*Object(f.k)(T);if(h<f.j){var V=j>f.f?u(F,R,U,z,I,D,B,L):[B,L],G=F-V[0],W=R-V[1],H=I-V[0],Y=D-V[1],Q=1/Object(f.k)(Object(f.b)((G*H+W*Y)/(Object(f.l)(G*G+W*W)*Object(f.l)(H*H+Y*Y)))/2),X=Object(f.l)(V[0]*V[0]+V[1]*V[1]);E=Object(f.i)(P,(r-X)/(Q-1)),N=Object(f.i)(P,(o-X)/(Q+1))}}k>f.f?N>f.f?(b=c(U,z,F,R,o,N,g),w=c(I,D,B,L,o,N,g),m.moveTo(b.cx+b.x01,b.cy+b.y01),N<P?m.arc(b.cx,b.cy,N,Object(f.d)(b.y01,b.x01),Object(f.d)(w.y01,w.x01),!g):(m.arc(b.cx,b.cy,N,Object(f.d)(b.y01,b.x01),Object(f.d)(b.y11,b.x11),!g),m.arc(0,0,o,Object(f.d)(b.cy+b.y11,b.cx+b.x11),Object(f.d)(w.cy+w.y11,w.cx+w.x11),!g),m.arc(w.cx,w.cy,N,Object(f.d)(w.y11,w.x11),Object(f.d)(w.y01,w.x01),!g))):(m.moveTo(F,R),m.arc(0,0,o,O,x,!g)):m.moveTo(F,R),r>f.f&&j>f.f?E>f.f?(b=c(B,L,I,D,r,-E,g),w=c(F,R,U,z,r,-E,g),m.lineTo(b.cx+b.x01,b.cy+b.y01),E<P?m.arc(b.cx,b.cy,E,Object(f.d)(b.y01,b.x01),Object(f.d)(w.y01,w.x01),!g):(m.arc(b.cx,b.cy,E,Object(f.d)(b.y01,b.x01),Object(f.d)(b.y11,b.x11),!g),m.arc(0,0,r,Object(f.d)(b.cy+b.y11,b.cx+b.x11),Object(f.d)(w.cy+w.y11,w.cx+w.x11),g),m.arc(w.cx,w.cy,E,Object(f.d)(w.y11,w.x11),Object(f.d)(w.y01,w.x01),!g))):m.arc(0,0,r,S,T,g):m.lineTo(B,L)}else m.moveTo(0,0);if(m.closePath(),t)return m=null,t+""||null}var e=i,n=r,p=Object(h.a)(0),d=null,y=o,_=s,v=a,m=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,i=(+y.apply(this,arguments)+ +_.apply(this,arguments))/2-f.j/2;return[Object(f.e)(i)*t,Object(f.k)(i)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Object(h.a)(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Object(h.a)(+e),t):n},t.cornerRadius=function(e){return arguments.length?(p="function"==typeof e?e:Object(h.a)(+e),t):p},t.padRadius=function(e){return arguments.length?(d=null==e?null:"function"==typeof e?e:Object(h.a)(+e),t):d},t.startAngle=function(e){return arguments.length?(y="function"==typeof e?e:Object(h.a)(+e),t):y},t.endAngle=function(e){return arguments.length?(_="function"==typeof e?e:Object(h.a)(+e),t):_},t.padAngle=function(e){return arguments.length?(v="function"==typeof e?e:Object(h.a)(+e),t):v},t.context=function(e){return arguments.length?(m=null==e?null:e,t):m},t}},function(t,e,n){"use strict";var i=n(295),r=n(2191),o=n(2192),s=n(357);e.a=function(){function t(t){var i,r,o,h,f,p=t.length,d=0,y=new Array(p),_=new Array(p),v=+u.apply(this,arguments),m=Math.min(s.m,Math.max(-s.m,c.apply(this,arguments)-v)),g=Math.min(Math.abs(m)/p,l.apply(this,arguments)),b=g*(m<0?-1:1);for(i=0;i<p;++i)(f=_[y[i]=i]=+e(t[i],i,t))>0&&(d+=f);for(null!=n?y.sort(function(t,e){return n(_[t],_[e])}):null!=a&&y.sort(function(e,n){return a(t[e],t[n])}),i=0,o=d?(m-p*b)/d:0;i<p;++i,v=h)r=y[i],f=_[r],h=v+(f>0?f*o:0)+b,_[r]={data:t[r],index:i,value:f,startAngle:v,endAngle:h,padAngle:g};return _}var e=o.a,n=r.a,a=null,u=Object(i.a)(0),c=Object(i.a)(s.m),l=Object(i.a)(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Object(i.a)(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,a=null,t):n},t.sort=function(e){return arguments.length?(a=e,n=null,t):a},t.startAngle=function(e){return arguments.length?(u="function"==typeof e?e:Object(i.a)(+e),t):u},t.endAngle=function(e){return arguments.length?(c="function"==typeof e?e:Object(i.a)(+e),t):c},t.padAngle=function(e){return arguments.length?(l="function"==typeof e?e:Object(i.a)(+e),t):l},t}},function(t,e,n){"use strict";e.a=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var i=n(877),r=n(876),o=n(878);e.a=function(){var t=Object(r.a)().curve(i.a),e=t.curve,n=t.lineX0,s=t.lineX1,a=t.lineY0,u=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Object(o.b)(n())},delete t.lineX0,t.lineEndAngle=function(){return Object(o.b)(s())},delete t.lineX1,t.lineInnerRadius=function(){return Object(o.b)(a())},delete t.lineY0,t.lineOuterRadius=function(){return Object(o.b)(u())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Object(i.b)(t)):e()._curve},t}},function(t,e,n){"use strict";function i(t){return t.source}function r(t){return t.target}function o(t){function e(){var e,i=p.a.call(arguments),r=n.apply(this,i),c=o.apply(this,i);if(u||(u=e=Object(f.a)()),t(u,+s.apply(this,(i[0]=r,i)),+a.apply(this,i),+s.apply(this,(i[0]=c,i)),+a.apply(this,i)),e)return u=null,e+""||null}var n=i,o=r,s=y.a,a=y.b,u=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(o=t,e):o},e.x=function(t){return arguments.length?(s="function"==typeof t?t:Object(d.a)(+t),e):s},e.y=function(t){return arguments.length?(a="function"==typeof t?t:Object(d.a)(+t),e):a},e.context=function(t){return arguments.length?(u=null==t?null:t,e):u},e}function s(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,r,i,r)}function a(t,e,n,i,r){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+r)/2,i,n,i,r)}function u(t,e,n,i,r){var o=Object(_.a)(e,n),s=Object(_.a)(e,n=(n+r)/2),a=Object(_.a)(i,n),u=Object(_.a)(i,r);t.moveTo(o[0],o[1]),t.bezierCurveTo(s[0],s[1],a[0],a[1],u[0],u[1])}function c(){return o(s)}function l(){return o(a)}function h(){var t=o(u);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}e.a=c,e.c=l,e.b=h;var f=n(292),p=n(880),d=n(295),y=n(559),_=n(879)},function(t,e,n){"use strict";n.d(e,"b",function(){return f});var i=n(292),r=n(881),o=n(882),s=n(883),a=n(884),u=n(885),c=n(886),l=n(887),h=n(295),f=[r.a,o.a,s.a,u.a,a.a,c.a,l.a];e.a=function(){function t(){var t;if(o||(o=t=Object(i.a)()),e.apply(this,arguments).draw(o,+n.apply(this,arguments)),t)return o=null,t+""||null}var e=Object(h.a)(r.a),n=Object(h.a)(64),o=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Object(h.a)(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Object(h.a)(+e),t):n},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}},function(t,e,n){"use strict";function i(t){this._context=t}var r=n(415),o=n(416);i.prototype={areaStart:r.a,areaEnd:r.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Object(o.c)(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},e.a=function(t){return new i(t)}},function(t,e,n){"use strict";function i(t){this._context=t}var r=n(416);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Object(r.c)(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},e.a=function(t){return new i(t)}},function(t,e,n){"use strict";function i(t,e){this._basis=new r.a(t),this._beta=e}var r=n(416);i.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],s=t[n]-r,a=e[n]-o,u=-1;++u<=n;)i=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+i*s),this._beta*e[u]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}},e.a=function t(e){function n(t){return 1===e?new r.a(t):new i(t,e)}return n.beta=function(e){return t(+e)},n}(.85)},function(t,e,n){"use strict";function i(t,e){this._context=t,this._alpha=e}var r=n(888),o=n(415),s=n(560);i.prototype={areaStart:o.a,areaEnd:o.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(s.b)(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.a=function t(e){function n(t){return e?new i(t,e):new r.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function i(t,e){this._context=t,this._alpha=e}var r=n(889),o=n(560);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(o.b)(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},e.a=function t(e){function n(t){return e?new i(t,e):new r.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function i(t){this._context=t}var r=n(415);i.prototype={areaStart:r.a,areaEnd:r.a,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},e.a=function(t){return new i(t)}},function(t,e,n){"use strict";function i(t){return t<0?-1:1}function r(t,e,n){var r=t._x1-t._x0,o=e-t._x1,s=(t._y1-t._y0)/(r||o<0&&-0),a=(n-t._y1)/(o||r<0&&-0),u=(s*o+a*r)/(r+o);return(i(s)+i(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(u))||0}function o(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function s(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*e,o-a,s-a*n,o,s)}function a(t){this._context=t}function u(t){this._context=new c(t)}function c(t){this._context=t}function l(t){return new a(t)}function h(t){return new u(t)}e.a=l,e.b=h,a.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s(this,this._t0,o(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,s(this,o(this,n=r(this,t,e)),n);break;default:s(this,this._t0,n=r(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(u.prototype=Object.create(a.prototype)).point=function(t,e){a.prototype.point.call(this,e,t)},c.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}}},function(t,e,n){"use strict";function i(t){this._context=t}function r(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(r[i-1]=s[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(s[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=r(t),o=r(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],o[0][s],i[1][s],o[1][s],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},e.a=function(t){return new i(t)}},function(t,e,n){"use strict";function i(t,e){this._context=t,this._t=e}function r(t){return new i(t,0)}function o(t){return new i(t,1)}e.c=r,e.b=o,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},e.a=function(t){return new i(t,.5)}},function(t,e,n){"use strict";function i(t,e){return t[e]}var r=n(880),o=n(295),s=n(358),a=n(359);e.a=function(){function t(t){var i,r,o=e.apply(this,arguments),s=t.length,a=o.length,l=new Array(a);for(i=0;i<a;++i){for(var h,f=o[i],p=l[i]=new Array(s),d=0;d<s;++d)p[d]=h=[0,+c(t[d],f,d,t)],h.data=t[d];p.key=f}for(i=0,r=n(l);i<a;++i)l[r[i]].index=i;return u(l,r),l}var e=Object(o.a)([]),n=a.a,u=s.a,c=i;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:Object(o.a)(r.a.call(n)),t):e},t.value=function(e){return arguments.length?(c="function"==typeof e?e:Object(o.a)(+e),t):c},t.order=function(e){return arguments.length?(n=null==e?a.a:"function"==typeof e?e:Object(o.a)(r.a.call(e)),t):n},t.offset=function(e){return arguments.length?(u=null==e?s.a:e,t):u},t}},function(t,e,n){"use strict";var i=n(358);e.a=function(t,e){if((r=t.length)>0){for(var n,r,o,s=0,a=t[0].length;s<a;++s){for(o=n=0;n<r;++n)o+=t[n][s][1]||0;if(o)for(n=0;n<r;++n)t[n][s][1]/=o}Object(i.a)(t,e)}}},function(t,e,n){"use strict";e.a=function(t,e){if((a=t.length)>1)for(var n,i,r,o,s,a,u=0,c=t[e[0]].length;u<c;++u)for(o=s=0,n=0;n<a;++n)(r=(i=t[e[n]][u])[1]-i[0])>=0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=s,i[0]=s+=r):i[0]=o}},function(t,e,n){"use strict";var i=n(358);e.a=function(t,e){if((n=t.length)>0){for(var n,r=0,o=t[e[0]],s=o.length;r<s;++r){for(var a=0,u=0;a<n;++a)u+=t[a][r][1]||0;o[r][1]+=o[r][0]=-u/2}Object(i.a)(t,e)}}},function(t,e,n){"use strict";var i=n(358);e.a=function(t,e){if((o=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,o,s=0,a=1;a<r;++a){for(var u=0,c=0,l=0;u<o;++u){for(var h=t[e[u]],f=h[a][1]||0,p=h[a-1][1]||0,d=(f-p)/2,y=0;y<u;++y){var _=t[e[y]];d+=(_[a][1]||0)-(_[a-1][1]||0)}c+=f,l+=d*f}n[a-1][1]+=n[a-1][0]=s,c&&(s-=l/c)}n[a-1][1]+=n[a-1][0]=s,Object(i.a)(t,e)}}},function(t,e,n){"use strict";var i=n(561);e.a=function(t){return Object(i.a)(t).reverse()}},function(t,e,n){"use strict";var i=n(359),r=n(561);e.a=function(t){var e,n,o=t.length,s=t.map(r.b),a=Object(i.a)(t).sort(function(t,e){return s[e]-s[t]}),u=0,c=0,l=[],h=[];for(e=0;e<o;++e)n=a[e],u<c?(u+=s[n],l.push(n)):(c+=s[n],h.push(n));return h.reverse().concat(l)}},function(t,e,n){"use strict";var i=n(359);e.a=function(t){return Object(i.a)(t).reverse()}},function(t,e,n){"use strict";var i=n(2214);n.d(e,"a",function(){return i.a})},function(t,e,n){"use strict";var i=n(2215),r=n(2216),o=n(360);e.a=function(){function t(t){return new o.d(t.map(function(i,r){var s=[Math.round(e(i,r,t)/o.f)*o.f,Math.round(n(i,r,t)/o.f)*o.f];return s.index=r,s.data=i,s}),s)}var e=r.a,n=r.b,s=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(i.a)(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),t):n},t.extent=function(e){return arguments.length?(s=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):s&&[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},t.size=function(e){return arguments.length?(s=null==e?null:[[0,0],[+e[0],+e[1]]],t):s&&[s[1][0]-s[0][0],s[1][1]-s[0][1]]},t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(t){return t[0]}function r(t){return t[1]}e.a=i,e.b=r},function(t,e,n){"use strict";function i(){Object(l.a)(this),this.edge=this.site=this.circle=null}function r(t){var e=y.pop()||new i;return e.site=t,e}function o(t){Object(f.b)(t),d.a.remove(t),y.push(t),Object(l.a)(t)}function s(t){var e=t.circle,n=e.x,i=e.cy,r=[n,i],s=t.P,a=t.N,u=[t];o(t);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<d.f&&Math.abs(i-c.circle.cy)<d.f;)s=c.P,u.unshift(c),o(c),c=s;u.unshift(c),Object(f.b)(c);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<d.f&&Math.abs(i-l.circle.cy)<d.f;)a=l.N,u.push(l),o(l),l=a;u.push(l),Object(f.b)(l);var h,y=u.length;for(h=1;h<y;++h)l=u[h],c=u[h-1],Object(p.d)(l.edge,c.site,l.site,r);c=u[0],l=u[y-1],l.edge=Object(p.c)(c.site,l.site,null,r),Object(f.a)(c),Object(f.a)(l)}function a(t){for(var e,n,i,o,s=t[0],a=t[1],l=d.a._;l;)if((i=u(l,a)-s)>d.f)l=l.L;else{if(!((o=s-c(l,a))>d.f)){i>-d.f?(e=l.P,n=l):o>-d.f?(e=l,n=l.N):e=n=l;break}if(!l.R){e=l;break}l=l.R}Object(h.c)(t);var y=r(t);if(d.a.insert(e,y),e||n){if(e===n)return Object(f.b)(e),n=r(e.site),d.a.insert(y,n),y.edge=n.edge=Object(p.c)(e.site,y.site),Object(f.a)(e),void Object(f.a)(n);if(!n)return void(y.edge=Object(p.c)(e.site,y.site));Object(f.b)(e),Object(f.b)(n);var _=e.site,v=_[0],m=_[1],g=t[0]-v,b=t[1]-m,w=n.site,O=w[0]-v,x=w[1]-m,T=2*(g*x-b*O),S=g*g+b*b,j=O*O+x*x,k=[(x*S-b*j)/T+v,(g*j-O*S)/T+m];Object(p.d)(n.edge,_,w,k),y.edge=Object(p.c)(_,t,null,k),n.edge=Object(p.c)(t,w,null,k),Object(f.a)(e),Object(f.a)(n)}}function u(t,e){var n=t.site,i=n[0],r=n[1],o=r-e;if(!o)return i;var s=t.P;if(!s)return-1/0;n=s.site;var a=n[0],u=n[1],c=u-e;if(!c)return a;var l=a-i,h=1/o-1/c,f=l/c;return h?(-f+Math.sqrt(f*f-2*h*(l*l/(-2*c)-u+c/2+r-o/2)))/h+i:(i+a)/2}function c(t,e){var n=t.N;if(n)return u(n,e);var i=t.site;return i[1]===e?i[0]:1/0}e.b=s,e.a=a;var l=n(562),h=n(890),f=n(891),p=n(563),d=n(360),y=[]},function(t,e,n){"use strict";var i=n(2219);n.d(e,"a",function(){return i.a});var r=n(892);n.d(e,"c",function(){return r.b}),n.d(e,"b",function(){return r.c})},function(t,e,n){"use strict";function i(){return!h.c.button}function r(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function o(){return this.__zoom||y.c}function s(){return-h.c.deltaY*(h.c.deltaMode?120:1)/500}function a(){return"ontouchstart"in this}var u=n(291),c=n(523),l=n(238),h=n(125),f=n(536),p=n(2220),d=n(2221),y=n(892),_=n(2222);e.a=function(){function t(t){t.property("__zoom",o).on("wheel.zoom",O).on("mousedown.zoom",x).on("dblclick.zoom",T).filter(C).on("touchstart.zoom",S).on("touchmove.zoom",j).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function e(t,e){return e=Math.max(q,Math.min(F,e)),e===t.k?t:new y.a(e,t.x,t.y)}function n(t,e,n){var i=e[0]-n[0]*t.k,r=e[1]-n[1]*t.k;return i===t.x&&r===t.y?t:new y.a(t.k,i,r)}function v(t,e){var n=t.invertX(e[0][0])-R,i=t.invertX(e[1][0])-B,r=t.invertY(e[0][1])-L,o=t.invertY(e[1][1])-I;return t.translate(i>n?(n+i)/2:Math.min(0,n)||Math.max(0,i),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function g(t,e,n){t.on("start.zoom",function(){b(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).end()}).tween("zoom",function(){var t=this,i=arguments,r=b(t,i),o=E.apply(t,i),s=n||m(o),a=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),u=t.__zoom,c="function"==typeof e?e.apply(t,i):e,l=U(u.invert(s).concat(a/u.k),c.invert(s).concat(a/c.k));return function(t){if(1===t)t=c;else{var e=l(t),n=a/e[2];t=new y.a(n,s[0]-e[0]*n,s[1]-e[1]*n)}r.zoom(null,t)}})}function b(t,e){for(var n,i=0,r=z.length;i<r;++i)if((n=z[i]).that===t)return n;return new w(t,e)}function w(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=E.apply(t,e)}function O(){function t(){i.wheel=null,i.end()}if(P.apply(this,arguments)){var i=b(this,arguments),r=this.__zoom,o=Math.max(q,Math.min(F,r.k*Math.pow(2,N.apply(this,arguments)))),s=Object(h.f)(this);if(i.wheel)i.mouse[0][0]===s[0]&&i.mouse[0][1]===s[1]||(i.mouse[1]=r.invert(i.mouse[0]=s)),clearTimeout(i.wheel);else{if(r.k===o)return;i.mouse=[s,r.invert(s)],Object(f.b)(this),i.start()}Object(_.a)(),i.wheel=setTimeout(t,W),i.zoom("mouse",v(n(e(r,o),i.mouse[0],i.mouse[1]),i.extent))}}function x(){function t(){if(Object(_.a)(),!i.moved){var t=h.c.clientX-s,e=h.c.clientY-a;i.moved=t*t+e*e>H}i.zoom("mouse",v(n(i.that.__zoom,i.mouse[0]=Object(h.f)(i.that),i.mouse[1]),i.extent))}function e(){r.on("mousemove.zoom mouseup.zoom",null),Object(c.c)(h.c.view,i.moved),Object(_.a)(),i.end()}if(!A&&P.apply(this,arguments)){var i=b(this,arguments),r=Object(h.i)(h.c.view).on("mousemove.zoom",t,!0).on("mouseup.zoom",e,!0),o=Object(h.f)(this),s=h.c.clientX,a=h.c.clientY;Object(c.b)(h.c.view),Object(_.b)(),i.mouse=[o,this.__zoom.invert(o)],Object(f.b)(this),i.start()}}function T(){if(P.apply(this,arguments)){var i=this.__zoom,r=Object(h.f)(this),o=i.invert(r),s=i.k*(h.c.shiftKey?.5:2),a=v(n(e(i,s),r,o),E.apply(this,arguments));Object(_.a)(),D>0?Object(h.i)(this).transition().duration(D).call(g,a,r):Object(h.i)(this).call(t.transform,a)}}function S(){if(P.apply(this,arguments)){var t,e,n,i,r=b(this,arguments),o=h.c.changedTouches,s=o.length;for(Object(_.b)(),e=0;e<s;++e)n=o[e],i=Object(h.o)(this,o,n.identifier),i=[i,this.__zoom.invert(i),n.identifier],r.touch0?r.touch1||(r.touch1=i):(r.touch0=i,t=!0);if(M&&(M=clearTimeout(M),!r.touch1))return r.end(),void((i=Object(h.i)(this).on("dblclick.zoom"))&&i.apply(this,arguments));t&&(M=setTimeout(function(){M=null},G),Object(f.b)(this),r.start())}}function j(){var t,i,r,o,s=b(this,arguments),a=h.c.changedTouches,u=a.length;for(Object(_.a)(),M&&(M=clearTimeout(M)),t=0;t<u;++t)i=a[t],r=Object(h.o)(this,a,i.identifier),s.touch0&&s.touch0[2]===i.identifier?s.touch0[0]=r:s.touch1&&s.touch1[2]===i.identifier&&(s.touch1[0]=r);if(i=s.that.__zoom,s.touch1){var c=s.touch0[0],l=s.touch0[1],f=s.touch1[0],p=s.touch1[1],d=(d=f[0]-c[0])*d+(d=f[1]-c[1])*d,y=(y=p[0]-l[0])*y+(y=p[1]-l[1])*y;i=e(i,Math.sqrt(d/y)),r=[(c[0]+f[0])/2,(c[1]+f[1])/2],o=[(l[0]+p[0])/2,(l[1]+p[1])/2]}else{if(!s.touch0)return;r=s.touch0[0],o=s.touch0[1]}s.zoom("touch",v(n(i,r,o),s.extent))}function k(){var t,e,n=b(this,arguments),i=h.c.changedTouches,r=i.length;for(Object(_.b)(),A&&clearTimeout(A),A=setTimeout(function(){A=null},G),t=0;t<r;++t)e=i[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}var M,A,P=i,E=r,N=s,C=a,q=0,F=1/0,R=-F,B=F,L=R,I=B,D=250,U=l.v,z=[],V=Object(u.a)("start","zoom","end"),G=500,W=150,H=0;return t.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",o),t!==n?g(t,e):n.interrupt().each(function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},t.scaleBy=function(e,n){t.scaleTo(e,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},t.scaleTo=function(i,r){t.transform(i,function(){var t=E.apply(this,arguments),i=this.__zoom,o=m(t),s=i.invert(o);return v(n(e(i,"function"==typeof r?r.apply(this,arguments):r),o,s),t)})},t.translateBy=function(e,n,i){t.transform(e,function(){return v(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof i?i.apply(this,arguments):i),E.apply(this,arguments))})},t.translateTo=function(e,n,i){t.transform(e,function(){var t=E.apply(this,arguments),e=this.__zoom,r=m(t);return v(y.c.translate(r[0],r[1]).scale(e.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof i?-i.apply(this,arguments):-i),t)})},w.prototype={start:function(){return 1==++this.active&&(this.index=z.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(z.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(e){Object(h.b)(new d.a(t,e,this.that.__zoom),V.apply,V,[e,this.that,this.args])}},t.wheelDelta=function(e){return arguments.length?(N="function"==typeof e?e:Object(p.a)(+e),t):N},t.filter=function(e){return arguments.length?(P="function"==typeof e?e:Object(p.a)(!!e),t):P},t.touchable=function(e){return arguments.length?(C="function"==typeof e?e:Object(p.a)(!!e),t):C},t.extent=function(e){return arguments.length?(E="function"==typeof e?e:Object(p.a)([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),t):E},t.scaleExtent=function(e){return arguments.length?(q=+e[0],F=+e[1],t):[q,F]},t.translateExtent=function(e){return arguments.length?(R=+e[0][0],B=+e[1][0],L=+e[0][1],I=+e[1][1],t):[[R,L],[B,I]]},t.duration=function(e){return arguments.length?(D=+e,t):D},t.interpolate=function(e){return arguments.length?(U=e,t):U},t.on=function(){var e=V.on.apply(V,arguments);return e===V?t:e},t.clickDistance=function(e){return arguments.length?(H=(e=+e)*e,t):Math.sqrt(H)},t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function i(t,e,n){this.target=t,this.type=e,this.transform=n}e.a=i},function(t,e,n){"use strict";function i(){r.c.stopImmediatePropagation()}e.b=i;var r=n(125);e.a=function(){r.c.preventDefault(),r.c.stopImmediatePropagation()}},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),r=n(2),o={instrumentByPatchID:r.instrumentByPatchID,instrumentFamilyByID:r.instrumentFamilyByID,parse:function(t){return(new i.Midi).decode(t)},load:function(t,e){var n=(new i.Midi).load(t);return e&&n.then(e),n},create:function(){return new i.Midi}};e.default=o,t.exports=o},function(t,e){"use strict";function n(t){return t.replace(/\u0000/g,"")}function i(t,e){return 60/e.bpm*(t/e.PPQ)}function r(t){return"number"==typeof t}function o(t){return"string"==typeof t}function s(t){return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][t%12]+(Math.floor(t/12)-1)}var a=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i;return function(e){return o(e)&&t.test(e)}}(),u=function(){var t=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,e={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(n){var i=t.exec(n),r=i[1],o=i[2];return e[r.toLowerCase()]+12*(parseInt(o)+1)}}();t.exports={cleanName:n,ticksToSeconds:i,isString:o,isNumber:r,isPitch:a,midiToPitch:s,pitchToMidi:u}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"],e.instrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","ethnic","percussive","sound effects"]},function(t,e){"use strict";function n(t,e){var n=0,i=t.length,r=i;if(i>0&&t[i-1].time<=e)return i-1;for(;r>n;){var o=Math.floor(n+(r-n)/2),s=t[o],a=t[o+1];if(s.time===e){for(var u=o;u<t.length;u++){t[u].time===e&&(o=u)}return o}if(s.time<e&&a.time>e)return o;s.time>e?r=o:s.time<e&&(n=o+1)}return-1}function i(t,e){if(t.length){var i=n(t,e.time);t.splice(i+1,0,e)}else t.push(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryInsert=i},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoContro"},o=function(){function t(e,i,r){n(this,t),this.number=e,this.time=i,this.value=r}return i(t,[{key:"name",get:function(){return r.hasOwnProperty(this.number)?r[this.number]:void 0}}]),t}();e.Control=o},function(t,e){"use strict";function n(t){for(var e={PPQ:t.header.ticksPerBeat},n=0;n<t.tracks.length;n++)for(var i=t.tracks[n],r=0;r<i.length;r++){var o=i[r];"meta"===o.type&&("timeSignature"===o.subtype?e.timeSignature=[o.numerator,o.denominator]:"setTempo"===o.subtype&&(e.bpm||(e.bpm=6e7/o.microsecondsPerBeat)))}return e.bpm=e.bpm||120,e}Object.defineProperty(e,"__esModule",{value:!0}),e.parseHeader=n},function(t,e){"use strict";function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[n];if(i.length>r)return!0}return!1}function i(t,e,n){for(var i=0,r=1/0,o=0;o<t.length;o++){var s=t[o],a=e[o];s[a]&&s[a].time<r&&(i=o,r=s[a].time)}n[i](t[i][e[i]]),e[i]+=1}function r(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];for(var o=e.filter(function(t,e){return e%2==0}),s=new Uint32Array(o.length),a=e.filter(function(t,e){return e%2==1});n(o,s);)i(o,s,a)}Object.defineProperty(e,"__esModule",{value:!0}),e.Merge=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Midi=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(11),a=i(s),u=n(10),c=i(u),l=n(1),h=i(l),f=n(9),p=n(5),d=function(){function t(){r(this,t),this.header={bpm:120,timeSignature:[4,4],PPQ:480},this.tracks=[]}return o(t,[{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise(function(r,o){var s=new XMLHttpRequest;s.open(i,t),s.responseType="arraybuffer",s.addEventListener("load",function(){4===s.readyState&&200===s.status?r(e.decode(s.response)):o(s.status)}),s.addEventListener("error",o),s.send(n)})}},{key:"decode",value:function(t){var e=this;if(t instanceof ArrayBuffer){var n=new Uint8Array(t);t=String.fromCharCode.apply(null,n)}var i=(0,a.default)(t);return this.header=(0,p.parseHeader)(i),this.tracks=[],i.tracks.forEach(function(t){var n=new f.Track;e.tracks.push(n);var i=0;t.forEach(function(t){i+=h.default.ticksToSeconds(t.deltaTime,e.header),"meta"===t.type&&"trackName"===t.subtype?n.name=h.default.cleanName(t.text):"noteOn"===t.subtype?n.noteOn(t.noteNumber,i,t.velocity/127):"noteOff"===t.subtype?n.noteOff(t.noteNumber,i):"controller"===t.subtype&&t.controllerType?n.cc(t.controllerType,i,t.value/127):"meta"===t.type&&"instrumentName"===t.subtype?n.instrument=t.text:"channel"===t.type&&"programChange"===t.subtype&&n.patch(t.programNumber)})}),this}},{key:"encode",value:function(){var t=this,e=new c.default.File({ticks:this.header.PPQ});return this.tracks.forEach(function(n,i){var r=e.addTrack();r.setTempo(t.bpm),n.encode(r,t.header)}),e.toBytes()}},{key:"toArray",value:function(){for(var t=this.encode(),e=new Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}},{key:"track",value:function(t){var e=new f.Track(t);return this.tracks.push(e),e}},{key:"get",value:function(t){return h.default.isNumber(t)?this.tracks[t]:this.tracks.find(function(e){return e.name===t})}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,i=new t;return i.header=this.header,i.tracks=this.tracks.map(function(t){return t.slice(e,n)}),i}},{key:"startTime",get:function(){var t=this.tracks.map(function(t){return t.startTime});return Math.min.apply(Math,t)}},{key:"bpm",get:function(){return this.header.bpm},set:function(t){var e=this.header.bpm;this.header.bpm=t;var n=e/t;this.tracks.forEach(function(t){return t.scale(n)})}},{key:"timeSignature",get:function(){return this.header.timeSignature},set:function(t){this.header.timeSignature=timeSignature}},{key:"duration",get:function(){var t=this.tracks.map(function(t){return t.duration});return Math.max.apply(Math,t)}}]),t}();e.Midi=d},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Note=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(1),s=function(t){return t&&t.__esModule?t:{default:t}}(o),a=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(i(this,t),this.midi,s.default.isNumber(e))this.midi=e;else{if(!s.default.isPitch(e))throw new Error("the midi value must either be in Pitch Notation (e.g. C#4) or a midi value");this.name=e}this.time=n,this.duration=r,this.velocity=o}return r(t,[{key:"match",value:function(t){return s.default.isNumber(t)?this.midi===t:s.default.isPitch(t)?this.name.toLowerCase()===t.toLowerCase():void 0}},{key:"toJSON",value:function(){return{name:this.name,midi:this.midi,time:this.time,velocity:this.velocity,duration:this.duration}}},{key:"name",get:function(){return s.default.midiToPitch(this.midi)},set:function(t){this.midi=s.default.pitchToMidi(t)}},{key:"noteOn",get:function(){return this.time},set:function(t){this.time=t}},{key:"noteOff",get:function(){return this.time+this.duration},set:function(t){this.duration=t-this.time}}]),t}();e.Note=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(3),s=n(4),a=n(6),u=n(8),c=n(2),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;i(this,t),this.name=e,this.notes=[],this.controlChanges={},this.instrumentNumber=n}return r(t,[{key:"note",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=new u.Note(t,e,n,i);return(0,o.BinaryInsert)(this.notes,r),this}},{key:"noteOn",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=new u.Note(t,e,0,n);return(0,o.BinaryInsert)(this.notes,i),this}},{key:"noteOff",value:function(t,e){for(var n=0;n<this.notes.length;n++){var i=this.notes[n];if(i.match(t)&&0===i.duration){i.noteOff=e;break}}return this}},{key:"cc",value:function(t,e,n){this.controlChanges.hasOwnProperty(t)||(this.controlChanges[t]=[]);var i=new s.Control(t,e,n);return(0,o.BinaryInsert)(this.controlChanges[t],i),this}},{key:"patch",value:function(t){return this.instrumentNumber=t,this}},{key:"scale",value:function(t){return this.notes.forEach(function(e){e.time*=t,e.duration*=t}),this}},{key:"slice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration,i=Math.max(this.notes.findIndex(function(t){return t.time>=e}),0),r=this.notes.findIndex(function(t){return t.noteOff>=n})+1,o=new t(this.name);return o.notes=this.notes.slice(i,r),o.notes.forEach(function(t){return t.time=t.time-e}),o}},{key:"encode",value:function(t,e){function n(t){var e=Math.floor(i*t),n=Math.max(e-r,0);return r=e,n}var i=e.PPQ/(60/e.bpm),r=0;-1!==this.instrumentNumber&&t.instrument(0,this.instrumentNumber),(0,a.Merge)(this.noteOns,function(e){t.addNoteOn(0,e.name,n(e.time),Math.floor(127*e.velocity))},this.noteOffs,function(e){t.addNoteOff(0,e.name,n(e.time))})}},{key:"noteOns",get:function(){var t=[];return this.notes.forEach(function(e){t.push({time:e.noteOn,midi:e.midi,name:e.name,velocity:e.velocity})}),t}},{key:"noteOffs",get:function(){var t=[];return this.notes.forEach(function(e){t.push({time:e.noteOff,midi:e.midi,name:e.name})}),t}},{key:"length",get:function(){return this.notes.length}},{key:"startTime",get:function(){if(this.notes.length){return this.notes[0].noteOn}return 0}},{key:"duration",get:function(){if(this.notes.length){return this.notes[this.notes.length-1].noteOff}return 0}},{key:"instrument",get:function(){return c.instrumentByPatchID[this.instrumentNumber]},set:function(t){var e=c.instrumentByPatchID.indexOf(t);-1!==e&&(this.instrumentNumber=e)}},{key:"instrumentFamily",get:function(){return c.instrumentFamilyByID[Math.floor(this.instrumentNumber/8)]}}]),t}();e.Track=l},function(t,e,n){(function(t){var n={};!function(t){var e=t.DEFAULT_VOLUME=90,n=(t.DEFAULT_DURATION=128,t.DEFAULT_CHANNEL=0,{midi_letter_pitches:{a:21,b:23,c:12,d:14,e:16,f:17,g:19},midiPitchFromNote:function(t){var e=/([a-g])(#+|b+)?([0-9]+)$/i.exec(t),i=e[1].toLowerCase(),r=e[2]||"";return 12*parseInt(e[3],10)+n.midi_letter_pitches[i]+("#"==r.substr(0,1)?1:-1)*r.length},ensureMidiPitch:function(t){return"number"!=typeof t&&/[^0-9]/.test(t)?n.midiPitchFromNote(t):parseInt(t,10)},midi_pitches_letter:{12:"c",13:"c#",14:"d",15:"d#",16:"e",17:"f",18:"f#",19:"g",20:"g#",21:"a",22:"a#",23:"b"},midi_flattened_notes:{"a#":"bb","c#":"db","d#":"eb","f#":"gb","g#":"ab"},noteFromMidiPitch:function(t,e){var i,r=0,o=t,e=e||!1;return t>23&&(r=Math.floor(t/12)-1,o=t-12*r),i=n.midi_pitches_letter[o],e&&i.indexOf("#")>0&&(i=n.midi_flattened_notes[i]),i+r},mpqnFromBpm:function(t){var e=Math.floor(6e7/t),n=[];do{n.unshift(255&e),e>>=8}while(e);for(;n.length<3;)n.push(0);return n},bpmFromMpqn:function(t){var e=t;if(void 0!==t[0]){e=0;for(var n=0,i=t.length-1;i>=0;++n,--i)e|=t[n]<<i}return Math.floor(6e7/t)},codes2Str:function(t){return String.fromCharCode.apply(null,t)},str2Bytes:function(t,e){if(e)for(;t.length/2<e;)t="0"+t;for(var n=[],i=t.length-1;i>=0;i-=2){var r=0===i?t[i]:t[i-1]+t[i];n.unshift(parseInt(r,16))}return n},translateTickTime:function(t){for(var e=127&t;t>>=7;)e<<=8,e|=127&t|128;for(var n=[];n.push(255&e),128&e;)e>>=8;return n}}),i=function(t){return this?void(!t||null===t.type&&void 0===t.type||null===t.channel&&void 0===t.channel||null===t.param1&&void 0===t.param1||(this.setTime(t.time),this.setType(t.type),this.setChannel(t.channel),this.setParam1(t.param1),this.setParam2(t.param2))):new i(t)};i.NOTE_OFF=128,i.NOTE_ON=144,i.AFTER_TOUCH=160,i.CONTROLLER=176,i.PROGRAM_CHANGE=192,i.CHANNEL_AFTERTOUCH=208,i.PITCH_BEND=224,i.prototype.setTime=function(t){this.time=n.translateTickTime(t||0)},i.prototype.setType=function(t){if(t<i.NOTE_OFF||t>i.PITCH_BEND)throw new Error("Trying to set an unknown event: "+t);this.type=t},i.prototype.setChannel=function(t){if(0>t||t>15)throw new Error("Channel is out of bounds.");this.channel=t},i.prototype.setParam1=function(t){this.param1=t},i.prototype.setParam2=function(t){this.param2=t},i.prototype.toBytes=function(){var t=[],e=this.type|15&this.channel;return t.push.apply(t,this.time),t.push(e),t.push(this.param1),void 0!==this.param2&&null!==this.param2&&t.push(this.param2),t};var r=function(t){if(!this)return new r(t);this.setTime(t.time),this.setType(t.type),this.setData(t.data)};r.SEQUENCE=0,r.TEXT=1,r.COPYRIGHT=2,r.TRACK_NAME=3,r.INSTRUMENT=4,r.LYRIC=5,r.MARKER=6,r.CUE_POINT=7,r.CHANNEL_PREFIX=32,r.END_OF_TRACK=47,r.TEMPO=81,r.SMPTE=84,r.TIME_SIG=88,r.KEY_SIG=89,r.SEQ_EVENT=127,r.prototype.setTime=function(t){this.time=n.translateTickTime(t||0)},r.prototype.setType=function(t){this.type=t},r.prototype.setData=function(t){this.data=t},r.prototype.toBytes=function(){if(!this.type)throw new Error("Type for meta-event not specified.");var t=[];if(t.push.apply(t,this.time),t.push(255,this.type),Array.isArray(this.data))t.push(this.data.length),t.push.apply(t,this.data);else if("number"==typeof this.data)t.push(1,this.data);else if(null!==this.data&&void 0!==this.data){t.push(this.data.length);var e=this.data.split("").map(function(t){return t.charCodeAt(0)});t.push.apply(t,e)}else t.push(0);return t};var o=function(t){if(!this)return new o(t);var e=t||{};this.events=e.events||[]};o.START_BYTES=[77,84,114,107],o.END_BYTES=[0,255,47,0],o.prototype.addEvent=function(t){return this.events.push(t),this},o.prototype.addNoteOn=o.prototype.noteOn=function(t,r,o,s){return this.events.push(new i({type:i.NOTE_ON,channel:t,param1:n.ensureMidiPitch(r),param2:s||e,time:o||0})),this},o.prototype.addNoteOff=o.prototype.noteOff=function(t,r,o,s){return this.events.push(new i({type:i.NOTE_OFF,channel:t,param1:n.ensureMidiPitch(r),param2:s||e,time:o||0})),this},o.prototype.addNote=o.prototype.note=function(t,e,n,i,r){return this.noteOn(t,e,i,r),n&&this.noteOff(t,e,n,r),this},o.prototype.addChord=o.prototype.chord=function(t,e,n,i){if(!Array.isArray(e)&&!e.length)throw new Error("Chord must be an array of pitches");return e.forEach(function(e){this.noteOn(t,e,0,i)},this),e.forEach(function(e,i){0===i?this.noteOff(t,e,n):this.noteOff(t,e)},this),this},o.prototype.setInstrument=o.prototype.instrument=function(t,e,n){return this.events.push(new i({type:i.PROGRAM_CHANGE,channel:t,param1:e,time:n||0})),this},o.prototype.setTempo=o.prototype.tempo=function(t,e){return this.events.push(new r({type:r.TEMPO,data:n.mpqnFromBpm(t),time:e||0})),this},o.prototype.toBytes=function(){var t=0,e=[],i=o.START_BYTES,r=o.END_BYTES,s=function(n){var i=n.toBytes();t+=i.length,e.push.apply(e,i)};this.events.forEach(s),t+=r.length;var a=n.str2Bytes(t.toString(16),4);return i.concat(a,e,r)};var s=function(t){if(!this)return new s(t);var e=t||{};if(e.ticks){if("number"!=typeof e.ticks)throw new Error("Ticks per beat must be a number!");if(e.ticks<=0||e.ticks>=32768||e.ticks%1!=0)throw new Error("Ticks per beat must be an integer between 1 and 32767!")}this.ticks=e.ticks||128,this.tracks=e.tracks||[]};s.HDR_CHUNKID="MThd",s.HDR_CHUNK_SIZE="\0\0\0",s.HDR_TYPE0="\0\0",s.HDR_TYPE1="\0",s.prototype.addTrack=function(t){return t?(this.tracks.push(t),this):(t=new o,this.tracks.push(t),t)},s.prototype.toBytes=function(){var t=this.tracks.length.toString(16),e=s.HDR_CHUNKID+s.HDR_CHUNK_SIZE;return e+=parseInt(t,16)>1?s.HDR_TYPE1:s.HDR_TYPE0,e+=n.codes2Str(n.str2Bytes(t,2)),e+=String.fromCharCode(this.ticks/256,this.ticks%256),this.tracks.forEach(function(t){e+=n.codes2Str(t.toBytes())}),e},t.Util=n,t.File=s,t.Track=o,t.Event=i,t.MetaEvent=r}(n),void 0!==t&&null!==t?t.exports=n:void 0!==e&&null!==e?e=n:this.Midi=n}).call(e,n(12)(t))},function(t,e){function n(t){function e(t){var e=t.read(4),n=t.readInt32();return{id:e,length:n,data:t.read(n)}}var n;stream=i(t);var r=e(stream);if("MThd"!=r.id||6!=r.length)throw"Bad .mid file - header not found";var o=i(r.data),s=o.readInt16(),a=o.readInt16(),u=o.readInt16();if(32768&u)throw"Expressing time division in SMTPE frames is not supported yet";ticksPerBeat=u;for(var c={formatType:s,trackCount:a,ticksPerBeat:ticksPerBeat},l=[],h=0;h<c.trackCount;h++){l[h]=[];var f=e(stream);if("MTrk"!=f.id)throw"Unexpected chunk - expected MTrk, got "+f.id;for(var p=i(f.data);!p.eof();){var d=function(t){var e={};e.deltaTime=t.readVarInt();var i=t.readInt8();if(240==(240&i)){if(255==i){e.type="meta";var r=t.readInt8(),o=t.readVarInt();switch(r){case 0:if(e.subtype="sequenceNumber",2!=o)throw"Expected length for sequenceNumber event is 2, got "+o;return e.number=t.readInt16(),e;case 1:return e.subtype="text",e.text=t.read(o),e;case 2:return e.subtype="copyrightNotice",e.text=t.read(o),e;case 3:return e.subtype="trackName",e.text=t.read(o),e;case 4:return e.subtype="instrumentName",e.text=t.read(o),e;case 5:return e.subtype="lyrics",e.text=t.read(o),e;case 6:return e.subtype="marker",e.text=t.read(o),e;case 7:return e.subtype="cuePoint",e.text=t.read(o),e;case 32:if(e.subtype="midiChannelPrefix",1!=o)throw"Expected length for midiChannelPrefix event is 1, got "+o;return e.channel=t.readInt8(),e;case 47:if(e.subtype="endOfTrack",0!=o)throw"Expected length for endOfTrack event is 0, got "+o;return e;case 81:if(e.subtype="setTempo",3!=o)throw"Expected length for setTempo event is 3, got "+o;return e.microsecondsPerBeat=(t.readInt8()<<16)+(t.readInt8()<<8)+t.readInt8(),e;case 84:if(e.subtype="smpteOffset",5!=o)throw"Expected length for smpteOffset event is 5, got "+o;var s=t.readInt8();return e.frameRate={0:24,32:25,64:29,96:30}[96&s],e.hour=31&s,e.min=t.readInt8(),e.sec=t.readInt8(),e.frame=t.readInt8(),e.subframe=t.readInt8(),e;case 88:if(e.subtype="timeSignature",4!=o)throw"Expected length for timeSignature event is 4, got "+o;return e.numerator=t.readInt8(),e.denominator=Math.pow(2,t.readInt8()),e.metronome=t.readInt8(),e.thirtyseconds=t.readInt8(),e;case 89:if(e.subtype="keySignature",2!=o)throw"Expected length for keySignature event is 2, got "+o;return e.key=t.readInt8(!0),e.scale=t.readInt8(),e;case 127:return e.subtype="sequencerSpecific",e.data=t.read(o),e;default:return e.subtype="unknown",e.data=t.read(o),e}return e.data=t.read(o),e}if(240==i){e.type="sysEx";var o=t.readVarInt();return e.data=t.read(o),e}if(247==i){e.type="dividedSysEx";var o=t.readVarInt();return e.data=t.read(o),e}throw"Unrecognised MIDI event type byte: "+i}var a;0==(128&i)?(a=i,i=n):(a=t.readInt8(),n=i);var u=i>>4;switch(e.channel=15&i,e.type="channel",u){case 8:return e.subtype="noteOff",e.noteNumber=a,e.velocity=t.readInt8(),e;case 9:return e.noteNumber=a,e.velocity=t.readInt8(),0==e.velocity?e.subtype="noteOff":e.subtype="noteOn",e;case 10:return e.subtype="noteAftertouch",e.noteNumber=a,e.amount=t.readInt8(),e;case 11:return e.subtype="controller",e.controllerType=a,e.value=t.readInt8(),e;case 12:return e.subtype="programChange",e.programNumber=a,e;case 13:return e.subtype="channelAftertouch",e.amount=a,e;case 14:return e.subtype="pitchBend",e.value=a+(t.readInt8()<<7),e;default:throw"Unrecognised MIDI event type: "+u}}(p);l[h].push(d)}}return{header:c,tracks:l}}function i(t){function e(e){var n=t.substr(a,e);return a+=e,n}function n(){var e=(t.charCodeAt(a)<<24)+(t.charCodeAt(a+1)<<16)+(t.charCodeAt(a+2)<<8)+t.charCodeAt(a+3);return a+=4,e}function i(){var e=(t.charCodeAt(a)<<8)+t.charCodeAt(a+1);return a+=2,e}function r(e){var n=t.charCodeAt(a);return e&&n>127&&(n-=256),a+=1,n}function o(){return a>=t.length}function s(){for(var t=0;;){var e=r();if(!(128&e))return t+e;t+=127&e,t<<=7}}var a=0;return{eof:o,read:e,readInt32:n,readInt16:i,readInt8:r,readVarInt:s}}t.exports=function(t){return n(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])})},function(t,e,n){!function(e,i){t.exports=i(n(312))}(0,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2);e.default={getReleasesUrl:function(t){return"rel"+(t-20)+".[mp3|ogg]"},getHarmonicsUrl:function(t){return"harmL"+(0,i.midiToNote)(t).replace("#","s")+".[mp3|ogg]"},getNotesUrl:function(t,e){return(0,i.midiToNote)(t).replace("#","s")+"v"+e+".[mp3|ogg]"}}},function(t,e,n){"use strict";function i(t){return(0,u.Frequency)(t).toMidi()}function r(t){return(0,u.Frequency)(t,"midi").toNote()}function o(t){var e=t%3;return 1===e?[t-1,c.default.intervalToFrequencyRatio(1)]:2===e?[t+1,c.default.intervalToFrequencyRatio(-1)]:[t,1]}function s(t){return new u.BufferSource(t)}function a(t,e){return Math.random()*(e-t)+t}Object.defineProperty(e,"__esModule",{value:!0}),e.randomBetween=e.midiToFrequencyRatio=e.createSource=e.noteToMidi=e.midiToNote=void 0;var u=n(0),c=function(t){return t&&t.__esModule?t:{default:t}}(u);e.midiToNote=r,e.noteToMidi=i,e.createSource=s,e.midiToFrequencyRatio=o,e.randomBetween=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(a),c=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.createInsOuts(0,1),n.volume=t,n}return o(e,t),s(e,[{key:"volume",get:function(){return u.default.gainToDb(this.output.gain.value)},set:function(t){this.output.gain.value=u.default.dbToGain(t)}}]),e}(a.AudioNode);e.default=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),c=i(u),l=n(3),h=i(l),f=n(2),p=n(0),d=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87],y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[21,108];r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=d.findIndex(function(e){return e>=t[0]}),s=d.findIndex(function(e){return e>=t[1]});s=-1===s?s=d.length:s;var a=d.slice(i,s);n._samples={};var u=!0,l=!1,h=void 0;try{for(var f,p=a[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var y=f.value;n._samples[y]=c.default.getHarmonicsUrl(y)}}catch(t){l=!0,h=t}finally{try{!u&&p.return&&p.return()}finally{if(l)throw h}}return n}return s(e,t),a(e,[{key:"start",value:function(t,e,n){t>=d[0]&&t<=d[d.length-1]&&this._sampler.triggerAttack((0,f.midiToNote)(t),e,n*(0,f.randomBetween)(.5,1))}},{key:"load",value:function(t){var e=this;return new Promise(function(n,i){e._sampler=new p.Sampler(e._samples,n,t).connect(e.output),e._sampler.release=1})}}]),e}(h.default);e.default=y},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Notes=void 0;var a=function(){function t(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(0),l=(i(c),n(1)),h=i(l),f=n(3),p=i(f),d=n(2),y={1:[8],2:[6,12],3:[1,8,15],4:[1,5,10,15],5:[1,4,8,12,16],6:[1,3,7,10,13,16],7:[1,3,6,9,11,13,16],8:[1,3,5,7,9,11,13,15],9:[1,3,5,7,9,11,13,15,16],10:[1,2,3,5,7,9,11,13,15,16],11:[1,2,3,5,7,9,11,13,14,15,16],12:[1,2,3,4,5,7,9,11,13,14,15,16],13:[1,2,3,4,5,7,9,11,12,13,14,15,16],14:[1,2,3,4,5,6,7,9,11,12,13,14,15,16],15:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]},_=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108];e.Notes=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[21,108],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),s=_.findIndex(function(e){return e>=t[0]}),a=_.findIndex(function(e){return e>=t[1]});a=-1===a?a=_.length:a+1;var u=_.slice(s,a);return i._samplers=y[n].slice(),i._activeNotes=new Map,i._samplers.forEach(function(t,e){i._samplers[e]={},u.forEach(function(n){i._samplers[e][n]=h.default.getNotesUrl(n,t)})}),i}return s(e,t),u(e,[{key:"_hasNote",value:function(t,e){return this._samplers.hasOwnProperty(e)&&this._samplers[e].has(t)}},{key:"_getNote",value:function(t,e){return this._samplers[e].get(t)}},{key:"stop",value:function(t,e,n){this._activeNotes.has(t)&&(this._activeNotes.get(t).forEach(function(t){t.stop(e+1,1)}),this._activeNotes.delete(t))}},{key:"start",value:function(t,e,n){var i=n*(this._samplers.length-1),r=Math.round(i),o=r-i,s=1-.5*o;1===this._samplers.length&&(s=Math.max(n,.05));var u=(0,d.midiToFrequencyRatio)(t),c=a(u,2),l=c[0],h=c[1];if(this._hasNote(l,r)){var f=(0,d.createSource)(this._getNote(l,r));f.playbackRate.value=h,f.connect(this.output),f.curve="exponential",f.start(e,0,void 0,s,0),this._activeNotes.has(t)||this._activeNotes.set(t,[]),this._activeNotes.get(t).push(f)}}},{key:"load",value:function(t){var e=this,n=[];return this._samplers.forEach(function(i,r){var o=new Promise(function(n){e._samplers[r]=new c.Buffers(i,n,t)});n.push(o)}),Promise.all(n)}}]),e}(p.default)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(3),c=i(u),l=n(1),h=(i(l),n(2)),f=n(0),p=(i(f),function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._downTime=1/0,t._currentSound=null,t._buffers=null,t}return s(e,t),a(e,[{key:"load",value:function(t){var e=this;return new Promise(function(n){e._buffers=new f.Buffers({up:"pedalU1.mp3",down:"pedalD1.mp3"},n,t)})}},{key:"_squash",value:function(t){this._currentSound&&this._currentSound.stop(t+.1,.1),this._currentSound=null}},{key:"_playSample",value:function(t,e){this._currentSound=(0,h.createSource)(this._buffers.get(e)),this._currentSound.curve="exponential",this._currentSound.connect(this.output).start(t,(0,h.randomBetween)(0,.01),void 0,.5*(0,h.randomBetween)(.5,1),.05)}},{key:"down",value:function(t){this._squash(t),this._downTime=t,this._playSample(t,"down")}},{key:"up",value:function(t){this._squash(t),this._downTime=1/0,this._playSample(t,"up")}},{key:"isDown",value:function(t){return t>this._downTime}}]),e}(c.default));e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),c=i(u),l=n(3),h=i(l),f=n(2),p=n(0),d=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._buffers={};for(var i=t[0];i<=t[1];i++)n._buffers[i]=c.default.getReleasesUrl(i);return n}return s(e,t),a(e,[{key:"load",value:function(t){var e=this;return new Promise(function(n){e._buffers=new p.Buffers(e._buffers,n,t)})}},{key:"start",value:function(t,e,n){if(this._buffers.has(t)){var i=(0,f.createSource)(this._buffers.get(t)).connect(this.output);n*=(0,f.randomBetween)(.5,1),i.start(e,0,void 0,.015*n,0)}}}]),e}(h.default);e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Piano=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(0),c=i(u),l=n(6),h=i(l),f=n(5),p=n(4),d=i(p),y=n(7),_=i(y);i(n(1)),e.Piano=function(t){function e(){r(this,e);var t=c.default.defaults(arguments,["range","velocities"],{velocities:1,range:[21,108],release:!0}),n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.createInsOuts(0,1),n._loaded=!1,n._heldNotes=new Map,n._sustainedNotes=new Map,n._notes=new f.Notes(t.range,t.velocities).connect(n.output),n._pedal=(new h.default).connect(n.output),t.release&&(n._harmonics=new d.default(t.range).connect(n.output),n._release=new _.default(t.range).connect(n.output)),n}return s(e,t),a(e,[{key:"load",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://tambien.github.io/Piano/Salamander/",n=[this._notes.load(e),this._pedal.load(e)];return this._harmonics&&n.push(this._harmonics.load(e)),this._release&&n.push(this._release.load(e)),Promise.all(n).then(function(){t._loaded=!0})}},{key:"pedalDown",value:function(t){return this.loaded&&(t=this.toSeconds(t),this._pedal.isDown(t)||this._pedal.down(t)),this}},{key:"pedalUp",value:function(t){var e=this;return this.loaded&&(t=this.toSeconds(t),this._pedal.isDown(t)&&(this._pedal.up(t),this._sustainedNotes.forEach(function(n,i){e._heldNotes.has(i)||e._notes.stop(i,t)}),this._sustainedNotes.clear())),this}},{key:"keyDown",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.now(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;return this.loaded&&(e=this.toSeconds(e),c.default.isString(t)&&(t=Math.round((0,u.Frequency)(t).toMidi())),this._heldNotes.has(t)||(this._heldNotes.set(t,{time:e,velocity:n}),this._notes.start(t,e,n))),this}},{key:"keyUp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.now(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8;if(this.loaded&&(e=this.toSeconds(e),c.default.isString(t)&&(t=Math.round((0,u.Frequency)(t).toMidi())),this._heldNotes.has(t))){var i=this._heldNotes.get(t);this._heldNotes.delete(t),this._release&&this._release.start(t,e,n);var r=e-i.time,o=i.velocity,s=.5/Math.max(r,.1)+o+n;s=Math.pow(Math.log(Math.max(s,1)),2)/2,this._pedal.isDown(e)?this._sustainedNotes.has(t)||this._sustainedNotes.set(t,e):(this._notes.stop(t,e,n),this._harmonics&&this._harmonics.start(t,e,s))}return this}},{key:"setVolume",value:function(t,e){switch(t){case"note":this._notes.volume=e;break;case"pedal":this._pedal.volume=e;break;case"release":this._release&&(this._release.volume=e);break;case"harmonics":this._harmonics&&(this._harmonics.volume=e)}return this}},{key:"stopAll",value:function(){var t=this;return this.pedalUp(),this._heldNotes.forEach(function(e,n){t.keyUp(n)}),this}},{key:"progress",value:function(t){return u.Buffer.on("progress",t),this}},{key:"loaded",get:function(){return this._loaded}}]),e}(u.AudioNode)}])})}]));